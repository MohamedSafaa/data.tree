<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<script src="data:application/x-javascript,%28function%28%29%20%7B%0A%20%20%2F%2F%20If%20window%2EHTMLWidgets%20is%20already%20defined%2C%20then%20use%20it%3B%20otherwise%20create%20a%0A%20%20%2F%2F%20new%20object%2E%20This%20allows%20preceding%20code%20to%20set%20options%20that%20affect%20the%0A%20%20%2F%2F%20initialization%20process%20%28though%20none%20currently%20exist%29%2E%0A%20%20window%2EHTMLWidgets%20%3D%20window%2EHTMLWidgets%20%7C%7C%20%7B%7D%3B%0A%0A%20%20%2F%2F%20See%20if%20we%27re%20running%20in%20a%20viewer%20pane%2E%20If%20not%2C%20we%27re%20in%20a%20web%20browser%2E%0A%20%20var%20viewerMode%20%3D%20window%2EHTMLWidgets%2EviewerMode%20%3D%0A%20%20%20%20%20%20%2F%5Cbviewer%5Fpane%3D1%5Cb%2F%2Etest%28window%2Elocation%29%3B%0A%0A%20%20%2F%2F%20See%20if%20we%27re%20running%20in%20Shiny%20mode%2E%20If%20not%2C%20it%27s%20a%20static%20document%2E%0A%20%20%2F%2F%20Note%20that%20static%20widgets%20can%20appear%20in%20both%20Shiny%20and%20static%20modes%2C%20but%0A%20%20%2F%2F%20obviously%2C%20Shiny%20widgets%20can%20only%20appear%20in%20Shiny%20apps%2Fdocuments%2E%0A%20%20var%20shinyMode%20%3D%20window%2EHTMLWidgets%2EshinyMode%20%3D%0A%20%20%20%20%20%20typeof%28window%2EShiny%29%20%21%3D%3D%20%22undefined%22%20%26%26%20%21%21window%2EShiny%2EoutputBindings%3B%0A%0A%20%20%2F%2F%20We%20can%27t%20count%20on%20jQuery%20being%20available%2C%20so%20we%20implement%20our%20own%0A%20%20%2F%2F%20version%20if%20necessary%2E%0A%20%20function%20querySelectorAll%28scope%2C%20selector%29%20%7B%0A%20%20%20%20if%20%28typeof%28jQuery%29%20%21%3D%3D%20%22undefined%22%20%26%26%20scope%20instanceof%20jQuery%29%20%7B%0A%20%20%20%20%20%20return%20scope%2Efind%28selector%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28scope%2EquerySelectorAll%29%20%7B%0A%20%20%20%20%20%20return%20scope%2EquerySelectorAll%28selector%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20asArray%28value%29%20%7B%0A%20%20%20%20if%20%28value%20%3D%3D%3D%20null%29%0A%20%20%20%20%20%20return%20%5B%5D%3B%0A%20%20%20%20if%20%28%24%2EisArray%28value%29%29%0A%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20return%20%5Bvalue%5D%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Implement%20jQuery%27s%20extend%0A%20%20function%20extend%28target%20%2F%2A%2C%20%2E%2E%2E%20%2A%2F%29%20%7B%0A%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20return%20target%3B%0A%20%20%20%20%7D%0A%20%20%20%20for%20%28var%20i%20%3D%201%3B%20i%20%3C%20arguments%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20var%20source%20%3D%20arguments%5Bi%5D%3B%0A%20%20%20%20%20%20for%20%28var%20prop%20in%20source%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28source%2EhasOwnProperty%28prop%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20target%5Bprop%5D%20%3D%20source%5Bprop%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20target%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20IE8%20doesn%27t%20support%20Array%2EforEach%2E%0A%20%20function%20forEach%28values%2C%20callback%2C%20thisArg%29%20%7B%0A%20%20%20%20if%20%28values%2EforEach%29%20%7B%0A%20%20%20%20%20%20values%2EforEach%28callback%2C%20thisArg%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20values%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20callback%2Ecall%28thisArg%2C%20values%5Bi%5D%2C%20i%2C%20values%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20Replaces%20the%20specified%20method%20with%20the%20return%20value%20of%20funcSource%2E%0A%20%20%2F%2F%0A%20%20%2F%2F%20Note%20that%20funcSource%20should%20not%20BE%20the%20new%20method%2C%20it%20should%20be%20a%20function%0A%20%20%2F%2F%20that%20RETURNS%20the%20new%20method%2E%20funcSource%20receives%20a%20single%20argument%20that%20is%0A%20%20%2F%2F%20the%20overridden%20method%2C%20it%20can%20be%20called%20from%20the%20new%20method%2E%20The%20overridden%0A%20%20%2F%2F%20method%20can%20be%20called%20like%20a%20regular%20function%2C%20it%20has%20the%20target%20permanently%0A%20%20%2F%2F%20bound%20to%20it%20so%20%22this%22%20will%20work%20correctly%2E%0A%20%20function%20overrideMethod%28target%2C%20methodName%2C%20funcSource%29%20%7B%0A%20%20%20%20var%20superFunc%20%3D%20target%5BmethodName%5D%20%7C%7C%20function%28%29%20%7B%7D%3B%0A%20%20%20%20var%20superFuncBound%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20superFunc%2Eapply%28target%2C%20arguments%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20target%5BmethodName%5D%20%3D%20funcSource%28superFuncBound%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Implement%20a%20vague%20facsimilie%20of%20jQuery%27s%20data%20method%0A%20%20function%20elementData%28el%2C%20name%2C%20value%29%20%7B%0A%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%202%29%20%7B%0A%20%20%20%20%20%20return%20el%5B%22htmlwidget%5Fdata%5F%22%20%2B%20name%5D%3B%0A%20%20%20%20%7D%20else%20if%20%28arguments%2Elength%20%3D%3D%203%29%20%7B%0A%20%20%20%20%20%20el%5B%22htmlwidget%5Fdata%5F%22%20%2B%20name%5D%20%3D%20value%3B%0A%20%20%20%20%20%20return%20el%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20throw%20new%20Error%28%22Wrong%20number%20of%20arguments%20for%20elementData%3A%20%22%20%2B%0A%20%20%20%20%20%20%20%20arguments%2Elength%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20http%3A%2F%2Fstackoverflow%2Ecom%2Fquestions%2F3446170%2Fescape%2Dstring%2Dfor%2Duse%2Din%2Djavascript%2Dregex%0A%20%20function%20escapeRegExp%28str%29%20%7B%0A%20%20%20%20return%20str%2Ereplace%28%2F%5B%5C%2D%5C%5B%5C%5D%5C%2F%5C%7B%5C%7D%5C%28%5C%29%5C%2A%5C%2B%5C%3F%5C%2E%5C%5C%5C%5E%5C%24%5C%7C%5D%2Fg%2C%20%22%5C%5C%24%26%22%29%3B%0A%20%20%7D%0A%0A%20%20function%20hasClass%28el%2C%20className%29%20%7B%0A%20%20%20%20var%20re%20%3D%20new%20RegExp%28%22%5C%5Cb%22%20%2B%20escapeRegExp%28className%29%20%2B%20%22%5C%5Cb%22%29%3B%0A%20%20%20%20return%20re%2Etest%28el%2EclassName%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20elements%20%2D%20array%20%28or%20array%2Dlike%20object%29%20of%20HTML%20elements%0A%20%20%2F%2F%20className%20%2D%20class%20name%20to%20test%20for%0A%20%20%2F%2F%20include%20%2D%20if%20true%2C%20only%20return%20elements%20with%20given%20className%3B%0A%20%20%2F%2F%20%20%20if%20false%2C%20only%20return%20elements%20%2Awithout%2A%20given%20className%0A%20%20function%20filterByClass%28elements%2C%20className%2C%20include%29%20%7B%0A%20%20%20%20var%20results%20%3D%20%5B%5D%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20elements%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20if%20%28hasClass%28elements%5Bi%5D%2C%20className%29%20%3D%3D%20include%29%0A%20%20%20%20%20%20%20%20results%2Epush%28elements%5Bi%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20results%3B%0A%20%20%7D%0A%0A%20%20function%20on%28obj%2C%20eventName%2C%20func%29%20%7B%0A%20%20%20%20if%20%28obj%2EaddEventListener%29%20%7B%0A%20%20%20%20%20%20obj%2EaddEventListener%28eventName%2C%20func%2C%20false%29%3B%0A%20%20%20%20%7D%20else%20if%20%28obj%2EattachEvent%29%20%7B%0A%20%20%20%20%20%20obj%2EattachEvent%28eventName%2C%20func%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20off%28obj%2C%20eventName%2C%20func%29%20%7B%0A%20%20%20%20if%20%28obj%2EremoveEventListener%29%0A%20%20%20%20%20%20obj%2EremoveEventListener%28eventName%2C%20func%2C%20false%29%3B%0A%20%20%20%20else%20if%20%28obj%2EdetachEvent%29%20%7B%0A%20%20%20%20%20%20obj%2EdetachEvent%28eventName%2C%20func%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20Translate%20array%20of%20values%20to%20top%2Fright%2Fbottom%2Fleft%2C%20as%20usual%20with%0A%20%20%2F%2F%20the%20%22padding%22%20CSS%20property%0A%20%20%2F%2F%20https%3A%2F%2Fdeveloper%2Emozilla%2Eorg%2Fen%2DUS%2Fdocs%2FWeb%2FCSS%2Fpadding%0A%20%20function%20unpackPadding%28value%29%20%7B%0A%20%20%20%20if%20%28typeof%28value%29%20%3D%3D%3D%20%22number%22%29%0A%20%20%20%20%20%20value%20%3D%20%5Bvalue%5D%3B%0A%20%20%20%20if%20%28value%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20return%20%7Btop%3A%20value%5B0%5D%2C%20right%3A%20value%5B0%5D%2C%20bottom%3A%20value%5B0%5D%2C%20left%3A%20value%5B0%5D%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28value%2Elength%20%3D%3D%3D%202%29%20%7B%0A%20%20%20%20%20%20return%20%7Btop%3A%20value%5B0%5D%2C%20right%3A%20value%5B1%5D%2C%20bottom%3A%20value%5B0%5D%2C%20left%3A%20value%5B1%5D%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28value%2Elength%20%3D%3D%3D%203%29%20%7B%0A%20%20%20%20%20%20return%20%7Btop%3A%20value%5B0%5D%2C%20right%3A%20value%5B1%5D%2C%20bottom%3A%20value%5B2%5D%2C%20left%3A%20value%5B1%5D%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28value%2Elength%20%3D%3D%3D%204%29%20%7B%0A%20%20%20%20%20%20return%20%7Btop%3A%20value%5B0%5D%2C%20right%3A%20value%5B1%5D%2C%20bottom%3A%20value%5B2%5D%2C%20left%3A%20value%5B3%5D%7D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20Convert%20an%20unpacked%20padding%20object%20to%20a%20CSS%20value%0A%20%20function%20paddingToCss%28paddingObj%29%20%7B%0A%20%20%20%20return%20paddingObj%2Etop%20%2B%20%22px%20%22%20%2B%20paddingObj%2Eright%20%2B%20%22px%20%22%20%2B%20paddingObj%2Ebottom%20%2B%20%22px%20%22%20%2B%20paddingObj%2Eleft%20%2B%20%22px%22%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Makes%20a%20number%20suitable%20for%20CSS%0A%20%20function%20px%28x%29%20%7B%0A%20%20%20%20if%20%28typeof%28x%29%20%3D%3D%3D%20%22number%22%29%0A%20%20%20%20%20%20return%20x%20%2B%20%22px%22%3B%0A%20%20%20%20else%0A%20%20%20%20%20%20return%20x%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Retrieves%20runtime%20widget%20sizing%20information%20for%20an%20element%2E%0A%20%20%2F%2F%20The%20return%20value%20is%20either%20null%2C%20or%20an%20object%20with%20fill%2C%20padding%2C%0A%20%20%2F%2F%20defaultWidth%2C%20defaultHeight%20fields%2E%0A%20%20function%20sizingPolicy%28el%29%20%7B%0A%20%20%20%20var%20sizingEl%20%3D%20document%2EquerySelector%28%22script%5Bdata%2Dfor%3D%27%22%20%2B%20el%2Eid%20%2B%20%22%27%5D%5Btype%3D%27application%2Fhtmlwidget%2Dsizing%27%5D%22%29%3B%0A%20%20%20%20if%20%28%21sizingEl%29%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20var%20sp%20%3D%20JSON%2Eparse%28sizingEl%2EtextContent%20%7C%7C%20sizingEl%2Etext%20%7C%7C%20%22%7B%7D%22%29%3B%0A%20%20%20%20if%20%28viewerMode%29%20%7B%0A%20%20%20%20%20%20return%20sp%2Eviewer%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20return%20sp%2Ebrowser%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20initSizing%28el%29%20%7B%0A%20%20%20%20var%20sizing%20%3D%20sizingPolicy%28el%29%3B%0A%20%20%20%20if%20%28%21sizing%29%0A%20%20%20%20%20%20return%3B%0A%0A%20%20%20%20var%20cel%20%3D%20document%2EgetElementById%28%22htmlwidget%5Fcontainer%22%29%3B%0A%20%20%20%20if%20%28%21cel%29%0A%20%20%20%20%20%20return%3B%0A%0A%20%20%20%20if%20%28typeof%28sizing%2Epadding%29%20%21%3D%3D%20%22undefined%22%29%20%7B%0A%20%20%20%20%20%20document%2Ebody%2Estyle%2Emargin%20%3D%20%220%22%3B%0A%20%20%20%20%20%20document%2Ebody%2Estyle%2Epadding%20%3D%20paddingToCss%28unpackPadding%28sizing%2Epadding%29%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20%28sizing%2Efill%29%20%7B%0A%20%20%20%20%20%20document%2Ebody%2Estyle%2Eoverflow%20%3D%20%22hidden%22%3B%0A%20%20%20%20%20%20document%2Ebody%2Estyle%2Ewidth%20%3D%20%22100%25%22%3B%0A%20%20%20%20%20%20document%2Ebody%2Estyle%2Eheight%20%3D%20%22100%25%22%3B%0A%20%20%20%20%20%20document%2EdocumentElement%2Estyle%2Ewidth%20%3D%20%22100%25%22%3B%0A%20%20%20%20%20%20document%2EdocumentElement%2Estyle%2Eheight%20%3D%20%22100%25%22%3B%0A%20%20%20%20%20%20if%20%28cel%29%20%7B%0A%20%20%20%20%20%20%20%20cel%2Estyle%2Eposition%20%3D%20%22absolute%22%3B%0A%20%20%20%20%20%20%20%20var%20pad%20%3D%20unpackPadding%28sizing%2Epadding%29%3B%0A%20%20%20%20%20%20%20%20cel%2Estyle%2Etop%20%3D%20pad%2Etop%20%2B%20%22px%22%3B%0A%20%20%20%20%20%20%20%20cel%2Estyle%2Eright%20%3D%20pad%2Eright%20%2B%20%22px%22%3B%0A%20%20%20%20%20%20%20%20cel%2Estyle%2Ebottom%20%3D%20pad%2Ebottom%20%2B%20%22px%22%3B%0A%20%20%20%20%20%20%20%20cel%2Estyle%2Eleft%20%3D%20pad%2Eleft%20%2B%20%22px%22%3B%0A%20%20%20%20%20%20%20%20el%2Estyle%2Ewidth%20%3D%20%22100%25%22%3B%0A%20%20%20%20%20%20%20%20el%2Estyle%2Eheight%20%3D%20%22100%25%22%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20getWidth%3A%20function%28%29%20%7B%20return%20cel%2EoffsetWidth%3B%20%7D%2C%0A%20%20%20%20%20%20%20%20getHeight%3A%20function%28%29%20%7B%20return%20cel%2EoffsetHeight%3B%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20el%2Estyle%2Ewidth%20%3D%20px%28sizing%2Ewidth%29%3B%0A%20%20%20%20%20%20el%2Estyle%2Eheight%20%3D%20px%28sizing%2Eheight%29%3B%0A%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20getWidth%3A%20function%28%29%20%7B%20return%20el%2EoffsetWidth%3B%20%7D%2C%0A%20%20%20%20%20%20%20%20getHeight%3A%20function%28%29%20%7B%20return%20el%2EoffsetHeight%3B%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20Default%20implementations%20for%20methods%0A%20%20var%20defaults%20%3D%20%7B%0A%20%20%20%20find%3A%20function%28scope%29%20%7B%0A%20%20%20%20%20%20return%20querySelectorAll%28scope%2C%20%22%2E%22%20%2B%20this%2Ename%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20renderError%3A%20function%28el%2C%20err%29%20%7B%0A%20%20%20%20%20%20var%20%24el%20%3D%20%24%28el%29%3B%0A%0A%20%20%20%20%20%20this%2EclearError%28el%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Add%20all%20these%20error%20classes%2C%20as%20Shiny%20does%0A%20%20%20%20%20%20var%20errClass%20%3D%20%22shiny%2Doutput%2Derror%22%3B%0A%20%20%20%20%20%20if%20%28err%2Etype%20%21%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20use%20the%20classes%20of%20the%20error%20condition%20as%20CSS%20class%20names%0A%20%20%20%20%20%20%20%20errClass%20%3D%20errClass%20%2B%20%22%20%22%20%2B%20%24%2Emap%28asArray%28err%2Etype%29%2C%20function%28type%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20errClass%20%2B%20%22%2D%22%20%2B%20type%3B%0A%20%20%20%20%20%20%20%20%7D%29%2Ejoin%28%22%20%22%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20errClass%20%3D%20errClass%20%2B%20%22%20htmlwidgets%2Derror%22%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Is%20el%20inline%20or%20block%3F%20If%20inline%20or%20inline%2Dblock%2C%20just%20display%3Anone%20it%0A%20%20%20%20%20%20%2F%2F%20and%20add%20an%20inline%20error%2E%0A%20%20%20%20%20%20var%20display%20%3D%20%24el%2Ecss%28%22display%22%29%3B%0A%20%20%20%20%20%20%24el%2Edata%28%22restore%2Ddisplay%2Dmode%22%2C%20display%29%3B%0A%0A%20%20%20%20%20%20if%20%28display%20%3D%3D%3D%20%22inline%22%20%7C%7C%20display%20%3D%3D%3D%20%22inline%2Dblock%22%29%20%7B%0A%20%20%20%20%20%20%20%20%24el%2Ehide%28%29%3B%0A%20%20%20%20%20%20%20%20if%20%28err%2Emessage%20%21%3D%3D%20%22%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20errorSpan%20%3D%20%24%28%22%3Cspan%3E%22%29%2EaddClass%28errClass%29%3B%0A%20%20%20%20%20%20%20%20%20%20errorSpan%2Etext%28err%2Emessage%29%3B%0A%20%20%20%20%20%20%20%20%20%20%24el%2Eafter%28errorSpan%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20%28display%20%3D%3D%3D%20%22block%22%29%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20block%2C%20add%20an%20error%20just%20after%20the%20el%2C%20set%20visibility%3Anone%20on%20the%0A%20%20%20%20%20%20%20%20%2F%2F%20el%2C%20and%20position%20the%20error%20to%20be%20on%20top%20of%20the%20el%2E%0A%20%20%20%20%20%20%20%20%2F%2F%20Mark%20it%20with%20a%20unique%20ID%20and%20CSS%20class%20so%20we%20can%20remove%20it%20later%2E%0A%20%20%20%20%20%20%20%20%24el%2Ecss%28%22visibility%22%2C%20%22hidden%22%29%3B%0A%20%20%20%20%20%20%20%20if%20%28err%2Emessage%20%21%3D%3D%20%22%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20errorDiv%20%3D%20%24%28%22%3Cdiv%3E%22%29%2EaddClass%28errClass%29%2Ecss%28%22position%22%2C%20%22absolute%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%2Ecss%28%22top%22%2C%20el%2EoffsetTop%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%2Ecss%28%22left%22%2C%20el%2EoffsetLeft%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20setting%20width%20can%20push%20out%20the%20page%20size%2C%20forcing%20otherwise%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20unnecessary%20scrollbars%20to%20appear%20and%20making%20it%20impossible%20for%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20the%20element%20to%20shrink%3B%20so%20use%20max%2Dwidth%20instead%0A%20%20%20%20%20%20%20%20%20%20%20%20%2Ecss%28%22maxWidth%22%2C%20el%2EoffsetWidth%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%2Ecss%28%22height%22%2C%20el%2EoffsetHeight%29%3B%0A%20%20%20%20%20%20%20%20%20%20errorDiv%2Etext%28err%2Emessage%29%3B%0A%20%20%20%20%20%20%20%20%20%20%24el%2Eafter%28errorDiv%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Really%20dumb%20way%20to%20keep%20the%20size%2Fposition%20of%20the%20error%20in%20sync%20with%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20the%20parent%20element%20as%20the%20window%20is%20resized%20or%20whatever%2E%0A%20%20%20%20%20%20%20%20%20%20var%20intId%20%3D%20setInterval%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21errorDiv%5B0%5D%2EparentElement%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clearInterval%28intId%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20errorDiv%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2Ecss%28%22top%22%2C%20el%2EoffsetTop%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2Ecss%28%22left%22%2C%20el%2EoffsetLeft%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2Ecss%28%22maxWidth%22%2C%20el%2EoffsetWidth%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2Ecss%28%22height%22%2C%20el%2EoffsetHeight%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%20500%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20clearError%3A%20function%28el%29%20%7B%0A%20%20%20%20%20%20var%20%24el%20%3D%20%24%28el%29%3B%0A%20%20%20%20%20%20var%20display%20%3D%20%24el%2Edata%28%22restore%2Ddisplay%2Dmode%22%29%3B%0A%20%20%20%20%20%20%24el%2Edata%28%22restore%2Ddisplay%2Dmode%22%2C%20null%29%3B%0A%0A%20%20%20%20%20%20if%20%28display%20%3D%3D%3D%20%22inline%22%20%7C%7C%20display%20%3D%3D%3D%20%22inline%2Dblock%22%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28display%29%0A%20%20%20%20%20%20%20%20%20%20%24el%2Ecss%28%22display%22%2C%20display%29%3B%0A%20%20%20%20%20%20%20%20%24%28el%2EnextSibling%29%2Efilter%28%22%2Ehtmlwidgets%2Derror%22%29%2Eremove%28%29%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28display%20%3D%3D%3D%20%22block%22%29%7B%0A%20%20%20%20%20%20%20%20%24el%2Ecss%28%22visibility%22%2C%20%22inherit%22%29%3B%0A%20%20%20%20%20%20%20%20%24%28el%2EnextSibling%29%2Efilter%28%22%2Ehtmlwidgets%2Derror%22%29%2Eremove%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20sizing%3A%20%7B%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Called%20by%20widget%20bindings%20to%20register%20a%20new%20type%20of%20widget%2E%20The%20definition%0A%20%20%2F%2F%20object%20can%20contain%20the%20following%20properties%3A%0A%20%20%2F%2F%20%2D%20name%20%28required%29%20%2D%20A%20string%20indicating%20the%20binding%20name%2C%20which%20will%20be%0A%20%20%2F%2F%20%20%20used%20by%20default%20as%20the%20CSS%20classname%20to%20look%20for%2E%0A%20%20%2F%2F%20%2D%20initialize%20%28optional%29%20%2D%20A%20function%28el%29%20that%20will%20be%20called%20once%20per%0A%20%20%2F%2F%20%20%20widget%20element%3B%20if%20a%20value%20is%20returned%2C%20it%20will%20be%20passed%20as%20the%20third%0A%20%20%2F%2F%20%20%20value%20to%20renderValue%2E%0A%20%20%2F%2F%20%2D%20renderValue%20%28required%29%20%2D%20A%20function%28el%2C%20data%2C%20initValue%29%20that%20will%20be%0A%20%20%2F%2F%20%20%20called%20with%20data%2E%20Static%20contexts%20will%20cause%20this%20to%20be%20called%20once%20per%0A%20%20%2F%2F%20%20%20element%3B%20Shiny%20apps%20will%20cause%20this%20to%20be%20called%20multiple%20times%20per%0A%20%20%2F%2F%20%20%20element%2C%20as%20the%20data%20changes%2E%0A%20%20window%2EHTMLWidgets%2Ewidget%20%3D%20function%28definition%29%20%7B%0A%20%20%20%20if%20%28%21definition%2Ename%29%20%7B%0A%20%20%20%20%20%20throw%20new%20Error%28%22Widget%20must%20have%20a%20name%22%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28%21definition%2Etype%29%20%7B%0A%20%20%20%20%20%20throw%20new%20Error%28%22Widget%20must%20have%20a%20type%22%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20Currently%20we%20only%20support%20output%20widgets%0A%20%20%20%20if%20%28definition%2Etype%20%21%3D%3D%20%22output%22%29%20%7B%0A%20%20%20%20%20%20throw%20new%20Error%28%22Unrecognized%20widget%20type%20%27%22%20%2B%20definition%2Etype%20%2B%20%22%27%22%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20TODO%3A%20Verify%20that%20%2Ename%20is%20a%20valid%20CSS%20classname%0A%20%20%20%20if%20%28%21definition%2ErenderValue%29%20%7B%0A%20%20%20%20%20%20throw%20new%20Error%28%22Widget%20must%20have%20a%20renderValue%20function%22%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20For%20static%20rendering%20%28non%2DShiny%29%2C%20use%20a%20simple%20widget%20registration%0A%20%20%20%20%2F%2F%20scheme%2E%20We%20also%20use%20this%20scheme%20for%20Shiny%20apps%2Fdocuments%20that%20also%0A%20%20%20%20%2F%2F%20contain%20static%20widgets%2E%0A%20%20%20%20window%2EHTMLWidgets%2Ewidgets%20%3D%20window%2EHTMLWidgets%2Ewidgets%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%2F%2F%20Merge%20defaults%20into%20the%20definition%3B%20don%27t%20mutate%20the%20original%20definition%2E%0A%20%20%20%20var%20staticBinding%20%3D%20extend%28%7B%7D%2C%20defaults%2C%20definition%29%3B%0A%20%20%20%20overrideMethod%28staticBinding%2C%20%22find%22%2C%20function%28superfunc%29%20%7B%0A%20%20%20%20%20%20return%20function%28scope%29%20%7B%0A%20%20%20%20%20%20%20%20var%20results%20%3D%20superfunc%28scope%29%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20Filter%20out%20Shiny%20outputs%2C%20we%20only%20want%20the%20static%20kind%0A%20%20%20%20%20%20%20%20return%20filterByClass%28results%2C%20%22html%2Dwidget%2Doutput%22%2C%20false%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20window%2EHTMLWidgets%2Ewidgets%2Epush%28staticBinding%29%3B%0A%0A%20%20%20%20if%20%28shinyMode%29%20%7B%0A%20%20%20%20%20%20%2F%2F%20Shiny%20is%20running%2E%20Register%20the%20definition%20as%20an%20output%20binding%2E%0A%0A%20%20%20%20%20%20%2F%2F%20Merge%20defaults%20into%20the%20definition%3B%20don%27t%20mutate%20the%20original%20definition%2E%0A%20%20%20%20%20%20%2F%2F%20The%20base%20object%20is%20a%20Shiny%20output%20binding%20if%20we%27re%20running%20in%20Shiny%20mode%2C%0A%20%20%20%20%20%20%2F%2F%20or%20an%20empty%20object%20if%20we%27re%20not%2E%0A%20%20%20%20%20%20var%20shinyBinding%20%3D%20extend%28new%20Shiny%2EOutputBinding%28%29%2C%20defaults%2C%20definition%29%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Wrap%20renderValue%20to%20handle%20initialization%2C%20which%20unfortunately%20isn%27t%0A%20%20%20%20%20%20%2F%2F%20supported%20natively%20by%20Shiny%20at%20the%20time%20of%20this%20writing%2E%0A%0A%20%20%20%20%20%20%2F%2F%20NB%3A%20shinyBinding%2Einitialize%20may%20be%20undefined%2C%20as%20it%27s%20optional%2E%0A%0A%20%20%20%20%20%20%2F%2F%20Rename%20initialize%20to%20make%20sure%20it%20isn%27t%20called%20by%20a%20future%20version%0A%20%20%20%20%20%20%2F%2F%20of%20Shiny%20that%20does%20support%20initialize%20directly%2E%0A%20%20%20%20%20%20shinyBinding%2E%5Fhtmlwidgets%5Finitialize%20%3D%20shinyBinding%2Einitialize%3B%0A%20%20%20%20%20%20delete%20shinyBinding%2Einitialize%3B%0A%0A%20%20%20%20%20%20overrideMethod%28shinyBinding%2C%20%22find%22%2C%20function%28superfunc%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%28scope%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20var%20results%20%3D%20superfunc%28scope%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Only%20return%20elements%20that%20are%20Shiny%20outputs%2C%20not%20static%20ones%0A%20%20%20%20%20%20%20%20%20%20var%20dynamicResults%20%3D%20results%2Efilter%28%22%2Ehtml%2Dwidget%2Doutput%22%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20It%27s%20possible%20that%20whatever%20caused%20Shiny%20to%20think%20there%20might%20be%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20new%20dynamic%20outputs%2C%20also%20caused%20there%20to%20be%20new%20static%20outputs%2E%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Since%20there%20might%20be%20lots%20of%20different%20htmlwidgets%20bindings%2C%20we%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20schedule%20execution%20for%20later%2D%2Dno%20need%20to%20staticRender%20multiple%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20times%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28results%2Elength%20%21%3D%3D%20dynamicResults%2Elength%29%0A%20%20%20%20%20%20%20%20%20%20%20%20scheduleStaticRender%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20return%20dynamicResults%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20overrideMethod%28shinyBinding%2C%20%22renderValue%22%2C%20function%28superfunc%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%28el%2C%20data%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Resolve%20strings%20marked%20as%20javascript%20literals%20to%20objects%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21%28data%2Eevals%20instanceof%20Array%29%29%20data%2Eevals%20%3D%20%5Bdata%2Eevals%5D%3B%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20data%2Eevals%20%26%26%20i%20%3C%20data%2Eevals%2Elength%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20window%2EHTMLWidgets%2EevaluateStringMember%28data%2Ex%2C%20data%2Eevals%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21this%2ErenderOnNullValue%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28data%2Ex%20%3D%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20el%2Estyle%2Evisibility%20%3D%20%22hidden%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20el%2Estyle%2Evisibility%20%3D%20%22inherit%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21elementData%28el%2C%20%22initialized%22%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20initSizing%28el%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20elementData%28el%2C%20%22initialized%22%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28this%2E%5Fhtmlwidgets%5Finitialize%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20result%20%3D%20this%2E%5Fhtmlwidgets%5Finitialize%28el%2C%20el%2EoffsetWidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20el%2EoffsetHeight%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20elementData%28el%2C%20%22init%5Fresult%22%2C%20result%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20Shiny%2ErenderDependencies%28data%2Edeps%29%3B%0A%20%20%20%20%20%20%20%20%20%20superfunc%28el%2C%20data%2Ex%2C%20elementData%28el%2C%20%22init%5Fresult%22%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20overrideMethod%28shinyBinding%2C%20%22resize%22%2C%20function%28superfunc%29%20%7B%0A%20%20%20%20%20%20%20%20return%20function%28el%2C%20width%2C%20height%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Shiny%20can%20call%20resize%20before%20initialize%2FrenderValue%20have%20been%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20called%2C%20which%20doesn%27t%20make%20sense%20for%20widgets%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28elementData%28el%2C%20%22initialized%22%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20superfunc%28el%2C%20width%2C%20height%2C%20elementData%28el%2C%20%22init%5Fresult%22%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20Shiny%2EoutputBindings%2Eregister%28shinyBinding%2C%20shinyBinding%2Ename%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20var%20scheduleStaticRenderTimerId%20%3D%20null%3B%0A%20%20function%20scheduleStaticRender%28%29%20%7B%0A%20%20%20%20if%20%28%21scheduleStaticRenderTimerId%29%20%7B%0A%20%20%20%20%20%20scheduleStaticRenderTimerId%20%3D%20setTimeout%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20scheduleStaticRenderTimerId%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20window%2EHTMLWidgets%2EstaticRender%28%29%3B%0A%20%20%20%20%20%20%7D%2C%201%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20Render%20static%20widgets%20after%20the%20document%20finishes%20loading%0A%20%20%2F%2F%20Statically%20render%20all%20elements%20that%20are%20of%20this%20widget%27s%20class%0A%20%20window%2EHTMLWidgets%2EstaticRender%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20bindings%20%3D%20window%2EHTMLWidgets%2Ewidgets%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20forEach%28bindings%2C%20function%28binding%29%20%7B%0A%20%20%20%20%20%20var%20matches%20%3D%20binding%2Efind%28document%2EdocumentElement%29%3B%0A%20%20%20%20%20%20forEach%28matches%2C%20function%28el%29%20%7B%0A%20%20%20%20%20%20%20%20var%20sizeObj%20%3D%20initSizing%28el%2C%20binding%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28hasClass%28el%2C%20%22html%2Dwidget%2Dstatic%2Dbound%22%29%29%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20el%2EclassName%20%3D%20el%2EclassName%20%2B%20%22%20html%2Dwidget%2Dstatic%2Dbound%22%3B%0A%0A%20%20%20%20%20%20%20%20var%20initResult%3B%0A%20%20%20%20%20%20%20%20if%20%28binding%2Einitialize%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20initResult%20%3D%20binding%2Einitialize%28el%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20sizeObj%20%3F%20sizeObj%2EgetWidth%28%29%20%3A%20el%2EoffsetWidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20sizeObj%20%3F%20sizeObj%2EgetHeight%28%29%20%3A%20el%2EoffsetHeight%0A%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28binding%2Eresize%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20lastSize%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20resizeHandler%20%3D%20function%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20size%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20w%3A%20sizeObj%20%3F%20sizeObj%2EgetWidth%28%29%20%3A%20el%2EoffsetWidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20h%3A%20sizeObj%20%3F%20sizeObj%2EgetHeight%28%29%20%3A%20el%2EoffsetHeight%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28size%2Ew%20%3D%3D%3D%200%20%26%26%20size%2Eh%20%3D%3D%3D%200%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28size%2Ew%20%3D%3D%3D%20lastSize%2Ew%20%26%26%20size%2Eh%20%3D%3D%3D%20lastSize%2Eh%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastSize%20%3D%20size%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20binding%2Eresize%28el%2C%20size%2Ew%2C%20size%2Eh%2C%20initResult%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20on%28window%2C%20%22resize%22%2C%20resizeHandler%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20is%20needed%20for%20cases%20where%20we%27re%20running%20in%20a%20Shiny%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20app%2C%20but%20the%20widget%20itself%20is%20not%20a%20Shiny%20output%2C%20but%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20rather%20a%20simple%20static%20widget%2E%20One%20example%20of%20this%20is%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20an%20rmarkdown%20document%20that%20has%20runtime%3Ashiny%20and%20widget%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20that%20isn%27t%20in%20a%20render%20function%2E%20Shiny%20only%20knows%20to%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20call%20resize%20handlers%20for%20Shiny%20outputs%2C%20not%20for%20static%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20widgets%2C%20so%20we%20do%20it%20ourselves%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28window%2EjQuery%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20window%2EjQuery%28document%29%2Eon%28%22shown%22%2C%20resizeHandler%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20window%2EjQuery%28document%29%2Eon%28%22hidden%22%2C%20resizeHandler%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20is%20needed%20for%20the%20specific%20case%20of%20ioslides%2C%20which%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20flips%20slides%20between%20display%3Anone%20and%20display%3Ablock%2E%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Ideally%20we%20would%20not%20have%20to%20have%20ioslide%2Dspecific%20code%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20here%2C%20but%20rather%20have%20ioslides%20raise%20a%20generic%20event%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20but%20the%20rmarkdown%20package%20just%20went%20to%20CRAN%20so%20the%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20window%20to%20getting%20that%20fixed%20may%20be%20long%2E%0A%20%20%20%20%20%20%20%20%20%20if%20%28window%2EaddEventListener%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20It%27s%20OK%20to%20limit%20this%20to%20window%2EaddEventListener%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20browsers%20because%20ioslides%20itself%20only%20supports%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20such%20browsers%2E%0A%20%20%20%20%20%20%20%20%20%20%20%20on%28document%2C%20%22slideenter%22%2C%20resizeHandler%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20on%28document%2C%20%22slideleave%22%2C%20resizeHandler%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20var%20scriptData%20%3D%20document%2EquerySelector%28%22script%5Bdata%2Dfor%3D%27%22%20%2B%20el%2Eid%20%2B%20%22%27%5D%5Btype%3D%27application%2Fjson%27%5D%22%29%3B%0A%20%20%20%20%20%20%20%20if%20%28scriptData%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20data%20%3D%20JSON%2Eparse%28scriptData%2EtextContent%20%7C%7C%20scriptData%2Etext%29%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Resolve%20strings%20marked%20as%20javascript%20literals%20to%20objects%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21%28data%2Eevals%20instanceof%20Array%29%29%20data%2Eevals%20%3D%20%5Bdata%2Eevals%5D%3B%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20k%20%3D%200%3B%20data%2Eevals%20%26%26%20k%20%3C%20data%2Eevals%2Elength%3B%20k%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20window%2EHTMLWidgets%2EevaluateStringMember%28data%2Ex%2C%20data%2Eevals%5Bk%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20binding%2ErenderValue%28el%2C%20data%2Ex%2C%20initResult%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Wait%20until%20after%20the%20document%20has%20loaded%20to%20render%20the%20widgets%2E%0A%20%20if%20%28document%2EaddEventListener%29%20%7B%0A%20%20%20%20document%2EaddEventListener%28%22DOMContentLoaded%22%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20document%2EremoveEventListener%28%22DOMContentLoaded%22%2C%20arguments%2Ecallee%2C%20false%29%3B%0A%20%20%20%20%20%20window%2EHTMLWidgets%2EstaticRender%28%29%3B%0A%20%20%20%20%7D%2C%20false%29%3B%0A%20%20%7D%20else%20if%20%28document%2EattachEvent%29%20%7B%0A%20%20%20%20document%2EattachEvent%28%22onreadystatechange%22%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20if%20%28document%2EreadyState%20%3D%3D%3D%20%22complete%22%29%20%7B%0A%20%20%20%20%20%20%20%20document%2EdetachEvent%28%22onreadystatechange%22%2C%20arguments%2Ecallee%29%3B%0A%20%20%20%20%20%20%20%20window%2EHTMLWidgets%2EstaticRender%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%0A%0A%0A%20%20window%2EHTMLWidgets%2EgetAttachmentUrl%20%3D%20function%28depname%2C%20key%29%20%7B%0A%20%20%20%20%2F%2F%20If%20no%20key%2C%20default%20to%20the%20first%20item%0A%20%20%20%20if%20%28typeof%28key%29%20%3D%3D%3D%20%22undefined%22%29%0A%20%20%20%20%20%20key%20%3D%201%3B%0A%0A%20%20%20%20var%20link%20%3D%20document%2EgetElementById%28depname%20%2B%20%22%2D%22%20%2B%20key%20%2B%20%22%2Dattachment%22%29%3B%0A%20%20%20%20if%20%28%21link%29%20%7B%0A%20%20%20%20%20%20throw%20new%20Error%28%22Attachment%20%22%20%2B%20depname%20%2B%20%22%2F%22%20%2B%20key%20%2B%20%22%20not%20found%20in%20document%22%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20link%2EgetAttribute%28%22href%22%29%3B%0A%20%20%7D%3B%0A%0A%20%20window%2EHTMLWidgets%2EdataframeToD3%20%3D%20function%28df%29%20%7B%0A%20%20%20%20var%20names%20%3D%20%5B%5D%3B%0A%20%20%20%20var%20length%3B%0A%20%20%20%20for%20%28var%20name%20in%20df%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28df%2EhasOwnProperty%28name%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20names%2Epush%28name%29%3B%0A%20%20%20%20%20%20%20%20if%20%28typeof%28df%5Bname%5D%29%20%21%3D%3D%20%22object%22%20%7C%7C%20typeof%28df%5Bname%5D%2Elength%29%20%3D%3D%3D%20%22undefined%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%22All%20fields%20must%20be%20arrays%22%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28typeof%28length%29%20%21%3D%3D%20%22undefined%22%20%26%26%20length%20%21%3D%3D%20df%5Bname%5D%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20Error%28%22All%20fields%20must%20be%20arrays%20of%20the%20same%20length%22%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20length%20%3D%20df%5Bname%5D%2Elength%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20results%20%3D%20%5B%5D%3B%0A%20%20%20%20var%20item%3B%0A%20%20%20%20for%20%28var%20row%20%3D%200%3B%20row%20%3C%20length%3B%20row%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20item%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20col%20%3D%200%3B%20col%20%3C%20names%2Elength%3B%20col%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20item%5Bnames%5Bcol%5D%5D%20%3D%20df%5Bnames%5Bcol%5D%5D%5Brow%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20results%2Epush%28item%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20results%3B%0A%20%20%7D%3B%0A%0A%20%20window%2EHTMLWidgets%2EtransposeArray2D%20%3D%20function%28array%29%20%7B%0A%20%20%20%20%20%20var%20newArray%20%3D%20array%5B0%5D%2Emap%28function%28col%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20array%2Emap%28function%28row%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20row%5Bi%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%29%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20return%20newArray%3B%0A%20%20%7D%3B%0A%20%20%2F%2F%20Split%20value%20at%20splitChar%2C%20but%20allow%20splitChar%20to%20be%20escaped%0A%20%20%2F%2F%20using%20escapeChar%2E%20Any%20other%20characters%20escaped%20by%20escapeChar%0A%20%20%2F%2F%20will%20be%20included%20as%20usual%20%28including%20escapeChar%20itself%29%2E%0A%20%20function%20splitWithEscape%28value%2C%20splitChar%2C%20escapeChar%29%20%7B%0A%20%20%20%20var%20results%20%3D%20%5B%5D%3B%0A%20%20%20%20var%20escapeMode%20%3D%20false%3B%0A%20%20%20%20var%20currentResult%20%3D%20%22%22%3B%0A%20%20%20%20for%20%28var%20pos%20%3D%200%3B%20pos%20%3C%20value%2Elength%3B%20pos%2B%2B%29%20%7B%0A%20%20%20%20%20%20if%20%28%21escapeMode%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28value%5Bpos%5D%20%3D%3D%3D%20splitChar%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20results%2Epush%28currentResult%29%3B%0A%20%20%20%20%20%20%20%20%20%20currentResult%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28value%5Bpos%5D%20%3D%3D%3D%20escapeChar%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20escapeMode%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20currentResult%20%2B%3D%20value%5Bpos%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20currentResult%20%2B%3D%20value%5Bpos%5D%3B%0A%20%20%20%20%20%20%20%20escapeMode%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28currentResult%20%21%3D%3D%20%22%22%29%20%7B%0A%20%20%20%20%20%20results%2Epush%28currentResult%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20results%3B%0A%20%20%7D%0A%20%20%2F%2F%20Function%20authored%20by%20Yihui%2FJJ%20Allaire%0A%20%20window%2EHTMLWidgets%2EevaluateStringMember%20%3D%20function%28o%2C%20member%29%20%7B%0A%20%20%20%20var%20parts%20%3D%20splitWithEscape%28member%2C%20%27%2E%27%2C%20%27%5C%5C%27%29%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%2C%20l%20%3D%20parts%2Elength%3B%20i%20%3C%20l%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20var%20part%20%3D%20parts%5Bi%5D%3B%0A%20%20%20%20%20%20%2F%2F%20part%20may%20be%20a%20character%20or%20%27numeric%27%20member%20name%0A%20%20%20%20%20%20if%20%28o%20%21%3D%3D%20null%20%26%26%20typeof%20o%20%3D%3D%3D%20%22object%22%20%26%26%20part%20in%20o%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28i%20%3D%3D%20%28l%20%2D%201%29%29%20%7B%20%2F%2F%20if%20we%20are%20at%20the%20end%20of%20the%20line%20then%20evalulate%0A%20%20%20%20%20%20%20%20%20%20if%20%28typeof%20o%5Bpart%5D%20%3D%3D%3D%20%22string%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20o%5Bpart%5D%20%3D%20eval%28%22%28%22%20%2B%20o%5Bpart%5D%20%2B%20%22%29%22%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%2F%2F%20otherwise%20continue%20to%20next%20embedded%20object%0A%20%20%20%20%20%20%20%20%20%20o%20%3D%20o%5Bpart%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%7D%29%28%29%3B%0A%0A"></script>
<script src="data:application/x-javascript,%21function%28%29%20%7B%0A%20%20var%20d3%20%3D%20%7B%0A%20%20%20%20version%3A%20%223%2E5%2E3%22%0A%20%20%7D%3B%0A%20%20if%20%28%21Date%2Enow%29%20Date%2Enow%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20%2Bnew%20Date%28%29%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5FarraySlice%20%3D%20%5B%5D%2Eslice%2C%20d3%5Farray%20%3D%20function%28list%29%20%7B%0A%20%20%20%20return%20d3%5FarraySlice%2Ecall%28list%29%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fdocument%20%3D%20document%2C%20d3%5FdocumentElement%20%3D%20d3%5Fdocument%2EdocumentElement%2C%20d3%5Fwindow%20%3D%20window%3B%0A%20%20try%20%7B%0A%20%20%20%20d3%5Farray%28d3%5FdocumentElement%2EchildNodes%29%5B0%5D%2EnodeType%3B%0A%20%20%7D%20catch%20%28e%29%20%7B%0A%20%20%20%20d3%5Farray%20%3D%20function%28list%29%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20list%2Elength%2C%20array%20%3D%20new%20Array%28i%29%3B%0A%20%20%20%20%20%20while%20%28i%2D%2D%29%20array%5Bi%5D%20%3D%20list%5Bi%5D%3B%0A%20%20%20%20%20%20return%20array%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20try%20%7B%0A%20%20%20%20d3%5Fdocument%2EcreateElement%28%22div%22%29%2Estyle%2EsetProperty%28%22opacity%22%2C%200%2C%20%22%22%29%3B%0A%20%20%7D%20catch%20%28error%29%20%7B%0A%20%20%20%20var%20d3%5Felement%5Fprototype%20%3D%20d3%5Fwindow%2EElement%2Eprototype%2C%20d3%5Felement%5FsetAttribute%20%3D%20d3%5Felement%5Fprototype%2EsetAttribute%2C%20d3%5Felement%5FsetAttributeNS%20%3D%20d3%5Felement%5Fprototype%2EsetAttributeNS%2C%20d3%5Fstyle%5Fprototype%20%3D%20d3%5Fwindow%2ECSSStyleDeclaration%2Eprototype%2C%20d3%5Fstyle%5FsetProperty%20%3D%20d3%5Fstyle%5Fprototype%2EsetProperty%3B%0A%20%20%20%20d3%5Felement%5Fprototype%2EsetAttribute%20%3D%20function%28name%2C%20value%29%20%7B%0A%20%20%20%20%20%20d3%5Felement%5FsetAttribute%2Ecall%28this%2C%20name%2C%20value%20%2B%20%22%22%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20d3%5Felement%5Fprototype%2EsetAttributeNS%20%3D%20function%28space%2C%20local%2C%20value%29%20%7B%0A%20%20%20%20%20%20d3%5Felement%5FsetAttributeNS%2Ecall%28this%2C%20space%2C%20local%2C%20value%20%2B%20%22%22%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20d3%5Fstyle%5Fprototype%2EsetProperty%20%3D%20function%28name%2C%20value%2C%20priority%29%20%7B%0A%20%20%20%20%20%20d3%5Fstyle%5FsetProperty%2Ecall%28this%2C%20name%2C%20value%20%2B%20%22%22%2C%20priority%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2Eascending%20%3D%20d3%5Fascending%3B%0A%20%20function%20d3%5Fascending%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20a%20%3C%20b%20%3F%20%2D1%20%3A%20a%20%3E%20b%20%3F%201%20%3A%20a%20%3E%3D%20b%20%3F%200%20%3A%20NaN%3B%0A%20%20%7D%0A%20%20d3%2Edescending%20%3D%20function%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20b%20%3C%20a%20%3F%20%2D1%20%3A%20b%20%3E%20a%20%3F%201%20%3A%20b%20%3E%3D%20a%20%3F%200%20%3A%20NaN%3B%0A%20%20%7D%3B%0A%20%20d3%2Emin%20%3D%20function%28array%2C%20f%29%20%7B%0A%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20array%2Elength%2C%20a%2C%20b%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%28b%20%3D%20array%5Bi%5D%29%20%21%3D%20null%20%26%26%20b%20%3E%3D%20b%29%20%7B%0A%20%20%20%20%20%20%20%20a%20%3D%20b%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%28b%20%3D%20array%5Bi%5D%29%20%21%3D%20null%20%26%26%20a%20%3E%20b%29%20a%20%3D%20b%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%28b%20%3D%20f%2Ecall%28array%2C%20array%5Bi%5D%2C%20i%29%29%20%21%3D%20null%20%26%26%20b%20%3E%3D%20b%29%20%7B%0A%20%20%20%20%20%20%20%20a%20%3D%20b%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%28b%20%3D%20f%2Ecall%28array%2C%20array%5Bi%5D%2C%20i%29%29%20%21%3D%20null%20%26%26%20a%20%3E%20b%29%20a%20%3D%20b%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20a%3B%0A%20%20%7D%3B%0A%20%20d3%2Emax%20%3D%20function%28array%2C%20f%29%20%7B%0A%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20array%2Elength%2C%20a%2C%20b%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%28b%20%3D%20array%5Bi%5D%29%20%21%3D%20null%20%26%26%20b%20%3E%3D%20b%29%20%7B%0A%20%20%20%20%20%20%20%20a%20%3D%20b%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%28b%20%3D%20array%5Bi%5D%29%20%21%3D%20null%20%26%26%20b%20%3E%20a%29%20a%20%3D%20b%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%28b%20%3D%20f%2Ecall%28array%2C%20array%5Bi%5D%2C%20i%29%29%20%21%3D%20null%20%26%26%20b%20%3E%3D%20b%29%20%7B%0A%20%20%20%20%20%20%20%20a%20%3D%20b%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%28b%20%3D%20f%2Ecall%28array%2C%20array%5Bi%5D%2C%20i%29%29%20%21%3D%20null%20%26%26%20b%20%3E%20a%29%20a%20%3D%20b%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20a%3B%0A%20%20%7D%3B%0A%20%20d3%2Eextent%20%3D%20function%28array%2C%20f%29%20%7B%0A%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20array%2Elength%2C%20a%2C%20b%2C%20c%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%28b%20%3D%20array%5Bi%5D%29%20%21%3D%20null%20%26%26%20b%20%3E%3D%20b%29%20%7B%0A%20%20%20%20%20%20%20%20a%20%3D%20c%20%3D%20b%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%28b%20%3D%20array%5Bi%5D%29%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28a%20%3E%20b%29%20a%20%3D%20b%3B%0A%20%20%20%20%20%20%20%20if%20%28c%20%3C%20b%29%20c%20%3D%20b%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%28b%20%3D%20f%2Ecall%28array%2C%20array%5Bi%5D%2C%20i%29%29%20%21%3D%20null%20%26%26%20b%20%3E%3D%20b%29%20%7B%0A%20%20%20%20%20%20%20%20a%20%3D%20c%20%3D%20b%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%28b%20%3D%20f%2Ecall%28array%2C%20array%5Bi%5D%2C%20i%29%29%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28a%20%3E%20b%29%20a%20%3D%20b%3B%0A%20%20%20%20%20%20%20%20if%20%28c%20%3C%20b%29%20c%20%3D%20b%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20%5B%20a%2C%20c%20%5D%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fnumber%28x%29%20%7B%0A%20%20%20%20return%20x%20%3D%3D%3D%20null%20%3F%20NaN%20%3A%20%2Bx%3B%0A%20%20%7D%0A%20%20function%20d3%5Fnumeric%28x%29%20%7B%0A%20%20%20%20return%20%21isNaN%28x%29%3B%0A%20%20%7D%0A%20%20d3%2Esum%20%3D%20function%28array%2C%20f%29%20%7B%0A%20%20%20%20var%20s%20%3D%200%2C%20n%20%3D%20array%2Elength%2C%20a%2C%20i%20%3D%20%2D1%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28d3%5Fnumeric%28a%20%3D%20%2Barray%5Bi%5D%29%29%20s%20%2B%3D%20a%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28d3%5Fnumeric%28a%20%3D%20%2Bf%2Ecall%28array%2C%20array%5Bi%5D%2C%20i%29%29%29%20s%20%2B%3D%20a%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20s%3B%0A%20%20%7D%3B%0A%20%20d3%2Emean%20%3D%20function%28array%2C%20f%29%20%7B%0A%20%20%20%20var%20s%20%3D%200%2C%20n%20%3D%20array%2Elength%2C%20a%2C%20i%20%3D%20%2D1%2C%20j%20%3D%20n%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28d3%5Fnumeric%28a%20%3D%20d3%5Fnumber%28array%5Bi%5D%29%29%29%20s%20%2B%3D%20a%3B%20else%20%2D%2Dj%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28d3%5Fnumeric%28a%20%3D%20d3%5Fnumber%28f%2Ecall%28array%2C%20array%5Bi%5D%2C%20i%29%29%29%29%20s%20%2B%3D%20a%3B%20else%20%2D%2Dj%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28j%29%20return%20s%20%2F%20j%3B%0A%20%20%7D%3B%0A%20%20d3%2Equantile%20%3D%20function%28values%2C%20p%29%20%7B%0A%20%20%20%20var%20H%20%3D%20%28values%2Elength%20%2D%201%29%20%2A%20p%20%2B%201%2C%20h%20%3D%20Math%2Efloor%28H%29%2C%20v%20%3D%20%2Bvalues%5Bh%20%2D%201%5D%2C%20e%20%3D%20H%20%2D%20h%3B%0A%20%20%20%20return%20e%20%3F%20v%20%2B%20e%20%2A%20%28values%5Bh%5D%20%2D%20v%29%20%3A%20v%3B%0A%20%20%7D%3B%0A%20%20d3%2Emedian%20%3D%20function%28array%2C%20f%29%20%7B%0A%20%20%20%20var%20numbers%20%3D%20%5B%5D%2C%20n%20%3D%20array%2Elength%2C%20a%2C%20i%20%3D%20%2D1%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28d3%5Fnumeric%28a%20%3D%20d3%5Fnumber%28array%5Bi%5D%29%29%29%20numbers%2Epush%28a%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28d3%5Fnumeric%28a%20%3D%20d3%5Fnumber%28f%2Ecall%28array%2C%20array%5Bi%5D%2C%20i%29%29%29%29%20numbers%2Epush%28a%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28numbers%2Elength%29%20return%20d3%2Equantile%28numbers%2Esort%28d3%5Fascending%29%2C%20%2E5%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Evariance%20%3D%20function%28array%2C%20f%29%20%7B%0A%20%20%20%20var%20n%20%3D%20array%2Elength%2C%20m%20%3D%200%2C%20a%2C%20d%2C%20s%20%3D%200%2C%20i%20%3D%20%2D1%2C%20j%20%3D%200%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28d3%5Fnumeric%28a%20%3D%20d3%5Fnumber%28array%5Bi%5D%29%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20d%20%3D%20a%20%2D%20m%3B%0A%20%20%20%20%20%20%20%20%20%20m%20%2B%3D%20d%20%2F%20%2B%2Bj%3B%0A%20%20%20%20%20%20%20%20%20%20s%20%2B%3D%20d%20%2A%20%28a%20%2D%20m%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28d3%5Fnumeric%28a%20%3D%20d3%5Fnumber%28f%2Ecall%28array%2C%20array%5Bi%5D%2C%20i%29%29%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20d%20%3D%20a%20%2D%20m%3B%0A%20%20%20%20%20%20%20%20%20%20m%20%2B%3D%20d%20%2F%20%2B%2Bj%3B%0A%20%20%20%20%20%20%20%20%20%20s%20%2B%3D%20d%20%2A%20%28a%20%2D%20m%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28j%20%3E%201%29%20return%20s%20%2F%20%28j%20%2D%201%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Edeviation%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20v%20%3D%20d3%2Evariance%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20return%20v%20%3F%20Math%2Esqrt%28v%29%20%3A%20v%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fbisector%28compare%29%20%7B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20left%3A%20function%28a%2C%20x%2C%20lo%2C%20hi%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%203%29%20lo%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%204%29%20hi%20%3D%20a%2Elength%3B%0A%20%20%20%20%20%20%20%20while%20%28lo%20%3C%20hi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20mid%20%3D%20lo%20%2B%20hi%20%3E%3E%3E%201%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28compare%28a%5Bmid%5D%2C%20x%29%20%3C%200%29%20lo%20%3D%20mid%20%2B%201%3B%20else%20hi%20%3D%20mid%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20lo%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20right%3A%20function%28a%2C%20x%2C%20lo%2C%20hi%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%203%29%20lo%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%204%29%20hi%20%3D%20a%2Elength%3B%0A%20%20%20%20%20%20%20%20while%20%28lo%20%3C%20hi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20mid%20%3D%20lo%20%2B%20hi%20%3E%3E%3E%201%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28compare%28a%5Bmid%5D%2C%20x%29%20%3E%200%29%20hi%20%3D%20mid%3B%20else%20lo%20%3D%20mid%20%2B%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20lo%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20var%20d3%5Fbisect%20%3D%20d3%5Fbisector%28d3%5Fascending%29%3B%0A%20%20d3%2EbisectLeft%20%3D%20d3%5Fbisect%2Eleft%3B%0A%20%20d3%2Ebisect%20%3D%20d3%2EbisectRight%20%3D%20d3%5Fbisect%2Eright%3B%0A%20%20d3%2Ebisector%20%3D%20function%28f%29%20%7B%0A%20%20%20%20return%20d3%5Fbisector%28f%2Elength%20%3D%3D%3D%201%20%3F%20function%28d%2C%20x%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fascending%28f%28d%29%2C%20x%29%3B%0A%20%20%20%20%7D%20%3A%20f%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Eshuffle%20%3D%20function%28array%2C%20i0%2C%20i1%29%20%7B%0A%20%20%20%20if%20%28%28m%20%3D%20arguments%2Elength%29%20%3C%203%29%20%7B%0A%20%20%20%20%20%20i1%20%3D%20array%2Elength%3B%0A%20%20%20%20%20%20if%20%28m%20%3C%202%29%20i0%20%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20m%20%3D%20i1%20%2D%20i0%2C%20t%2C%20i%3B%0A%20%20%20%20while%20%28m%29%20%7B%0A%20%20%20%20%20%20i%20%3D%20Math%2Erandom%28%29%20%2A%20m%2D%2D%20%7C%200%3B%0A%20%20%20%20%20%20t%20%3D%20array%5Bm%20%2B%20i0%5D%2C%20array%5Bm%20%2B%20i0%5D%20%3D%20array%5Bi%20%2B%20i0%5D%2C%20array%5Bi%20%2B%20i0%5D%20%3D%20t%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20array%3B%0A%20%20%7D%3B%0A%20%20d3%2Epermute%20%3D%20function%28array%2C%20indexes%29%20%7B%0A%20%20%20%20var%20i%20%3D%20indexes%2Elength%2C%20permutes%20%3D%20new%20Array%28i%29%3B%0A%20%20%20%20while%20%28i%2D%2D%29%20permutes%5Bi%5D%20%3D%20array%5Bindexes%5Bi%5D%5D%3B%0A%20%20%20%20return%20permutes%3B%0A%20%20%7D%3B%0A%20%20d3%2Epairs%20%3D%20function%28array%29%20%7B%0A%20%20%20%20var%20i%20%3D%200%2C%20n%20%3D%20array%2Elength%20%2D%201%2C%20p0%2C%20p1%20%3D%20array%5B0%5D%2C%20pairs%20%3D%20new%20Array%28n%20%3C%200%20%3F%200%20%3A%20n%29%3B%0A%20%20%20%20while%20%28i%20%3C%20n%29%20pairs%5Bi%5D%20%3D%20%5B%20p0%20%3D%20p1%2C%20p1%20%3D%20array%5B%2B%2Bi%5D%20%5D%3B%0A%20%20%20%20return%20pairs%3B%0A%20%20%7D%3B%0A%20%20d3%2Ezip%20%3D%20function%28%29%20%7B%0A%20%20%20%20if%20%28%21%28n%20%3D%20arguments%2Elength%29%29%20return%20%5B%5D%3B%0A%20%20%20%20for%20%28var%20i%20%3D%20%2D1%2C%20m%20%3D%20d3%2Emin%28arguments%2C%20d3%5FzipLength%29%2C%20zips%20%3D%20new%20Array%28m%29%3B%20%2B%2Bi%20%3C%20m%3B%20%29%20%7B%0A%20%20%20%20%20%20for%20%28var%20j%20%3D%20%2D1%2C%20n%2C%20zip%20%3D%20zips%5Bi%5D%20%3D%20new%20Array%28n%29%3B%20%2B%2Bj%20%3C%20n%3B%20%29%20%7B%0A%20%20%20%20%20%20%20%20zip%5Bj%5D%20%3D%20arguments%5Bj%5D%5Bi%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20zips%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5FzipLength%28d%29%20%7B%0A%20%20%20%20return%20d%2Elength%3B%0A%20%20%7D%0A%20%20d3%2Etranspose%20%3D%20function%28matrix%29%20%7B%0A%20%20%20%20return%20d3%2Ezip%2Eapply%28d3%2C%20matrix%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Ekeys%20%3D%20function%28map%29%20%7B%0A%20%20%20%20var%20keys%20%3D%20%5B%5D%3B%0A%20%20%20%20for%20%28var%20key%20in%20map%29%20keys%2Epush%28key%29%3B%0A%20%20%20%20return%20keys%3B%0A%20%20%7D%3B%0A%20%20d3%2Evalues%20%3D%20function%28map%29%20%7B%0A%20%20%20%20var%20values%20%3D%20%5B%5D%3B%0A%20%20%20%20for%20%28var%20key%20in%20map%29%20values%2Epush%28map%5Bkey%5D%29%3B%0A%20%20%20%20return%20values%3B%0A%20%20%7D%3B%0A%20%20d3%2Eentries%20%3D%20function%28map%29%20%7B%0A%20%20%20%20var%20entries%20%3D%20%5B%5D%3B%0A%20%20%20%20for%20%28var%20key%20in%20map%29%20entries%2Epush%28%7B%0A%20%20%20%20%20%20key%3A%20key%2C%0A%20%20%20%20%20%20value%3A%20map%5Bkey%5D%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20return%20entries%3B%0A%20%20%7D%3B%0A%20%20d3%2Emerge%20%3D%20function%28arrays%29%20%7B%0A%20%20%20%20var%20n%20%3D%20arrays%2Elength%2C%20m%2C%20i%20%3D%20%2D1%2C%20j%20%3D%200%2C%20merged%2C%20array%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20j%20%2B%3D%20arrays%5Bi%5D%2Elength%3B%0A%20%20%20%20merged%20%3D%20new%20Array%28j%29%3B%0A%20%20%20%20while%20%28%2D%2Dn%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20array%20%3D%20arrays%5Bn%5D%3B%0A%20%20%20%20%20%20m%20%3D%20array%2Elength%3B%0A%20%20%20%20%20%20while%20%28%2D%2Dm%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20merged%5B%2D%2Dj%5D%20%3D%20array%5Bm%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20merged%3B%0A%20%20%7D%3B%0A%20%20var%20abs%20%3D%20Math%2Eabs%3B%0A%20%20d3%2Erange%20%3D%20function%28start%2C%20stop%2C%20step%29%20%7B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%203%29%20%7B%0A%20%20%20%20%20%20step%20%3D%201%3B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20%7B%0A%20%20%20%20%20%20%20%20stop%20%3D%20start%3B%0A%20%20%20%20%20%20%20%20start%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28%28stop%20%2D%20start%29%20%2F%20step%20%3D%3D%3D%20Infinity%29%20throw%20new%20Error%28%22infinite%20range%22%29%3B%0A%20%20%20%20var%20range%20%3D%20%5B%5D%2C%20k%20%3D%20d3%5Frange%5FintegerScale%28abs%28step%29%29%2C%20i%20%3D%20%2D1%2C%20j%3B%0A%20%20%20%20start%20%2A%3D%20k%2C%20stop%20%2A%3D%20k%2C%20step%20%2A%3D%20k%3B%0A%20%20%20%20if%20%28step%20%3C%200%29%20while%20%28%28j%20%3D%20start%20%2B%20step%20%2A%20%2B%2Bi%29%20%3E%20stop%29%20range%2Epush%28j%20%2F%20k%29%3B%20else%20while%20%28%28j%20%3D%20start%20%2B%20step%20%2A%20%2B%2Bi%29%20%3C%20stop%29%20range%2Epush%28j%20%2F%20k%29%3B%0A%20%20%20%20return%20range%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Frange%5FintegerScale%28x%29%20%7B%0A%20%20%20%20var%20k%20%3D%201%3B%0A%20%20%20%20while%20%28x%20%2A%20k%20%25%201%29%20k%20%2A%3D%2010%3B%0A%20%20%20%20return%20k%3B%0A%20%20%7D%0A%20%20function%20d3%5Fclass%28ctor%2C%20properties%29%20%7B%0A%20%20%20%20for%20%28var%20key%20in%20properties%29%20%7B%0A%20%20%20%20%20%20Object%2EdefineProperty%28ctor%2Eprototype%2C%20key%2C%20%7B%0A%20%20%20%20%20%20%20%20value%3A%20properties%5Bkey%5D%2C%0A%20%20%20%20%20%20%20%20enumerable%3A%20false%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20d3%2Emap%20%3D%20function%28object%2C%20f%29%20%7B%0A%20%20%20%20var%20map%20%3D%20new%20d3%5FMap%28%29%3B%0A%20%20%20%20if%20%28object%20instanceof%20d3%5FMap%29%20%7B%0A%20%20%20%20%20%20object%2EforEach%28function%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20map%2Eset%28key%2C%20value%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%20else%20if%20%28Array%2EisArray%28object%29%29%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20object%2Elength%2C%20o%3B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%3D%201%29%20while%20%28%2B%2Bi%20%3C%20n%29%20map%2Eset%28i%2C%20object%5Bi%5D%29%3B%20else%20while%20%28%2B%2Bi%20%3C%20n%29%20map%2Eset%28f%2Ecall%28object%2C%20o%20%3D%20object%5Bi%5D%2C%20i%29%2C%20o%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20for%20%28var%20key%20in%20object%29%20map%2Eset%28key%2C%20object%5Bkey%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20map%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5FMap%28%29%20%7B%0A%20%20%20%20this%2E%5F%20%3D%20Object%2Ecreate%28null%29%3B%0A%20%20%7D%0A%20%20var%20d3%5Fmap%5Fproto%20%3D%20%22%5F%5Fproto%5F%5F%22%2C%20d3%5Fmap%5Fzero%20%3D%20%22%5Cx00%22%3B%0A%20%20d3%5Fclass%28d3%5FMap%2C%20%7B%0A%20%20%20%20has%3A%20d3%5Fmap%5Fhas%2C%0A%20%20%20%20get%3A%20function%28key%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5F%5Bd3%5Fmap%5Fescape%28key%29%5D%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20set%3A%20function%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5F%5Bd3%5Fmap%5Fescape%28key%29%5D%20%3D%20value%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20remove%3A%20d3%5Fmap%5Fremove%2C%0A%20%20%20%20keys%3A%20d3%5Fmap%5Fkeys%2C%0A%20%20%20%20values%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20values%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20%28var%20key%20in%20this%2E%5F%29%20values%2Epush%28this%2E%5F%5Bkey%5D%29%3B%0A%20%20%20%20%20%20return%20values%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20entries%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20entries%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20%28var%20key%20in%20this%2E%5F%29%20entries%2Epush%28%7B%0A%20%20%20%20%20%20%20%20key%3A%20d3%5Fmap%5Funescape%28key%29%2C%0A%20%20%20%20%20%20%20%20value%3A%20this%2E%5F%5Bkey%5D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20return%20entries%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20size%3A%20d3%5Fmap%5Fsize%2C%0A%20%20%20%20empty%3A%20d3%5Fmap%5Fempty%2C%0A%20%20%20%20forEach%3A%20function%28f%29%20%7B%0A%20%20%20%20%20%20for%20%28var%20key%20in%20this%2E%5F%29%20f%2Ecall%28this%2C%20d3%5Fmap%5Funescape%28key%29%2C%20this%2E%5F%5Bkey%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%29%3B%0A%20%20function%20d3%5Fmap%5Fescape%28key%29%20%7B%0A%20%20%20%20return%20%28key%20%2B%3D%20%22%22%29%20%3D%3D%3D%20d3%5Fmap%5Fproto%20%7C%7C%20key%5B0%5D%20%3D%3D%3D%20d3%5Fmap%5Fzero%20%3F%20d3%5Fmap%5Fzero%20%2B%20key%20%3A%20key%3B%0A%20%20%7D%0A%20%20function%20d3%5Fmap%5Funescape%28key%29%20%7B%0A%20%20%20%20return%20%28key%20%2B%3D%20%22%22%29%5B0%5D%20%3D%3D%3D%20d3%5Fmap%5Fzero%20%3F%20key%2Eslice%281%29%20%3A%20key%3B%0A%20%20%7D%0A%20%20function%20d3%5Fmap%5Fhas%28key%29%20%7B%0A%20%20%20%20return%20d3%5Fmap%5Fescape%28key%29%20in%20this%2E%5F%3B%0A%20%20%7D%0A%20%20function%20d3%5Fmap%5Fremove%28key%29%20%7B%0A%20%20%20%20return%20%28key%20%3D%20d3%5Fmap%5Fescape%28key%29%29%20in%20this%2E%5F%20%26%26%20delete%20this%2E%5F%5Bkey%5D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fmap%5Fkeys%28%29%20%7B%0A%20%20%20%20var%20keys%20%3D%20%5B%5D%3B%0A%20%20%20%20for%20%28var%20key%20in%20this%2E%5F%29%20keys%2Epush%28d3%5Fmap%5Funescape%28key%29%29%3B%0A%20%20%20%20return%20keys%3B%0A%20%20%7D%0A%20%20function%20d3%5Fmap%5Fsize%28%29%20%7B%0A%20%20%20%20var%20size%20%3D%200%3B%0A%20%20%20%20for%20%28var%20key%20in%20this%2E%5F%29%20%2B%2Bsize%3B%0A%20%20%20%20return%20size%3B%0A%20%20%7D%0A%20%20function%20d3%5Fmap%5Fempty%28%29%20%7B%0A%20%20%20%20for%20%28var%20key%20in%20this%2E%5F%29%20return%20false%3B%0A%20%20%20%20return%20true%3B%0A%20%20%7D%0A%20%20d3%2Enest%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20nest%20%3D%20%7B%7D%2C%20keys%20%3D%20%5B%5D%2C%20sortKeys%20%3D%20%5B%5D%2C%20sortValues%2C%20rollup%3B%0A%20%20%20%20function%20map%28mapType%2C%20array%2C%20depth%29%20%7B%0A%20%20%20%20%20%20if%20%28depth%20%3E%3D%20keys%2Elength%29%20return%20rollup%20%3F%20rollup%2Ecall%28nest%2C%20array%29%20%3A%20sortValues%20%3F%20array%2Esort%28sortValues%29%20%3A%20array%3B%0A%20%20%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20array%2Elength%2C%20key%20%3D%20keys%5Bdepth%2B%2B%5D%2C%20keyValue%2C%20object%2C%20setter%2C%20valuesByKey%20%3D%20new%20d3%5FMap%28%29%2C%20values%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28values%20%3D%20valuesByKey%2Eget%28keyValue%20%3D%20key%28object%20%3D%20array%5Bi%5D%29%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20values%2Epush%28object%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20valuesByKey%2Eset%28keyValue%2C%20%5B%20object%20%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28mapType%29%20%7B%0A%20%20%20%20%20%20%20%20object%20%3D%20mapType%28%29%3B%0A%20%20%20%20%20%20%20%20setter%20%3D%20function%28keyValue%2C%20values%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20object%2Eset%28keyValue%2C%20map%28mapType%2C%20values%2C%20depth%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20object%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20setter%20%3D%20function%28keyValue%2C%20values%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20object%5BkeyValue%5D%20%3D%20map%28mapType%2C%20values%2C%20depth%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20valuesByKey%2EforEach%28setter%29%3B%0A%20%20%20%20%20%20return%20object%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20entries%28map%2C%20depth%29%20%7B%0A%20%20%20%20%20%20if%20%28depth%20%3E%3D%20keys%2Elength%29%20return%20map%3B%0A%20%20%20%20%20%20var%20array%20%3D%20%5B%5D%2C%20sortKey%20%3D%20sortKeys%5Bdepth%2B%2B%5D%3B%0A%20%20%20%20%20%20map%2EforEach%28function%28key%2C%20keyMap%29%20%7B%0A%20%20%20%20%20%20%20%20array%2Epush%28%7B%0A%20%20%20%20%20%20%20%20%20%20key%3A%20key%2C%0A%20%20%20%20%20%20%20%20%20%20values%3A%20entries%28keyMap%2C%20depth%29%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20return%20sortKey%20%3F%20array%2Esort%28function%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20return%20sortKey%28a%2Ekey%2C%20b%2Ekey%29%3B%0A%20%20%20%20%20%20%7D%29%20%3A%20array%3B%0A%20%20%20%20%7D%0A%20%20%20%20nest%2Emap%20%3D%20function%28array%2C%20mapType%29%20%7B%0A%20%20%20%20%20%20return%20map%28mapType%2C%20array%2C%200%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20nest%2Eentries%20%3D%20function%28array%29%20%7B%0A%20%20%20%20%20%20return%20entries%28map%28d3%2Emap%2C%20array%2C%200%29%2C%200%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20nest%2Ekey%20%3D%20function%28d%29%20%7B%0A%20%20%20%20%20%20keys%2Epush%28d%29%3B%0A%20%20%20%20%20%20return%20nest%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20nest%2EsortKeys%20%3D%20function%28order%29%20%7B%0A%20%20%20%20%20%20sortKeys%5Bkeys%2Elength%20%2D%201%5D%20%3D%20order%3B%0A%20%20%20%20%20%20return%20nest%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20nest%2EsortValues%20%3D%20function%28order%29%20%7B%0A%20%20%20%20%20%20sortValues%20%3D%20order%3B%0A%20%20%20%20%20%20return%20nest%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20nest%2Erollup%20%3D%20function%28f%29%20%7B%0A%20%20%20%20%20%20rollup%20%3D%20f%3B%0A%20%20%20%20%20%20return%20nest%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20nest%3B%0A%20%20%7D%3B%0A%20%20d3%2Eset%20%3D%20function%28array%29%20%7B%0A%20%20%20%20var%20set%20%3D%20new%20d3%5FSet%28%29%3B%0A%20%20%20%20if%20%28array%29%20for%20%28var%20i%20%3D%200%2C%20n%20%3D%20array%2Elength%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20set%2Eadd%28array%5Bi%5D%29%3B%0A%20%20%20%20return%20set%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5FSet%28%29%20%7B%0A%20%20%20%20this%2E%5F%20%3D%20Object%2Ecreate%28null%29%3B%0A%20%20%7D%0A%20%20d3%5Fclass%28d3%5FSet%2C%20%7B%0A%20%20%20%20has%3A%20d3%5Fmap%5Fhas%2C%0A%20%20%20%20add%3A%20function%28key%29%20%7B%0A%20%20%20%20%20%20this%2E%5F%5Bd3%5Fmap%5Fescape%28key%20%2B%3D%20%22%22%29%5D%20%3D%20true%3B%0A%20%20%20%20%20%20return%20key%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20remove%3A%20d3%5Fmap%5Fremove%2C%0A%20%20%20%20values%3A%20d3%5Fmap%5Fkeys%2C%0A%20%20%20%20size%3A%20d3%5Fmap%5Fsize%2C%0A%20%20%20%20empty%3A%20d3%5Fmap%5Fempty%2C%0A%20%20%20%20forEach%3A%20function%28f%29%20%7B%0A%20%20%20%20%20%20for%20%28var%20key%20in%20this%2E%5F%29%20f%2Ecall%28this%2C%20d3%5Fmap%5Funescape%28key%29%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%29%3B%0A%20%20d3%2Ebehavior%20%3D%20%7B%7D%3B%0A%20%20d3%2Erebind%20%3D%20function%28target%2C%20source%29%20%7B%0A%20%20%20%20var%20i%20%3D%201%2C%20n%20%3D%20arguments%2Elength%2C%20method%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20target%5Bmethod%20%3D%20arguments%5Bi%5D%5D%20%3D%20d3%5Frebind%28target%2C%20source%2C%20source%5Bmethod%5D%29%3B%0A%20%20%20%20return%20target%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Frebind%28target%2C%20source%2C%20method%29%20%7B%0A%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20value%20%3D%20method%2Eapply%28source%2C%20arguments%29%3B%0A%20%20%20%20%20%20return%20value%20%3D%3D%3D%20source%20%3F%20target%20%3A%20value%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5FvendorSymbol%28object%2C%20name%29%20%7B%0A%20%20%20%20if%20%28name%20in%20object%29%20return%20name%3B%0A%20%20%20%20name%20%3D%20name%2EcharAt%280%29%2EtoUpperCase%28%29%20%2B%20name%2Eslice%281%29%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%2C%20n%20%3D%20d3%5FvendorPrefixes%2Elength%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20var%20prefixName%20%3D%20d3%5FvendorPrefixes%5Bi%5D%20%2B%20name%3B%0A%20%20%20%20%20%20if%20%28prefixName%20in%20object%29%20return%20prefixName%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20var%20d3%5FvendorPrefixes%20%3D%20%5B%20%22webkit%22%2C%20%22ms%22%2C%20%22moz%22%2C%20%22Moz%22%2C%20%22o%22%2C%20%22O%22%20%5D%3B%0A%20%20function%20d3%5Fnoop%28%29%20%7B%7D%0A%20%20d3%2Edispatch%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20dispatch%20%3D%20new%20d3%5Fdispatch%28%29%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20arguments%2Elength%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20dispatch%5Barguments%5Bi%5D%5D%20%3D%20d3%5Fdispatch%5Fevent%28dispatch%29%3B%0A%20%20%20%20return%20dispatch%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fdispatch%28%29%20%7B%7D%0A%20%20d3%5Fdispatch%2Eprototype%2Eon%20%3D%20function%28type%2C%20listener%29%20%7B%0A%20%20%20%20var%20i%20%3D%20type%2EindexOf%28%22%2E%22%29%2C%20name%20%3D%20%22%22%3B%0A%20%20%20%20if%20%28i%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20name%20%3D%20type%2Eslice%28i%20%2B%201%29%3B%0A%20%20%20%20%20%20type%20%3D%20type%2Eslice%280%2C%20i%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28type%29%20return%20arguments%2Elength%20%3C%202%20%3F%20this%5Btype%5D%2Eon%28name%29%20%3A%20this%5Btype%5D%2Eon%28name%2C%20listener%29%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%3D%202%29%20%7B%0A%20%20%20%20%20%20if%20%28listener%20%3D%3D%20null%29%20for%20%28type%20in%20this%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28this%2EhasOwnProperty%28type%29%29%20this%5Btype%5D%2Eon%28name%2C%20null%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20function%20d3%5Fdispatch%5Fevent%28dispatch%29%20%7B%0A%20%20%20%20var%20listeners%20%3D%20%5B%5D%2C%20listenerByName%20%3D%20new%20d3%5FMap%28%29%3B%0A%20%20%20%20function%20event%28%29%20%7B%0A%20%20%20%20%20%20var%20z%20%3D%20listeners%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20z%2Elength%2C%20l%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28l%20%3D%20z%5Bi%5D%2Eon%29%20l%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20return%20dispatch%3B%0A%20%20%20%20%7D%0A%20%20%20%20event%2Eon%20%3D%20function%28name%2C%20listener%29%20%7B%0A%20%20%20%20%20%20var%20l%20%3D%20listenerByName%2Eget%28name%29%2C%20i%3B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20return%20l%20%26%26%20l%2Eon%3B%0A%20%20%20%20%20%20if%20%28l%29%20%7B%0A%20%20%20%20%20%20%20%20l%2Eon%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20listeners%20%3D%20listeners%2Eslice%280%2C%20i%20%3D%20listeners%2EindexOf%28l%29%29%2Econcat%28listeners%2Eslice%28i%20%2B%201%29%29%3B%0A%20%20%20%20%20%20%20%20listenerByName%2Eremove%28name%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28listener%29%20listeners%2Epush%28listenerByName%2Eset%28name%2C%20%7B%0A%20%20%20%20%20%20%20%20on%3A%20listener%0A%20%20%20%20%20%20%7D%29%29%3B%0A%20%20%20%20%20%20return%20dispatch%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20event%3B%0A%20%20%7D%0A%20%20d3%2Eevent%20%3D%20null%3B%0A%20%20function%20d3%5FeventPreventDefault%28%29%20%7B%0A%20%20%20%20d3%2Eevent%2EpreventDefault%28%29%3B%0A%20%20%7D%0A%20%20function%20d3%5FeventSource%28%29%20%7B%0A%20%20%20%20var%20e%20%3D%20d3%2Eevent%2C%20s%3B%0A%20%20%20%20while%20%28s%20%3D%20e%2EsourceEvent%29%20e%20%3D%20s%3B%0A%20%20%20%20return%20e%3B%0A%20%20%7D%0A%20%20function%20d3%5FeventDispatch%28target%29%20%7B%0A%20%20%20%20var%20dispatch%20%3D%20new%20d3%5Fdispatch%28%29%2C%20i%20%3D%200%2C%20n%20%3D%20arguments%2Elength%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20dispatch%5Barguments%5Bi%5D%5D%20%3D%20d3%5Fdispatch%5Fevent%28dispatch%29%3B%0A%20%20%20%20dispatch%2Eof%20%3D%20function%28thiz%2C%20argumentz%29%20%7B%0A%20%20%20%20%20%20return%20function%28e1%29%20%7B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20e0%20%3D%20e1%2EsourceEvent%20%3D%20d3%2Eevent%3B%0A%20%20%20%20%20%20%20%20%20%20e1%2Etarget%20%3D%20target%3B%0A%20%20%20%20%20%20%20%20%20%20d3%2Eevent%20%3D%20e1%3B%0A%20%20%20%20%20%20%20%20%20%20dispatch%5Be1%2Etype%5D%2Eapply%28thiz%2C%20argumentz%29%3B%0A%20%20%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20%20%20d3%2Eevent%20%3D%20e0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20dispatch%3B%0A%20%20%7D%0A%20%20d3%2Erequote%20%3D%20function%28s%29%20%7B%0A%20%20%20%20return%20s%2Ereplace%28d3%5Frequote%5Fre%2C%20%22%5C%5C%24%26%22%29%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Frequote%5Fre%20%3D%20%2F%5B%5C%5C%5C%5E%5C%24%5C%2A%5C%2B%5C%3F%5C%7C%5C%5B%5C%5D%5C%28%5C%29%5C%2E%5C%7B%5C%7D%5D%2Fg%3B%0A%20%20var%20d3%5Fsubclass%20%3D%20%7B%7D%2E%5F%5Fproto%5F%5F%20%3F%20function%28object%2C%20prototype%29%20%7B%0A%20%20%20%20object%2E%5F%5Fproto%5F%5F%20%3D%20prototype%3B%0A%20%20%7D%20%3A%20function%28object%2C%20prototype%29%20%7B%0A%20%20%20%20for%20%28var%20property%20in%20prototype%29%20object%5Bproperty%5D%20%3D%20prototype%5Bproperty%5D%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%28groups%29%20%7B%0A%20%20%20%20d3%5Fsubclass%28groups%2C%20d3%5FselectionPrototype%29%3B%0A%20%20%20%20return%20groups%3B%0A%20%20%7D%0A%20%20var%20d3%5Fselect%20%3D%20function%28s%2C%20n%29%20%7B%0A%20%20%20%20return%20n%2EquerySelector%28s%29%3B%0A%20%20%7D%2C%20d3%5FselectAll%20%3D%20function%28s%2C%20n%29%20%7B%0A%20%20%20%20return%20n%2EquerySelectorAll%28s%29%3B%0A%20%20%7D%2C%20d3%5FselectMatcher%20%3D%20d3%5FdocumentElement%2Ematches%20%7C%7C%20d3%5FdocumentElement%5Bd3%5FvendorSymbol%28d3%5FdocumentElement%2C%20%22matchesSelector%22%29%5D%2C%20d3%5FselectMatches%20%3D%20function%28n%2C%20s%29%20%7B%0A%20%20%20%20return%20d3%5FselectMatcher%2Ecall%28n%2C%20s%29%3B%0A%20%20%7D%3B%0A%20%20if%20%28typeof%20Sizzle%20%3D%3D%3D%20%22function%22%29%20%7B%0A%20%20%20%20d3%5Fselect%20%3D%20function%28s%2C%20n%29%20%7B%0A%20%20%20%20%20%20return%20Sizzle%28s%2C%20n%29%5B0%5D%20%7C%7C%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20d3%5FselectAll%20%3D%20Sizzle%3B%0A%20%20%20%20d3%5FselectMatches%20%3D%20Sizzle%2EmatchesSelector%3B%0A%20%20%7D%0A%20%20d3%2Eselection%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5FselectionRoot%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5FselectionPrototype%20%3D%20d3%2Eselection%2Eprototype%20%3D%20%5B%5D%3B%0A%20%20d3%5FselectionPrototype%2Eselect%20%3D%20function%28selector%29%20%7B%0A%20%20%20%20var%20subgroups%20%3D%20%5B%5D%2C%20subgroup%2C%20subnode%2C%20group%2C%20node%3B%0A%20%20%20%20selector%20%3D%20d3%5Fselection%5Fselector%28selector%29%3B%0A%20%20%20%20for%20%28var%20j%20%3D%20%2D1%2C%20m%20%3D%20this%2Elength%3B%20%2B%2Bj%20%3C%20m%3B%20%29%20%7B%0A%20%20%20%20%20%20subgroups%2Epush%28subgroup%20%3D%20%5B%5D%29%3B%0A%20%20%20%20%20%20subgroup%2EparentNode%20%3D%20%28group%20%3D%20this%5Bj%5D%29%2EparentNode%3B%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%20%2D1%2C%20n%20%3D%20group%2Elength%3B%20%2B%2Bi%20%3C%20n%3B%20%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28node%20%3D%20group%5Bi%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20subgroup%2Epush%28subnode%20%3D%20selector%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%2C%20j%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28subnode%20%26%26%20%22%5F%5Fdata%5F%5F%22%20in%20node%29%20subnode%2E%5F%5Fdata%5F%5F%20%3D%20node%2E%5F%5Fdata%5F%5F%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20subgroup%2Epush%28null%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5Fselection%28subgroups%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5Fselector%28selector%29%20%7B%0A%20%20%20%20return%20typeof%20selector%20%3D%3D%3D%20%22function%22%20%3F%20selector%20%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fselect%28selector%2C%20this%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%5FselectionPrototype%2EselectAll%20%3D%20function%28selector%29%20%7B%0A%20%20%20%20var%20subgroups%20%3D%20%5B%5D%2C%20subgroup%2C%20node%3B%0A%20%20%20%20selector%20%3D%20d3%5Fselection%5FselectorAll%28selector%29%3B%0A%20%20%20%20for%20%28var%20j%20%3D%20%2D1%2C%20m%20%3D%20this%2Elength%3B%20%2B%2Bj%20%3C%20m%3B%20%29%20%7B%0A%20%20%20%20%20%20for%20%28var%20group%20%3D%20this%5Bj%5D%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20group%2Elength%3B%20%2B%2Bi%20%3C%20n%3B%20%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28node%20%3D%20group%5Bi%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20subgroups%2Epush%28subgroup%20%3D%20d3%5Farray%28selector%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%2C%20j%29%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20subgroup%2EparentNode%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5Fselection%28subgroups%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5FselectorAll%28selector%29%20%7B%0A%20%20%20%20return%20typeof%20selector%20%3D%3D%3D%20%22function%22%20%3F%20selector%20%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5FselectAll%28selector%2C%20this%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20var%20d3%5FnsPrefix%20%3D%20%7B%0A%20%20%20%20svg%3A%20%22http%3A%2F%2Fwww%2Ew3%2Eorg%2F2000%2Fsvg%22%2C%0A%20%20%20%20xhtml%3A%20%22http%3A%2F%2Fwww%2Ew3%2Eorg%2F1999%2Fxhtml%22%2C%0A%20%20%20%20xlink%3A%20%22http%3A%2F%2Fwww%2Ew3%2Eorg%2F1999%2Fxlink%22%2C%0A%20%20%20%20xml%3A%20%22http%3A%2F%2Fwww%2Ew3%2Eorg%2FXML%2F1998%2Fnamespace%22%2C%0A%20%20%20%20xmlns%3A%20%22http%3A%2F%2Fwww%2Ew3%2Eorg%2F2000%2Fxmlns%2F%22%0A%20%20%7D%3B%0A%20%20d3%2Ens%20%3D%20%7B%0A%20%20%20%20prefix%3A%20d3%5FnsPrefix%2C%0A%20%20%20%20qualify%3A%20function%28name%29%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20name%2EindexOf%28%22%3A%22%29%2C%20prefix%20%3D%20name%3B%0A%20%20%20%20%20%20if%20%28i%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20prefix%20%3D%20name%2Eslice%280%2C%20i%29%3B%0A%20%20%20%20%20%20%20%20name%20%3D%20name%2Eslice%28i%20%2B%201%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20d3%5FnsPrefix%2EhasOwnProperty%28prefix%29%20%3F%20%7B%0A%20%20%20%20%20%20%20%20space%3A%20d3%5FnsPrefix%5Bprefix%5D%2C%0A%20%20%20%20%20%20%20%20local%3A%20name%0A%20%20%20%20%20%20%7D%20%3A%20name%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20d3%5FselectionPrototype%2Eattr%20%3D%20function%28name%2C%20value%29%20%7B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20%7B%0A%20%20%20%20%20%20if%20%28typeof%20name%20%3D%3D%3D%20%22string%22%29%20%7B%0A%20%20%20%20%20%20%20%20var%20node%20%3D%20this%2Enode%28%29%3B%0A%20%20%20%20%20%20%20%20name%20%3D%20d3%2Ens%2Equalify%28name%29%3B%0A%20%20%20%20%20%20%20%20return%20name%2Elocal%20%3F%20node%2EgetAttributeNS%28name%2Espace%2C%20name%2Elocal%29%20%3A%20node%2EgetAttribute%28name%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20%28value%20in%20name%29%20this%2Eeach%28d3%5Fselection%5Fattr%28value%2C%20name%5Bvalue%5D%29%29%3B%0A%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20this%2Eeach%28d3%5Fselection%5Fattr%28name%2C%20value%29%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5Fattr%28name%2C%20value%29%20%7B%0A%20%20%20%20name%20%3D%20d3%2Ens%2Equalify%28name%29%3B%0A%20%20%20%20function%20attrNull%28%29%20%7B%0A%20%20%20%20%20%20this%2EremoveAttribute%28name%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20attrNullNS%28%29%20%7B%0A%20%20%20%20%20%20this%2EremoveAttributeNS%28name%2Espace%2C%20name%2Elocal%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20attrConstant%28%29%20%7B%0A%20%20%20%20%20%20this%2EsetAttribute%28name%2C%20value%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20attrConstantNS%28%29%20%7B%0A%20%20%20%20%20%20this%2EsetAttributeNS%28name%2Espace%2C%20name%2Elocal%2C%20value%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20attrFunction%28%29%20%7B%0A%20%20%20%20%20%20var%20x%20%3D%20value%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20if%20%28x%20%3D%3D%20null%29%20this%2EremoveAttribute%28name%29%3B%20else%20this%2EsetAttribute%28name%2C%20x%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20attrFunctionNS%28%29%20%7B%0A%20%20%20%20%20%20var%20x%20%3D%20value%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20if%20%28x%20%3D%3D%20null%29%20this%2EremoveAttributeNS%28name%2Espace%2C%20name%2Elocal%29%3B%20else%20this%2EsetAttributeNS%28name%2Espace%2C%20name%2Elocal%2C%20x%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20value%20%3D%3D%20null%20%3F%20name%2Elocal%20%3F%20attrNullNS%20%3A%20attrNull%20%3A%20typeof%20value%20%3D%3D%3D%20%22function%22%20%3F%20name%2Elocal%20%3F%20attrFunctionNS%20%3A%20attrFunction%20%3A%20name%2Elocal%20%3F%20attrConstantNS%20%3A%20attrConstant%3B%0A%20%20%7D%0A%20%20function%20d3%5Fcollapse%28s%29%20%7B%0A%20%20%20%20return%20s%2Etrim%28%29%2Ereplace%28%2F%5Cs%2B%2Fg%2C%20%22%20%22%29%3B%0A%20%20%7D%0A%20%20d3%5FselectionPrototype%2Eclassed%20%3D%20function%28name%2C%20value%29%20%7B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20%7B%0A%20%20%20%20%20%20if%20%28typeof%20name%20%3D%3D%3D%20%22string%22%29%20%7B%0A%20%20%20%20%20%20%20%20var%20node%20%3D%20this%2Enode%28%29%2C%20n%20%3D%20%28name%20%3D%20d3%5Fselection%5Fclasses%28name%29%29%2Elength%2C%20i%20%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20if%20%28value%20%3D%20node%2EclassList%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%21value%2Econtains%28name%5Bi%5D%29%29%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20value%20%3D%20node%2EgetAttribute%28%22class%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%21d3%5Fselection%5FclassedRe%28name%5Bi%5D%29%2Etest%28value%29%29%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20%28value%20in%20name%29%20this%2Eeach%28d3%5Fselection%5Fclassed%28value%2C%20name%5Bvalue%5D%29%29%3B%0A%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20this%2Eeach%28d3%5Fselection%5Fclassed%28name%2C%20value%29%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5FclassedRe%28name%29%20%7B%0A%20%20%20%20return%20new%20RegExp%28%22%28%3F%3A%5E%7C%5C%5Cs%2B%29%22%20%2B%20d3%2Erequote%28name%29%20%2B%20%22%28%3F%3A%5C%5Cs%2B%7C%24%29%22%2C%20%22g%22%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fselection%5Fclasses%28name%29%20%7B%0A%20%20%20%20return%20%28name%20%2B%20%22%22%29%2Etrim%28%29%2Esplit%28%2F%5E%7C%5Cs%2B%2F%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fselection%5Fclassed%28name%2C%20value%29%20%7B%0A%20%20%20%20name%20%3D%20d3%5Fselection%5Fclasses%28name%29%2Emap%28d3%5Fselection%5FclassedName%29%3B%0A%20%20%20%20var%20n%20%3D%20name%2Elength%3B%0A%20%20%20%20function%20classedConstant%28%29%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20%2D1%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20name%5Bi%5D%28this%2C%20value%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20classedFunction%28%29%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20%2D1%2C%20x%20%3D%20value%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20name%5Bi%5D%28this%2C%20x%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20typeof%20value%20%3D%3D%3D%20%22function%22%20%3F%20classedFunction%20%3A%20classedConstant%3B%0A%20%20%7D%0A%20%20function%20d3%5Fselection%5FclassedName%28name%29%20%7B%0A%20%20%20%20var%20re%20%3D%20d3%5Fselection%5FclassedRe%28name%29%3B%0A%20%20%20%20return%20function%28node%2C%20value%29%20%7B%0A%20%20%20%20%20%20if%20%28c%20%3D%20node%2EclassList%29%20return%20value%20%3F%20c%2Eadd%28name%29%20%3A%20c%2Eremove%28name%29%3B%0A%20%20%20%20%20%20var%20c%20%3D%20node%2EgetAttribute%28%22class%22%29%20%7C%7C%20%22%22%3B%0A%20%20%20%20%20%20if%20%28value%29%20%7B%0A%20%20%20%20%20%20%20%20re%2ElastIndex%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20%28%21re%2Etest%28c%29%29%20node%2EsetAttribute%28%22class%22%2C%20d3%5Fcollapse%28c%20%2B%20%22%20%22%20%2B%20name%29%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20node%2EsetAttribute%28%22class%22%2C%20d3%5Fcollapse%28c%2Ereplace%28re%2C%20%22%20%22%29%29%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%5FselectionPrototype%2Estyle%20%3D%20function%28name%2C%20value%2C%20priority%29%20%7B%0A%20%20%20%20var%20n%20%3D%20arguments%2Elength%3B%0A%20%20%20%20if%20%28n%20%3C%203%29%20%7B%0A%20%20%20%20%20%20if%20%28typeof%20name%20%21%3D%3D%20%22string%22%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28n%20%3C%202%29%20value%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20for%20%28priority%20in%20name%29%20this%2Eeach%28d3%5Fselection%5Fstyle%28priority%2C%20name%5Bpriority%5D%2C%20value%29%29%3B%0A%20%20%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28n%20%3C%202%29%20return%20d3%5Fwindow%2EgetComputedStyle%28this%2Enode%28%29%2C%20null%29%2EgetPropertyValue%28name%29%3B%0A%20%20%20%20%20%20priority%20%3D%20%22%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20this%2Eeach%28d3%5Fselection%5Fstyle%28name%2C%20value%2C%20priority%29%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5Fstyle%28name%2C%20value%2C%20priority%29%20%7B%0A%20%20%20%20function%20styleNull%28%29%20%7B%0A%20%20%20%20%20%20this%2Estyle%2EremoveProperty%28name%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20styleConstant%28%29%20%7B%0A%20%20%20%20%20%20this%2Estyle%2EsetProperty%28name%2C%20value%2C%20priority%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20styleFunction%28%29%20%7B%0A%20%20%20%20%20%20var%20x%20%3D%20value%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20if%20%28x%20%3D%3D%20null%29%20this%2Estyle%2EremoveProperty%28name%29%3B%20else%20this%2Estyle%2EsetProperty%28name%2C%20x%2C%20priority%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20value%20%3D%3D%20null%20%3F%20styleNull%20%3A%20typeof%20value%20%3D%3D%3D%20%22function%22%20%3F%20styleFunction%20%3A%20styleConstant%3B%0A%20%20%7D%0A%20%20d3%5FselectionPrototype%2Eproperty%20%3D%20function%28name%2C%20value%29%20%7B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20%7B%0A%20%20%20%20%20%20if%20%28typeof%20name%20%3D%3D%3D%20%22string%22%29%20return%20this%2Enode%28%29%5Bname%5D%3B%0A%20%20%20%20%20%20for%20%28value%20in%20name%29%20this%2Eeach%28d3%5Fselection%5Fproperty%28value%2C%20name%5Bvalue%5D%29%29%3B%0A%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20this%2Eeach%28d3%5Fselection%5Fproperty%28name%2C%20value%29%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5Fproperty%28name%2C%20value%29%20%7B%0A%20%20%20%20function%20propertyNull%28%29%20%7B%0A%20%20%20%20%20%20delete%20this%5Bname%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20propertyConstant%28%29%20%7B%0A%20%20%20%20%20%20this%5Bname%5D%20%3D%20value%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20propertyFunction%28%29%20%7B%0A%20%20%20%20%20%20var%20x%20%3D%20value%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20if%20%28x%20%3D%3D%20null%29%20delete%20this%5Bname%5D%3B%20else%20this%5Bname%5D%20%3D%20x%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20value%20%3D%3D%20null%20%3F%20propertyNull%20%3A%20typeof%20value%20%3D%3D%3D%20%22function%22%20%3F%20propertyFunction%20%3A%20propertyConstant%3B%0A%20%20%7D%0A%20%20d3%5FselectionPrototype%2Etext%20%3D%20function%28value%29%20%7B%0A%20%20%20%20return%20arguments%2Elength%20%3F%20this%2Eeach%28typeof%20value%20%3D%3D%3D%20%22function%22%20%3F%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20v%20%3D%20value%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20this%2EtextContent%20%3D%20v%20%3D%3D%20null%20%3F%20%22%22%20%3A%20v%3B%0A%20%20%20%20%7D%20%3A%20value%20%3D%3D%20null%20%3F%20function%28%29%20%7B%0A%20%20%20%20%20%20this%2EtextContent%20%3D%20%22%22%3B%0A%20%20%20%20%7D%20%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20this%2EtextContent%20%3D%20value%3B%0A%20%20%20%20%7D%29%20%3A%20this%2Enode%28%29%2EtextContent%3B%0A%20%20%7D%3B%0A%20%20d3%5FselectionPrototype%2Ehtml%20%3D%20function%28value%29%20%7B%0A%20%20%20%20return%20arguments%2Elength%20%3F%20this%2Eeach%28typeof%20value%20%3D%3D%3D%20%22function%22%20%3F%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20v%20%3D%20value%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20this%2EinnerHTML%20%3D%20v%20%3D%3D%20null%20%3F%20%22%22%20%3A%20v%3B%0A%20%20%20%20%7D%20%3A%20value%20%3D%3D%20null%20%3F%20function%28%29%20%7B%0A%20%20%20%20%20%20this%2EinnerHTML%20%3D%20%22%22%3B%0A%20%20%20%20%7D%20%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20this%2EinnerHTML%20%3D%20value%3B%0A%20%20%20%20%7D%29%20%3A%20this%2Enode%28%29%2EinnerHTML%3B%0A%20%20%7D%3B%0A%20%20d3%5FselectionPrototype%2Eappend%20%3D%20function%28name%29%20%7B%0A%20%20%20%20name%20%3D%20d3%5Fselection%5Fcreator%28name%29%3B%0A%20%20%20%20return%20this%2Eselect%28function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2EappendChild%28name%2Eapply%28this%2C%20arguments%29%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5Fcreator%28name%29%20%7B%0A%20%20%20%20return%20typeof%20name%20%3D%3D%3D%20%22function%22%20%3F%20name%20%3A%20%28name%20%3D%20d3%2Ens%2Equalify%28name%29%29%2Elocal%20%3F%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2EownerDocument%2EcreateElementNS%28name%2Espace%2C%20name%2Elocal%29%3B%0A%20%20%20%20%7D%20%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2EownerDocument%2EcreateElementNS%28this%2EnamespaceURI%2C%20name%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%5FselectionPrototype%2Einsert%20%3D%20function%28name%2C%20before%29%20%7B%0A%20%20%20%20name%20%3D%20d3%5Fselection%5Fcreator%28name%29%3B%0A%20%20%20%20before%20%3D%20d3%5Fselection%5Fselector%28before%29%3B%0A%20%20%20%20return%20this%2Eselect%28function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2EinsertBefore%28name%2Eapply%28this%2C%20arguments%29%2C%20before%2Eapply%28this%2C%20arguments%29%20%7C%7C%20null%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FselectionPrototype%2Eremove%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20this%2Eeach%28d3%5FselectionRemove%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5FselectionRemove%28%29%20%7B%0A%20%20%20%20var%20parent%20%3D%20this%2EparentNode%3B%0A%20%20%20%20if%20%28parent%29%20parent%2EremoveChild%28this%29%3B%0A%20%20%7D%0A%20%20d3%5FselectionPrototype%2Edata%20%3D%20function%28value%2C%20key%29%20%7B%0A%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20this%2Elength%2C%20group%2C%20node%3B%0A%20%20%20%20if%20%28%21arguments%2Elength%29%20%7B%0A%20%20%20%20%20%20value%20%3D%20new%20Array%28n%20%3D%20%28group%20%3D%20this%5B0%5D%29%2Elength%29%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28node%20%3D%20group%5Bi%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20value%5Bi%5D%20%3D%20node%2E%5F%5Fdata%5F%5F%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20bind%28group%2C%20groupData%29%20%7B%0A%20%20%20%20%20%20var%20i%2C%20n%20%3D%20group%2Elength%2C%20m%20%3D%20groupData%2Elength%2C%20n0%20%3D%20Math%2Emin%28n%2C%20m%29%2C%20updateNodes%20%3D%20new%20Array%28m%29%2C%20enterNodes%20%3D%20new%20Array%28m%29%2C%20exitNodes%20%3D%20new%20Array%28n%29%2C%20node%2C%20nodeData%3B%0A%20%20%20%20%20%20if%20%28key%29%20%7B%0A%20%20%20%20%20%20%20%20var%20nodeByKeyValue%20%3D%20new%20d3%5FMap%28%29%2C%20keyValues%20%3D%20new%20Array%28n%29%2C%20keyValue%3B%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%20%2D1%3B%20%2B%2Bi%20%3C%20n%3B%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28nodeByKeyValue%2Ehas%28keyValue%20%3D%20key%2Ecall%28node%20%3D%20group%5Bi%5D%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%29%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20exitNodes%5Bi%5D%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20nodeByKeyValue%2Eset%28keyValue%2C%20node%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20keyValues%5Bi%5D%20%3D%20keyValue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%20%2D1%3B%20%2B%2Bi%20%3C%20m%3B%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21%28node%20%3D%20nodeByKeyValue%2Eget%28keyValue%20%3D%20key%2Ecall%28groupData%2C%20nodeData%20%3D%20groupData%5Bi%5D%2C%20i%29%29%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20enterNodes%5Bi%5D%20%3D%20d3%5Fselection%5FdataNode%28nodeData%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28node%20%21%3D%3D%20true%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20updateNodes%5Bi%5D%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20node%2E%5F%5Fdata%5F%5F%20%3D%20nodeData%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20nodeByKeyValue%2Eset%28keyValue%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%20%2D1%3B%20%2B%2Bi%20%3C%20n%3B%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28nodeByKeyValue%2Eget%28keyValues%5Bi%5D%29%20%21%3D%3D%20true%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20exitNodes%5Bi%5D%20%3D%20group%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%20%2D1%3B%20%2B%2Bi%20%3C%20n0%3B%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%20%3D%20group%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20nodeData%20%3D%20groupData%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28node%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node%2E%5F%5Fdata%5F%5F%20%3D%20nodeData%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20updateNodes%5Bi%5D%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20enterNodes%5Bi%5D%20%3D%20d3%5Fselection%5FdataNode%28nodeData%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20%28%3Bi%20%3C%20m%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20enterNodes%5Bi%5D%20%3D%20d3%5Fselection%5FdataNode%28groupData%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20%28%3Bi%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20exitNodes%5Bi%5D%20%3D%20group%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20enterNodes%2Eupdate%20%3D%20updateNodes%3B%0A%20%20%20%20%20%20enterNodes%2EparentNode%20%3D%20updateNodes%2EparentNode%20%3D%20exitNodes%2EparentNode%20%3D%20group%2EparentNode%3B%0A%20%20%20%20%20%20enter%2Epush%28enterNodes%29%3B%0A%20%20%20%20%20%20update%2Epush%28updateNodes%29%3B%0A%20%20%20%20%20%20exit%2Epush%28exitNodes%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20enter%20%3D%20d3%5Fselection%5Fenter%28%5B%5D%29%2C%20update%20%3D%20d3%5Fselection%28%5B%5D%29%2C%20exit%20%3D%20d3%5Fselection%28%5B%5D%29%3B%0A%20%20%20%20if%20%28typeof%20value%20%3D%3D%3D%20%22function%22%29%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20bind%28group%20%3D%20this%5Bi%5D%2C%20value%2Ecall%28group%2C%20group%2EparentNode%2E%5F%5Fdata%5F%5F%2C%20i%29%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20bind%28group%20%3D%20this%5Bi%5D%2C%20value%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20update%2Eenter%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20enter%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20update%2Eexit%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20exit%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20update%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5FdataNode%28data%29%20%7B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%5F%5Fdata%5F%5F%3A%20data%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%5FselectionPrototype%2Edatum%20%3D%20function%28value%29%20%7B%0A%20%20%20%20return%20arguments%2Elength%20%3F%20this%2Eproperty%28%22%5F%5Fdata%5F%5F%22%2C%20value%29%20%3A%20this%2Eproperty%28%22%5F%5Fdata%5F%5F%22%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FselectionPrototype%2Efilter%20%3D%20function%28filter%29%20%7B%0A%20%20%20%20var%20subgroups%20%3D%20%5B%5D%2C%20subgroup%2C%20group%2C%20node%3B%0A%20%20%20%20if%20%28typeof%20filter%20%21%3D%3D%20%22function%22%29%20filter%20%3D%20d3%5Fselection%5Ffilter%28filter%29%3B%0A%20%20%20%20for%20%28var%20j%20%3D%200%2C%20m%20%3D%20this%2Elength%3B%20j%20%3C%20m%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20subgroups%2Epush%28subgroup%20%3D%20%5B%5D%29%3B%0A%20%20%20%20%20%20subgroup%2EparentNode%20%3D%20%28group%20%3D%20this%5Bj%5D%29%2EparentNode%3B%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20n%20%3D%20group%2Elength%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%28node%20%3D%20group%5Bi%5D%29%20%26%26%20filter%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%2C%20j%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20subgroup%2Epush%28node%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5Fselection%28subgroups%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5Ffilter%28selector%29%20%7B%0A%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5FselectMatches%28this%2C%20selector%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%5FselectionPrototype%2Eorder%20%3D%20function%28%29%20%7B%0A%20%20%20%20for%20%28var%20j%20%3D%20%2D1%2C%20m%20%3D%20this%2Elength%3B%20%2B%2Bj%20%3C%20m%3B%20%29%20%7B%0A%20%20%20%20%20%20for%20%28var%20group%20%3D%20this%5Bj%5D%2C%20i%20%3D%20group%2Elength%20%2D%201%2C%20next%20%3D%20group%5Bi%5D%2C%20node%3B%20%2D%2Di%20%3E%3D%200%3B%20%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28node%20%3D%20group%5Bi%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28next%20%26%26%20next%20%21%3D%3D%20node%2EnextSibling%29%20next%2EparentNode%2EinsertBefore%28node%2C%20next%29%3B%0A%20%20%20%20%20%20%20%20%20%20next%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20this%3B%0A%20%20%7D%3B%0A%20%20d3%5FselectionPrototype%2Esort%20%3D%20function%28comparator%29%20%7B%0A%20%20%20%20comparator%20%3D%20d3%5Fselection%5FsortComparator%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20for%20%28var%20j%20%3D%20%2D1%2C%20m%20%3D%20this%2Elength%3B%20%2B%2Bj%20%3C%20m%3B%20%29%20this%5Bj%5D%2Esort%28comparator%29%3B%0A%20%20%20%20return%20this%2Eorder%28%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5FsortComparator%28comparator%29%20%7B%0A%20%20%20%20if%20%28%21arguments%2Elength%29%20comparator%20%3D%20d3%5Fascending%3B%0A%20%20%20%20return%20function%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20return%20a%20%26%26%20b%20%3F%20comparator%28a%2E%5F%5Fdata%5F%5F%2C%20b%2E%5F%5Fdata%5F%5F%29%20%3A%20%21a%20%2D%20%21b%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%5FselectionPrototype%2Eeach%20%3D%20function%28callback%29%20%7B%0A%20%20%20%20return%20d3%5Fselection%5Feach%28this%2C%20function%28node%2C%20i%2C%20j%29%20%7B%0A%20%20%20%20%20%20callback%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%2C%20j%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5Feach%28groups%2C%20callback%29%20%7B%0A%20%20%20%20for%20%28var%20j%20%3D%200%2C%20m%20%3D%20groups%2Elength%3B%20j%20%3C%20m%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20for%20%28var%20group%20%3D%20groups%5Bj%5D%2C%20i%20%3D%200%2C%20n%20%3D%20group%2Elength%2C%20node%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28node%20%3D%20group%5Bi%5D%29%20callback%28node%2C%20i%2C%20j%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20groups%3B%0A%20%20%7D%0A%20%20d3%5FselectionPrototype%2Ecall%20%3D%20function%28callback%29%20%7B%0A%20%20%20%20var%20args%20%3D%20d3%5Farray%28arguments%29%3B%0A%20%20%20%20callback%2Eapply%28args%5B0%5D%20%3D%20this%2C%20args%29%3B%0A%20%20%20%20return%20this%3B%0A%20%20%7D%3B%0A%20%20d3%5FselectionPrototype%2Eempty%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20%21this%2Enode%28%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FselectionPrototype%2Enode%20%3D%20function%28%29%20%7B%0A%20%20%20%20for%20%28var%20j%20%3D%200%2C%20m%20%3D%20this%2Elength%3B%20j%20%3C%20m%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20for%20%28var%20group%20%3D%20this%5Bj%5D%2C%20i%20%3D%200%2C%20n%20%3D%20group%2Elength%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20var%20node%20%3D%20group%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28node%29%20return%20node%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20null%3B%0A%20%20%7D%3B%0A%20%20d3%5FselectionPrototype%2Esize%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20n%20%3D%200%3B%0A%20%20%20%20d3%5Fselection%5Feach%28this%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%2B%2Bn%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20return%20n%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5Fenter%28selection%29%20%7B%0A%20%20%20%20d3%5Fsubclass%28selection%2C%20d3%5Fselection%5FenterPrototype%29%3B%0A%20%20%20%20return%20selection%3B%0A%20%20%7D%0A%20%20var%20d3%5Fselection%5FenterPrototype%20%3D%20%5B%5D%3B%0A%20%20d3%2Eselection%2Eenter%20%3D%20d3%5Fselection%5Fenter%3B%0A%20%20d3%2Eselection%2Eenter%2Eprototype%20%3D%20d3%5Fselection%5FenterPrototype%3B%0A%20%20d3%5Fselection%5FenterPrototype%2Eappend%20%3D%20d3%5FselectionPrototype%2Eappend%3B%0A%20%20d3%5Fselection%5FenterPrototype%2Eempty%20%3D%20d3%5FselectionPrototype%2Eempty%3B%0A%20%20d3%5Fselection%5FenterPrototype%2Enode%20%3D%20d3%5FselectionPrototype%2Enode%3B%0A%20%20d3%5Fselection%5FenterPrototype%2Ecall%20%3D%20d3%5FselectionPrototype%2Ecall%3B%0A%20%20d3%5Fselection%5FenterPrototype%2Esize%20%3D%20d3%5FselectionPrototype%2Esize%3B%0A%20%20d3%5Fselection%5FenterPrototype%2Eselect%20%3D%20function%28selector%29%20%7B%0A%20%20%20%20var%20subgroups%20%3D%20%5B%5D%2C%20subgroup%2C%20subnode%2C%20upgroup%2C%20group%2C%20node%3B%0A%20%20%20%20for%20%28var%20j%20%3D%20%2D1%2C%20m%20%3D%20this%2Elength%3B%20%2B%2Bj%20%3C%20m%3B%20%29%20%7B%0A%20%20%20%20%20%20upgroup%20%3D%20%28group%20%3D%20this%5Bj%5D%29%2Eupdate%3B%0A%20%20%20%20%20%20subgroups%2Epush%28subgroup%20%3D%20%5B%5D%29%3B%0A%20%20%20%20%20%20subgroup%2EparentNode%20%3D%20group%2EparentNode%3B%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%20%2D1%2C%20n%20%3D%20group%2Elength%3B%20%2B%2Bi%20%3C%20n%3B%20%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28node%20%3D%20group%5Bi%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20subgroup%2Epush%28upgroup%5Bi%5D%20%3D%20subnode%20%3D%20selector%2Ecall%28group%2EparentNode%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%2C%20j%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20subnode%2E%5F%5Fdata%5F%5F%20%3D%20node%2E%5F%5Fdata%5F%5F%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20subgroup%2Epush%28null%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5Fselection%28subgroups%29%3B%0A%20%20%7D%3B%0A%20%20d3%5Fselection%5FenterPrototype%2Einsert%20%3D%20function%28name%2C%20before%29%20%7B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20before%20%3D%20d3%5Fselection%5FenterInsertBefore%28this%29%3B%0A%20%20%20%20return%20d3%5FselectionPrototype%2Einsert%2Ecall%28this%2C%20name%2C%20before%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5FenterInsertBefore%28enter%29%20%7B%0A%20%20%20%20var%20i0%2C%20j0%3B%0A%20%20%20%20return%20function%28d%2C%20i%2C%20j%29%20%7B%0A%20%20%20%20%20%20var%20group%20%3D%20enter%5Bj%5D%2Eupdate%2C%20n%20%3D%20group%2Elength%2C%20node%3B%0A%20%20%20%20%20%20if%20%28j%20%21%3D%20j0%29%20j0%20%3D%20j%2C%20i0%20%3D%200%3B%0A%20%20%20%20%20%20if%20%28i%20%3E%3D%20i0%29%20i0%20%3D%20i%20%2B%201%3B%0A%20%20%20%20%20%20while%20%28%21%28node%20%3D%20group%5Bi0%5D%29%20%26%26%20%2B%2Bi0%20%3C%20n%29%20%3B%0A%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2Eselect%20%3D%20function%28node%29%20%7B%0A%20%20%20%20var%20group%20%3D%20%5B%20typeof%20node%20%3D%3D%3D%20%22string%22%20%3F%20d3%5Fselect%28node%2C%20d3%5Fdocument%29%20%3A%20node%20%5D%3B%0A%20%20%20%20group%2EparentNode%20%3D%20d3%5FdocumentElement%3B%0A%20%20%20%20return%20d3%5Fselection%28%5B%20group%20%5D%29%3B%0A%20%20%7D%3B%0A%20%20d3%2EselectAll%20%3D%20function%28nodes%29%20%7B%0A%20%20%20%20var%20group%20%3D%20d3%5Farray%28typeof%20nodes%20%3D%3D%3D%20%22string%22%20%3F%20d3%5FselectAll%28nodes%2C%20d3%5Fdocument%29%20%3A%20nodes%29%3B%0A%20%20%20%20group%2EparentNode%20%3D%20d3%5FdocumentElement%3B%0A%20%20%20%20return%20d3%5Fselection%28%5B%20group%20%5D%29%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5FselectionRoot%20%3D%20d3%2Eselect%28d3%5FdocumentElement%29%3B%0A%20%20d3%5FselectionPrototype%2Eon%20%3D%20function%28type%2C%20listener%2C%20capture%29%20%7B%0A%20%20%20%20var%20n%20%3D%20arguments%2Elength%3B%0A%20%20%20%20if%20%28n%20%3C%203%29%20%7B%0A%20%20%20%20%20%20if%20%28typeof%20type%20%21%3D%3D%20%22string%22%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28n%20%3C%202%29%20listener%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20for%20%28capture%20in%20type%29%20this%2Eeach%28d3%5Fselection%5Fon%28capture%2C%20type%5Bcapture%5D%2C%20listener%29%29%3B%0A%20%20%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28n%20%3C%202%29%20return%20%28n%20%3D%20this%2Enode%28%29%5B%22%5F%5Fon%22%20%2B%20type%5D%29%20%26%26%20n%2E%5F%3B%0A%20%20%20%20%20%20capture%20%3D%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20this%2Eeach%28d3%5Fselection%5Fon%28type%2C%20listener%2C%20capture%29%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fselection%5Fon%28type%2C%20listener%2C%20capture%29%20%7B%0A%20%20%20%20var%20name%20%3D%20%22%5F%5Fon%22%20%2B%20type%2C%20i%20%3D%20type%2EindexOf%28%22%2E%22%29%2C%20wrap%20%3D%20d3%5Fselection%5FonListener%3B%0A%20%20%20%20if%20%28i%20%3E%200%29%20type%20%3D%20type%2Eslice%280%2C%20i%29%3B%0A%20%20%20%20var%20filter%20%3D%20d3%5Fselection%5FonFilters%2Eget%28type%29%3B%0A%20%20%20%20if%20%28filter%29%20type%20%3D%20filter%2C%20wrap%20%3D%20d3%5Fselection%5FonFilter%3B%0A%20%20%20%20function%20onRemove%28%29%20%7B%0A%20%20%20%20%20%20var%20l%20%3D%20this%5Bname%5D%3B%0A%20%20%20%20%20%20if%20%28l%29%20%7B%0A%20%20%20%20%20%20%20%20this%2EremoveEventListener%28type%2C%20l%2C%20l%2E%24%29%3B%0A%20%20%20%20%20%20%20%20delete%20this%5Bname%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20function%20onAdd%28%29%20%7B%0A%20%20%20%20%20%20var%20l%20%3D%20wrap%28listener%2C%20d3%5Farray%28arguments%29%29%3B%0A%20%20%20%20%20%20onRemove%2Ecall%28this%29%3B%0A%20%20%20%20%20%20this%2EaddEventListener%28type%2C%20this%5Bname%5D%20%3D%20l%2C%20l%2E%24%20%3D%20capture%29%3B%0A%20%20%20%20%20%20l%2E%5F%20%3D%20listener%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20removeAll%28%29%20%7B%0A%20%20%20%20%20%20var%20re%20%3D%20new%20RegExp%28%22%5E%5F%5Fon%28%5B%5E%2E%5D%2B%29%22%20%2B%20d3%2Erequote%28type%29%20%2B%20%22%24%22%29%2C%20match%3B%0A%20%20%20%20%20%20for%20%28var%20name%20in%20this%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28match%20%3D%20name%2Ematch%28re%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20l%20%3D%20this%5Bname%5D%3B%0A%20%20%20%20%20%20%20%20%20%20this%2EremoveEventListener%28match%5B1%5D%2C%20l%2C%20l%2E%24%29%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20this%5Bname%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20i%20%3F%20listener%20%3F%20onAdd%20%3A%20onRemove%20%3A%20listener%20%3F%20d3%5Fnoop%20%3A%20removeAll%3B%0A%20%20%7D%0A%20%20var%20d3%5Fselection%5FonFilters%20%3D%20d3%2Emap%28%7B%0A%20%20%20%20mouseenter%3A%20%22mouseover%22%2C%0A%20%20%20%20mouseleave%3A%20%22mouseout%22%0A%20%20%7D%29%3B%0A%20%20d3%5Fselection%5FonFilters%2EforEach%28function%28k%29%20%7B%0A%20%20%20%20if%20%28%22on%22%20%2B%20k%20in%20d3%5Fdocument%29%20d3%5Fselection%5FonFilters%2Eremove%28k%29%3B%0A%20%20%7D%29%3B%0A%20%20function%20d3%5Fselection%5FonListener%28listener%2C%20argumentz%29%20%7B%0A%20%20%20%20return%20function%28e%29%20%7B%0A%20%20%20%20%20%20var%20o%20%3D%20d3%2Eevent%3B%0A%20%20%20%20%20%20d3%2Eevent%20%3D%20e%3B%0A%20%20%20%20%20%20argumentz%5B0%5D%20%3D%20this%2E%5F%5Fdata%5F%5F%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20listener%2Eapply%28this%2C%20argumentz%29%3B%0A%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20d3%2Eevent%20%3D%20o%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fselection%5FonFilter%28listener%2C%20argumentz%29%20%7B%0A%20%20%20%20var%20l%20%3D%20d3%5Fselection%5FonListener%28listener%2C%20argumentz%29%3B%0A%20%20%20%20return%20function%28e%29%20%7B%0A%20%20%20%20%20%20var%20target%20%3D%20this%2C%20related%20%3D%20e%2ErelatedTarget%3B%0A%20%20%20%20%20%20if%20%28%21related%20%7C%7C%20related%20%21%3D%3D%20target%20%26%26%20%21%28related%2EcompareDocumentPosition%28target%29%20%26%208%29%29%20%7B%0A%20%20%20%20%20%20%20%20l%2Ecall%28target%2C%20e%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20var%20d3%5Fevent%5FdragSelect%20%3D%20%22onselectstart%22%20in%20d3%5Fdocument%20%3F%20null%20%3A%20d3%5FvendorSymbol%28d3%5FdocumentElement%2Estyle%2C%20%22userSelect%22%29%2C%20d3%5Fevent%5FdragId%20%3D%200%3B%0A%20%20function%20d3%5Fevent%5FdragSuppress%28%29%20%7B%0A%20%20%20%20var%20name%20%3D%20%22%2Edragsuppress%2D%22%20%2B%20%2B%2Bd3%5Fevent%5FdragId%2C%20click%20%3D%20%22click%22%20%2B%20name%2C%20w%20%3D%20d3%2Eselect%28d3%5Fwindow%29%2Eon%28%22touchmove%22%20%2B%20name%2C%20d3%5FeventPreventDefault%29%2Eon%28%22dragstart%22%20%2B%20name%2C%20d3%5FeventPreventDefault%29%2Eon%28%22selectstart%22%20%2B%20name%2C%20d3%5FeventPreventDefault%29%3B%0A%20%20%20%20if%20%28d3%5Fevent%5FdragSelect%29%20%7B%0A%20%20%20%20%20%20var%20style%20%3D%20d3%5FdocumentElement%2Estyle%2C%20select%20%3D%20style%5Bd3%5Fevent%5FdragSelect%5D%3B%0A%20%20%20%20%20%20style%5Bd3%5Fevent%5FdragSelect%5D%20%3D%20%22none%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20function%28suppressClick%29%20%7B%0A%20%20%20%20%20%20w%2Eon%28name%2C%20null%29%3B%0A%20%20%20%20%20%20if%20%28d3%5Fevent%5FdragSelect%29%20style%5Bd3%5Fevent%5FdragSelect%5D%20%3D%20select%3B%0A%20%20%20%20%20%20if%20%28suppressClick%29%20%7B%0A%20%20%20%20%20%20%20%20var%20off%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20w%2Eon%28click%2C%20null%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20w%2Eon%28click%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20d3%5FeventPreventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20off%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20setTimeout%28off%2C%200%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2Emouse%20%3D%20function%28container%29%20%7B%0A%20%20%20%20return%20d3%5FmousePoint%28container%2C%20d3%5FeventSource%28%29%29%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fmouse%5Fbug44083%20%3D%20%2FWebKit%2F%2Etest%28d3%5Fwindow%2Enavigator%2EuserAgent%29%20%3F%20%2D1%20%3A%200%3B%0A%20%20function%20d3%5FmousePoint%28container%2C%20e%29%20%7B%0A%20%20%20%20if%20%28e%2EchangedTouches%29%20e%20%3D%20e%2EchangedTouches%5B0%5D%3B%0A%20%20%20%20var%20svg%20%3D%20container%2EownerSVGElement%20%7C%7C%20container%3B%0A%20%20%20%20if%20%28svg%2EcreateSVGPoint%29%20%7B%0A%20%20%20%20%20%20var%20point%20%3D%20svg%2EcreateSVGPoint%28%29%3B%0A%20%20%20%20%20%20if%20%28d3%5Fmouse%5Fbug44083%20%3C%200%20%26%26%20%28d3%5Fwindow%2EscrollX%20%7C%7C%20d3%5Fwindow%2EscrollY%29%29%20%7B%0A%20%20%20%20%20%20%20%20svg%20%3D%20d3%2Eselect%28%22body%22%29%2Eappend%28%22svg%22%29%2Estyle%28%7B%0A%20%20%20%20%20%20%20%20%20%20position%3A%20%22absolute%22%2C%0A%20%20%20%20%20%20%20%20%20%20top%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20left%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20margin%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20padding%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20border%3A%20%22none%22%0A%20%20%20%20%20%20%20%20%7D%2C%20%22important%22%29%3B%0A%20%20%20%20%20%20%20%20var%20ctm%20%3D%20svg%5B0%5D%5B0%5D%2EgetScreenCTM%28%29%3B%0A%20%20%20%20%20%20%20%20d3%5Fmouse%5Fbug44083%20%3D%20%21%28ctm%2Ef%20%7C%7C%20ctm%2Ee%29%3B%0A%20%20%20%20%20%20%20%20svg%2Eremove%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28d3%5Fmouse%5Fbug44083%29%20point%2Ex%20%3D%20e%2EpageX%2C%20point%2Ey%20%3D%20e%2EpageY%3B%20else%20point%2Ex%20%3D%20e%2EclientX%2C%20%0A%20%20%20%20%20%20point%2Ey%20%3D%20e%2EclientY%3B%0A%20%20%20%20%20%20point%20%3D%20point%2EmatrixTransform%28container%2EgetScreenCTM%28%29%2Einverse%28%29%29%3B%0A%20%20%20%20%20%20return%20%5B%20point%2Ex%2C%20point%2Ey%20%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20rect%20%3D%20container%2EgetBoundingClientRect%28%29%3B%0A%20%20%20%20return%20%5B%20e%2EclientX%20%2D%20rect%2Eleft%20%2D%20container%2EclientLeft%2C%20e%2EclientY%20%2D%20rect%2Etop%20%2D%20container%2EclientTop%20%5D%3B%0A%20%20%7D%0A%20%20d3%2Etouch%20%3D%20function%28container%2C%20touches%2C%20identifier%29%20%7B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%203%29%20identifier%20%3D%20touches%2C%20touches%20%3D%20d3%5FeventSource%28%29%2EchangedTouches%3B%0A%20%20%20%20if%20%28touches%29%20for%20%28var%20i%20%3D%200%2C%20n%20%3D%20touches%2Elength%2C%20touch%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20if%20%28%28touch%20%3D%20touches%5Bi%5D%29%2Eidentifier%20%3D%3D%3D%20identifier%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5FmousePoint%28container%2C%20touch%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20d3%2Ebehavior%2Edrag%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20event%20%3D%20d3%5FeventDispatch%28drag%2C%20%22drag%22%2C%20%22dragstart%22%2C%20%22dragend%22%29%2C%20origin%20%3D%20null%2C%20mousedown%20%3D%20dragstart%28d3%5Fnoop%2C%20d3%2Emouse%2C%20d3%5Fbehavior%5FdragMouseSubject%2C%20%22mousemove%22%2C%20%22mouseup%22%29%2C%20touchstart%20%3D%20dragstart%28d3%5Fbehavior%5FdragTouchId%2C%20d3%2Etouch%2C%20d3%5Fbehavior%5FdragTouchSubject%2C%20%22touchmove%22%2C%20%22touchend%22%29%3B%0A%20%20%20%20function%20drag%28%29%20%7B%0A%20%20%20%20%20%20this%2Eon%28%22mousedown%2Edrag%22%2C%20mousedown%29%2Eon%28%22touchstart%2Edrag%22%2C%20touchstart%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20dragstart%28id%2C%20position%2C%20subject%2C%20move%2C%20end%29%20%7B%0A%20%20%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20that%20%3D%20this%2C%20target%20%3D%20d3%2Eevent%2Etarget%2C%20parent%20%3D%20that%2EparentNode%2C%20dispatch%20%3D%20event%2Eof%28that%2C%20arguments%29%2C%20dragged%20%3D%200%2C%20dragId%20%3D%20id%28%29%2C%20dragName%20%3D%20%22%2Edrag%22%20%2B%20%28dragId%20%3D%3D%20null%20%3F%20%22%22%20%3A%20%22%2D%22%20%2B%20dragId%29%2C%20dragOffset%2C%20dragSubject%20%3D%20d3%2Eselect%28subject%28%29%29%2Eon%28move%20%2B%20dragName%2C%20moved%29%2Eon%28end%20%2B%20dragName%2C%20ended%29%2C%20dragRestore%20%3D%20d3%5Fevent%5FdragSuppress%28%29%2C%20position0%20%3D%20position%28parent%2C%20dragId%29%3B%0A%20%20%20%20%20%20%20%20if%20%28origin%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20dragOffset%20%3D%20origin%2Eapply%28that%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20%20%20dragOffset%20%3D%20%5B%20dragOffset%2Ex%20%2D%20position0%5B0%5D%2C%20dragOffset%2Ey%20%2D%20position0%5B1%5D%20%5D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20dragOffset%20%3D%20%5B%200%2C%200%20%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20dispatch%28%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20%22dragstart%22%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20function%20moved%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20position1%20%3D%20position%28parent%2C%20dragId%29%2C%20dx%2C%20dy%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21position1%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20dx%20%3D%20position1%5B0%5D%20%2D%20position0%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20dy%20%3D%20position1%5B1%5D%20%2D%20position0%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20dragged%20%7C%3D%20dx%20%7C%20dy%3B%0A%20%20%20%20%20%20%20%20%20%20position0%20%3D%20position1%3B%0A%20%20%20%20%20%20%20%20%20%20dispatch%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%22drag%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20position1%5B0%5D%20%2B%20dragOffset%5B0%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20position1%5B1%5D%20%2B%20dragOffset%5B1%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20dx%3A%20dx%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20dy%3A%20dy%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20function%20ended%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21position%28parent%2C%20dragId%29%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20dragSubject%2Eon%28move%20%2B%20dragName%2C%20null%29%2Eon%28end%20%2B%20dragName%2C%20null%29%3B%0A%20%20%20%20%20%20%20%20%20%20dragRestore%28dragged%20%26%26%20d3%2Eevent%2Etarget%20%3D%3D%3D%20target%29%3B%0A%20%20%20%20%20%20%20%20%20%20dispatch%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%22dragend%22%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20drag%2Eorigin%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20origin%3B%0A%20%20%20%20%20%20origin%20%3D%20x%3B%0A%20%20%20%20%20%20return%20drag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20d3%2Erebind%28drag%2C%20event%2C%20%22on%22%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fbehavior%5FdragTouchId%28%29%20%7B%0A%20%20%20%20return%20d3%2Eevent%2EchangedTouches%5B0%5D%2Eidentifier%3B%0A%20%20%7D%0A%20%20function%20d3%5Fbehavior%5FdragTouchSubject%28%29%20%7B%0A%20%20%20%20return%20d3%2Eevent%2Etarget%3B%0A%20%20%7D%0A%20%20function%20d3%5Fbehavior%5FdragMouseSubject%28%29%20%7B%0A%20%20%20%20return%20d3%5Fwindow%3B%0A%20%20%7D%0A%20%20d3%2Etouches%20%3D%20function%28container%2C%20touches%29%20%7B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20touches%20%3D%20d3%5FeventSource%28%29%2Etouches%3B%0A%20%20%20%20return%20touches%20%3F%20d3%5Farray%28touches%29%2Emap%28function%28touch%29%20%7B%0A%20%20%20%20%20%20var%20point%20%3D%20d3%5FmousePoint%28container%2C%20touch%29%3B%0A%20%20%20%20%20%20point%2Eidentifier%20%3D%20touch%2Eidentifier%3B%0A%20%20%20%20%20%20return%20point%3B%0A%20%20%20%20%7D%29%20%3A%20%5B%5D%3B%0A%20%20%7D%3B%0A%20%20var%20%CE%B5%20%3D%201e%2D6%2C%20%CE%B52%20%3D%20%CE%B5%20%2A%20%CE%B5%2C%20%CF%80%20%3D%20Math%2EPI%2C%20%CF%84%20%3D%202%20%2A%20%CF%80%2C%20%CF%84%CE%B5%20%3D%20%CF%84%20%2D%20%CE%B5%2C%20half%CF%80%20%3D%20%CF%80%20%2F%202%2C%20d3%5Fradians%20%3D%20%CF%80%20%2F%20180%2C%20d3%5Fdegrees%20%3D%20180%20%2F%20%CF%80%3B%0A%20%20function%20d3%5Fsgn%28x%29%20%7B%0A%20%20%20%20return%20x%20%3E%200%20%3F%201%20%3A%20x%20%3C%200%20%3F%20%2D1%20%3A%200%3B%0A%20%20%7D%0A%20%20function%20d3%5Fcross2d%28a%2C%20b%2C%20c%29%20%7B%0A%20%20%20%20return%20%28b%5B0%5D%20%2D%20a%5B0%5D%29%20%2A%20%28c%5B1%5D%20%2D%20a%5B1%5D%29%20%2D%20%28b%5B1%5D%20%2D%20a%5B1%5D%29%20%2A%20%28c%5B0%5D%20%2D%20a%5B0%5D%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Facos%28x%29%20%7B%0A%20%20%20%20return%20x%20%3E%201%20%3F%200%20%3A%20x%20%3C%20%2D1%20%3F%20%CF%80%20%3A%20Math%2Eacos%28x%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fasin%28x%29%20%7B%0A%20%20%20%20return%20x%20%3E%201%20%3F%20half%CF%80%20%3A%20x%20%3C%20%2D1%20%3F%20%2Dhalf%CF%80%20%3A%20Math%2Easin%28x%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsinh%28x%29%20%7B%0A%20%20%20%20return%20%28%28x%20%3D%20Math%2Eexp%28x%29%29%20%2D%201%20%2F%20x%29%20%2F%202%3B%0A%20%20%7D%0A%20%20function%20d3%5Fcosh%28x%29%20%7B%0A%20%20%20%20return%20%28%28x%20%3D%20Math%2Eexp%28x%29%29%20%2B%201%20%2F%20x%29%20%2F%202%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftanh%28x%29%20%7B%0A%20%20%20%20return%20%28%28x%20%3D%20Math%2Eexp%282%20%2A%20x%29%29%20%2D%201%29%20%2F%20%28x%20%2B%201%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fhaversin%28x%29%20%7B%0A%20%20%20%20return%20%28x%20%3D%20Math%2Esin%28x%20%2F%202%29%29%20%2A%20x%3B%0A%20%20%7D%0A%20%20var%20%CF%81%20%3D%20Math%2ESQRT2%2C%20%CF%812%20%3D%202%2C%20%CF%814%20%3D%204%3B%0A%20%20d3%2EinterpolateZoom%20%3D%20function%28p0%2C%20p1%29%20%7B%0A%20%20%20%20var%20ux0%20%3D%20p0%5B0%5D%2C%20uy0%20%3D%20p0%5B1%5D%2C%20w0%20%3D%20p0%5B2%5D%2C%20ux1%20%3D%20p1%5B0%5D%2C%20uy1%20%3D%20p1%5B1%5D%2C%20w1%20%3D%20p1%5B2%5D%3B%0A%20%20%20%20var%20dx%20%3D%20ux1%20%2D%20ux0%2C%20dy%20%3D%20uy1%20%2D%20uy0%2C%20d2%20%3D%20dx%20%2A%20dx%20%2B%20dy%20%2A%20dy%2C%20d1%20%3D%20Math%2Esqrt%28d2%29%2C%20b0%20%3D%20%28w1%20%2A%20w1%20%2D%20w0%20%2A%20w0%20%2B%20%CF%814%20%2A%20d2%29%20%2F%20%282%20%2A%20w0%20%2A%20%CF%812%20%2A%20d1%29%2C%20b1%20%3D%20%28w1%20%2A%20w1%20%2D%20w0%20%2A%20w0%20%2D%20%CF%814%20%2A%20d2%29%20%2F%20%282%20%2A%20w1%20%2A%20%CF%812%20%2A%20d1%29%2C%20r0%20%3D%20Math%2Elog%28Math%2Esqrt%28b0%20%2A%20b0%20%2B%201%29%20%2D%20b0%29%2C%20r1%20%3D%20Math%2Elog%28Math%2Esqrt%28b1%20%2A%20b1%20%2B%201%29%20%2D%20b1%29%2C%20dr%20%3D%20r1%20%2D%20r0%2C%20S%20%3D%20%28dr%20%7C%7C%20Math%2Elog%28w1%20%2F%20w0%29%29%20%2F%20%CF%81%3B%0A%20%20%20%20function%20interpolate%28t%29%20%7B%0A%20%20%20%20%20%20var%20s%20%3D%20t%20%2A%20S%3B%0A%20%20%20%20%20%20if%20%28dr%29%20%7B%0A%20%20%20%20%20%20%20%20var%20coshr0%20%3D%20d3%5Fcosh%28r0%29%2C%20u%20%3D%20w0%20%2F%20%28%CF%812%20%2A%20d1%29%20%2A%20%28coshr0%20%2A%20d3%5Ftanh%28%CF%81%20%2A%20s%20%2B%20r0%29%20%2D%20d3%5Fsinh%28r0%29%29%3B%0A%20%20%20%20%20%20%20%20return%20%5B%20ux0%20%2B%20u%20%2A%20dx%2C%20uy0%20%2B%20u%20%2A%20dy%2C%20w0%20%2A%20coshr0%20%2F%20d3%5Fcosh%28%CF%81%20%2A%20s%20%2B%20r0%29%20%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%5B%20ux0%20%2B%20t%20%2A%20dx%2C%20uy0%20%2B%20t%20%2A%20dy%2C%20w0%20%2A%20Math%2Eexp%28%CF%81%20%2A%20s%29%20%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20interpolate%2Eduration%20%3D%20S%20%2A%201e3%3B%0A%20%20%20%20return%20interpolate%3B%0A%20%20%7D%3B%0A%20%20d3%2Ebehavior%2Ezoom%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20view%20%3D%20%7B%0A%20%20%20%20%20%20x%3A%200%2C%0A%20%20%20%20%20%20y%3A%200%2C%0A%20%20%20%20%20%20k%3A%201%0A%20%20%20%20%7D%2C%20translate0%2C%20center0%2C%20center%2C%20size%20%3D%20%5B%20960%2C%20500%20%5D%2C%20scaleExtent%20%3D%20d3%5Fbehavior%5FzoomInfinity%2C%20duration%20%3D%20250%2C%20zooming%20%3D%200%2C%20mousedown%20%3D%20%22mousedown%2Ezoom%22%2C%20mousemove%20%3D%20%22mousemove%2Ezoom%22%2C%20mouseup%20%3D%20%22mouseup%2Ezoom%22%2C%20mousewheelTimer%2C%20touchstart%20%3D%20%22touchstart%2Ezoom%22%2C%20touchtime%2C%20event%20%3D%20d3%5FeventDispatch%28zoom%2C%20%22zoomstart%22%2C%20%22zoom%22%2C%20%22zoomend%22%29%2C%20x0%2C%20x1%2C%20y0%2C%20y1%3B%0A%20%20%20%20function%20zoom%28g%29%20%7B%0A%20%20%20%20%20%20g%2Eon%28mousedown%2C%20mousedowned%29%2Eon%28d3%5Fbehavior%5FzoomWheel%20%2B%20%22%2Ezoom%22%2C%20mousewheeled%29%2Eon%28%22dblclick%2Ezoom%22%2C%20dblclicked%29%2Eon%28touchstart%2C%20touchstarted%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20zoom%2Eevent%20%3D%20function%28g%29%20%7B%0A%20%20%20%20%20%20g%2Eeach%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20dispatch%20%3D%20event%2Eof%28this%2C%20arguments%29%2C%20view1%20%3D%20view%3B%0A%20%20%20%20%20%20%20%20if%20%28d3%5FtransitionInheritId%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20d3%2Eselect%28this%29%2Etransition%28%29%2Eeach%28%22start%2Ezoom%22%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20view%20%3D%20this%2E%5F%5Fchart%5F%5F%20%7C%7C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20k%3A%201%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20zoomstarted%28dispatch%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%2Etween%28%22zoom%3Azoom%22%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dx%20%3D%20size%5B0%5D%2C%20dy%20%3D%20size%5B1%5D%2C%20cx%20%3D%20center0%20%3F%20center0%5B0%5D%20%3A%20dx%20%2F%202%2C%20cy%20%3D%20center0%20%3F%20center0%5B1%5D%20%3A%20dy%20%2F%202%2C%20i%20%3D%20d3%2EinterpolateZoom%28%5B%20%28cx%20%2D%20view%2Ex%29%20%2F%20view%2Ek%2C%20%28cy%20%2D%20view%2Ey%29%20%2F%20view%2Ek%2C%20dx%20%2F%20view%2Ek%20%5D%2C%20%5B%20%28cx%20%2D%20view1%2Ex%29%20%2F%20view1%2Ek%2C%20%28cy%20%2D%20view1%2Ey%29%20%2F%20view1%2Ek%2C%20dx%20%2F%20view1%2Ek%20%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20l%20%3D%20i%28t%29%2C%20k%20%3D%20dx%20%2F%20l%5B2%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2E%5F%5Fchart%5F%5F%20%3D%20view%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20cx%20%2D%20l%5B0%5D%20%2A%20k%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20cy%20%2D%20l%5B1%5D%20%2A%20k%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20k%3A%20k%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20zoomed%28dispatch%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%2Eeach%28%22interrupt%2Ezoom%22%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20zoomended%28dispatch%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%2Eeach%28%22end%2Ezoom%22%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20zoomended%28dispatch%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this%2E%5F%5Fchart%5F%5F%20%3D%20view%3B%0A%20%20%20%20%20%20%20%20%20%20zoomstarted%28dispatch%29%3B%0A%20%20%20%20%20%20%20%20%20%20zoomed%28dispatch%29%3B%0A%20%20%20%20%20%20%20%20%20%20zoomended%28dispatch%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20zoom%2Etranslate%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20%5B%20view%2Ex%2C%20view%2Ey%20%5D%3B%0A%20%20%20%20%20%20view%20%3D%20%7B%0A%20%20%20%20%20%20%20%20x%3A%20%2B%5F%5B0%5D%2C%0A%20%20%20%20%20%20%20%20y%3A%20%2B%5F%5B1%5D%2C%0A%20%20%20%20%20%20%20%20k%3A%20view%2Ek%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20rescale%28%29%3B%0A%20%20%20%20%20%20return%20zoom%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20zoom%2Escale%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20view%2Ek%3B%0A%20%20%20%20%20%20view%20%3D%20%7B%0A%20%20%20%20%20%20%20%20x%3A%20view%2Ex%2C%0A%20%20%20%20%20%20%20%20y%3A%20view%2Ey%2C%0A%20%20%20%20%20%20%20%20k%3A%20%2B%5F%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20rescale%28%29%3B%0A%20%20%20%20%20%20return%20zoom%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20zoom%2EscaleExtent%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20scaleExtent%3B%0A%20%20%20%20%20%20scaleExtent%20%3D%20%5F%20%3D%3D%20null%20%3F%20d3%5Fbehavior%5FzoomInfinity%20%3A%20%5B%20%2B%5F%5B0%5D%2C%20%2B%5F%5B1%5D%20%5D%3B%0A%20%20%20%20%20%20return%20zoom%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20zoom%2Ecenter%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20center%3B%0A%20%20%20%20%20%20center%20%3D%20%5F%20%26%26%20%5B%20%2B%5F%5B0%5D%2C%20%2B%5F%5B1%5D%20%5D%3B%0A%20%20%20%20%20%20return%20zoom%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20zoom%2Esize%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20size%3B%0A%20%20%20%20%20%20size%20%3D%20%5F%20%26%26%20%5B%20%2B%5F%5B0%5D%2C%20%2B%5F%5B1%5D%20%5D%3B%0A%20%20%20%20%20%20return%20zoom%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20zoom%2Eduration%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20duration%3B%0A%20%20%20%20%20%20duration%20%3D%20%2B%5F%3B%0A%20%20%20%20%20%20return%20zoom%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20zoom%2Ex%20%3D%20function%28z%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20x1%3B%0A%20%20%20%20%20%20x1%20%3D%20z%3B%0A%20%20%20%20%20%20x0%20%3D%20z%2Ecopy%28%29%3B%0A%20%20%20%20%20%20view%20%3D%20%7B%0A%20%20%20%20%20%20%20%20x%3A%200%2C%0A%20%20%20%20%20%20%20%20y%3A%200%2C%0A%20%20%20%20%20%20%20%20k%3A%201%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20return%20zoom%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20zoom%2Ey%20%3D%20function%28z%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20y1%3B%0A%20%20%20%20%20%20y1%20%3D%20z%3B%0A%20%20%20%20%20%20y0%20%3D%20z%2Ecopy%28%29%3B%0A%20%20%20%20%20%20view%20%3D%20%7B%0A%20%20%20%20%20%20%20%20x%3A%200%2C%0A%20%20%20%20%20%20%20%20y%3A%200%2C%0A%20%20%20%20%20%20%20%20k%3A%201%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20return%20zoom%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20location%28p%29%20%7B%0A%20%20%20%20%20%20return%20%5B%20%28p%5B0%5D%20%2D%20view%2Ex%29%20%2F%20view%2Ek%2C%20%28p%5B1%5D%20%2D%20view%2Ey%29%20%2F%20view%2Ek%20%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20point%28l%29%20%7B%0A%20%20%20%20%20%20return%20%5B%20l%5B0%5D%20%2A%20view%2Ek%20%2B%20view%2Ex%2C%20l%5B1%5D%20%2A%20view%2Ek%20%2B%20view%2Ey%20%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20scaleTo%28s%29%20%7B%0A%20%20%20%20%20%20view%2Ek%20%3D%20Math%2Emax%28scaleExtent%5B0%5D%2C%20Math%2Emin%28scaleExtent%5B1%5D%2C%20s%29%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20translateTo%28p%2C%20l%29%20%7B%0A%20%20%20%20%20%20l%20%3D%20point%28l%29%3B%0A%20%20%20%20%20%20view%2Ex%20%2B%3D%20p%5B0%5D%20%2D%20l%5B0%5D%3B%0A%20%20%20%20%20%20view%2Ey%20%2B%3D%20p%5B1%5D%20%2D%20l%5B1%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20zoomTo%28that%2C%20p%2C%20l%2C%20k%29%20%7B%0A%20%20%20%20%20%20that%2E%5F%5Fchart%5F%5F%20%3D%20%7B%0A%20%20%20%20%20%20%20%20x%3A%20view%2Ex%2C%0A%20%20%20%20%20%20%20%20y%3A%20view%2Ey%2C%0A%20%20%20%20%20%20%20%20k%3A%20view%2Ek%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20scaleTo%28Math%2Epow%282%2C%20k%29%29%3B%0A%20%20%20%20%20%20translateTo%28center0%20%3D%20p%2C%20l%29%3B%0A%20%20%20%20%20%20that%20%3D%20d3%2Eselect%28that%29%3B%0A%20%20%20%20%20%20if%20%28duration%20%3E%200%29%20that%20%3D%20that%2Etransition%28%29%2Eduration%28duration%29%3B%0A%20%20%20%20%20%20that%2Ecall%28zoom%2Eevent%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20rescale%28%29%20%7B%0A%20%20%20%20%20%20if%20%28x1%29%20x1%2Edomain%28x0%2Erange%28%29%2Emap%28function%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%28x%20%2D%20view%2Ex%29%20%2F%20view%2Ek%3B%0A%20%20%20%20%20%20%7D%29%2Emap%28x0%2Einvert%29%29%3B%0A%20%20%20%20%20%20if%20%28y1%29%20y1%2Edomain%28y0%2Erange%28%29%2Emap%28function%28y%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%28y%20%2D%20view%2Ey%29%20%2F%20view%2Ek%3B%0A%20%20%20%20%20%20%7D%29%2Emap%28y0%2Einvert%29%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20zoomstarted%28dispatch%29%20%7B%0A%20%20%20%20%20%20if%20%28%21zooming%2B%2B%29%20dispatch%28%7B%0A%20%20%20%20%20%20%20%20type%3A%20%22zoomstart%22%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20zoomed%28dispatch%29%20%7B%0A%20%20%20%20%20%20rescale%28%29%3B%0A%20%20%20%20%20%20dispatch%28%7B%0A%20%20%20%20%20%20%20%20type%3A%20%22zoom%22%2C%0A%20%20%20%20%20%20%20%20scale%3A%20view%2Ek%2C%0A%20%20%20%20%20%20%20%20translate%3A%20%5B%20view%2Ex%2C%20view%2Ey%20%5D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20zoomended%28dispatch%29%20%7B%0A%20%20%20%20%20%20if%20%28%21%2D%2Dzooming%29%20dispatch%28%7B%0A%20%20%20%20%20%20%20%20type%3A%20%22zoomend%22%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20center0%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20mousedowned%28%29%20%7B%0A%20%20%20%20%20%20var%20that%20%3D%20this%2C%20target%20%3D%20d3%2Eevent%2Etarget%2C%20dispatch%20%3D%20event%2Eof%28that%2C%20arguments%29%2C%20dragged%20%3D%200%2C%20subject%20%3D%20d3%2Eselect%28d3%5Fwindow%29%2Eon%28mousemove%2C%20moved%29%2Eon%28mouseup%2C%20ended%29%2C%20location0%20%3D%20location%28d3%2Emouse%28that%29%29%2C%20dragRestore%20%3D%20d3%5Fevent%5FdragSuppress%28%29%3B%0A%20%20%20%20%20%20d3%5Fselection%5Finterrupt%2Ecall%28that%29%3B%0A%20%20%20%20%20%20zoomstarted%28dispatch%29%3B%0A%20%20%20%20%20%20function%20moved%28%29%20%7B%0A%20%20%20%20%20%20%20%20dragged%20%3D%201%3B%0A%20%20%20%20%20%20%20%20translateTo%28d3%2Emouse%28that%29%2C%20location0%29%3B%0A%20%20%20%20%20%20%20%20zoomed%28dispatch%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20ended%28%29%20%7B%0A%20%20%20%20%20%20%20%20subject%2Eon%28mousemove%2C%20null%29%2Eon%28mouseup%2C%20null%29%3B%0A%20%20%20%20%20%20%20%20dragRestore%28dragged%20%26%26%20d3%2Eevent%2Etarget%20%3D%3D%3D%20target%29%3B%0A%20%20%20%20%20%20%20%20zoomended%28dispatch%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20function%20touchstarted%28%29%20%7B%0A%20%20%20%20%20%20var%20that%20%3D%20this%2C%20dispatch%20%3D%20event%2Eof%28that%2C%20arguments%29%2C%20locations0%20%3D%20%7B%7D%2C%20distance0%20%3D%200%2C%20scale0%2C%20zoomName%20%3D%20%22%2Ezoom%2D%22%20%2B%20d3%2Eevent%2EchangedTouches%5B0%5D%2Eidentifier%2C%20touchmove%20%3D%20%22touchmove%22%20%2B%20zoomName%2C%20touchend%20%3D%20%22touchend%22%20%2B%20zoomName%2C%20targets%20%3D%20%5B%5D%2C%20subject%20%3D%20d3%2Eselect%28that%29%2C%20dragRestore%20%3D%20d3%5Fevent%5FdragSuppress%28%29%3B%0A%20%20%20%20%20%20started%28%29%3B%0A%20%20%20%20%20%20zoomstarted%28dispatch%29%3B%0A%20%20%20%20%20%20subject%2Eon%28mousedown%2C%20null%29%2Eon%28touchstart%2C%20started%29%3B%0A%20%20%20%20%20%20function%20relocate%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20touches%20%3D%20d3%2Etouches%28that%29%3B%0A%20%20%20%20%20%20%20%20scale0%20%3D%20view%2Ek%3B%0A%20%20%20%20%20%20%20%20touches%2EforEach%28function%28t%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28t%2Eidentifier%20in%20locations0%29%20locations0%5Bt%2Eidentifier%5D%20%3D%20location%28t%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20return%20touches%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20started%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20target%20%3D%20d3%2Eevent%2Etarget%3B%0A%20%20%20%20%20%20%20%20d3%2Eselect%28target%29%2Eon%28touchmove%2C%20moved%29%2Eon%28touchend%2C%20ended%29%3B%0A%20%20%20%20%20%20%20%20targets%2Epush%28target%29%3B%0A%20%20%20%20%20%20%20%20var%20changed%20%3D%20d3%2Eevent%2EchangedTouches%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20n%20%3D%20changed%2Elength%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20locations0%5Bchanged%5Bi%5D%2Eidentifier%5D%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20touches%20%3D%20relocate%28%29%2C%20now%20%3D%20Date%2Enow%28%29%3B%0A%20%20%20%20%20%20%20%20if%20%28touches%2Elength%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28now%20%2D%20touchtime%20%3C%20500%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20p%20%3D%20touches%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20zoomTo%28that%2C%20p%2C%20locations0%5Bp%2Eidentifier%5D%2C%20Math%2Efloor%28Math%2Elog%28view%2Ek%29%20%2F%20Math%2ELN2%29%20%2B%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20d3%5FeventPreventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20touchtime%20%3D%20now%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28touches%2Elength%20%3E%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20p%20%3D%20touches%5B0%5D%2C%20q%20%3D%20touches%5B1%5D%2C%20dx%20%3D%20p%5B0%5D%20%2D%20q%5B0%5D%2C%20dy%20%3D%20p%5B1%5D%20%2D%20q%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20distance0%20%3D%20dx%20%2A%20dx%20%2B%20dy%20%2A%20dy%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20moved%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20touches%20%3D%20d3%2Etouches%28that%29%2C%20p0%2C%20l0%2C%20p1%2C%20l1%3B%0A%20%20%20%20%20%20%20%20d3%5Fselection%5Finterrupt%2Ecall%28that%29%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20n%20%3D%20touches%2Elength%3B%20i%20%3C%20n%3B%20%2B%2Bi%2C%20l1%20%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20p1%20%3D%20touches%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28l1%20%3D%20locations0%5Bp1%2Eidentifier%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28l0%29%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20p0%20%3D%20p1%2C%20l0%20%3D%20l1%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28l1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20distance1%20%3D%20%28distance1%20%3D%20p1%5B0%5D%20%2D%20p0%5B0%5D%29%20%2A%20distance1%20%2B%20%28distance1%20%3D%20p1%5B1%5D%20%2D%20p0%5B1%5D%29%20%2A%20distance1%2C%20scale1%20%3D%20distance0%20%26%26%20Math%2Esqrt%28distance1%20%2F%20distance0%29%3B%0A%20%20%20%20%20%20%20%20%20%20p0%20%3D%20%5B%20%28p0%5B0%5D%20%2B%20p1%5B0%5D%29%20%2F%202%2C%20%28p0%5B1%5D%20%2B%20p1%5B1%5D%29%20%2F%202%20%5D%3B%0A%20%20%20%20%20%20%20%20%20%20l0%20%3D%20%5B%20%28l0%5B0%5D%20%2B%20l1%5B0%5D%29%20%2F%202%2C%20%28l0%5B1%5D%20%2B%20l1%5B1%5D%29%20%2F%202%20%5D%3B%0A%20%20%20%20%20%20%20%20%20%20scaleTo%28scale1%20%2A%20scale0%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20touchtime%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20translateTo%28p0%2C%20l0%29%3B%0A%20%20%20%20%20%20%20%20zoomed%28dispatch%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20ended%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28d3%2Eevent%2Etouches%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20changed%20%3D%20d3%2Eevent%2EchangedTouches%3B%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20n%20%3D%20changed%2Elength%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20locations0%5Bchanged%5Bi%5D%2Eidentifier%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20identifier%20in%20locations0%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20void%20relocate%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20d3%2EselectAll%28targets%29%2Eon%28zoomName%2C%20null%29%3B%0A%20%20%20%20%20%20%20%20subject%2Eon%28mousedown%2C%20mousedowned%29%2Eon%28touchstart%2C%20touchstarted%29%3B%0A%20%20%20%20%20%20%20%20dragRestore%28%29%3B%0A%20%20%20%20%20%20%20%20zoomended%28dispatch%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20function%20mousewheeled%28%29%20%7B%0A%20%20%20%20%20%20var%20dispatch%20%3D%20event%2Eof%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20if%20%28mousewheelTimer%29%20clearTimeout%28mousewheelTimer%29%3B%20else%20translate0%20%3D%20location%28center0%20%3D%20center%20%7C%7C%20d3%2Emouse%28this%29%29%2C%20%0A%20%20%20%20%20%20d3%5Fselection%5Finterrupt%2Ecall%28this%29%2C%20zoomstarted%28dispatch%29%3B%0A%20%20%20%20%20%20mousewheelTimer%20%3D%20setTimeout%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20mousewheelTimer%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20zoomended%28dispatch%29%3B%0A%20%20%20%20%20%20%7D%2C%2050%29%3B%0A%20%20%20%20%20%20d3%5FeventPreventDefault%28%29%3B%0A%20%20%20%20%20%20scaleTo%28Math%2Epow%282%2C%20d3%5Fbehavior%5FzoomDelta%28%29%20%2A%20%2E002%29%20%2A%20view%2Ek%29%3B%0A%20%20%20%20%20%20translateTo%28center0%2C%20translate0%29%3B%0A%20%20%20%20%20%20zoomed%28dispatch%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20dblclicked%28%29%20%7B%0A%20%20%20%20%20%20var%20p%20%3D%20d3%2Emouse%28this%29%2C%20k%20%3D%20Math%2Elog%28view%2Ek%29%20%2F%20Math%2ELN2%3B%0A%20%20%20%20%20%20zoomTo%28this%2C%20p%2C%20location%28p%29%2C%20d3%2Eevent%2EshiftKey%20%3F%20Math%2Eceil%28k%29%20%2D%201%20%3A%20Math%2Efloor%28k%29%20%2B%201%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%2Erebind%28zoom%2C%20event%2C%20%22on%22%29%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fbehavior%5FzoomInfinity%20%3D%20%5B%200%2C%20Infinity%20%5D%3B%0A%20%20var%20d3%5Fbehavior%5FzoomDelta%2C%20d3%5Fbehavior%5FzoomWheel%20%3D%20%22onwheel%22%20in%20d3%5Fdocument%20%3F%20%28d3%5Fbehavior%5FzoomDelta%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20%2Dd3%2Eevent%2EdeltaY%20%2A%20%28d3%2Eevent%2EdeltaMode%20%3F%20120%20%3A%201%29%3B%0A%20%20%7D%2C%20%22wheel%22%29%20%3A%20%22onmousewheel%22%20in%20d3%5Fdocument%20%3F%20%28d3%5Fbehavior%5FzoomDelta%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%2Eevent%2EwheelDelta%3B%0A%20%20%7D%2C%20%22mousewheel%22%29%20%3A%20%28d3%5Fbehavior%5FzoomDelta%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20%2Dd3%2Eevent%2Edetail%3B%0A%20%20%7D%2C%20%22MozMousePixelScroll%22%29%3B%0A%20%20d3%2Ecolor%20%3D%20d3%5Fcolor%3B%0A%20%20function%20d3%5Fcolor%28%29%20%7B%7D%0A%20%20d3%5Fcolor%2Eprototype%2EtoString%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20this%2Ergb%28%29%20%2B%20%22%22%3B%0A%20%20%7D%3B%0A%20%20d3%2Ehsl%20%3D%20d3%5Fhsl%3B%0A%20%20function%20d3%5Fhsl%28h%2C%20s%2C%20l%29%20%7B%0A%20%20%20%20return%20this%20instanceof%20d3%5Fhsl%20%3F%20void%20%28this%2Eh%20%3D%20%2Bh%2C%20this%2Es%20%3D%20%2Bs%2C%20this%2El%20%3D%20%2Bl%29%20%3A%20arguments%2Elength%20%3C%202%20%3F%20h%20instanceof%20d3%5Fhsl%20%3F%20new%20d3%5Fhsl%28h%2Eh%2C%20h%2Es%2C%20h%2El%29%20%3A%20d3%5Frgb%5Fparse%28%22%22%20%2B%20h%2C%20d3%5Frgb%5Fhsl%2C%20d3%5Fhsl%29%20%3A%20new%20d3%5Fhsl%28h%2C%20s%2C%20l%29%3B%0A%20%20%7D%0A%20%20var%20d3%5FhslPrototype%20%3D%20d3%5Fhsl%2Eprototype%20%3D%20new%20d3%5Fcolor%28%29%3B%0A%20%20d3%5FhslPrototype%2Ebrighter%20%3D%20function%28k%29%20%7B%0A%20%20%20%20k%20%3D%20Math%2Epow%28%2E7%2C%20arguments%2Elength%20%3F%20k%20%3A%201%29%3B%0A%20%20%20%20return%20new%20d3%5Fhsl%28this%2Eh%2C%20this%2Es%2C%20this%2El%20%2F%20k%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FhslPrototype%2Edarker%20%3D%20function%28k%29%20%7B%0A%20%20%20%20k%20%3D%20Math%2Epow%28%2E7%2C%20arguments%2Elength%20%3F%20k%20%3A%201%29%3B%0A%20%20%20%20return%20new%20d3%5Fhsl%28this%2Eh%2C%20this%2Es%2C%20k%20%2A%20this%2El%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FhslPrototype%2Ergb%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fhsl%5Frgb%28this%2Eh%2C%20this%2Es%2C%20this%2El%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fhsl%5Frgb%28h%2C%20s%2C%20l%29%20%7B%0A%20%20%20%20var%20m1%2C%20m2%3B%0A%20%20%20%20h%20%3D%20isNaN%28h%29%20%3F%200%20%3A%20%28h%20%25%3D%20360%29%20%3C%200%20%3F%20h%20%2B%20360%20%3A%20h%3B%0A%20%20%20%20s%20%3D%20isNaN%28s%29%20%3F%200%20%3A%20s%20%3C%200%20%3F%200%20%3A%20s%20%3E%201%20%3F%201%20%3A%20s%3B%0A%20%20%20%20l%20%3D%20l%20%3C%200%20%3F%200%20%3A%20l%20%3E%201%20%3F%201%20%3A%20l%3B%0A%20%20%20%20m2%20%3D%20l%20%3C%3D%20%2E5%20%3F%20l%20%2A%20%281%20%2B%20s%29%20%3A%20l%20%2B%20s%20%2D%20l%20%2A%20s%3B%0A%20%20%20%20m1%20%3D%202%20%2A%20l%20%2D%20m2%3B%0A%20%20%20%20function%20v%28h%29%20%7B%0A%20%20%20%20%20%20if%20%28h%20%3E%20360%29%20h%20%2D%3D%20360%3B%20else%20if%20%28h%20%3C%200%29%20h%20%2B%3D%20360%3B%0A%20%20%20%20%20%20if%20%28h%20%3C%2060%29%20return%20m1%20%2B%20%28m2%20%2D%20m1%29%20%2A%20h%20%2F%2060%3B%0A%20%20%20%20%20%20if%20%28h%20%3C%20180%29%20return%20m2%3B%0A%20%20%20%20%20%20if%20%28h%20%3C%20240%29%20return%20m1%20%2B%20%28m2%20%2D%20m1%29%20%2A%20%28240%20%2D%20h%29%20%2F%2060%3B%0A%20%20%20%20%20%20return%20m1%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20vv%28h%29%20%7B%0A%20%20%20%20%20%20return%20Math%2Eround%28v%28h%29%20%2A%20255%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20new%20d3%5Frgb%28vv%28h%20%2B%20120%29%2C%20vv%28h%29%2C%20vv%28h%20%2D%20120%29%29%3B%0A%20%20%7D%0A%20%20d3%2Ehcl%20%3D%20d3%5Fhcl%3B%0A%20%20function%20d3%5Fhcl%28h%2C%20c%2C%20l%29%20%7B%0A%20%20%20%20return%20this%20instanceof%20d3%5Fhcl%20%3F%20void%20%28this%2Eh%20%3D%20%2Bh%2C%20this%2Ec%20%3D%20%2Bc%2C%20this%2El%20%3D%20%2Bl%29%20%3A%20arguments%2Elength%20%3C%202%20%3F%20h%20instanceof%20d3%5Fhcl%20%3F%20new%20d3%5Fhcl%28h%2Eh%2C%20h%2Ec%2C%20h%2El%29%20%3A%20h%20instanceof%20d3%5Flab%20%3F%20d3%5Flab%5Fhcl%28h%2El%2C%20h%2Ea%2C%20h%2Eb%29%20%3A%20d3%5Flab%5Fhcl%28%28h%20%3D%20d3%5Frgb%5Flab%28%28h%20%3D%20d3%2Ergb%28h%29%29%2Er%2C%20h%2Eg%2C%20h%2Eb%29%29%2El%2C%20h%2Ea%2C%20h%2Eb%29%20%3A%20new%20d3%5Fhcl%28h%2C%20c%2C%20l%29%3B%0A%20%20%7D%0A%20%20var%20d3%5FhclPrototype%20%3D%20d3%5Fhcl%2Eprototype%20%3D%20new%20d3%5Fcolor%28%29%3B%0A%20%20d3%5FhclPrototype%2Ebrighter%20%3D%20function%28k%29%20%7B%0A%20%20%20%20return%20new%20d3%5Fhcl%28this%2Eh%2C%20this%2Ec%2C%20Math%2Emin%28100%2C%20this%2El%20%2B%20d3%5Flab%5FK%20%2A%20%28arguments%2Elength%20%3F%20k%20%3A%201%29%29%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FhclPrototype%2Edarker%20%3D%20function%28k%29%20%7B%0A%20%20%20%20return%20new%20d3%5Fhcl%28this%2Eh%2C%20this%2Ec%2C%20Math%2Emax%280%2C%20this%2El%20%2D%20d3%5Flab%5FK%20%2A%20%28arguments%2Elength%20%3F%20k%20%3A%201%29%29%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FhclPrototype%2Ergb%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fhcl%5Flab%28this%2Eh%2C%20this%2Ec%2C%20this%2El%29%2Ergb%28%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fhcl%5Flab%28h%2C%20c%2C%20l%29%20%7B%0A%20%20%20%20if%20%28isNaN%28h%29%29%20h%20%3D%200%3B%0A%20%20%20%20if%20%28isNaN%28c%29%29%20c%20%3D%200%3B%0A%20%20%20%20return%20new%20d3%5Flab%28l%2C%20Math%2Ecos%28h%20%2A%3D%20d3%5Fradians%29%20%2A%20c%2C%20Math%2Esin%28h%29%20%2A%20c%29%3B%0A%20%20%7D%0A%20%20d3%2Elab%20%3D%20d3%5Flab%3B%0A%20%20function%20d3%5Flab%28l%2C%20a%2C%20b%29%20%7B%0A%20%20%20%20return%20this%20instanceof%20d3%5Flab%20%3F%20void%20%28this%2El%20%3D%20%2Bl%2C%20this%2Ea%20%3D%20%2Ba%2C%20this%2Eb%20%3D%20%2Bb%29%20%3A%20arguments%2Elength%20%3C%202%20%3F%20l%20instanceof%20d3%5Flab%20%3F%20new%20d3%5Flab%28l%2El%2C%20l%2Ea%2C%20l%2Eb%29%20%3A%20l%20instanceof%20d3%5Fhcl%20%3F%20d3%5Fhcl%5Flab%28l%2Eh%2C%20l%2Ec%2C%20l%2El%29%20%3A%20d3%5Frgb%5Flab%28%28l%20%3D%20d3%5Frgb%28l%29%29%2Er%2C%20l%2Eg%2C%20l%2Eb%29%20%3A%20new%20d3%5Flab%28l%2C%20a%2C%20b%29%3B%0A%20%20%7D%0A%20%20var%20d3%5Flab%5FK%20%3D%2018%3B%0A%20%20var%20d3%5Flab%5FX%20%3D%20%2E95047%2C%20d3%5Flab%5FY%20%3D%201%2C%20d3%5Flab%5FZ%20%3D%201%2E08883%3B%0A%20%20var%20d3%5FlabPrototype%20%3D%20d3%5Flab%2Eprototype%20%3D%20new%20d3%5Fcolor%28%29%3B%0A%20%20d3%5FlabPrototype%2Ebrighter%20%3D%20function%28k%29%20%7B%0A%20%20%20%20return%20new%20d3%5Flab%28Math%2Emin%28100%2C%20this%2El%20%2B%20d3%5Flab%5FK%20%2A%20%28arguments%2Elength%20%3F%20k%20%3A%201%29%29%2C%20this%2Ea%2C%20this%2Eb%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FlabPrototype%2Edarker%20%3D%20function%28k%29%20%7B%0A%20%20%20%20return%20new%20d3%5Flab%28Math%2Emax%280%2C%20this%2El%20%2D%20d3%5Flab%5FK%20%2A%20%28arguments%2Elength%20%3F%20k%20%3A%201%29%29%2C%20this%2Ea%2C%20this%2Eb%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FlabPrototype%2Ergb%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Flab%5Frgb%28this%2El%2C%20this%2Ea%2C%20this%2Eb%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Flab%5Frgb%28l%2C%20a%2C%20b%29%20%7B%0A%20%20%20%20var%20y%20%3D%20%28l%20%2B%2016%29%20%2F%20116%2C%20x%20%3D%20y%20%2B%20a%20%2F%20500%2C%20z%20%3D%20y%20%2D%20b%20%2F%20200%3B%0A%20%20%20%20x%20%3D%20d3%5Flab%5Fxyz%28x%29%20%2A%20d3%5Flab%5FX%3B%0A%20%20%20%20y%20%3D%20d3%5Flab%5Fxyz%28y%29%20%2A%20d3%5Flab%5FY%3B%0A%20%20%20%20z%20%3D%20d3%5Flab%5Fxyz%28z%29%20%2A%20d3%5Flab%5FZ%3B%0A%20%20%20%20return%20new%20d3%5Frgb%28d3%5Fxyz%5Frgb%283%2E2404542%20%2A%20x%20%2D%201%2E5371385%20%2A%20y%20%2D%20%2E4985314%20%2A%20z%29%2C%20d3%5Fxyz%5Frgb%28%2D%2E969266%20%2A%20x%20%2B%201%2E8760108%20%2A%20y%20%2B%20%2E041556%20%2A%20z%29%2C%20d3%5Fxyz%5Frgb%28%2E0556434%20%2A%20x%20%2D%20%2E2040259%20%2A%20y%20%2B%201%2E0572252%20%2A%20z%29%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Flab%5Fhcl%28l%2C%20a%2C%20b%29%20%7B%0A%20%20%20%20return%20l%20%3E%200%20%3F%20new%20d3%5Fhcl%28Math%2Eatan2%28b%2C%20a%29%20%2A%20d3%5Fdegrees%2C%20Math%2Esqrt%28a%20%2A%20a%20%2B%20b%20%2A%20b%29%2C%20l%29%20%3A%20new%20d3%5Fhcl%28NaN%2C%20NaN%2C%20l%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Flab%5Fxyz%28x%29%20%7B%0A%20%20%20%20return%20x%20%3E%20%2E206893034%20%3F%20x%20%2A%20x%20%2A%20x%20%3A%20%28x%20%2D%204%20%2F%2029%29%20%2F%207%2E787037%3B%0A%20%20%7D%0A%20%20function%20d3%5Fxyz%5Flab%28x%29%20%7B%0A%20%20%20%20return%20x%20%3E%20%2E008856%20%3F%20Math%2Epow%28x%2C%201%20%2F%203%29%20%3A%207%2E787037%20%2A%20x%20%2B%204%20%2F%2029%3B%0A%20%20%7D%0A%20%20function%20d3%5Fxyz%5Frgb%28r%29%20%7B%0A%20%20%20%20return%20Math%2Eround%28255%20%2A%20%28r%20%3C%3D%20%2E00304%20%3F%2012%2E92%20%2A%20r%20%3A%201%2E055%20%2A%20Math%2Epow%28r%2C%201%20%2F%202%2E4%29%20%2D%20%2E055%29%29%3B%0A%20%20%7D%0A%20%20d3%2Ergb%20%3D%20d3%5Frgb%3B%0A%20%20function%20d3%5Frgb%28r%2C%20g%2C%20b%29%20%7B%0A%20%20%20%20return%20this%20instanceof%20d3%5Frgb%20%3F%20void%20%28this%2Er%20%3D%20%7E%7Er%2C%20this%2Eg%20%3D%20%7E%7Eg%2C%20this%2Eb%20%3D%20%7E%7Eb%29%20%3A%20arguments%2Elength%20%3C%202%20%3F%20r%20instanceof%20d3%5Frgb%20%3F%20new%20d3%5Frgb%28r%2Er%2C%20r%2Eg%2C%20r%2Eb%29%20%3A%20d3%5Frgb%5Fparse%28%22%22%20%2B%20r%2C%20d3%5Frgb%2C%20d3%5Fhsl%5Frgb%29%20%3A%20new%20d3%5Frgb%28r%2C%20g%2C%20b%29%3B%0A%20%20%7D%0A%20%20function%20d3%5FrgbNumber%28value%29%20%7B%0A%20%20%20%20return%20new%20d3%5Frgb%28value%20%3E%3E%2016%2C%20value%20%3E%3E%208%20%26%20255%2C%20value%20%26%20255%29%3B%0A%20%20%7D%0A%20%20function%20d3%5FrgbString%28value%29%20%7B%0A%20%20%20%20return%20d3%5FrgbNumber%28value%29%20%2B%20%22%22%3B%0A%20%20%7D%0A%20%20var%20d3%5FrgbPrototype%20%3D%20d3%5Frgb%2Eprototype%20%3D%20new%20d3%5Fcolor%28%29%3B%0A%20%20d3%5FrgbPrototype%2Ebrighter%20%3D%20function%28k%29%20%7B%0A%20%20%20%20k%20%3D%20Math%2Epow%28%2E7%2C%20arguments%2Elength%20%3F%20k%20%3A%201%29%3B%0A%20%20%20%20var%20r%20%3D%20this%2Er%2C%20g%20%3D%20this%2Eg%2C%20b%20%3D%20this%2Eb%2C%20i%20%3D%2030%3B%0A%20%20%20%20if%20%28%21r%20%26%26%20%21g%20%26%26%20%21b%29%20return%20new%20d3%5Frgb%28i%2C%20i%2C%20i%29%3B%0A%20%20%20%20if%20%28r%20%26%26%20r%20%3C%20i%29%20r%20%3D%20i%3B%0A%20%20%20%20if%20%28g%20%26%26%20g%20%3C%20i%29%20g%20%3D%20i%3B%0A%20%20%20%20if%20%28b%20%26%26%20b%20%3C%20i%29%20b%20%3D%20i%3B%0A%20%20%20%20return%20new%20d3%5Frgb%28Math%2Emin%28255%2C%20r%20%2F%20k%29%2C%20Math%2Emin%28255%2C%20g%20%2F%20k%29%2C%20Math%2Emin%28255%2C%20b%20%2F%20k%29%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FrgbPrototype%2Edarker%20%3D%20function%28k%29%20%7B%0A%20%20%20%20k%20%3D%20Math%2Epow%28%2E7%2C%20arguments%2Elength%20%3F%20k%20%3A%201%29%3B%0A%20%20%20%20return%20new%20d3%5Frgb%28k%20%2A%20this%2Er%2C%20k%20%2A%20this%2Eg%2C%20k%20%2A%20this%2Eb%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FrgbPrototype%2Ehsl%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Frgb%5Fhsl%28this%2Er%2C%20this%2Eg%2C%20this%2Eb%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FrgbPrototype%2EtoString%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20%22%23%22%20%2B%20d3%5Frgb%5Fhex%28this%2Er%29%20%2B%20d3%5Frgb%5Fhex%28this%2Eg%29%20%2B%20d3%5Frgb%5Fhex%28this%2Eb%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Frgb%5Fhex%28v%29%20%7B%0A%20%20%20%20return%20v%20%3C%2016%20%3F%20%220%22%20%2B%20Math%2Emax%280%2C%20v%29%2EtoString%2816%29%20%3A%20Math%2Emin%28255%2C%20v%29%2EtoString%2816%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Frgb%5Fparse%28format%2C%20rgb%2C%20hsl%29%20%7B%0A%20%20%20%20var%20r%20%3D%200%2C%20g%20%3D%200%2C%20b%20%3D%200%2C%20m1%2C%20m2%2C%20color%3B%0A%20%20%20%20m1%20%3D%20%2F%28%5Ba%2Dz%5D%2B%29%5C%28%28%2E%2A%29%5C%29%2Fi%2Eexec%28format%29%3B%0A%20%20%20%20if%20%28m1%29%20%7B%0A%20%20%20%20%20%20m2%20%3D%20m1%5B2%5D%2Esplit%28%22%2C%22%29%3B%0A%20%20%20%20%20%20switch%20%28m1%5B1%5D%29%20%7B%0A%20%20%20%20%20%20%20case%20%22hsl%22%3A%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20hsl%28parseFloat%28m2%5B0%5D%29%2C%20parseFloat%28m2%5B1%5D%29%20%2F%20100%2C%20parseFloat%28m2%5B2%5D%29%20%2F%20100%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20case%20%22rgb%22%3A%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20rgb%28d3%5Frgb%5FparseNumber%28m2%5B0%5D%29%2C%20d3%5Frgb%5FparseNumber%28m2%5B1%5D%29%2C%20d3%5Frgb%5FparseNumber%28m2%5B2%5D%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28color%20%3D%20d3%5Frgb%5Fnames%2Eget%28format%29%29%20return%20rgb%28color%2Er%2C%20color%2Eg%2C%20color%2Eb%29%3B%0A%20%20%20%20if%20%28format%20%21%3D%20null%20%26%26%20format%2EcharAt%280%29%20%3D%3D%3D%20%22%23%22%20%26%26%20%21isNaN%28color%20%3D%20parseInt%28format%2Eslice%281%29%2C%2016%29%29%29%20%7B%0A%20%20%20%20%20%20if%20%28format%2Elength%20%3D%3D%3D%204%29%20%7B%0A%20%20%20%20%20%20%20%20r%20%3D%20%28color%20%26%203840%29%20%3E%3E%204%3B%0A%20%20%20%20%20%20%20%20r%20%3D%20r%20%3E%3E%204%20%7C%20r%3B%0A%20%20%20%20%20%20%20%20g%20%3D%20color%20%26%20240%3B%0A%20%20%20%20%20%20%20%20g%20%3D%20g%20%3E%3E%204%20%7C%20g%3B%0A%20%20%20%20%20%20%20%20b%20%3D%20color%20%26%2015%3B%0A%20%20%20%20%20%20%20%20b%20%3D%20b%20%3C%3C%204%20%7C%20b%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28format%2Elength%20%3D%3D%3D%207%29%20%7B%0A%20%20%20%20%20%20%20%20r%20%3D%20%28color%20%26%2016711680%29%20%3E%3E%2016%3B%0A%20%20%20%20%20%20%20%20g%20%3D%20%28color%20%26%2065280%29%20%3E%3E%208%3B%0A%20%20%20%20%20%20%20%20b%20%3D%20color%20%26%20255%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20rgb%28r%2C%20g%2C%20b%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Frgb%5Fhsl%28r%2C%20g%2C%20b%29%20%7B%0A%20%20%20%20var%20min%20%3D%20Math%2Emin%28r%20%2F%3D%20255%2C%20g%20%2F%3D%20255%2C%20b%20%2F%3D%20255%29%2C%20max%20%3D%20Math%2Emax%28r%2C%20g%2C%20b%29%2C%20d%20%3D%20max%20%2D%20min%2C%20h%2C%20s%2C%20l%20%3D%20%28max%20%2B%20min%29%20%2F%202%3B%0A%20%20%20%20if%20%28d%29%20%7B%0A%20%20%20%20%20%20s%20%3D%20l%20%3C%20%2E5%20%3F%20d%20%2F%20%28max%20%2B%20min%29%20%3A%20d%20%2F%20%282%20%2D%20max%20%2D%20min%29%3B%0A%20%20%20%20%20%20if%20%28r%20%3D%3D%20max%29%20h%20%3D%20%28g%20%2D%20b%29%20%2F%20d%20%2B%20%28g%20%3C%20b%20%3F%206%20%3A%200%29%3B%20else%20if%20%28g%20%3D%3D%20max%29%20h%20%3D%20%28b%20%2D%20r%29%20%2F%20d%20%2B%202%3B%20else%20h%20%3D%20%28r%20%2D%20g%29%20%2F%20d%20%2B%204%3B%0A%20%20%20%20%20%20h%20%2A%3D%2060%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20h%20%3D%20NaN%3B%0A%20%20%20%20%20%20s%20%3D%20l%20%3E%200%20%26%26%20l%20%3C%201%20%3F%200%20%3A%20h%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20new%20d3%5Fhsl%28h%2C%20s%2C%20l%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Frgb%5Flab%28r%2C%20g%2C%20b%29%20%7B%0A%20%20%20%20r%20%3D%20d3%5Frgb%5Fxyz%28r%29%3B%0A%20%20%20%20g%20%3D%20d3%5Frgb%5Fxyz%28g%29%3B%0A%20%20%20%20b%20%3D%20d3%5Frgb%5Fxyz%28b%29%3B%0A%20%20%20%20var%20x%20%3D%20d3%5Fxyz%5Flab%28%28%2E4124564%20%2A%20r%20%2B%20%2E3575761%20%2A%20g%20%2B%20%2E1804375%20%2A%20b%29%20%2F%20d3%5Flab%5FX%29%2C%20y%20%3D%20d3%5Fxyz%5Flab%28%28%2E2126729%20%2A%20r%20%2B%20%2E7151522%20%2A%20g%20%2B%20%2E072175%20%2A%20b%29%20%2F%20d3%5Flab%5FY%29%2C%20z%20%3D%20d3%5Fxyz%5Flab%28%28%2E0193339%20%2A%20r%20%2B%20%2E119192%20%2A%20g%20%2B%20%2E9503041%20%2A%20b%29%20%2F%20d3%5Flab%5FZ%29%3B%0A%20%20%20%20return%20d3%5Flab%28116%20%2A%20y%20%2D%2016%2C%20500%20%2A%20%28x%20%2D%20y%29%2C%20200%20%2A%20%28y%20%2D%20z%29%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Frgb%5Fxyz%28r%29%20%7B%0A%20%20%20%20return%20%28r%20%2F%3D%20255%29%20%3C%3D%20%2E04045%20%3F%20r%20%2F%2012%2E92%20%3A%20Math%2Epow%28%28r%20%2B%20%2E055%29%20%2F%201%2E055%2C%202%2E4%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Frgb%5FparseNumber%28c%29%20%7B%0A%20%20%20%20var%20f%20%3D%20parseFloat%28c%29%3B%0A%20%20%20%20return%20c%2EcharAt%28c%2Elength%20%2D%201%29%20%3D%3D%3D%20%22%25%22%20%3F%20Math%2Eround%28f%20%2A%202%2E55%29%20%3A%20f%3B%0A%20%20%7D%0A%20%20var%20d3%5Frgb%5Fnames%20%3D%20d3%2Emap%28%7B%0A%20%20%20%20aliceblue%3A%2015792383%2C%0A%20%20%20%20antiquewhite%3A%2016444375%2C%0A%20%20%20%20aqua%3A%2065535%2C%0A%20%20%20%20aquamarine%3A%208388564%2C%0A%20%20%20%20azure%3A%2015794175%2C%0A%20%20%20%20beige%3A%2016119260%2C%0A%20%20%20%20bisque%3A%2016770244%2C%0A%20%20%20%20black%3A%200%2C%0A%20%20%20%20blanchedalmond%3A%2016772045%2C%0A%20%20%20%20blue%3A%20255%2C%0A%20%20%20%20blueviolet%3A%209055202%2C%0A%20%20%20%20brown%3A%2010824234%2C%0A%20%20%20%20burlywood%3A%2014596231%2C%0A%20%20%20%20cadetblue%3A%206266528%2C%0A%20%20%20%20chartreuse%3A%208388352%2C%0A%20%20%20%20chocolate%3A%2013789470%2C%0A%20%20%20%20coral%3A%2016744272%2C%0A%20%20%20%20cornflowerblue%3A%206591981%2C%0A%20%20%20%20cornsilk%3A%2016775388%2C%0A%20%20%20%20crimson%3A%2014423100%2C%0A%20%20%20%20cyan%3A%2065535%2C%0A%20%20%20%20darkblue%3A%20139%2C%0A%20%20%20%20darkcyan%3A%2035723%2C%0A%20%20%20%20darkgoldenrod%3A%2012092939%2C%0A%20%20%20%20darkgray%3A%2011119017%2C%0A%20%20%20%20darkgreen%3A%2025600%2C%0A%20%20%20%20darkgrey%3A%2011119017%2C%0A%20%20%20%20darkkhaki%3A%2012433259%2C%0A%20%20%20%20darkmagenta%3A%209109643%2C%0A%20%20%20%20darkolivegreen%3A%205597999%2C%0A%20%20%20%20darkorange%3A%2016747520%2C%0A%20%20%20%20darkorchid%3A%2010040012%2C%0A%20%20%20%20darkred%3A%209109504%2C%0A%20%20%20%20darksalmon%3A%2015308410%2C%0A%20%20%20%20darkseagreen%3A%209419919%2C%0A%20%20%20%20darkslateblue%3A%204734347%2C%0A%20%20%20%20darkslategray%3A%203100495%2C%0A%20%20%20%20darkslategrey%3A%203100495%2C%0A%20%20%20%20darkturquoise%3A%2052945%2C%0A%20%20%20%20darkviolet%3A%209699539%2C%0A%20%20%20%20deeppink%3A%2016716947%2C%0A%20%20%20%20deepskyblue%3A%2049151%2C%0A%20%20%20%20dimgray%3A%206908265%2C%0A%20%20%20%20dimgrey%3A%206908265%2C%0A%20%20%20%20dodgerblue%3A%202003199%2C%0A%20%20%20%20firebrick%3A%2011674146%2C%0A%20%20%20%20floralwhite%3A%2016775920%2C%0A%20%20%20%20forestgreen%3A%202263842%2C%0A%20%20%20%20fuchsia%3A%2016711935%2C%0A%20%20%20%20gainsboro%3A%2014474460%2C%0A%20%20%20%20ghostwhite%3A%2016316671%2C%0A%20%20%20%20gold%3A%2016766720%2C%0A%20%20%20%20goldenrod%3A%2014329120%2C%0A%20%20%20%20gray%3A%208421504%2C%0A%20%20%20%20green%3A%2032768%2C%0A%20%20%20%20greenyellow%3A%2011403055%2C%0A%20%20%20%20grey%3A%208421504%2C%0A%20%20%20%20honeydew%3A%2015794160%2C%0A%20%20%20%20hotpink%3A%2016738740%2C%0A%20%20%20%20indianred%3A%2013458524%2C%0A%20%20%20%20indigo%3A%204915330%2C%0A%20%20%20%20ivory%3A%2016777200%2C%0A%20%20%20%20khaki%3A%2015787660%2C%0A%20%20%20%20lavender%3A%2015132410%2C%0A%20%20%20%20lavenderblush%3A%2016773365%2C%0A%20%20%20%20lawngreen%3A%208190976%2C%0A%20%20%20%20lemonchiffon%3A%2016775885%2C%0A%20%20%20%20lightblue%3A%2011393254%2C%0A%20%20%20%20lightcoral%3A%2015761536%2C%0A%20%20%20%20lightcyan%3A%2014745599%2C%0A%20%20%20%20lightgoldenrodyellow%3A%2016448210%2C%0A%20%20%20%20lightgray%3A%2013882323%2C%0A%20%20%20%20lightgreen%3A%209498256%2C%0A%20%20%20%20lightgrey%3A%2013882323%2C%0A%20%20%20%20lightpink%3A%2016758465%2C%0A%20%20%20%20lightsalmon%3A%2016752762%2C%0A%20%20%20%20lightseagreen%3A%202142890%2C%0A%20%20%20%20lightskyblue%3A%208900346%2C%0A%20%20%20%20lightslategray%3A%207833753%2C%0A%20%20%20%20lightslategrey%3A%207833753%2C%0A%20%20%20%20lightsteelblue%3A%2011584734%2C%0A%20%20%20%20lightyellow%3A%2016777184%2C%0A%20%20%20%20lime%3A%2065280%2C%0A%20%20%20%20limegreen%3A%203329330%2C%0A%20%20%20%20linen%3A%2016445670%2C%0A%20%20%20%20magenta%3A%2016711935%2C%0A%20%20%20%20maroon%3A%208388608%2C%0A%20%20%20%20mediumaquamarine%3A%206737322%2C%0A%20%20%20%20mediumblue%3A%20205%2C%0A%20%20%20%20mediumorchid%3A%2012211667%2C%0A%20%20%20%20mediumpurple%3A%209662683%2C%0A%20%20%20%20mediumseagreen%3A%203978097%2C%0A%20%20%20%20mediumslateblue%3A%208087790%2C%0A%20%20%20%20mediumspringgreen%3A%2064154%2C%0A%20%20%20%20mediumturquoise%3A%204772300%2C%0A%20%20%20%20mediumvioletred%3A%2013047173%2C%0A%20%20%20%20midnightblue%3A%201644912%2C%0A%20%20%20%20mintcream%3A%2016121850%2C%0A%20%20%20%20mistyrose%3A%2016770273%2C%0A%20%20%20%20moccasin%3A%2016770229%2C%0A%20%20%20%20navajowhite%3A%2016768685%2C%0A%20%20%20%20navy%3A%20128%2C%0A%20%20%20%20oldlace%3A%2016643558%2C%0A%20%20%20%20olive%3A%208421376%2C%0A%20%20%20%20olivedrab%3A%207048739%2C%0A%20%20%20%20orange%3A%2016753920%2C%0A%20%20%20%20orangered%3A%2016729344%2C%0A%20%20%20%20orchid%3A%2014315734%2C%0A%20%20%20%20palegoldenrod%3A%2015657130%2C%0A%20%20%20%20palegreen%3A%2010025880%2C%0A%20%20%20%20paleturquoise%3A%2011529966%2C%0A%20%20%20%20palevioletred%3A%2014381203%2C%0A%20%20%20%20papayawhip%3A%2016773077%2C%0A%20%20%20%20peachpuff%3A%2016767673%2C%0A%20%20%20%20peru%3A%2013468991%2C%0A%20%20%20%20pink%3A%2016761035%2C%0A%20%20%20%20plum%3A%2014524637%2C%0A%20%20%20%20powderblue%3A%2011591910%2C%0A%20%20%20%20purple%3A%208388736%2C%0A%20%20%20%20red%3A%2016711680%2C%0A%20%20%20%20rosybrown%3A%2012357519%2C%0A%20%20%20%20royalblue%3A%204286945%2C%0A%20%20%20%20saddlebrown%3A%209127187%2C%0A%20%20%20%20salmon%3A%2016416882%2C%0A%20%20%20%20sandybrown%3A%2016032864%2C%0A%20%20%20%20seagreen%3A%203050327%2C%0A%20%20%20%20seashell%3A%2016774638%2C%0A%20%20%20%20sienna%3A%2010506797%2C%0A%20%20%20%20silver%3A%2012632256%2C%0A%20%20%20%20skyblue%3A%208900331%2C%0A%20%20%20%20slateblue%3A%206970061%2C%0A%20%20%20%20slategray%3A%207372944%2C%0A%20%20%20%20slategrey%3A%207372944%2C%0A%20%20%20%20snow%3A%2016775930%2C%0A%20%20%20%20springgreen%3A%2065407%2C%0A%20%20%20%20steelblue%3A%204620980%2C%0A%20%20%20%20tan%3A%2013808780%2C%0A%20%20%20%20teal%3A%2032896%2C%0A%20%20%20%20thistle%3A%2014204888%2C%0A%20%20%20%20tomato%3A%2016737095%2C%0A%20%20%20%20turquoise%3A%204251856%2C%0A%20%20%20%20violet%3A%2015631086%2C%0A%20%20%20%20wheat%3A%2016113331%2C%0A%20%20%20%20white%3A%2016777215%2C%0A%20%20%20%20whitesmoke%3A%2016119285%2C%0A%20%20%20%20yellow%3A%2016776960%2C%0A%20%20%20%20yellowgreen%3A%2010145074%0A%20%20%7D%29%3B%0A%20%20d3%5Frgb%5Fnames%2EforEach%28function%28key%2C%20value%29%20%7B%0A%20%20%20%20d3%5Frgb%5Fnames%2Eset%28key%2C%20d3%5FrgbNumber%28value%29%29%3B%0A%20%20%7D%29%3B%0A%20%20function%20d3%5Ffunctor%28v%29%20%7B%0A%20%20%20%20return%20typeof%20v%20%3D%3D%3D%20%22function%22%20%3F%20v%20%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2Efunctor%20%3D%20d3%5Ffunctor%3B%0A%20%20function%20d3%5Fidentity%28d%29%20%7B%0A%20%20%20%20return%20d%3B%0A%20%20%7D%0A%20%20d3%2Exhr%20%3D%20d3%5FxhrType%28d3%5Fidentity%29%3B%0A%20%20function%20d3%5FxhrType%28response%29%20%7B%0A%20%20%20%20return%20function%28url%2C%20mimeType%2C%20callback%29%20%7B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%3D%202%20%26%26%20typeof%20mimeType%20%3D%3D%3D%20%22function%22%29%20callback%20%3D%20mimeType%2C%20%0A%20%20%20%20%20%20mimeType%20%3D%20null%3B%0A%20%20%20%20%20%20return%20d3%5Fxhr%28url%2C%20mimeType%2C%20response%2C%20callback%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fxhr%28url%2C%20mimeType%2C%20response%2C%20callback%29%20%7B%0A%20%20%20%20var%20xhr%20%3D%20%7B%7D%2C%20dispatch%20%3D%20d3%2Edispatch%28%22beforesend%22%2C%20%22progress%22%2C%20%22load%22%2C%20%22error%22%29%2C%20headers%20%3D%20%7B%7D%2C%20request%20%3D%20new%20XMLHttpRequest%28%29%2C%20responseType%20%3D%20null%3B%0A%20%20%20%20if%20%28d3%5Fwindow%2EXDomainRequest%20%26%26%20%21%28%22withCredentials%22%20in%20request%29%20%26%26%20%2F%5E%28http%28s%29%3F%3A%29%3F%5C%2F%5C%2F%2F%2Etest%28url%29%29%20request%20%3D%20new%20XDomainRequest%28%29%3B%0A%20%20%20%20%22onload%22%20in%20request%20%3F%20request%2Eonload%20%3D%20request%2Eonerror%20%3D%20respond%20%3A%20request%2Eonreadystatechange%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20request%2EreadyState%20%3E%203%20%26%26%20respond%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20respond%28%29%20%7B%0A%20%20%20%20%20%20var%20status%20%3D%20request%2Estatus%2C%20result%3B%0A%20%20%20%20%20%20if%20%28%21status%20%26%26%20d3%5FxhrHasResponse%28request%29%20%7C%7C%20status%20%3E%3D%20200%20%26%26%20status%20%3C%20300%20%7C%7C%20status%20%3D%3D%3D%20304%29%20%7B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20result%20%3D%20response%2Ecall%28xhr%2C%20request%29%3B%0A%20%20%20%20%20%20%20%20%7D%20catch%20%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20dispatch%2Eerror%2Ecall%28xhr%2C%20e%29%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20dispatch%2Eload%2Ecall%28xhr%2C%20result%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20dispatch%2Eerror%2Ecall%28xhr%2C%20request%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20request%2Eonprogress%20%3D%20function%28event%29%20%7B%0A%20%20%20%20%20%20var%20o%20%3D%20d3%2Eevent%3B%0A%20%20%20%20%20%20d3%2Eevent%20%3D%20event%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20dispatch%2Eprogress%2Ecall%28xhr%2C%20request%29%3B%0A%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20d3%2Eevent%20%3D%20o%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20xhr%2Eheader%20%3D%20function%28name%2C%20value%29%20%7B%0A%20%20%20%20%20%20name%20%3D%20%28name%20%2B%20%22%22%29%2EtoLowerCase%28%29%3B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20return%20headers%5Bname%5D%3B%0A%20%20%20%20%20%20if%20%28value%20%3D%3D%20null%29%20delete%20headers%5Bname%5D%3B%20else%20headers%5Bname%5D%20%3D%20value%20%2B%20%22%22%3B%0A%20%20%20%20%20%20return%20xhr%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20xhr%2EmimeType%20%3D%20function%28value%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20mimeType%3B%0A%20%20%20%20%20%20mimeType%20%3D%20value%20%3D%3D%20null%20%3F%20null%20%3A%20value%20%2B%20%22%22%3B%0A%20%20%20%20%20%20return%20xhr%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20xhr%2EresponseType%20%3D%20function%28value%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20responseType%3B%0A%20%20%20%20%20%20responseType%20%3D%20value%3B%0A%20%20%20%20%20%20return%20xhr%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20xhr%2Eresponse%20%3D%20function%28value%29%20%7B%0A%20%20%20%20%20%20response%20%3D%20value%3B%0A%20%20%20%20%20%20return%20xhr%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%5B%20%22get%22%2C%20%22post%22%20%5D%2EforEach%28function%28method%29%20%7B%0A%20%20%20%20%20%20xhr%5Bmethod%5D%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20xhr%2Esend%2Eapply%28xhr%2C%20%5B%20method%20%5D%2Econcat%28d3%5Farray%28arguments%29%29%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20xhr%2Esend%20%3D%20function%28method%2C%20data%2C%20callback%29%20%7B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3D%3D%3D%202%20%26%26%20typeof%20data%20%3D%3D%3D%20%22function%22%29%20callback%20%3D%20data%2C%20data%20%3D%20null%3B%0A%20%20%20%20%20%20request%2Eopen%28method%2C%20url%2C%20true%29%3B%0A%20%20%20%20%20%20if%20%28mimeType%20%21%3D%20null%20%26%26%20%21%28%22accept%22%20in%20headers%29%29%20headers%5B%22accept%22%5D%20%3D%20mimeType%20%2B%20%22%2C%2A%2F%2A%22%3B%0A%20%20%20%20%20%20if%20%28request%2EsetRequestHeader%29%20for%20%28var%20name%20in%20headers%29%20request%2EsetRequestHeader%28name%2C%20headers%5Bname%5D%29%3B%0A%20%20%20%20%20%20if%20%28mimeType%20%21%3D%20null%20%26%26%20request%2EoverrideMimeType%29%20request%2EoverrideMimeType%28mimeType%29%3B%0A%20%20%20%20%20%20if%20%28responseType%20%21%3D%20null%29%20request%2EresponseType%20%3D%20responseType%3B%0A%20%20%20%20%20%20if%20%28callback%20%21%3D%20null%29%20xhr%2Eon%28%22error%22%2C%20callback%29%2Eon%28%22load%22%2C%20function%28request%29%20%7B%0A%20%20%20%20%20%20%20%20callback%28null%2C%20request%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20dispatch%2Ebeforesend%2Ecall%28xhr%2C%20request%29%3B%0A%20%20%20%20%20%20request%2Esend%28data%20%3D%3D%20null%20%3F%20null%20%3A%20data%29%3B%0A%20%20%20%20%20%20return%20xhr%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20xhr%2Eabort%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20request%2Eabort%28%29%3B%0A%20%20%20%20%20%20return%20xhr%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20d3%2Erebind%28xhr%2C%20dispatch%2C%20%22on%22%29%3B%0A%20%20%20%20return%20callback%20%3D%3D%20null%20%3F%20xhr%20%3A%20xhr%2Eget%28d3%5Fxhr%5FfixCallback%28callback%29%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fxhr%5FfixCallback%28callback%29%20%7B%0A%20%20%20%20return%20callback%2Elength%20%3D%3D%3D%201%20%3F%20function%28error%2C%20request%29%20%7B%0A%20%20%20%20%20%20callback%28error%20%3D%3D%20null%20%3F%20request%20%3A%20null%29%3B%0A%20%20%20%20%7D%20%3A%20callback%3B%0A%20%20%7D%0A%20%20function%20d3%5FxhrHasResponse%28request%29%20%7B%0A%20%20%20%20var%20type%20%3D%20request%2EresponseType%3B%0A%20%20%20%20return%20type%20%26%26%20type%20%21%3D%3D%20%22text%22%20%3F%20request%2Eresponse%20%3A%20request%2EresponseText%3B%0A%20%20%7D%0A%20%20d3%2Edsv%20%3D%20function%28delimiter%2C%20mimeType%29%20%7B%0A%20%20%20%20var%20reFormat%20%3D%20new%20RegExp%28%27%5B%22%27%20%2B%20delimiter%20%2B%20%22%5Cn%5D%22%29%2C%20delimiterCode%20%3D%20delimiter%2EcharCodeAt%280%29%3B%0A%20%20%20%20function%20dsv%28url%2C%20row%2C%20callback%29%20%7B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%203%29%20callback%20%3D%20row%2C%20row%20%3D%20null%3B%0A%20%20%20%20%20%20var%20xhr%20%3D%20d3%5Fxhr%28url%2C%20mimeType%2C%20row%20%3D%3D%20null%20%3F%20response%20%3A%20typedResponse%28row%29%2C%20callback%29%3B%0A%20%20%20%20%20%20xhr%2Erow%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20%20%20return%20arguments%2Elength%20%3F%20xhr%2Eresponse%28%28row%20%3D%20%5F%29%20%3D%3D%20null%20%3F%20response%20%3A%20typedResponse%28%5F%29%29%20%3A%20row%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20return%20xhr%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20response%28request%29%20%7B%0A%20%20%20%20%20%20return%20dsv%2Eparse%28request%2EresponseText%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20typedResponse%28f%29%20%7B%0A%20%20%20%20%20%20return%20function%28request%29%20%7B%0A%20%20%20%20%20%20%20%20return%20dsv%2Eparse%28request%2EresponseText%2C%20f%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20dsv%2Eparse%20%3D%20function%28text%2C%20f%29%20%7B%0A%20%20%20%20%20%20var%20o%3B%0A%20%20%20%20%20%20return%20dsv%2EparseRows%28text%2C%20function%28row%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28o%29%20return%20o%28row%2C%20i%20%2D%201%29%3B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20new%20Function%28%22d%22%2C%20%22return%20%7B%22%20%2B%20row%2Emap%28function%28name%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20JSON%2Estringify%28name%29%20%2B%20%22%3A%20d%5B%22%20%2B%20i%20%2B%20%22%5D%22%3B%0A%20%20%20%20%20%20%20%20%7D%29%2Ejoin%28%22%2C%22%29%20%2B%20%22%7D%22%29%3B%0A%20%20%20%20%20%20%20%20o%20%3D%20f%20%3F%20function%28row%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20f%28a%28row%29%2C%20i%29%3B%0A%20%20%20%20%20%20%20%20%7D%20%3A%20a%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20dsv%2EparseRows%20%3D%20function%28text%2C%20f%29%20%7B%0A%20%20%20%20%20%20var%20EOL%20%3D%20%7B%7D%2C%20EOF%20%3D%20%7B%7D%2C%20rows%20%3D%20%5B%5D%2C%20N%20%3D%20text%2Elength%2C%20I%20%3D%200%2C%20n%20%3D%200%2C%20t%2C%20eol%3B%0A%20%20%20%20%20%20function%20token%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28I%20%3E%3D%20N%29%20return%20EOF%3B%0A%20%20%20%20%20%20%20%20if%20%28eol%29%20return%20eol%20%3D%20false%2C%20EOL%3B%0A%20%20%20%20%20%20%20%20var%20j%20%3D%20I%3B%0A%20%20%20%20%20%20%20%20if%20%28text%2EcharCodeAt%28j%29%20%3D%3D%3D%2034%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20i%20%3D%20j%3B%0A%20%20%20%20%20%20%20%20%20%20while%20%28i%2B%2B%20%3C%20N%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28text%2EcharCodeAt%28i%29%20%3D%3D%3D%2034%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28text%2EcharCodeAt%28i%20%2B%201%29%20%21%3D%3D%2034%29%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Bi%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20I%20%3D%20i%20%2B%202%3B%0A%20%20%20%20%20%20%20%20%20%20var%20c%20%3D%20text%2EcharCodeAt%28i%20%2B%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28c%20%3D%3D%3D%2013%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20eol%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28text%2EcharCodeAt%28i%20%2B%202%29%20%3D%3D%3D%2010%29%20%2B%2BI%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28c%20%3D%3D%3D%2010%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20eol%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20text%2Eslice%28j%20%2B%201%2C%20i%29%2Ereplace%28%2F%22%22%2Fg%2C%20%27%22%27%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20while%20%28I%20%3C%20N%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20c%20%3D%20text%2EcharCodeAt%28I%2B%2B%29%2C%20k%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28c%20%3D%3D%3D%2010%29%20eol%20%3D%20true%3B%20else%20if%20%28c%20%3D%3D%3D%2013%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20eol%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28text%2EcharCodeAt%28I%29%20%3D%3D%3D%2010%29%20%2B%2BI%2C%20%2B%2Bk%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28c%20%21%3D%3D%20delimiterCode%29%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20return%20text%2Eslice%28j%2C%20I%20%2D%20k%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20text%2Eslice%28j%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20while%20%28%28t%20%3D%20token%28%29%29%20%21%3D%3D%20EOF%29%20%7B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20while%20%28t%20%21%3D%3D%20EOL%20%26%26%20t%20%21%3D%3D%20EOF%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20a%2Epush%28t%29%3B%0A%20%20%20%20%20%20%20%20%20%20t%20%3D%20token%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28f%20%26%26%20%28a%20%3D%20f%28a%2C%20n%2B%2B%29%29%20%3D%3D%20null%29%20continue%3B%0A%20%20%20%20%20%20%20%20rows%2Epush%28a%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20rows%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20dsv%2Eformat%20%3D%20function%28rows%29%20%7B%0A%20%20%20%20%20%20if%20%28Array%2EisArray%28rows%5B0%5D%29%29%20return%20dsv%2EformatRows%28rows%29%3B%0A%20%20%20%20%20%20var%20fieldSet%20%3D%20new%20d3%5FSet%28%29%2C%20fields%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20rows%2EforEach%28function%28row%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20field%20in%20row%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21fieldSet%2Ehas%28field%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fields%2Epush%28fieldSet%2Eadd%28field%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20return%20%5B%20fields%2Emap%28formatValue%29%2Ejoin%28delimiter%29%20%5D%2Econcat%28rows%2Emap%28function%28row%29%20%7B%0A%20%20%20%20%20%20%20%20return%20fields%2Emap%28function%28field%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20formatValue%28row%5Bfield%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%2Ejoin%28delimiter%29%3B%0A%20%20%20%20%20%20%7D%29%29%2Ejoin%28%22%5Cn%22%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20dsv%2EformatRows%20%3D%20function%28rows%29%20%7B%0A%20%20%20%20%20%20return%20rows%2Emap%28formatRow%29%2Ejoin%28%22%5Cn%22%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20formatRow%28row%29%20%7B%0A%20%20%20%20%20%20return%20row%2Emap%28formatValue%29%2Ejoin%28delimiter%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20formatValue%28text%29%20%7B%0A%20%20%20%20%20%20return%20reFormat%2Etest%28text%29%20%3F%20%27%22%27%20%2B%20text%2Ereplace%28%2F%5C%22%2Fg%2C%20%27%22%22%27%29%20%2B%20%27%22%27%20%3A%20text%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20dsv%3B%0A%20%20%7D%3B%0A%20%20d3%2Ecsv%20%3D%20d3%2Edsv%28%22%2C%22%2C%20%22text%2Fcsv%22%29%3B%0A%20%20d3%2Etsv%20%3D%20d3%2Edsv%28%22%09%22%2C%20%22text%2Ftab%2Dseparated%2Dvalues%22%29%3B%0A%20%20var%20d3%5Ftimer%5FqueueHead%2C%20d3%5Ftimer%5FqueueTail%2C%20d3%5Ftimer%5Finterval%2C%20d3%5Ftimer%5Ftimeout%2C%20d3%5Ftimer%5Factive%2C%20d3%5Ftimer%5Fframe%20%3D%20d3%5Fwindow%5Bd3%5FvendorSymbol%28d3%5Fwindow%2C%20%22requestAnimationFrame%22%29%5D%20%7C%7C%20function%28callback%29%20%7B%0A%20%20%20%20setTimeout%28callback%2C%2017%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Etimer%20%3D%20function%28callback%2C%20delay%2C%20then%29%20%7B%0A%20%20%20%20var%20n%20%3D%20arguments%2Elength%3B%0A%20%20%20%20if%20%28n%20%3C%202%29%20delay%20%3D%200%3B%0A%20%20%20%20if%20%28n%20%3C%203%29%20then%20%3D%20Date%2Enow%28%29%3B%0A%20%20%20%20var%20time%20%3D%20then%20%2B%20delay%2C%20timer%20%3D%20%7B%0A%20%20%20%20%20%20c%3A%20callback%2C%0A%20%20%20%20%20%20t%3A%20time%2C%0A%20%20%20%20%20%20f%3A%20false%2C%0A%20%20%20%20%20%20n%3A%20null%0A%20%20%20%20%7D%3B%0A%20%20%20%20if%20%28d3%5Ftimer%5FqueueTail%29%20d3%5Ftimer%5FqueueTail%2En%20%3D%20timer%3B%20else%20d3%5Ftimer%5FqueueHead%20%3D%20timer%3B%0A%20%20%20%20d3%5Ftimer%5FqueueTail%20%3D%20timer%3B%0A%20%20%20%20if%20%28%21d3%5Ftimer%5Finterval%29%20%7B%0A%20%20%20%20%20%20d3%5Ftimer%5Ftimeout%20%3D%20clearTimeout%28d3%5Ftimer%5Ftimeout%29%3B%0A%20%20%20%20%20%20d3%5Ftimer%5Finterval%20%3D%201%3B%0A%20%20%20%20%20%20d3%5Ftimer%5Fframe%28d3%5Ftimer%5Fstep%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20function%20d3%5Ftimer%5Fstep%28%29%20%7B%0A%20%20%20%20var%20now%20%3D%20d3%5Ftimer%5Fmark%28%29%2C%20delay%20%3D%20d3%5Ftimer%5Fsweep%28%29%20%2D%20now%3B%0A%20%20%20%20if%20%28delay%20%3E%2024%29%20%7B%0A%20%20%20%20%20%20if%20%28isFinite%28delay%29%29%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout%28d3%5Ftimer%5Ftimeout%29%3B%0A%20%20%20%20%20%20%20%20d3%5Ftimer%5Ftimeout%20%3D%20setTimeout%28d3%5Ftimer%5Fstep%2C%20delay%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20d3%5Ftimer%5Finterval%20%3D%200%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20d3%5Ftimer%5Finterval%20%3D%201%3B%0A%20%20%20%20%20%20d3%5Ftimer%5Fframe%28d3%5Ftimer%5Fstep%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20d3%2Etimer%2Eflush%20%3D%20function%28%29%20%7B%0A%20%20%20%20d3%5Ftimer%5Fmark%28%29%3B%0A%20%20%20%20d3%5Ftimer%5Fsweep%28%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Ftimer%5Fmark%28%29%20%7B%0A%20%20%20%20var%20now%20%3D%20Date%2Enow%28%29%3B%0A%20%20%20%20d3%5Ftimer%5Factive%20%3D%20d3%5Ftimer%5FqueueHead%3B%0A%20%20%20%20while%20%28d3%5Ftimer%5Factive%29%20%7B%0A%20%20%20%20%20%20if%20%28now%20%3E%3D%20d3%5Ftimer%5Factive%2Et%29%20d3%5Ftimer%5Factive%2Ef%20%3D%20d3%5Ftimer%5Factive%2Ec%28now%20%2D%20d3%5Ftimer%5Factive%2Et%29%3B%0A%20%20%20%20%20%20d3%5Ftimer%5Factive%20%3D%20d3%5Ftimer%5Factive%2En%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20now%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftimer%5Fsweep%28%29%20%7B%0A%20%20%20%20var%20t0%2C%20t1%20%3D%20d3%5Ftimer%5FqueueHead%2C%20time%20%3D%20Infinity%3B%0A%20%20%20%20while%20%28t1%29%20%7B%0A%20%20%20%20%20%20if%20%28t1%2Ef%29%20%7B%0A%20%20%20%20%20%20%20%20t1%20%3D%20t0%20%3F%20t0%2En%20%3D%20t1%2En%20%3A%20d3%5Ftimer%5FqueueHead%20%3D%20t1%2En%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20%28t1%2Et%20%3C%20time%29%20time%20%3D%20t1%2Et%3B%0A%20%20%20%20%20%20%20%20t1%20%3D%20%28t0%20%3D%20t1%29%2En%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20d3%5Ftimer%5FqueueTail%20%3D%20t0%3B%0A%20%20%20%20return%20time%3B%0A%20%20%7D%0A%20%20function%20d3%5Fformat%5Fprecision%28x%2C%20p%29%20%7B%0A%20%20%20%20return%20p%20%2D%20%28x%20%3F%20Math%2Eceil%28Math%2Elog%28x%29%20%2F%20Math%2ELN10%29%20%3A%201%29%3B%0A%20%20%7D%0A%20%20d3%2Eround%20%3D%20function%28x%2C%20n%29%20%7B%0A%20%20%20%20return%20n%20%3F%20Math%2Eround%28x%20%2A%20%28n%20%3D%20Math%2Epow%2810%2C%20n%29%29%29%20%2F%20n%20%3A%20Math%2Eround%28x%29%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5FformatPrefixes%20%3D%20%5B%20%22y%22%2C%20%22z%22%2C%20%22a%22%2C%20%22f%22%2C%20%22p%22%2C%20%22n%22%2C%20%22%C2%B5%22%2C%20%22m%22%2C%20%22%22%2C%20%22k%22%2C%20%22M%22%2C%20%22G%22%2C%20%22T%22%2C%20%22P%22%2C%20%22E%22%2C%20%22Z%22%2C%20%22Y%22%20%5D%2Emap%28d3%5FformatPrefix%29%3B%0A%20%20d3%2EformatPrefix%20%3D%20function%28value%2C%20precision%29%20%7B%0A%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20if%20%28value%29%20%7B%0A%20%20%20%20%20%20if%20%28value%20%3C%200%29%20value%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20if%20%28precision%29%20value%20%3D%20d3%2Eround%28value%2C%20d3%5Fformat%5Fprecision%28value%2C%20precision%29%29%3B%0A%20%20%20%20%20%20i%20%3D%201%20%2B%20Math%2Efloor%281e%2D12%20%2B%20Math%2Elog%28value%29%20%2F%20Math%2ELN10%29%3B%0A%20%20%20%20%20%20i%20%3D%20Math%2Emax%28%2D24%2C%20Math%2Emin%2824%2C%20Math%2Efloor%28%28i%20%2D%201%29%20%2F%203%29%20%2A%203%29%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5FformatPrefixes%5B8%20%2B%20i%20%2F%203%5D%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5FformatPrefix%28d%2C%20i%29%20%7B%0A%20%20%20%20var%20k%20%3D%20Math%2Epow%2810%2C%20abs%288%20%2D%20i%29%20%2A%203%29%3B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20scale%3A%20i%20%3E%208%20%3F%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d%20%2F%20k%3B%0A%20%20%20%20%20%20%7D%20%3A%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d%20%2A%20k%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20symbol%3A%20d%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Flocale%5FnumberFormat%28locale%29%20%7B%0A%20%20%20%20var%20locale%5Fdecimal%20%3D%20locale%2Edecimal%2C%20locale%5Fthousands%20%3D%20locale%2Ethousands%2C%20locale%5Fgrouping%20%3D%20locale%2Egrouping%2C%20locale%5Fcurrency%20%3D%20locale%2Ecurrency%2C%20formatGroup%20%3D%20locale%5Fgrouping%20%26%26%20locale%5Fthousands%20%3F%20function%28value%2C%20width%29%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20value%2Elength%2C%20t%20%3D%20%5B%5D%2C%20j%20%3D%200%2C%20g%20%3D%20locale%5Fgrouping%5B0%5D%2C%20length%20%3D%200%3B%0A%20%20%20%20%20%20while%20%28i%20%3E%200%20%26%26%20g%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28length%20%2B%20g%20%2B%201%20%3E%20width%29%20g%20%3D%20Math%2Emax%281%2C%20width%20%2D%20length%29%3B%0A%20%20%20%20%20%20%20%20t%2Epush%28value%2Esubstring%28i%20%2D%3D%20g%2C%20i%20%2B%20g%29%29%3B%0A%20%20%20%20%20%20%20%20if%20%28%28length%20%2B%3D%20g%20%2B%201%29%20%3E%20width%29%20break%3B%0A%20%20%20%20%20%20%20%20g%20%3D%20locale%5Fgrouping%5Bj%20%3D%20%28j%20%2B%201%29%20%25%20locale%5Fgrouping%2Elength%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20t%2Ereverse%28%29%2Ejoin%28locale%5Fthousands%29%3B%0A%20%20%20%20%7D%20%3A%20d3%5Fidentity%3B%0A%20%20%20%20return%20function%28specifier%29%20%7B%0A%20%20%20%20%20%20var%20match%20%3D%20d3%5Fformat%5Fre%2Eexec%28specifier%29%2C%20fill%20%3D%20match%5B1%5D%20%7C%7C%20%22%20%22%2C%20align%20%3D%20match%5B2%5D%20%7C%7C%20%22%3E%22%2C%20sign%20%3D%20match%5B3%5D%20%7C%7C%20%22%2D%22%2C%20symbol%20%3D%20match%5B4%5D%20%7C%7C%20%22%22%2C%20zfill%20%3D%20match%5B5%5D%2C%20width%20%3D%20%2Bmatch%5B6%5D%2C%20comma%20%3D%20match%5B7%5D%2C%20precision%20%3D%20match%5B8%5D%2C%20type%20%3D%20match%5B9%5D%2C%20scale%20%3D%201%2C%20prefix%20%3D%20%22%22%2C%20suffix%20%3D%20%22%22%2C%20integer%20%3D%20false%2C%20exponent%20%3D%20true%3B%0A%20%20%20%20%20%20if%20%28precision%29%20precision%20%3D%20%2Bprecision%2Esubstring%281%29%3B%0A%20%20%20%20%20%20if%20%28zfill%20%7C%7C%20fill%20%3D%3D%3D%20%220%22%20%26%26%20align%20%3D%3D%3D%20%22%3D%22%29%20%7B%0A%20%20%20%20%20%20%20%20zfill%20%3D%20fill%20%3D%20%220%22%3B%0A%20%20%20%20%20%20%20%20align%20%3D%20%22%3D%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20switch%20%28type%29%20%7B%0A%20%20%20%20%20%20%20case%20%22n%22%3A%0A%20%20%20%20%20%20%20%20comma%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20type%20%3D%20%22g%22%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20case%20%22%25%22%3A%0A%20%20%20%20%20%20%20%20scale%20%3D%20100%3B%0A%20%20%20%20%20%20%20%20suffix%20%3D%20%22%25%22%3B%0A%20%20%20%20%20%20%20%20type%20%3D%20%22f%22%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20case%20%22p%22%3A%0A%20%20%20%20%20%20%20%20scale%20%3D%20100%3B%0A%20%20%20%20%20%20%20%20suffix%20%3D%20%22%25%22%3B%0A%20%20%20%20%20%20%20%20type%20%3D%20%22r%22%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20case%20%22b%22%3A%0A%20%20%20%20%20%20%20case%20%22o%22%3A%0A%20%20%20%20%20%20%20case%20%22x%22%3A%0A%20%20%20%20%20%20%20case%20%22X%22%3A%0A%20%20%20%20%20%20%20%20if%20%28symbol%20%3D%3D%3D%20%22%23%22%29%20prefix%20%3D%20%220%22%20%2B%20type%2EtoLowerCase%28%29%3B%0A%0A%20%20%20%20%20%20%20case%20%22c%22%3A%0A%20%20%20%20%20%20%20%20exponent%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20case%20%22d%22%3A%0A%20%20%20%20%20%20%20%20integer%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20precision%20%3D%200%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20case%20%22s%22%3A%0A%20%20%20%20%20%20%20%20scale%20%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20type%20%3D%20%22r%22%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28symbol%20%3D%3D%3D%20%22%24%22%29%20prefix%20%3D%20locale%5Fcurrency%5B0%5D%2C%20suffix%20%3D%20locale%5Fcurrency%5B1%5D%3B%0A%20%20%20%20%20%20if%20%28type%20%3D%3D%20%22r%22%20%26%26%20%21precision%29%20type%20%3D%20%22g%22%3B%0A%20%20%20%20%20%20if%20%28precision%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28type%20%3D%3D%20%22g%22%29%20precision%20%3D%20Math%2Emax%281%2C%20Math%2Emin%2821%2C%20precision%29%29%3B%20else%20if%20%28type%20%3D%3D%20%22e%22%20%7C%7C%20type%20%3D%3D%20%22f%22%29%20precision%20%3D%20Math%2Emax%280%2C%20Math%2Emin%2820%2C%20precision%29%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20type%20%3D%20d3%5Fformat%5Ftypes%2Eget%28type%29%20%7C%7C%20d3%5Fformat%5FtypeDefault%3B%0A%20%20%20%20%20%20var%20zcomma%20%3D%20zfill%20%26%26%20comma%3B%0A%20%20%20%20%20%20return%20function%28value%29%20%7B%0A%20%20%20%20%20%20%20%20var%20fullSuffix%20%3D%20suffix%3B%0A%20%20%20%20%20%20%20%20if%20%28integer%20%26%26%20value%20%25%201%29%20return%20%22%22%3B%0A%20%20%20%20%20%20%20%20var%20negative%20%3D%20value%20%3C%200%20%7C%7C%20value%20%3D%3D%3D%200%20%26%26%201%20%2F%20value%20%3C%200%20%3F%20%28value%20%3D%20%2Dvalue%2C%20%22%2D%22%29%20%3A%20sign%20%3D%3D%3D%20%22%2D%22%20%3F%20%22%22%20%3A%20sign%3B%0A%20%20%20%20%20%20%20%20if%20%28scale%20%3C%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20unit%20%3D%20d3%2EformatPrefix%28value%2C%20precision%29%3B%0A%20%20%20%20%20%20%20%20%20%20value%20%3D%20unit%2Escale%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20fullSuffix%20%3D%20unit%2Esymbol%20%2B%20suffix%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20value%20%2A%3D%20scale%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20value%20%3D%20type%28value%2C%20precision%29%3B%0A%20%20%20%20%20%20%20%20var%20i%20%3D%20value%2ElastIndexOf%28%22%2E%22%29%2C%20before%2C%20after%3B%0A%20%20%20%20%20%20%20%20if%20%28i%20%3C%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20j%20%3D%20exponent%20%3F%20value%2ElastIndexOf%28%22e%22%29%20%3A%20%2D1%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28j%20%3C%200%29%20before%20%3D%20value%2C%20after%20%3D%20%22%22%3B%20else%20before%20%3D%20value%2Esubstring%280%2C%20j%29%2C%20after%20%3D%20value%2Esubstring%28j%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20before%20%3D%20value%2Esubstring%280%2C%20i%29%3B%0A%20%20%20%20%20%20%20%20%20%20after%20%3D%20locale%5Fdecimal%20%2B%20value%2Esubstring%28i%20%2B%201%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%21zfill%20%26%26%20comma%29%20before%20%3D%20formatGroup%28before%2C%20Infinity%29%3B%0A%20%20%20%20%20%20%20%20var%20length%20%3D%20prefix%2Elength%20%2B%20before%2Elength%20%2B%20after%2Elength%20%2B%20%28zcomma%20%3F%200%20%3A%20negative%2Elength%29%2C%20padding%20%3D%20length%20%3C%20width%20%3F%20new%20Array%28length%20%3D%20width%20%2D%20length%20%2B%201%29%2Ejoin%28fill%29%20%3A%20%22%22%3B%0A%20%20%20%20%20%20%20%20if%20%28zcomma%29%20before%20%3D%20formatGroup%28padding%20%2B%20before%2C%20padding%2Elength%20%3F%20width%20%2D%20after%2Elength%20%3A%20Infinity%29%3B%0A%20%20%20%20%20%20%20%20negative%20%2B%3D%20prefix%3B%0A%20%20%20%20%20%20%20%20value%20%3D%20before%20%2B%20after%3B%0A%20%20%20%20%20%20%20%20return%20%28align%20%3D%3D%3D%20%22%3C%22%20%3F%20negative%20%2B%20value%20%2B%20padding%20%3A%20align%20%3D%3D%3D%20%22%3E%22%20%3F%20padding%20%2B%20negative%20%2B%20value%20%3A%20align%20%3D%3D%3D%20%22%5E%22%20%3F%20padding%2Esubstring%280%2C%20length%20%3E%3E%3D%201%29%20%2B%20negative%20%2B%20value%20%2B%20padding%2Esubstring%28length%29%20%3A%20negative%20%2B%20%28zcomma%20%3F%20value%20%3A%20padding%20%2B%20value%29%29%20%2B%20fullSuffix%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20var%20d3%5Fformat%5Fre%20%3D%20%2F%28%3F%3A%28%5B%5E%7B%5D%29%3F%28%5B%3C%3E%3D%5E%5D%29%29%3F%28%5B%2B%5C%2D%20%5D%29%3F%28%5B%24%23%5D%29%3F%280%29%3F%28%5Cd%2B%29%3F%28%2C%29%3F%28%5C%2E%2D%3F%5Cd%2B%29%3F%28%5Ba%2Dz%25%5D%29%3F%2Fi%3B%0A%20%20var%20d3%5Fformat%5Ftypes%20%3D%20d3%2Emap%28%7B%0A%20%20%20%20b%3A%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20x%2EtoString%282%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20c%3A%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20String%2EfromCharCode%28x%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20o%3A%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20x%2EtoString%288%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20x%3A%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20x%2EtoString%2816%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20X%3A%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20x%2EtoString%2816%29%2EtoUpperCase%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20g%3A%20function%28x%2C%20p%29%20%7B%0A%20%20%20%20%20%20return%20x%2EtoPrecision%28p%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20e%3A%20function%28x%2C%20p%29%20%7B%0A%20%20%20%20%20%20return%20x%2EtoExponential%28p%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20f%3A%20function%28x%2C%20p%29%20%7B%0A%20%20%20%20%20%20return%20x%2EtoFixed%28p%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20r%3A%20function%28x%2C%20p%29%20%7B%0A%20%20%20%20%20%20return%20%28x%20%3D%20d3%2Eround%28x%2C%20d3%5Fformat%5Fprecision%28x%2C%20p%29%29%29%2EtoFixed%28Math%2Emax%280%2C%20Math%2Emin%2820%2C%20d3%5Fformat%5Fprecision%28x%20%2A%20%281%20%2B%201e%2D15%29%2C%20p%29%29%29%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%29%3B%0A%20%20function%20d3%5Fformat%5FtypeDefault%28x%29%20%7B%0A%20%20%20%20return%20x%20%2B%20%22%22%3B%0A%20%20%7D%0A%20%20var%20d3%5Ftime%20%3D%20d3%2Etime%20%3D%20%7B%7D%2C%20d3%5Fdate%20%3D%20Date%3B%0A%20%20function%20d3%5Fdate%5Futc%28%29%20%7B%0A%20%20%20%20this%2E%5F%20%3D%20new%20Date%28arguments%2Elength%20%3E%201%20%3F%20Date%2EUTC%2Eapply%28this%2C%20arguments%29%20%3A%20arguments%5B0%5D%29%3B%0A%20%20%7D%0A%20%20d3%5Fdate%5Futc%2Eprototype%20%3D%20%7B%0A%20%20%20%20getDate%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5F%2EgetUTCDate%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20getDay%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5F%2EgetUTCDay%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20getFullYear%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5F%2EgetUTCFullYear%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20getHours%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5F%2EgetUTCHours%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20getMilliseconds%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5F%2EgetUTCMilliseconds%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20getMinutes%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5F%2EgetUTCMinutes%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20getMonth%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5F%2EgetUTCMonth%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20getSeconds%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5F%2EgetUTCSeconds%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20getTime%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5F%2EgetTime%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20getTimezoneOffset%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20valueOf%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2E%5F%2EvalueOf%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20setDate%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5Fprototype%2EsetUTCDate%2Eapply%28this%2E%5F%2C%20arguments%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20setDay%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5Fprototype%2EsetUTCDay%2Eapply%28this%2E%5F%2C%20arguments%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20setFullYear%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5Fprototype%2EsetUTCFullYear%2Eapply%28this%2E%5F%2C%20arguments%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20setHours%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5Fprototype%2EsetUTCHours%2Eapply%28this%2E%5F%2C%20arguments%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20setMilliseconds%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5Fprototype%2EsetUTCMilliseconds%2Eapply%28this%2E%5F%2C%20arguments%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20setMinutes%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5Fprototype%2EsetUTCMinutes%2Eapply%28this%2E%5F%2C%20arguments%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20setMonth%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5Fprototype%2EsetUTCMonth%2Eapply%28this%2E%5F%2C%20arguments%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20setSeconds%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5Fprototype%2EsetUTCSeconds%2Eapply%28this%2E%5F%2C%20arguments%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20setTime%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5Fprototype%2EsetTime%2Eapply%28this%2E%5F%2C%20arguments%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20var%20d3%5Ftime%5Fprototype%20%3D%20Date%2Eprototype%3B%0A%20%20function%20d3%5Ftime%5Finterval%28local%2C%20step%2C%20number%29%20%7B%0A%20%20%20%20function%20round%28date%29%20%7B%0A%20%20%20%20%20%20var%20d0%20%3D%20local%28date%29%2C%20d1%20%3D%20offset%28d0%2C%201%29%3B%0A%20%20%20%20%20%20return%20date%20%2D%20d0%20%3C%20d1%20%2D%20date%20%3F%20d0%20%3A%20d1%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20ceil%28date%29%20%7B%0A%20%20%20%20%20%20step%28date%20%3D%20local%28new%20d3%5Fdate%28date%20%2D%201%29%29%2C%201%29%3B%0A%20%20%20%20%20%20return%20date%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20offset%28date%2C%20k%29%20%7B%0A%20%20%20%20%20%20step%28date%20%3D%20new%20d3%5Fdate%28%2Bdate%29%2C%20k%29%3B%0A%20%20%20%20%20%20return%20date%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20range%28t0%2C%20t1%2C%20dt%29%20%7B%0A%20%20%20%20%20%20var%20time%20%3D%20ceil%28t0%29%2C%20times%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20if%20%28dt%20%3E%201%29%20%7B%0A%20%20%20%20%20%20%20%20while%20%28time%20%3C%20t1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21%28number%28time%29%20%25%20dt%29%29%20times%2Epush%28new%20Date%28%2Btime%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20step%28time%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20while%20%28time%20%3C%20t1%29%20times%2Epush%28new%20Date%28%2Btime%29%29%2C%20step%28time%2C%201%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20times%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20range%5Futc%28t0%2C%20t1%2C%20dt%29%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20d3%5Fdate%20%3D%20d3%5Fdate%5Futc%3B%0A%20%20%20%20%20%20%20%20var%20utc%20%3D%20new%20d3%5Fdate%5Futc%28%29%3B%0A%20%20%20%20%20%20%20%20utc%2E%5F%20%3D%20t0%3B%0A%20%20%20%20%20%20%20%20return%20range%28utc%2C%20t1%2C%20dt%29%3B%0A%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20d3%5Fdate%20%3D%20Date%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20local%2Efloor%20%3D%20local%3B%0A%20%20%20%20local%2Eround%20%3D%20round%3B%0A%20%20%20%20local%2Eceil%20%3D%20ceil%3B%0A%20%20%20%20local%2Eoffset%20%3D%20offset%3B%0A%20%20%20%20local%2Erange%20%3D%20range%3B%0A%20%20%20%20var%20utc%20%3D%20local%2Eutc%20%3D%20d3%5Ftime%5Finterval%5Futc%28local%29%3B%0A%20%20%20%20utc%2Efloor%20%3D%20utc%3B%0A%20%20%20%20utc%2Eround%20%3D%20d3%5Ftime%5Finterval%5Futc%28round%29%3B%0A%20%20%20%20utc%2Eceil%20%3D%20d3%5Ftime%5Finterval%5Futc%28ceil%29%3B%0A%20%20%20%20utc%2Eoffset%20%3D%20d3%5Ftime%5Finterval%5Futc%28offset%29%3B%0A%20%20%20%20utc%2Erange%20%3D%20range%5Futc%3B%0A%20%20%20%20return%20local%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5Finterval%5Futc%28method%29%20%7B%0A%20%20%20%20return%20function%28date%2C%20k%29%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20d3%5Fdate%20%3D%20d3%5Fdate%5Futc%3B%0A%20%20%20%20%20%20%20%20var%20utc%20%3D%20new%20d3%5Fdate%5Futc%28%29%3B%0A%20%20%20%20%20%20%20%20utc%2E%5F%20%3D%20date%3B%0A%20%20%20%20%20%20%20%20return%20method%28utc%2C%20k%29%2E%5F%3B%0A%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20d3%5Fdate%20%3D%20Date%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%5Ftime%2Eyear%20%3D%20d3%5Ftime%5Finterval%28function%28date%29%20%7B%0A%20%20%20%20date%20%3D%20d3%5Ftime%2Eday%28date%29%3B%0A%20%20%20%20date%2EsetMonth%280%2C%201%29%3B%0A%20%20%20%20return%20date%3B%0A%20%20%7D%2C%20function%28date%2C%20offset%29%20%7B%0A%20%20%20%20date%2EsetFullYear%28date%2EgetFullYear%28%29%20%2B%20offset%29%3B%0A%20%20%7D%2C%20function%28date%29%20%7B%0A%20%20%20%20return%20date%2EgetFullYear%28%29%3B%0A%20%20%7D%29%3B%0A%20%20d3%5Ftime%2Eyears%20%3D%20d3%5Ftime%2Eyear%2Erange%3B%0A%20%20d3%5Ftime%2Eyears%2Eutc%20%3D%20d3%5Ftime%2Eyear%2Eutc%2Erange%3B%0A%20%20d3%5Ftime%2Eday%20%3D%20d3%5Ftime%5Finterval%28function%28date%29%20%7B%0A%20%20%20%20var%20day%20%3D%20new%20d3%5Fdate%282e3%2C%200%29%3B%0A%20%20%20%20day%2EsetFullYear%28date%2EgetFullYear%28%29%2C%20date%2EgetMonth%28%29%2C%20date%2EgetDate%28%29%29%3B%0A%20%20%20%20return%20day%3B%0A%20%20%7D%2C%20function%28date%2C%20offset%29%20%7B%0A%20%20%20%20date%2EsetDate%28date%2EgetDate%28%29%20%2B%20offset%29%3B%0A%20%20%7D%2C%20function%28date%29%20%7B%0A%20%20%20%20return%20date%2EgetDate%28%29%20%2D%201%3B%0A%20%20%7D%29%3B%0A%20%20d3%5Ftime%2Edays%20%3D%20d3%5Ftime%2Eday%2Erange%3B%0A%20%20d3%5Ftime%2Edays%2Eutc%20%3D%20d3%5Ftime%2Eday%2Eutc%2Erange%3B%0A%20%20d3%5Ftime%2EdayOfYear%20%3D%20function%28date%29%20%7B%0A%20%20%20%20var%20year%20%3D%20d3%5Ftime%2Eyear%28date%29%3B%0A%20%20%20%20return%20Math%2Efloor%28%28date%20%2D%20year%20%2D%20%28date%2EgetTimezoneOffset%28%29%20%2D%20year%2EgetTimezoneOffset%28%29%29%20%2A%206e4%29%20%2F%20864e5%29%3B%0A%20%20%7D%3B%0A%20%20%5B%20%22sunday%22%2C%20%22monday%22%2C%20%22tuesday%22%2C%20%22wednesday%22%2C%20%22thursday%22%2C%20%22friday%22%2C%20%22saturday%22%20%5D%2EforEach%28function%28day%2C%20i%29%20%7B%0A%20%20%20%20i%20%3D%207%20%2D%20i%3B%0A%20%20%20%20var%20interval%20%3D%20d3%5Ftime%5Bday%5D%20%3D%20d3%5Ftime%5Finterval%28function%28date%29%20%7B%0A%20%20%20%20%20%20%28date%20%3D%20d3%5Ftime%2Eday%28date%29%29%2EsetDate%28date%2EgetDate%28%29%20%2D%20%28date%2EgetDay%28%29%20%2B%20i%29%20%25%207%29%3B%0A%20%20%20%20%20%20return%20date%3B%0A%20%20%20%20%7D%2C%20function%28date%2C%20offset%29%20%7B%0A%20%20%20%20%20%20date%2EsetDate%28date%2EgetDate%28%29%20%2B%20Math%2Efloor%28offset%29%20%2A%207%29%3B%0A%20%20%20%20%7D%2C%20function%28date%29%20%7B%0A%20%20%20%20%20%20var%20day%20%3D%20d3%5Ftime%2Eyear%28date%29%2EgetDay%28%29%3B%0A%20%20%20%20%20%20return%20Math%2Efloor%28%28d3%5Ftime%2EdayOfYear%28date%29%20%2B%20%28day%20%2B%20i%29%20%25%207%29%20%2F%207%29%20%2D%20%28day%20%21%3D%3D%20i%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20d3%5Ftime%5Bday%20%2B%20%22s%22%5D%20%3D%20interval%2Erange%3B%0A%20%20%20%20d3%5Ftime%5Bday%20%2B%20%22s%22%5D%2Eutc%20%3D%20interval%2Eutc%2Erange%3B%0A%20%20%20%20d3%5Ftime%5Bday%20%2B%20%22OfYear%22%5D%20%3D%20function%28date%29%20%7B%0A%20%20%20%20%20%20var%20day%20%3D%20d3%5Ftime%2Eyear%28date%29%2EgetDay%28%29%3B%0A%20%20%20%20%20%20return%20Math%2Efloor%28%28d3%5Ftime%2EdayOfYear%28date%29%20%2B%20%28day%20%2B%20i%29%20%25%207%29%20%2F%207%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%29%3B%0A%20%20d3%5Ftime%2Eweek%20%3D%20d3%5Ftime%2Esunday%3B%0A%20%20d3%5Ftime%2Eweeks%20%3D%20d3%5Ftime%2Esunday%2Erange%3B%0A%20%20d3%5Ftime%2Eweeks%2Eutc%20%3D%20d3%5Ftime%2Esunday%2Eutc%2Erange%3B%0A%20%20d3%5Ftime%2EweekOfYear%20%3D%20d3%5Ftime%2EsundayOfYear%3B%0A%20%20function%20d3%5Flocale%5FtimeFormat%28locale%29%20%7B%0A%20%20%20%20var%20locale%5FdateTime%20%3D%20locale%2EdateTime%2C%20locale%5Fdate%20%3D%20locale%2Edate%2C%20locale%5Ftime%20%3D%20locale%2Etime%2C%20locale%5Fperiods%20%3D%20locale%2Eperiods%2C%20locale%5Fdays%20%3D%20locale%2Edays%2C%20locale%5FshortDays%20%3D%20locale%2EshortDays%2C%20locale%5Fmonths%20%3D%20locale%2Emonths%2C%20locale%5FshortMonths%20%3D%20locale%2EshortMonths%3B%0A%20%20%20%20function%20d3%5Ftime%5Fformat%28template%29%20%7B%0A%20%20%20%20%20%20var%20n%20%3D%20template%2Elength%3B%0A%20%20%20%20%20%20function%20format%28date%29%20%7B%0A%20%20%20%20%20%20%20%20var%20string%20%3D%20%5B%5D%2C%20i%20%3D%20%2D1%2C%20j%20%3D%200%2C%20c%2C%20p%2C%20f%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28template%2EcharCodeAt%28i%29%20%3D%3D%3D%2037%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20string%2Epush%28template%2Eslice%28j%2C%20i%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%28p%20%3D%20d3%5Ftime%5FformatPads%5Bc%20%3D%20template%2EcharAt%28%2B%2Bi%29%5D%29%20%21%3D%20null%29%20c%20%3D%20template%2EcharAt%28%2B%2Bi%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28f%20%3D%20d3%5Ftime%5Fformats%5Bc%5D%29%20c%20%3D%20f%28date%2C%20p%20%3D%3D%20null%20%3F%20c%20%3D%3D%3D%20%22e%22%20%3F%20%22%20%22%20%3A%20%220%22%20%3A%20p%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20string%2Epush%28c%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20j%20%3D%20i%20%2B%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20string%2Epush%28template%2Eslice%28j%2C%20i%29%29%3B%0A%20%20%20%20%20%20%20%20return%20string%2Ejoin%28%22%22%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20format%2Eparse%20%3D%20function%28string%29%20%7B%0A%20%20%20%20%20%20%20%20var%20d%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20y%3A%201900%2C%0A%20%20%20%20%20%20%20%20%20%20m%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20d%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20H%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20M%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20S%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20L%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20Z%3A%20null%0A%20%20%20%20%20%20%20%20%7D%2C%20i%20%3D%20d3%5Ftime%5Fparse%28d%2C%20template%2C%20string%2C%200%29%3B%0A%20%20%20%20%20%20%20%20if%20%28i%20%21%3D%20string%2Elength%29%20return%20null%3B%0A%20%20%20%20%20%20%20%20if%20%28%22p%22%20in%20d%29%20d%2EH%20%3D%20d%2EH%20%25%2012%20%2B%20d%2Ep%20%2A%2012%3B%0A%20%20%20%20%20%20%20%20var%20localZ%20%3D%20d%2EZ%20%21%3D%20null%20%26%26%20d3%5Fdate%20%21%3D%3D%20d3%5Fdate%5Futc%2C%20date%20%3D%20new%20%28localZ%20%3F%20d3%5Fdate%5Futc%20%3A%20d3%5Fdate%29%28%29%3B%0A%20%20%20%20%20%20%20%20if%20%28%22j%22%20in%20d%29%20date%2EsetFullYear%28d%2Ey%2C%200%2C%20d%2Ej%29%3B%20else%20if%20%28%22w%22%20in%20d%20%26%26%20%28%22W%22%20in%20d%20%7C%7C%20%22U%22%20in%20d%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20date%2EsetFullYear%28d%2Ey%2C%200%2C%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20date%2EsetFullYear%28d%2Ey%2C%200%2C%20%22W%22%20in%20d%20%3F%20%28d%2Ew%20%2B%206%29%20%25%207%20%2B%20d%2EW%20%2A%207%20%2D%20%28date%2EgetDay%28%29%20%2B%205%29%20%25%207%20%3A%20d%2Ew%20%2B%20d%2EU%20%2A%207%20%2D%20%28date%2EgetDay%28%29%20%2B%206%29%20%25%207%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20date%2EsetFullYear%28d%2Ey%2C%20d%2Em%2C%20d%2Ed%29%3B%0A%20%20%20%20%20%20%20%20date%2EsetHours%28d%2EH%20%2B%20%28d%2EZ%20%2F%20100%20%7C%200%29%2C%20d%2EM%20%2B%20d%2EZ%20%25%20100%2C%20d%2ES%2C%20d%2EL%29%3B%0A%20%20%20%20%20%20%20%20return%20localZ%20%3F%20date%2E%5F%20%3A%20date%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20format%2EtoString%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20template%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20return%20format%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20d3%5Ftime%5Fparse%28date%2C%20template%2C%20string%2C%20j%29%20%7B%0A%20%20%20%20%20%20var%20c%2C%20p%2C%20t%2C%20i%20%3D%200%2C%20n%20%3D%20template%2Elength%2C%20m%20%3D%20string%2Elength%3B%0A%20%20%20%20%20%20while%20%28i%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28j%20%3E%3D%20m%29%20return%20%2D1%3B%0A%20%20%20%20%20%20%20%20c%20%3D%20template%2EcharCodeAt%28i%2B%2B%29%3B%0A%20%20%20%20%20%20%20%20if%20%28c%20%3D%3D%3D%2037%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20t%20%3D%20template%2EcharAt%28i%2B%2B%29%3B%0A%20%20%20%20%20%20%20%20%20%20p%20%3D%20d3%5Ftime%5Fparsers%5Bt%20in%20d3%5Ftime%5FformatPads%20%3F%20template%2EcharAt%28i%2B%2B%29%20%3A%20t%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21p%20%7C%7C%20%28j%20%3D%20p%28date%2C%20string%2C%20j%29%29%20%3C%200%29%20return%20%2D1%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28c%20%21%3D%20string%2EcharCodeAt%28j%2B%2B%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%2D1%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20j%3B%0A%20%20%20%20%7D%0A%20%20%20%20d3%5Ftime%5Fformat%2Eutc%20%3D%20function%28template%29%20%7B%0A%20%20%20%20%20%20var%20local%20%3D%20d3%5Ftime%5Fformat%28template%29%3B%0A%20%20%20%20%20%20function%20format%28date%29%20%7B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20d3%5Fdate%20%3D%20d3%5Fdate%5Futc%3B%0A%20%20%20%20%20%20%20%20%20%20var%20utc%20%3D%20new%20d3%5Fdate%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20utc%2E%5F%20%3D%20date%3B%0A%20%20%20%20%20%20%20%20%20%20return%20local%28utc%29%3B%0A%20%20%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20%20%20d3%5Fdate%20%3D%20Date%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20format%2Eparse%20%3D%20function%28string%29%20%7B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20d3%5Fdate%20%3D%20d3%5Fdate%5Futc%3B%0A%20%20%20%20%20%20%20%20%20%20var%20date%20%3D%20local%2Eparse%28string%29%3B%0A%20%20%20%20%20%20%20%20%20%20return%20date%20%26%26%20date%2E%5F%3B%0A%20%20%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20%20%20d3%5Fdate%20%3D%20Date%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20format%2EtoString%20%3D%20local%2EtoString%3B%0A%20%20%20%20%20%20return%20format%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20d3%5Ftime%5Fformat%2Emulti%20%3D%20d3%5Ftime%5Fformat%2Eutc%2Emulti%20%3D%20d3%5Ftime%5FformatMulti%3B%0A%20%20%20%20var%20d3%5Ftime%5FperiodLookup%20%3D%20d3%2Emap%28%29%2C%20d3%5Ftime%5FdayRe%20%3D%20d3%5Ftime%5FformatRe%28locale%5Fdays%29%2C%20d3%5Ftime%5FdayLookup%20%3D%20d3%5Ftime%5FformatLookup%28locale%5Fdays%29%2C%20d3%5Ftime%5FdayAbbrevRe%20%3D%20d3%5Ftime%5FformatRe%28locale%5FshortDays%29%2C%20d3%5Ftime%5FdayAbbrevLookup%20%3D%20d3%5Ftime%5FformatLookup%28locale%5FshortDays%29%2C%20d3%5Ftime%5FmonthRe%20%3D%20d3%5Ftime%5FformatRe%28locale%5Fmonths%29%2C%20d3%5Ftime%5FmonthLookup%20%3D%20d3%5Ftime%5FformatLookup%28locale%5Fmonths%29%2C%20d3%5Ftime%5FmonthAbbrevRe%20%3D%20d3%5Ftime%5FformatRe%28locale%5FshortMonths%29%2C%20d3%5Ftime%5FmonthAbbrevLookup%20%3D%20d3%5Ftime%5FformatLookup%28locale%5FshortMonths%29%3B%0A%20%20%20%20locale%5Fperiods%2EforEach%28function%28p%2C%20i%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5FperiodLookup%2Eset%28p%2EtoLowerCase%28%29%2C%20i%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20var%20d3%5Ftime%5Fformats%20%3D%20%7B%0A%20%20%20%20%20%20a%3A%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20return%20locale%5FshortDays%5Bd%2EgetDay%28%29%5D%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20A%3A%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20return%20locale%5Fdays%5Bd%2EgetDay%28%29%5D%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20b%3A%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20return%20locale%5FshortMonths%5Bd%2EgetMonth%28%29%5D%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20B%3A%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20return%20locale%5Fmonths%5Bd%2EgetMonth%28%29%5D%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20c%3A%20d3%5Ftime%5Fformat%28locale%5FdateTime%29%2C%0A%20%20%20%20%20%20d%3A%20function%28d%2C%20p%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Ftime%5FformatPad%28d%2EgetDate%28%29%2C%20p%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20e%3A%20function%28d%2C%20p%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Ftime%5FformatPad%28d%2EgetDate%28%29%2C%20p%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20H%3A%20function%28d%2C%20p%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Ftime%5FformatPad%28d%2EgetHours%28%29%2C%20p%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20I%3A%20function%28d%2C%20p%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Ftime%5FformatPad%28d%2EgetHours%28%29%20%25%2012%20%7C%7C%2012%2C%20p%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20j%3A%20function%28d%2C%20p%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Ftime%5FformatPad%281%20%2B%20d3%5Ftime%2EdayOfYear%28d%29%2C%20p%2C%203%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20L%3A%20function%28d%2C%20p%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Ftime%5FformatPad%28d%2EgetMilliseconds%28%29%2C%20p%2C%203%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20m%3A%20function%28d%2C%20p%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Ftime%5FformatPad%28d%2EgetMonth%28%29%20%2B%201%2C%20p%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20M%3A%20function%28d%2C%20p%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Ftime%5FformatPad%28d%2EgetMinutes%28%29%2C%20p%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20p%3A%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20return%20locale%5Fperiods%5B%2B%28d%2EgetHours%28%29%20%3E%3D%2012%29%5D%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20S%3A%20function%28d%2C%20p%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Ftime%5FformatPad%28d%2EgetSeconds%28%29%2C%20p%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20U%3A%20function%28d%2C%20p%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Ftime%5FformatPad%28d3%5Ftime%2EsundayOfYear%28d%29%2C%20p%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20w%3A%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d%2EgetDay%28%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20W%3A%20function%28d%2C%20p%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Ftime%5FformatPad%28d3%5Ftime%2EmondayOfYear%28d%29%2C%20p%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20x%3A%20d3%5Ftime%5Fformat%28locale%5Fdate%29%2C%0A%20%20%20%20%20%20X%3A%20d3%5Ftime%5Fformat%28locale%5Ftime%29%2C%0A%20%20%20%20%20%20y%3A%20function%28d%2C%20p%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Ftime%5FformatPad%28d%2EgetFullYear%28%29%20%25%20100%2C%20p%2C%202%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20Y%3A%20function%28d%2C%20p%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Ftime%5FformatPad%28d%2EgetFullYear%28%29%20%25%201e4%2C%20p%2C%204%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20Z%3A%20d3%5Ftime%5Fzone%2C%0A%20%20%20%20%20%20%22%25%22%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%25%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20var%20d3%5Ftime%5Fparsers%20%3D%20%7B%0A%20%20%20%20%20%20a%3A%20d3%5Ftime%5FparseWeekdayAbbrev%2C%0A%20%20%20%20%20%20A%3A%20d3%5Ftime%5FparseWeekday%2C%0A%20%20%20%20%20%20b%3A%20d3%5Ftime%5FparseMonthAbbrev%2C%0A%20%20%20%20%20%20B%3A%20d3%5Ftime%5FparseMonth%2C%0A%20%20%20%20%20%20c%3A%20d3%5Ftime%5FparseLocaleFull%2C%0A%20%20%20%20%20%20d%3A%20d3%5Ftime%5FparseDay%2C%0A%20%20%20%20%20%20e%3A%20d3%5Ftime%5FparseDay%2C%0A%20%20%20%20%20%20H%3A%20d3%5Ftime%5FparseHour24%2C%0A%20%20%20%20%20%20I%3A%20d3%5Ftime%5FparseHour24%2C%0A%20%20%20%20%20%20j%3A%20d3%5Ftime%5FparseDayOfYear%2C%0A%20%20%20%20%20%20L%3A%20d3%5Ftime%5FparseMilliseconds%2C%0A%20%20%20%20%20%20m%3A%20d3%5Ftime%5FparseMonthNumber%2C%0A%20%20%20%20%20%20M%3A%20d3%5Ftime%5FparseMinutes%2C%0A%20%20%20%20%20%20p%3A%20d3%5Ftime%5FparseAmPm%2C%0A%20%20%20%20%20%20S%3A%20d3%5Ftime%5FparseSeconds%2C%0A%20%20%20%20%20%20U%3A%20d3%5Ftime%5FparseWeekNumberSunday%2C%0A%20%20%20%20%20%20w%3A%20d3%5Ftime%5FparseWeekdayNumber%2C%0A%20%20%20%20%20%20W%3A%20d3%5Ftime%5FparseWeekNumberMonday%2C%0A%20%20%20%20%20%20x%3A%20d3%5Ftime%5FparseLocaleDate%2C%0A%20%20%20%20%20%20X%3A%20d3%5Ftime%5FparseLocaleTime%2C%0A%20%20%20%20%20%20y%3A%20d3%5Ftime%5FparseYear%2C%0A%20%20%20%20%20%20Y%3A%20d3%5Ftime%5FparseFullYear%2C%0A%20%20%20%20%20%20Z%3A%20d3%5Ftime%5FparseZone%2C%0A%20%20%20%20%20%20%22%25%22%3A%20d3%5Ftime%5FparseLiteralPercent%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20d3%5Ftime%5FparseWeekdayAbbrev%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5FdayAbbrevRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FdayAbbrevRe%2Eexec%28string%2Eslice%28i%29%29%3B%0A%20%20%20%20%20%20return%20n%20%3F%20%28date%2Ew%20%3D%20d3%5Ftime%5FdayAbbrevLookup%2Eget%28n%5B0%5D%2EtoLowerCase%28%29%29%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20d3%5Ftime%5FparseWeekday%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5FdayRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FdayRe%2Eexec%28string%2Eslice%28i%29%29%3B%0A%20%20%20%20%20%20return%20n%20%3F%20%28date%2Ew%20%3D%20d3%5Ftime%5FdayLookup%2Eget%28n%5B0%5D%2EtoLowerCase%28%29%29%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20d3%5Ftime%5FparseMonthAbbrev%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5FmonthAbbrevRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FmonthAbbrevRe%2Eexec%28string%2Eslice%28i%29%29%3B%0A%20%20%20%20%20%20return%20n%20%3F%20%28date%2Em%20%3D%20d3%5Ftime%5FmonthAbbrevLookup%2Eget%28n%5B0%5D%2EtoLowerCase%28%29%29%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20d3%5Ftime%5FparseMonth%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20%20%20d3%5Ftime%5FmonthRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FmonthRe%2Eexec%28string%2Eslice%28i%29%29%3B%0A%20%20%20%20%20%20return%20n%20%3F%20%28date%2Em%20%3D%20d3%5Ftime%5FmonthLookup%2Eget%28n%5B0%5D%2EtoLowerCase%28%29%29%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20d3%5Ftime%5FparseLocaleFull%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Ftime%5Fparse%28date%2C%20d3%5Ftime%5Fformats%2Ec%2EtoString%28%29%2C%20string%2C%20i%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20d3%5Ftime%5FparseLocaleDate%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Ftime%5Fparse%28date%2C%20d3%5Ftime%5Fformats%2Ex%2EtoString%28%29%2C%20string%2C%20i%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20d3%5Ftime%5FparseLocaleTime%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Ftime%5Fparse%28date%2C%20d3%5Ftime%5Fformats%2EX%2EtoString%28%29%2C%20string%2C%20i%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20d3%5Ftime%5FparseAmPm%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FperiodLookup%2Eget%28string%2Eslice%28i%2C%20i%20%2B%3D%202%29%2EtoLowerCase%28%29%29%3B%0A%20%20%20%20%20%20return%20n%20%3D%3D%20null%20%3F%20%2D1%20%3A%20%28date%2Ep%20%3D%20n%2C%20i%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5Ftime%5Fformat%3B%0A%20%20%7D%0A%20%20var%20d3%5Ftime%5FformatPads%20%3D%20%7B%0A%20%20%20%20%22%2D%22%3A%20%22%22%2C%0A%20%20%20%20%5F%3A%20%22%20%22%2C%0A%20%20%20%20%220%22%3A%20%220%22%0A%20%20%7D%2C%20d3%5Ftime%5FnumberRe%20%3D%20%2F%5E%5Cs%2A%5Cd%2B%2F%2C%20d3%5Ftime%5FpercentRe%20%3D%20%2F%5E%25%2F%3B%0A%20%20function%20d3%5Ftime%5FformatPad%28value%2C%20fill%2C%20width%29%20%7B%0A%20%20%20%20var%20sign%20%3D%20value%20%3C%200%20%3F%20%22%2D%22%20%3A%20%22%22%2C%20string%20%3D%20%28sign%20%3F%20%2Dvalue%20%3A%20value%29%20%2B%20%22%22%2C%20length%20%3D%20string%2Elength%3B%0A%20%20%20%20return%20sign%20%2B%20%28length%20%3C%20width%20%3F%20new%20Array%28width%20%2D%20length%20%2B%201%29%2Ejoin%28fill%29%20%2B%20string%20%3A%20string%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FformatRe%28names%29%20%7B%0A%20%20%20%20return%20new%20RegExp%28%22%5E%28%3F%3A%22%20%2B%20names%2Emap%28d3%2Erequote%29%2Ejoin%28%22%7C%22%29%20%2B%20%22%29%22%2C%20%22i%22%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FformatLookup%28names%29%20%7B%0A%20%20%20%20var%20map%20%3D%20new%20d3%5FMap%28%29%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20names%2Elength%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20map%2Eset%28names%5Bi%5D%2EtoLowerCase%28%29%2C%20i%29%3B%0A%20%20%20%20return%20map%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseWeekdayNumber%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20d3%5Ftime%5FnumberRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FnumberRe%2Eexec%28string%2Eslice%28i%2C%20i%20%2B%201%29%29%3B%0A%20%20%20%20return%20n%20%3F%20%28date%2Ew%20%3D%20%2Bn%5B0%5D%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseWeekNumberSunday%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20d3%5Ftime%5FnumberRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FnumberRe%2Eexec%28string%2Eslice%28i%29%29%3B%0A%20%20%20%20return%20n%20%3F%20%28date%2EU%20%3D%20%2Bn%5B0%5D%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseWeekNumberMonday%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20d3%5Ftime%5FnumberRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FnumberRe%2Eexec%28string%2Eslice%28i%29%29%3B%0A%20%20%20%20return%20n%20%3F%20%28date%2EW%20%3D%20%2Bn%5B0%5D%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseFullYear%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20d3%5Ftime%5FnumberRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FnumberRe%2Eexec%28string%2Eslice%28i%2C%20i%20%2B%204%29%29%3B%0A%20%20%20%20return%20n%20%3F%20%28date%2Ey%20%3D%20%2Bn%5B0%5D%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseYear%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20d3%5Ftime%5FnumberRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FnumberRe%2Eexec%28string%2Eslice%28i%2C%20i%20%2B%202%29%29%3B%0A%20%20%20%20return%20n%20%3F%20%28date%2Ey%20%3D%20d3%5Ftime%5FexpandYear%28%2Bn%5B0%5D%29%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseZone%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20return%20%2F%5E%5B%2B%2D%5D%5Cd%7B4%7D%24%2F%2Etest%28string%20%3D%20string%2Eslice%28i%2C%20i%20%2B%205%29%29%20%3F%20%28date%2EZ%20%3D%20%2Dstring%2C%20%0A%20%20%20%20i%20%2B%205%29%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FexpandYear%28d%29%20%7B%0A%20%20%20%20return%20d%20%2B%20%28d%20%3E%2068%20%3F%201900%20%3A%202e3%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseMonthNumber%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20d3%5Ftime%5FnumberRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FnumberRe%2Eexec%28string%2Eslice%28i%2C%20i%20%2B%202%29%29%3B%0A%20%20%20%20return%20n%20%3F%20%28date%2Em%20%3D%20n%5B0%5D%20%2D%201%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseDay%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20d3%5Ftime%5FnumberRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FnumberRe%2Eexec%28string%2Eslice%28i%2C%20i%20%2B%202%29%29%3B%0A%20%20%20%20return%20n%20%3F%20%28date%2Ed%20%3D%20%2Bn%5B0%5D%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseDayOfYear%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20d3%5Ftime%5FnumberRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FnumberRe%2Eexec%28string%2Eslice%28i%2C%20i%20%2B%203%29%29%3B%0A%20%20%20%20return%20n%20%3F%20%28date%2Ej%20%3D%20%2Bn%5B0%5D%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseHour24%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20d3%5Ftime%5FnumberRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FnumberRe%2Eexec%28string%2Eslice%28i%2C%20i%20%2B%202%29%29%3B%0A%20%20%20%20return%20n%20%3F%20%28date%2EH%20%3D%20%2Bn%5B0%5D%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseMinutes%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20d3%5Ftime%5FnumberRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FnumberRe%2Eexec%28string%2Eslice%28i%2C%20i%20%2B%202%29%29%3B%0A%20%20%20%20return%20n%20%3F%20%28date%2EM%20%3D%20%2Bn%5B0%5D%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseSeconds%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20d3%5Ftime%5FnumberRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FnumberRe%2Eexec%28string%2Eslice%28i%2C%20i%20%2B%202%29%29%3B%0A%20%20%20%20return%20n%20%3F%20%28date%2ES%20%3D%20%2Bn%5B0%5D%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseMilliseconds%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20d3%5Ftime%5FnumberRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FnumberRe%2Eexec%28string%2Eslice%28i%2C%20i%20%2B%203%29%29%3B%0A%20%20%20%20return%20n%20%3F%20%28date%2EL%20%3D%20%2Bn%5B0%5D%2C%20i%20%2B%20n%5B0%5D%2Elength%29%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5Fzone%28d%29%20%7B%0A%20%20%20%20var%20z%20%3D%20d%2EgetTimezoneOffset%28%29%2C%20zs%20%3D%20z%20%3E%200%20%3F%20%22%2D%22%20%3A%20%22%2B%22%2C%20zh%20%3D%20abs%28z%29%20%2F%2060%20%7C%200%2C%20zm%20%3D%20abs%28z%29%20%25%2060%3B%0A%20%20%20%20return%20zs%20%2B%20d3%5Ftime%5FformatPad%28zh%2C%20%220%22%2C%202%29%20%2B%20d3%5Ftime%5FformatPad%28zm%2C%20%220%22%2C%202%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FparseLiteralPercent%28date%2C%20string%2C%20i%29%20%7B%0A%20%20%20%20d3%5Ftime%5FpercentRe%2ElastIndex%20%3D%200%3B%0A%20%20%20%20var%20n%20%3D%20d3%5Ftime%5FpercentRe%2Eexec%28string%2Eslice%28i%2C%20i%20%2B%201%29%29%3B%0A%20%20%20%20return%20n%20%3F%20i%20%2B%20n%5B0%5D%2Elength%20%3A%20%2D1%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FformatMulti%28formats%29%20%7B%0A%20%20%20%20var%20n%20%3D%20formats%2Elength%2C%20i%20%3D%20%2D1%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20formats%5Bi%5D%5B0%5D%20%3D%20this%28formats%5Bi%5D%5B0%5D%29%3B%0A%20%20%20%20return%20function%28date%29%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%200%2C%20f%20%3D%20formats%5Bi%5D%3B%0A%20%20%20%20%20%20while%20%28%21f%5B1%5D%28date%29%29%20f%20%3D%20formats%5B%2B%2Bi%5D%3B%0A%20%20%20%20%20%20return%20f%5B0%5D%28date%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2Elocale%20%3D%20function%28locale%29%20%7B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20numberFormat%3A%20d3%5Flocale%5FnumberFormat%28locale%29%2C%0A%20%20%20%20%20%20timeFormat%3A%20d3%5Flocale%5FtimeFormat%28locale%29%0A%20%20%20%20%7D%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Flocale%5FenUS%20%3D%20d3%2Elocale%28%7B%0A%20%20%20%20decimal%3A%20%22%2E%22%2C%0A%20%20%20%20thousands%3A%20%22%2C%22%2C%0A%20%20%20%20grouping%3A%20%5B%203%20%5D%2C%0A%20%20%20%20currency%3A%20%5B%20%22%24%22%2C%20%22%22%20%5D%2C%0A%20%20%20%20dateTime%3A%20%22%25a%20%25b%20%25e%20%25X%20%25Y%22%2C%0A%20%20%20%20date%3A%20%22%25m%2F%25d%2F%25Y%22%2C%0A%20%20%20%20time%3A%20%22%25H%3A%25M%3A%25S%22%2C%0A%20%20%20%20periods%3A%20%5B%20%22AM%22%2C%20%22PM%22%20%5D%2C%0A%20%20%20%20days%3A%20%5B%20%22Sunday%22%2C%20%22Monday%22%2C%20%22Tuesday%22%2C%20%22Wednesday%22%2C%20%22Thursday%22%2C%20%22Friday%22%2C%20%22Saturday%22%20%5D%2C%0A%20%20%20%20shortDays%3A%20%5B%20%22Sun%22%2C%20%22Mon%22%2C%20%22Tue%22%2C%20%22Wed%22%2C%20%22Thu%22%2C%20%22Fri%22%2C%20%22Sat%22%20%5D%2C%0A%20%20%20%20months%3A%20%5B%20%22January%22%2C%20%22February%22%2C%20%22March%22%2C%20%22April%22%2C%20%22May%22%2C%20%22June%22%2C%20%22July%22%2C%20%22August%22%2C%20%22September%22%2C%20%22October%22%2C%20%22November%22%2C%20%22December%22%20%5D%2C%0A%20%20%20%20shortMonths%3A%20%5B%20%22Jan%22%2C%20%22Feb%22%2C%20%22Mar%22%2C%20%22Apr%22%2C%20%22May%22%2C%20%22Jun%22%2C%20%22Jul%22%2C%20%22Aug%22%2C%20%22Sep%22%2C%20%22Oct%22%2C%20%22Nov%22%2C%20%22Dec%22%20%5D%0A%20%20%7D%29%3B%0A%20%20d3%2Eformat%20%3D%20d3%5Flocale%5FenUS%2EnumberFormat%3B%0A%20%20d3%2Egeo%20%3D%20%7B%7D%3B%0A%20%20function%20d3%5Fadder%28%29%20%7B%7D%0A%20%20d3%5Fadder%2Eprototype%20%3D%20%7B%0A%20%20%20%20s%3A%200%2C%0A%20%20%20%20t%3A%200%2C%0A%20%20%20%20add%3A%20function%28y%29%20%7B%0A%20%20%20%20%20%20d3%5FadderSum%28y%2C%20this%2Et%2C%20d3%5FadderTemp%29%3B%0A%20%20%20%20%20%20d3%5FadderSum%28d3%5FadderTemp%2Es%2C%20this%2Es%2C%20this%29%3B%0A%20%20%20%20%20%20if%20%28this%2Es%29%20this%2Et%20%2B%3D%20d3%5FadderTemp%2Et%3B%20else%20this%2Es%20%3D%20d3%5FadderTemp%2Et%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20reset%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20this%2Es%20%3D%20this%2Et%20%3D%200%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20valueOf%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2Es%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20var%20d3%5FadderTemp%20%3D%20new%20d3%5Fadder%28%29%3B%0A%20%20function%20d3%5FadderSum%28a%2C%20b%2C%20o%29%20%7B%0A%20%20%20%20var%20x%20%3D%20o%2Es%20%3D%20a%20%2B%20b%2C%20bv%20%3D%20x%20%2D%20a%2C%20av%20%3D%20x%20%2D%20bv%3B%0A%20%20%20%20o%2Et%20%3D%20a%20%2D%20av%20%2B%20%28b%20%2D%20bv%29%3B%0A%20%20%7D%0A%20%20d3%2Egeo%2Estream%20%3D%20function%28object%2C%20listener%29%20%7B%0A%20%20%20%20if%20%28object%20%26%26%20d3%5Fgeo%5FstreamObjectType%2EhasOwnProperty%28object%2Etype%29%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FstreamObjectType%5Bobject%2Etype%5D%28object%2C%20listener%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FstreamGeometry%28object%2C%20listener%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FstreamGeometry%28geometry%2C%20listener%29%20%7B%0A%20%20%20%20if%20%28geometry%20%26%26%20d3%5Fgeo%5FstreamGeometryType%2EhasOwnProperty%28geometry%2Etype%29%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FstreamGeometryType%5Bgeometry%2Etype%5D%28geometry%2C%20listener%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20var%20d3%5Fgeo%5FstreamObjectType%20%3D%20%7B%0A%20%20%20%20Feature%3A%20function%28feature%2C%20listener%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FstreamGeometry%28feature%2Egeometry%2C%20listener%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20FeatureCollection%3A%20function%28object%2C%20listener%29%20%7B%0A%20%20%20%20%20%20var%20features%20%3D%20object%2Efeatures%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20features%2Elength%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20d3%5Fgeo%5FstreamGeometry%28features%5Bi%5D%2Egeometry%2C%20listener%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20var%20d3%5Fgeo%5FstreamGeometryType%20%3D%20%7B%0A%20%20%20%20Sphere%3A%20function%28object%2C%20listener%29%20%7B%0A%20%20%20%20%20%20listener%2Esphere%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20Point%3A%20function%28object%2C%20listener%29%20%7B%0A%20%20%20%20%20%20object%20%3D%20object%2Ecoordinates%3B%0A%20%20%20%20%20%20listener%2Epoint%28object%5B0%5D%2C%20object%5B1%5D%2C%20object%5B2%5D%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20MultiPoint%3A%20function%28object%2C%20listener%29%20%7B%0A%20%20%20%20%20%20var%20coordinates%20%3D%20object%2Ecoordinates%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20coordinates%2Elength%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20object%20%3D%20coordinates%5Bi%5D%2C%20listener%2Epoint%28object%5B0%5D%2C%20object%5B1%5D%2C%20object%5B2%5D%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20LineString%3A%20function%28object%2C%20listener%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FstreamLine%28object%2Ecoordinates%2C%20listener%2C%200%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20MultiLineString%3A%20function%28object%2C%20listener%29%20%7B%0A%20%20%20%20%20%20var%20coordinates%20%3D%20object%2Ecoordinates%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20coordinates%2Elength%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20d3%5Fgeo%5FstreamLine%28coordinates%5Bi%5D%2C%20listener%2C%200%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20Polygon%3A%20function%28object%2C%20listener%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FstreamPolygon%28object%2Ecoordinates%2C%20listener%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20MultiPolygon%3A%20function%28object%2C%20listener%29%20%7B%0A%20%20%20%20%20%20var%20coordinates%20%3D%20object%2Ecoordinates%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20coordinates%2Elength%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20d3%5Fgeo%5FstreamPolygon%28coordinates%5Bi%5D%2C%20listener%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20GeometryCollection%3A%20function%28object%2C%20listener%29%20%7B%0A%20%20%20%20%20%20var%20geometries%20%3D%20object%2Egeometries%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20geometries%2Elength%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20d3%5Fgeo%5FstreamGeometry%28geometries%5Bi%5D%2C%20listener%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FstreamLine%28coordinates%2C%20listener%2C%20closed%29%20%7B%0A%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20coordinates%2Elength%20%2D%20closed%2C%20coordinate%3B%0A%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20coordinate%20%3D%20coordinates%5Bi%5D%2C%20listener%2Epoint%28coordinate%5B0%5D%2C%20coordinate%5B1%5D%2C%20coordinate%5B2%5D%29%3B%0A%20%20%20%20listener%2ElineEnd%28%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FstreamPolygon%28coordinates%2C%20listener%29%20%7B%0A%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20coordinates%2Elength%3B%0A%20%20%20%20listener%2EpolygonStart%28%29%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20d3%5Fgeo%5FstreamLine%28coordinates%5Bi%5D%2C%20listener%2C%201%29%3B%0A%20%20%20%20listener%2EpolygonEnd%28%29%3B%0A%20%20%7D%0A%20%20d3%2Egeo%2Earea%20%3D%20function%28object%29%20%7B%0A%20%20%20%20d3%5Fgeo%5FareaSum%20%3D%200%3B%0A%20%20%20%20d3%2Egeo%2Estream%28object%2C%20d3%5Fgeo%5Farea%29%3B%0A%20%20%20%20return%20d3%5Fgeo%5FareaSum%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fgeo%5FareaSum%2C%20d3%5Fgeo%5FareaRingSum%20%3D%20new%20d3%5Fadder%28%29%3B%0A%20%20var%20d3%5Fgeo%5Farea%20%3D%20%7B%0A%20%20%20%20sphere%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FareaSum%20%2B%3D%204%20%2A%20%CF%80%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20point%3A%20d3%5Fnoop%2C%0A%20%20%20%20lineStart%3A%20d3%5Fnoop%2C%0A%20%20%20%20lineEnd%3A%20d3%5Fnoop%2C%0A%20%20%20%20polygonStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FareaRingSum%2Ereset%28%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5Farea%2ElineStart%20%3D%20d3%5Fgeo%5FareaRingStart%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20polygonEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20area%20%3D%202%20%2A%20d3%5Fgeo%5FareaRingSum%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FareaSum%20%2B%3D%20area%20%3C%200%20%3F%204%20%2A%20%CF%80%20%2B%20area%20%3A%20area%3B%0A%20%20%20%20%20%20d3%5Fgeo%5Farea%2ElineStart%20%3D%20d3%5Fgeo%5Farea%2ElineEnd%20%3D%20d3%5Fgeo%5Farea%2Epoint%20%3D%20d3%5Fnoop%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FareaRingStart%28%29%20%7B%0A%20%20%20%20var%20%CE%BB00%2C%20%CF%8600%2C%20%CE%BB0%2C%20cos%CF%860%2C%20sin%CF%860%3B%0A%20%20%20%20d3%5Fgeo%5Farea%2Epoint%20%3D%20function%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5Farea%2Epoint%20%3D%20nextPoint%3B%0A%20%20%20%20%20%20%CE%BB0%20%3D%20%28%CE%BB00%20%3D%20%CE%BB%29%20%2A%20d3%5Fradians%2C%20cos%CF%860%20%3D%20Math%2Ecos%28%CF%86%20%3D%20%28%CF%8600%20%3D%20%CF%86%29%20%2A%20d3%5Fradians%20%2F%202%20%2B%20%CF%80%20%2F%204%29%2C%20%0A%20%20%20%20%20%20sin%CF%860%20%3D%20Math%2Esin%28%CF%86%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20nextPoint%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20%CE%BB%20%2A%3D%20d3%5Fradians%3B%0A%20%20%20%20%20%20%CF%86%20%3D%20%CF%86%20%2A%20d3%5Fradians%20%2F%202%20%2B%20%CF%80%20%2F%204%3B%0A%20%20%20%20%20%20var%20d%CE%BB%20%3D%20%CE%BB%20%2D%20%CE%BB0%2C%20sd%CE%BB%20%3D%20d%CE%BB%20%3E%3D%200%20%3F%201%20%3A%20%2D1%2C%20ad%CE%BB%20%3D%20sd%CE%BB%20%2A%20d%CE%BB%2C%20cos%CF%86%20%3D%20Math%2Ecos%28%CF%86%29%2C%20sin%CF%86%20%3D%20Math%2Esin%28%CF%86%29%2C%20k%20%3D%20sin%CF%860%20%2A%20sin%CF%86%2C%20u%20%3D%20cos%CF%860%20%2A%20cos%CF%86%20%2B%20k%20%2A%20Math%2Ecos%28ad%CE%BB%29%2C%20v%20%3D%20k%20%2A%20sd%CE%BB%20%2A%20Math%2Esin%28ad%CE%BB%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FareaRingSum%2Eadd%28Math%2Eatan2%28v%2C%20u%29%29%3B%0A%20%20%20%20%20%20%CE%BB0%20%3D%20%CE%BB%2C%20cos%CF%860%20%3D%20cos%CF%86%2C%20sin%CF%860%20%3D%20sin%CF%86%3B%0A%20%20%20%20%7D%0A%20%20%20%20d3%5Fgeo%5Farea%2ElineEnd%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20nextPoint%28%CE%BB00%2C%20%CF%8600%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5Fcartesian%28spherical%29%20%7B%0A%20%20%20%20var%20%CE%BB%20%3D%20spherical%5B0%5D%2C%20%CF%86%20%3D%20spherical%5B1%5D%2C%20cos%CF%86%20%3D%20Math%2Ecos%28%CF%86%29%3B%0A%20%20%20%20return%20%5B%20cos%CF%86%20%2A%20Math%2Ecos%28%CE%BB%29%2C%20cos%CF%86%20%2A%20Math%2Esin%28%CE%BB%29%2C%20Math%2Esin%28%CF%86%29%20%5D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FcartesianDot%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20a%5B0%5D%20%2A%20b%5B0%5D%20%2B%20a%5B1%5D%20%2A%20b%5B1%5D%20%2B%20a%5B2%5D%20%2A%20b%5B2%5D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FcartesianCross%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20%5B%20a%5B1%5D%20%2A%20b%5B2%5D%20%2D%20a%5B2%5D%20%2A%20b%5B1%5D%2C%20a%5B2%5D%20%2A%20b%5B0%5D%20%2D%20a%5B0%5D%20%2A%20b%5B2%5D%2C%20a%5B0%5D%20%2A%20b%5B1%5D%20%2D%20a%5B1%5D%20%2A%20b%5B0%5D%20%5D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FcartesianAdd%28a%2C%20b%29%20%7B%0A%20%20%20%20a%5B0%5D%20%2B%3D%20b%5B0%5D%3B%0A%20%20%20%20a%5B1%5D%20%2B%3D%20b%5B1%5D%3B%0A%20%20%20%20a%5B2%5D%20%2B%3D%20b%5B2%5D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FcartesianScale%28vector%2C%20k%29%20%7B%0A%20%20%20%20return%20%5B%20vector%5B0%5D%20%2A%20k%2C%20vector%5B1%5D%20%2A%20k%2C%20vector%5B2%5D%20%2A%20k%20%5D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FcartesianNormalize%28d%29%20%7B%0A%20%20%20%20var%20l%20%3D%20Math%2Esqrt%28d%5B0%5D%20%2A%20d%5B0%5D%20%2B%20d%5B1%5D%20%2A%20d%5B1%5D%20%2B%20d%5B2%5D%20%2A%20d%5B2%5D%29%3B%0A%20%20%20%20d%5B0%5D%20%2F%3D%20l%3B%0A%20%20%20%20d%5B1%5D%20%2F%3D%20l%3B%0A%20%20%20%20d%5B2%5D%20%2F%3D%20l%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5Fspherical%28cartesian%29%20%7B%0A%20%20%20%20return%20%5B%20Math%2Eatan2%28cartesian%5B1%5D%2C%20cartesian%5B0%5D%29%2C%20d3%5Fasin%28cartesian%5B2%5D%29%20%5D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FsphericalEqual%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20abs%28a%5B0%5D%20%2D%20b%5B0%5D%29%20%3C%20%CE%B5%20%26%26%20abs%28a%5B1%5D%20%2D%20b%5B1%5D%29%20%3C%20%CE%B5%3B%0A%20%20%7D%0A%20%20d3%2Egeo%2Ebounds%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20%CE%BB0%2C%20%CF%860%2C%20%CE%BB1%2C%20%CF%861%2C%20%CE%BB%5F%2C%20%CE%BB%5F%5F%2C%20%CF%86%5F%5F%2C%20p0%2C%20d%CE%BBSum%2C%20ranges%2C%20range%3B%0A%20%20%20%20var%20bound%20%3D%20%7B%0A%20%20%20%20%20%20point%3A%20point%2C%0A%20%20%20%20%20%20lineStart%3A%20lineStart%2C%0A%20%20%20%20%20%20lineEnd%3A%20lineEnd%2C%0A%20%20%20%20%20%20polygonStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20bound%2Epoint%20%3D%20ringPoint%3B%0A%20%20%20%20%20%20%20%20bound%2ElineStart%20%3D%20ringStart%3B%0A%20%20%20%20%20%20%20%20bound%2ElineEnd%20%3D%20ringEnd%3B%0A%20%20%20%20%20%20%20%20d%CE%BBSum%20%3D%200%3B%0A%20%20%20%20%20%20%20%20d3%5Fgeo%5Farea%2EpolygonStart%28%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20polygonEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20d3%5Fgeo%5Farea%2EpolygonEnd%28%29%3B%0A%20%20%20%20%20%20%20%20bound%2Epoint%20%3D%20point%3B%0A%20%20%20%20%20%20%20%20bound%2ElineStart%20%3D%20lineStart%3B%0A%20%20%20%20%20%20%20%20bound%2ElineEnd%20%3D%20lineEnd%3B%0A%20%20%20%20%20%20%20%20if%20%28d3%5Fgeo%5FareaRingSum%20%3C%200%29%20%CE%BB0%20%3D%20%2D%28%CE%BB1%20%3D%20180%29%2C%20%CF%860%20%3D%20%2D%28%CF%861%20%3D%2090%29%3B%20else%20if%20%28d%CE%BBSum%20%3E%20%CE%B5%29%20%CF%861%20%3D%2090%3B%20else%20if%20%28d%CE%BBSum%20%3C%20%2D%CE%B5%29%20%CF%860%20%3D%20%2D90%3B%0A%20%20%20%20%20%20%20%20range%5B0%5D%20%3D%20%CE%BB0%2C%20range%5B1%5D%20%3D%20%CE%BB1%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20point%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20ranges%2Epush%28range%20%3D%20%5B%20%CE%BB0%20%3D%20%CE%BB%2C%20%CE%BB1%20%3D%20%CE%BB%20%5D%29%3B%0A%20%20%20%20%20%20if%20%28%CF%86%20%3C%20%CF%860%29%20%CF%860%20%3D%20%CF%86%3B%0A%20%20%20%20%20%20if%20%28%CF%86%20%3E%20%CF%861%29%20%CF%861%20%3D%20%CF%86%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20linePoint%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20var%20p%20%3D%20d3%5Fgeo%5Fcartesian%28%5B%20%CE%BB%20%2A%20d3%5Fradians%2C%20%CF%86%20%2A%20d3%5Fradians%20%5D%29%3B%0A%20%20%20%20%20%20if%20%28p0%29%20%7B%0A%20%20%20%20%20%20%20%20var%20normal%20%3D%20d3%5Fgeo%5FcartesianCross%28p0%2C%20p%29%2C%20equatorial%20%3D%20%5B%20normal%5B1%5D%2C%20%2Dnormal%5B0%5D%2C%200%20%5D%2C%20inflection%20%3D%20d3%5Fgeo%5FcartesianCross%28equatorial%2C%20normal%29%3B%0A%20%20%20%20%20%20%20%20d3%5Fgeo%5FcartesianNormalize%28inflection%29%3B%0A%20%20%20%20%20%20%20%20inflection%20%3D%20d3%5Fgeo%5Fspherical%28inflection%29%3B%0A%20%20%20%20%20%20%20%20var%20d%CE%BB%20%3D%20%CE%BB%20%2D%20%CE%BB%5F%2C%20s%20%3D%20d%CE%BB%20%3E%200%20%3F%201%20%3A%20%2D1%2C%20%CE%BBi%20%3D%20inflection%5B0%5D%20%2A%20d3%5Fdegrees%20%2A%20s%2C%20antimeridian%20%3D%20abs%28d%CE%BB%29%20%3E%20180%3B%0A%20%20%20%20%20%20%20%20if%20%28antimeridian%20%5E%20%28s%20%2A%20%CE%BB%5F%20%3C%20%CE%BBi%20%26%26%20%CE%BBi%20%3C%20s%20%2A%20%CE%BB%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20%CF%86i%20%3D%20inflection%5B1%5D%20%2A%20d3%5Fdegrees%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%CF%86i%20%3E%20%CF%861%29%20%CF%861%20%3D%20%CF%86i%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28%CE%BBi%20%3D%20%28%CE%BBi%20%2B%20360%29%20%25%20360%20%2D%20180%2C%20antimeridian%20%5E%20%28s%20%2A%20%CE%BB%5F%20%3C%20%CE%BBi%20%26%26%20%CE%BBi%20%3C%20s%20%2A%20%CE%BB%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20%CF%86i%20%3D%20%2Dinflection%5B1%5D%20%2A%20d3%5Fdegrees%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%CF%86i%20%3C%20%CF%860%29%20%CF%860%20%3D%20%CF%86i%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%CF%86%20%3C%20%CF%860%29%20%CF%860%20%3D%20%CF%86%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%CF%86%20%3E%20%CF%861%29%20%CF%861%20%3D%20%CF%86%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28antimeridian%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%CE%BB%20%3C%20%CE%BB%5F%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28angle%28%CE%BB0%2C%20%CE%BB%29%20%3E%20angle%28%CE%BB0%2C%20%CE%BB1%29%29%20%CE%BB1%20%3D%20%CE%BB%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28angle%28%CE%BB%2C%20%CE%BB1%29%20%3E%20angle%28%CE%BB0%2C%20%CE%BB1%29%29%20%CE%BB0%20%3D%20%CE%BB%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%CE%BB1%20%3E%3D%20%CE%BB0%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%CE%BB%20%3C%20%CE%BB0%29%20%CE%BB0%20%3D%20%CE%BB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%CE%BB%20%3E%20%CE%BB1%29%20%CE%BB1%20%3D%20%CE%BB%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%CE%BB%20%3E%20%CE%BB%5F%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28angle%28%CE%BB0%2C%20%CE%BB%29%20%3E%20angle%28%CE%BB0%2C%20%CE%BB1%29%29%20%CE%BB1%20%3D%20%CE%BB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28angle%28%CE%BB%2C%20%CE%BB1%29%20%3E%20angle%28%CE%BB0%2C%20%CE%BB1%29%29%20%CE%BB0%20%3D%20%CE%BB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20point%28%CE%BB%2C%20%CF%86%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20p0%20%3D%20p%2C%20%CE%BB%5F%20%3D%20%CE%BB%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20lineStart%28%29%20%7B%0A%20%20%20%20%20%20bound%2Epoint%20%3D%20linePoint%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20lineEnd%28%29%20%7B%0A%20%20%20%20%20%20range%5B0%5D%20%3D%20%CE%BB0%2C%20range%5B1%5D%20%3D%20%CE%BB1%3B%0A%20%20%20%20%20%20bound%2Epoint%20%3D%20point%3B%0A%20%20%20%20%20%20p0%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20ringPoint%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20if%20%28p0%29%20%7B%0A%20%20%20%20%20%20%20%20var%20d%CE%BB%20%3D%20%CE%BB%20%2D%20%CE%BB%5F%3B%0A%20%20%20%20%20%20%20%20d%CE%BBSum%20%2B%3D%20abs%28d%CE%BB%29%20%3E%20180%20%3F%20d%CE%BB%20%2B%20%28d%CE%BB%20%3E%200%20%3F%20360%20%3A%20%2D360%29%20%3A%20d%CE%BB%3B%0A%20%20%20%20%20%20%7D%20else%20%CE%BB%5F%5F%20%3D%20%CE%BB%2C%20%CF%86%5F%5F%20%3D%20%CF%86%3B%0A%20%20%20%20%20%20d3%5Fgeo%5Farea%2Epoint%28%CE%BB%2C%20%CF%86%29%3B%0A%20%20%20%20%20%20linePoint%28%CE%BB%2C%20%CF%86%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20ringStart%28%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5Farea%2ElineStart%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20ringEnd%28%29%20%7B%0A%20%20%20%20%20%20ringPoint%28%CE%BB%5F%5F%2C%20%CF%86%5F%5F%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5Farea%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20if%20%28abs%28d%CE%BBSum%29%20%3E%20%CE%B5%29%20%CE%BB0%20%3D%20%2D%28%CE%BB1%20%3D%20180%29%3B%0A%20%20%20%20%20%20range%5B0%5D%20%3D%20%CE%BB0%2C%20range%5B1%5D%20%3D%20%CE%BB1%3B%0A%20%20%20%20%20%20p0%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20angle%28%CE%BB0%2C%20%CE%BB1%29%20%7B%0A%20%20%20%20%20%20return%20%28%CE%BB1%20%2D%3D%20%CE%BB0%29%20%3C%200%20%3F%20%CE%BB1%20%2B%20360%20%3A%20%CE%BB1%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20compareRanges%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20return%20a%5B0%5D%20%2D%20b%5B0%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20withinRange%28x%2C%20range%29%20%7B%0A%20%20%20%20%20%20return%20range%5B0%5D%20%3C%3D%20range%5B1%5D%20%3F%20range%5B0%5D%20%3C%3D%20x%20%26%26%20x%20%3C%3D%20range%5B1%5D%20%3A%20x%20%3C%20range%5B0%5D%20%7C%7C%20range%5B1%5D%20%3C%20x%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20function%28feature%29%20%7B%0A%20%20%20%20%20%20%CF%861%20%3D%20%CE%BB1%20%3D%20%2D%28%CE%BB0%20%3D%20%CF%860%20%3D%20Infinity%29%3B%0A%20%20%20%20%20%20ranges%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20d3%2Egeo%2Estream%28feature%2C%20bound%29%3B%0A%20%20%20%20%20%20var%20n%20%3D%20ranges%2Elength%3B%0A%20%20%20%20%20%20if%20%28n%29%20%7B%0A%20%20%20%20%20%20%20%20ranges%2Esort%28compareRanges%29%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%201%2C%20a%20%3D%20ranges%5B0%5D%2C%20b%2C%20merged%20%3D%20%5B%20a%20%5D%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20ranges%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28withinRange%28b%5B0%5D%2C%20a%29%20%7C%7C%20withinRange%28b%5B1%5D%2C%20a%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28angle%28a%5B0%5D%2C%20b%5B1%5D%29%20%3E%20angle%28a%5B0%5D%2C%20a%5B1%5D%29%29%20a%5B1%5D%20%3D%20b%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28angle%28b%5B0%5D%2C%20a%5B1%5D%29%20%3E%20angle%28a%5B0%5D%2C%20a%5B1%5D%29%29%20a%5B0%5D%20%3D%20b%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20merged%2Epush%28a%20%3D%20b%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20best%20%3D%20%2DInfinity%2C%20d%CE%BB%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20n%20%3D%20merged%2Elength%20%2D%201%2C%20i%20%3D%200%2C%20a%20%3D%20merged%5Bn%5D%2C%20b%3B%20i%20%3C%3D%20n%3B%20a%20%3D%20b%2C%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20merged%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%28d%CE%BB%20%3D%20angle%28a%5B1%5D%2C%20b%5B0%5D%29%29%20%3E%20best%29%20best%20%3D%20d%CE%BB%2C%20%CE%BB0%20%3D%20b%5B0%5D%2C%20%CE%BB1%20%3D%20a%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20ranges%20%3D%20range%20%3D%20null%3B%0A%20%20%20%20%20%20return%20%CE%BB0%20%3D%3D%3D%20Infinity%20%7C%7C%20%CF%860%20%3D%3D%3D%20Infinity%20%3F%20%5B%20%5B%20NaN%2C%20NaN%20%5D%2C%20%5B%20NaN%2C%20NaN%20%5D%20%5D%20%3A%20%5B%20%5B%20%CE%BB0%2C%20%CF%860%20%5D%2C%20%5B%20%CE%BB1%2C%20%CF%861%20%5D%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%28%29%3B%0A%20%20d3%2Egeo%2Ecentroid%20%3D%20function%28object%29%20%7B%0A%20%20%20%20d3%5Fgeo%5FcentroidW0%20%3D%20d3%5Fgeo%5FcentroidW1%20%3D%20d3%5Fgeo%5FcentroidX0%20%3D%20d3%5Fgeo%5FcentroidY0%20%3D%20d3%5Fgeo%5FcentroidZ0%20%3D%20d3%5Fgeo%5FcentroidX1%20%3D%20d3%5Fgeo%5FcentroidY1%20%3D%20d3%5Fgeo%5FcentroidZ1%20%3D%20d3%5Fgeo%5FcentroidX2%20%3D%20d3%5Fgeo%5FcentroidY2%20%3D%20d3%5Fgeo%5FcentroidZ2%20%3D%200%3B%0A%20%20%20%20d3%2Egeo%2Estream%28object%2C%20d3%5Fgeo%5Fcentroid%29%3B%0A%20%20%20%20var%20x%20%3D%20d3%5Fgeo%5FcentroidX2%2C%20y%20%3D%20d3%5Fgeo%5FcentroidY2%2C%20z%20%3D%20d3%5Fgeo%5FcentroidZ2%2C%20m%20%3D%20x%20%2A%20x%20%2B%20y%20%2A%20y%20%2B%20z%20%2A%20z%3B%0A%20%20%20%20if%20%28m%20%3C%20%CE%B52%29%20%7B%0A%20%20%20%20%20%20x%20%3D%20d3%5Fgeo%5FcentroidX1%2C%20y%20%3D%20d3%5Fgeo%5FcentroidY1%2C%20z%20%3D%20d3%5Fgeo%5FcentroidZ1%3B%0A%20%20%20%20%20%20if%20%28d3%5Fgeo%5FcentroidW1%20%3C%20%CE%B5%29%20x%20%3D%20d3%5Fgeo%5FcentroidX0%2C%20y%20%3D%20d3%5Fgeo%5FcentroidY0%2C%20z%20%3D%20d3%5Fgeo%5FcentroidZ0%3B%0A%20%20%20%20%20%20m%20%3D%20x%20%2A%20x%20%2B%20y%20%2A%20y%20%2B%20z%20%2A%20z%3B%0A%20%20%20%20%20%20if%20%28m%20%3C%20%CE%B52%29%20return%20%5B%20NaN%2C%20NaN%20%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%5B%20Math%2Eatan2%28y%2C%20x%29%20%2A%20d3%5Fdegrees%2C%20d3%5Fasin%28z%20%2F%20Math%2Esqrt%28m%29%29%20%2A%20d3%5Fdegrees%20%5D%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fgeo%5FcentroidW0%2C%20d3%5Fgeo%5FcentroidW1%2C%20d3%5Fgeo%5FcentroidX0%2C%20d3%5Fgeo%5FcentroidY0%2C%20d3%5Fgeo%5FcentroidZ0%2C%20d3%5Fgeo%5FcentroidX1%2C%20d3%5Fgeo%5FcentroidY1%2C%20d3%5Fgeo%5FcentroidZ1%2C%20d3%5Fgeo%5FcentroidX2%2C%20d3%5Fgeo%5FcentroidY2%2C%20d3%5Fgeo%5FcentroidZ2%3B%0A%20%20var%20d3%5Fgeo%5Fcentroid%20%3D%20%7B%0A%20%20%20%20sphere%3A%20d3%5Fnoop%2C%0A%20%20%20%20point%3A%20d3%5Fgeo%5FcentroidPoint%2C%0A%20%20%20%20lineStart%3A%20d3%5Fgeo%5FcentroidLineStart%2C%0A%20%20%20%20lineEnd%3A%20d3%5Fgeo%5FcentroidLineEnd%2C%0A%20%20%20%20polygonStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5Fcentroid%2ElineStart%20%3D%20d3%5Fgeo%5FcentroidRingStart%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20polygonEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5Fcentroid%2ElineStart%20%3D%20d3%5Fgeo%5FcentroidLineStart%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FcentroidPoint%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%CE%BB%20%2A%3D%20d3%5Fradians%3B%0A%20%20%20%20var%20cos%CF%86%20%3D%20Math%2Ecos%28%CF%86%20%2A%3D%20d3%5Fradians%29%3B%0A%20%20%20%20d3%5Fgeo%5FcentroidPointXYZ%28cos%CF%86%20%2A%20Math%2Ecos%28%CE%BB%29%2C%20cos%CF%86%20%2A%20Math%2Esin%28%CE%BB%29%2C%20Math%2Esin%28%CF%86%29%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FcentroidPointXYZ%28x%2C%20y%2C%20z%29%20%7B%0A%20%20%20%20%2B%2Bd3%5Fgeo%5FcentroidW0%3B%0A%20%20%20%20d3%5Fgeo%5FcentroidX0%20%2B%3D%20%28x%20%2D%20d3%5Fgeo%5FcentroidX0%29%20%2F%20d3%5Fgeo%5FcentroidW0%3B%0A%20%20%20%20d3%5Fgeo%5FcentroidY0%20%2B%3D%20%28y%20%2D%20d3%5Fgeo%5FcentroidY0%29%20%2F%20d3%5Fgeo%5FcentroidW0%3B%0A%20%20%20%20d3%5Fgeo%5FcentroidZ0%20%2B%3D%20%28z%20%2D%20d3%5Fgeo%5FcentroidZ0%29%20%2F%20d3%5Fgeo%5FcentroidW0%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FcentroidLineStart%28%29%20%7B%0A%20%20%20%20var%20x0%2C%20y0%2C%20z0%3B%0A%20%20%20%20d3%5Fgeo%5Fcentroid%2Epoint%20%3D%20function%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20%CE%BB%20%2A%3D%20d3%5Fradians%3B%0A%20%20%20%20%20%20var%20cos%CF%86%20%3D%20Math%2Ecos%28%CF%86%20%2A%3D%20d3%5Fradians%29%3B%0A%20%20%20%20%20%20x0%20%3D%20cos%CF%86%20%2A%20Math%2Ecos%28%CE%BB%29%3B%0A%20%20%20%20%20%20y0%20%3D%20cos%CF%86%20%2A%20Math%2Esin%28%CE%BB%29%3B%0A%20%20%20%20%20%20z0%20%3D%20Math%2Esin%28%CF%86%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5Fcentroid%2Epoint%20%3D%20nextPoint%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidPointXYZ%28x0%2C%20y0%2C%20z0%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20nextPoint%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20%CE%BB%20%2A%3D%20d3%5Fradians%3B%0A%20%20%20%20%20%20var%20cos%CF%86%20%3D%20Math%2Ecos%28%CF%86%20%2A%3D%20d3%5Fradians%29%2C%20x%20%3D%20cos%CF%86%20%2A%20Math%2Ecos%28%CE%BB%29%2C%20y%20%3D%20cos%CF%86%20%2A%20Math%2Esin%28%CE%BB%29%2C%20z%20%3D%20Math%2Esin%28%CF%86%29%2C%20w%20%3D%20Math%2Eatan2%28Math%2Esqrt%28%28w%20%3D%20y0%20%2A%20z%20%2D%20z0%20%2A%20y%29%20%2A%20w%20%2B%20%28w%20%3D%20z0%20%2A%20x%20%2D%20x0%20%2A%20z%29%20%2A%20w%20%2B%20%28w%20%3D%20x0%20%2A%20y%20%2D%20y0%20%2A%20x%29%20%2A%20w%29%2C%20x0%20%2A%20x%20%2B%20y0%20%2A%20y%20%2B%20z0%20%2A%20z%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidW1%20%2B%3D%20w%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidX1%20%2B%3D%20w%20%2A%20%28x0%20%2B%20%28x0%20%3D%20x%29%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidY1%20%2B%3D%20w%20%2A%20%28y0%20%2B%20%28y0%20%3D%20y%29%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidZ1%20%2B%3D%20w%20%2A%20%28z0%20%2B%20%28z0%20%3D%20z%29%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidPointXYZ%28x0%2C%20y0%2C%20z0%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FcentroidLineEnd%28%29%20%7B%0A%20%20%20%20d3%5Fgeo%5Fcentroid%2Epoint%20%3D%20d3%5Fgeo%5FcentroidPoint%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FcentroidRingStart%28%29%20%7B%0A%20%20%20%20var%20%CE%BB00%2C%20%CF%8600%2C%20x0%2C%20y0%2C%20z0%3B%0A%20%20%20%20d3%5Fgeo%5Fcentroid%2Epoint%20%3D%20function%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20%CE%BB00%20%3D%20%CE%BB%2C%20%CF%8600%20%3D%20%CF%86%3B%0A%20%20%20%20%20%20d3%5Fgeo%5Fcentroid%2Epoint%20%3D%20nextPoint%3B%0A%20%20%20%20%20%20%CE%BB%20%2A%3D%20d3%5Fradians%3B%0A%20%20%20%20%20%20var%20cos%CF%86%20%3D%20Math%2Ecos%28%CF%86%20%2A%3D%20d3%5Fradians%29%3B%0A%20%20%20%20%20%20x0%20%3D%20cos%CF%86%20%2A%20Math%2Ecos%28%CE%BB%29%3B%0A%20%20%20%20%20%20y0%20%3D%20cos%CF%86%20%2A%20Math%2Esin%28%CE%BB%29%3B%0A%20%20%20%20%20%20z0%20%3D%20Math%2Esin%28%CF%86%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidPointXYZ%28x0%2C%20y0%2C%20z0%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20d3%5Fgeo%5Fcentroid%2ElineEnd%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20nextPoint%28%CE%BB00%2C%20%CF%8600%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5Fcentroid%2ElineEnd%20%3D%20d3%5Fgeo%5FcentroidLineEnd%3B%0A%20%20%20%20%20%20d3%5Fgeo%5Fcentroid%2Epoint%20%3D%20d3%5Fgeo%5FcentroidPoint%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20nextPoint%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20%CE%BB%20%2A%3D%20d3%5Fradians%3B%0A%20%20%20%20%20%20var%20cos%CF%86%20%3D%20Math%2Ecos%28%CF%86%20%2A%3D%20d3%5Fradians%29%2C%20x%20%3D%20cos%CF%86%20%2A%20Math%2Ecos%28%CE%BB%29%2C%20y%20%3D%20cos%CF%86%20%2A%20Math%2Esin%28%CE%BB%29%2C%20z%20%3D%20Math%2Esin%28%CF%86%29%2C%20cx%20%3D%20y0%20%2A%20z%20%2D%20z0%20%2A%20y%2C%20cy%20%3D%20z0%20%2A%20x%20%2D%20x0%20%2A%20z%2C%20cz%20%3D%20x0%20%2A%20y%20%2D%20y0%20%2A%20x%2C%20m%20%3D%20Math%2Esqrt%28cx%20%2A%20cx%20%2B%20cy%20%2A%20cy%20%2B%20cz%20%2A%20cz%29%2C%20u%20%3D%20x0%20%2A%20x%20%2B%20y0%20%2A%20y%20%2B%20z0%20%2A%20z%2C%20v%20%3D%20m%20%26%26%20%2Dd3%5Facos%28u%29%20%2F%20m%2C%20w%20%3D%20Math%2Eatan2%28m%2C%20u%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidX2%20%2B%3D%20v%20%2A%20cx%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidY2%20%2B%3D%20v%20%2A%20cy%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidZ2%20%2B%3D%20v%20%2A%20cz%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidW1%20%2B%3D%20w%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidX1%20%2B%3D%20w%20%2A%20%28x0%20%2B%20%28x0%20%3D%20x%29%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidY1%20%2B%3D%20w%20%2A%20%28y0%20%2B%20%28y0%20%3D%20y%29%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidZ1%20%2B%3D%20w%20%2A%20%28z0%20%2B%20%28z0%20%3D%20z%29%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidPointXYZ%28x0%2C%20y0%2C%20z0%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5Fcompose%28a%2C%20b%29%20%7B%0A%20%20%20%20function%20compose%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20return%20x%20%3D%20a%28x%2C%20y%29%2C%20b%28x%5B0%5D%2C%20x%5B1%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28a%2Einvert%20%26%26%20b%2Einvert%29%20compose%2Einvert%20%3D%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20return%20x%20%3D%20b%2Einvert%28x%2C%20y%29%2C%20x%20%26%26%20a%2Einvert%28x%5B0%5D%2C%20x%5B1%5D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20compose%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftrue%28%29%20%7B%0A%20%20%20%20return%20true%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FclipPolygon%28segments%2C%20compare%2C%20clipStartInside%2C%20interpolate%2C%20listener%29%20%7B%0A%20%20%20%20var%20subject%20%3D%20%5B%5D%2C%20clip%20%3D%20%5B%5D%3B%0A%20%20%20%20segments%2EforEach%28function%28segment%29%20%7B%0A%20%20%20%20%20%20if%20%28%28n%20%3D%20segment%2Elength%20%2D%201%29%20%3C%3D%200%29%20return%3B%0A%20%20%20%20%20%20var%20n%2C%20p0%20%3D%20segment%5B0%5D%2C%20p1%20%3D%20segment%5Bn%5D%3B%0A%20%20%20%20%20%20if%20%28d3%5Fgeo%5FsphericalEqual%28p0%2C%20p1%29%29%20%7B%0A%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20listener%2Epoint%28%28p0%20%3D%20segment%5Bi%5D%29%5B0%5D%2C%20p0%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20a%20%3D%20new%20d3%5Fgeo%5FclipPolygonIntersection%28p0%2C%20segment%2C%20null%2C%20true%29%2C%20b%20%3D%20new%20d3%5Fgeo%5FclipPolygonIntersection%28p0%2C%20null%2C%20a%2C%20false%29%3B%0A%20%20%20%20%20%20a%2Eo%20%3D%20b%3B%0A%20%20%20%20%20%20subject%2Epush%28a%29%3B%0A%20%20%20%20%20%20clip%2Epush%28b%29%3B%0A%20%20%20%20%20%20a%20%3D%20new%20d3%5Fgeo%5FclipPolygonIntersection%28p1%2C%20segment%2C%20null%2C%20false%29%3B%0A%20%20%20%20%20%20b%20%3D%20new%20d3%5Fgeo%5FclipPolygonIntersection%28p1%2C%20null%2C%20a%2C%20true%29%3B%0A%20%20%20%20%20%20a%2Eo%20%3D%20b%3B%0A%20%20%20%20%20%20subject%2Epush%28a%29%3B%0A%20%20%20%20%20%20clip%2Epush%28b%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20clip%2Esort%28compare%29%3B%0A%20%20%20%20d3%5Fgeo%5FclipPolygonLinkCircular%28subject%29%3B%0A%20%20%20%20d3%5Fgeo%5FclipPolygonLinkCircular%28clip%29%3B%0A%20%20%20%20if%20%28%21subject%2Elength%29%20return%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%2C%20entry%20%3D%20clipStartInside%2C%20n%20%3D%20clip%2Elength%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20clip%5Bi%5D%2Ee%20%3D%20entry%20%3D%20%21entry%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20start%20%3D%20subject%5B0%5D%2C%20points%2C%20point%3B%0A%20%20%20%20while%20%281%29%20%7B%0A%20%20%20%20%20%20var%20current%20%3D%20start%2C%20isSubject%20%3D%20true%3B%0A%20%20%20%20%20%20while%20%28current%2Ev%29%20if%20%28%28current%20%3D%20current%2En%29%20%3D%3D%3D%20start%29%20return%3B%0A%20%20%20%20%20%20points%20%3D%20current%2Ez%3B%0A%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20current%2Ev%20%3D%20current%2Eo%2Ev%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20if%20%28current%2Ee%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28isSubject%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20n%20%3D%20points%2Elength%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20listener%2Epoint%28%28point%20%3D%20points%5Bi%5D%29%5B0%5D%2C%20point%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20interpolate%28current%2Ex%2C%20current%2En%2Ex%2C%201%2C%20listener%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20current%20%3D%20current%2En%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28isSubject%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20points%20%3D%20current%2Ep%2Ez%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%20points%2Elength%20%2D%201%3B%20i%20%3E%3D%200%3B%20%2D%2Di%29%20listener%2Epoint%28%28point%20%3D%20points%5Bi%5D%29%5B0%5D%2C%20point%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20interpolate%28current%2Ex%2C%20current%2Ep%2Ex%2C%20%2D1%2C%20listener%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20current%20%3D%20current%2Ep%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20current%20%3D%20current%2Eo%3B%0A%20%20%20%20%20%20%20%20points%20%3D%20current%2Ez%3B%0A%20%20%20%20%20%20%20%20isSubject%20%3D%20%21isSubject%3B%0A%20%20%20%20%20%20%7D%20while%20%28%21current%2Ev%29%3B%0A%20%20%20%20%20%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FclipPolygonLinkCircular%28array%29%20%7B%0A%20%20%20%20if%20%28%21%28n%20%3D%20array%2Elength%29%29%20return%3B%0A%20%20%20%20var%20n%2C%20i%20%3D%200%2C%20a%20%3D%20array%5B0%5D%2C%20b%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20a%2En%20%3D%20b%20%3D%20array%5Bi%5D%3B%0A%20%20%20%20%20%20b%2Ep%20%3D%20a%3B%0A%20%20%20%20%20%20a%20%3D%20b%3B%0A%20%20%20%20%7D%0A%20%20%20%20a%2En%20%3D%20b%20%3D%20array%5B0%5D%3B%0A%20%20%20%20b%2Ep%20%3D%20a%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FclipPolygonIntersection%28point%2C%20points%2C%20other%2C%20entry%29%20%7B%0A%20%20%20%20this%2Ex%20%3D%20point%3B%0A%20%20%20%20this%2Ez%20%3D%20points%3B%0A%20%20%20%20this%2Eo%20%3D%20other%3B%0A%20%20%20%20this%2Ee%20%3D%20entry%3B%0A%20%20%20%20this%2Ev%20%3D%20false%3B%0A%20%20%20%20this%2En%20%3D%20this%2Ep%20%3D%20null%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5Fclip%28pointVisible%2C%20clipLine%2C%20interpolate%2C%20clipStart%29%20%7B%0A%20%20%20%20return%20function%28rotate%2C%20listener%29%20%7B%0A%20%20%20%20%20%20var%20line%20%3D%20clipLine%28listener%29%2C%20rotatedClipStart%20%3D%20rotate%2Einvert%28clipStart%5B0%5D%2C%20clipStart%5B1%5D%29%3B%0A%20%20%20%20%20%20var%20clip%20%3D%20%7B%0A%20%20%20%20%20%20%20%20point%3A%20point%2C%0A%20%20%20%20%20%20%20%20lineStart%3A%20lineStart%2C%0A%20%20%20%20%20%20%20%20lineEnd%3A%20lineEnd%2C%0A%20%20%20%20%20%20%20%20polygonStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20clip%2Epoint%20%3D%20pointRing%3B%0A%20%20%20%20%20%20%20%20%20%20clip%2ElineStart%20%3D%20ringStart%3B%0A%20%20%20%20%20%20%20%20%20%20clip%2ElineEnd%20%3D%20ringEnd%3B%0A%20%20%20%20%20%20%20%20%20%20segments%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20polygon%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20polygonEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20clip%2Epoint%20%3D%20point%3B%0A%20%20%20%20%20%20%20%20%20%20clip%2ElineStart%20%3D%20lineStart%3B%0A%20%20%20%20%20%20%20%20%20%20clip%2ElineEnd%20%3D%20lineEnd%3B%0A%20%20%20%20%20%20%20%20%20%20segments%20%3D%20d3%2Emerge%28segments%29%3B%0A%20%20%20%20%20%20%20%20%20%20var%20clipStartInside%20%3D%20d3%5Fgeo%5FpointInPolygon%28rotatedClipStart%2C%20polygon%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28segments%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21polygonStarted%29%20listener%2EpolygonStart%28%29%2C%20polygonStarted%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20d3%5Fgeo%5FclipPolygon%28segments%2C%20d3%5Fgeo%5FclipSort%2C%20clipStartInside%2C%20interpolate%2C%20listener%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28clipStartInside%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21polygonStarted%29%20listener%2EpolygonStart%28%29%2C%20polygonStarted%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20interpolate%28null%2C%20null%2C%201%2C%20listener%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28polygonStarted%29%20listener%2EpolygonEnd%28%29%2C%20polygonStarted%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20segments%20%3D%20polygon%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20sphere%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20listener%2EpolygonStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20interpolate%28null%2C%20null%2C%201%2C%20listener%29%3B%0A%20%20%20%20%20%20%20%20%20%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20listener%2EpolygonEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20function%20point%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20%20%20var%20point%20%3D%20rotate%28%CE%BB%2C%20%CF%86%29%3B%0A%20%20%20%20%20%20%20%20if%20%28pointVisible%28%CE%BB%20%3D%20point%5B0%5D%2C%20%CF%86%20%3D%20point%5B1%5D%29%29%20listener%2Epoint%28%CE%BB%2C%20%CF%86%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20pointLine%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20%20%20var%20point%20%3D%20rotate%28%CE%BB%2C%20%CF%86%29%3B%0A%20%20%20%20%20%20%20%20line%2Epoint%28point%5B0%5D%2C%20point%5B1%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20lineStart%28%29%20%7B%0A%20%20%20%20%20%20%20%20clip%2Epoint%20%3D%20pointLine%3B%0A%20%20%20%20%20%20%20%20line%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20lineEnd%28%29%20%7B%0A%20%20%20%20%20%20%20%20clip%2Epoint%20%3D%20point%3B%0A%20%20%20%20%20%20%20%20line%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20segments%3B%0A%20%20%20%20%20%20var%20buffer%20%3D%20d3%5Fgeo%5FclipBufferListener%28%29%2C%20ringListener%20%3D%20clipLine%28buffer%29%2C%20polygonStarted%20%3D%20false%2C%20polygon%2C%20ring%3B%0A%20%20%20%20%20%20function%20pointRing%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20%20%20ring%2Epush%28%5B%20%CE%BB%2C%20%CF%86%20%5D%29%3B%0A%20%20%20%20%20%20%20%20var%20point%20%3D%20rotate%28%CE%BB%2C%20%CF%86%29%3B%0A%20%20%20%20%20%20%20%20ringListener%2Epoint%28point%5B0%5D%2C%20point%5B1%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20ringStart%28%29%20%7B%0A%20%20%20%20%20%20%20%20ringListener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20ring%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20ringEnd%28%29%20%7B%0A%20%20%20%20%20%20%20%20pointRing%28ring%5B0%5D%5B0%5D%2C%20ring%5B0%5D%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20ringListener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20var%20clean%20%3D%20ringListener%2Eclean%28%29%2C%20ringSegments%20%3D%20buffer%2Ebuffer%28%29%2C%20segment%2C%20n%20%3D%20ringSegments%2Elength%3B%0A%20%20%20%20%20%20%20%20ring%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20polygon%2Epush%28ring%29%3B%0A%20%20%20%20%20%20%20%20ring%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20%28%21n%29%20return%3B%0A%20%20%20%20%20%20%20%20if%20%28clean%20%26%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20segment%20%3D%20ringSegments%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20n%20%3D%20segment%2Elength%20%2D%201%2C%20i%20%3D%20%2D1%2C%20point%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28n%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21polygonStarted%29%20listener%2EpolygonStart%28%29%2C%20polygonStarted%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20listener%2Epoint%28%28point%20%3D%20segment%5Bi%5D%29%5B0%5D%2C%20point%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28n%20%3E%201%20%26%26%20clean%20%26%202%29%20ringSegments%2Epush%28ringSegments%2Epop%28%29%2Econcat%28ringSegments%2Eshift%28%29%29%29%3B%0A%20%20%20%20%20%20%20%20segments%2Epush%28ringSegments%2Efilter%28d3%5Fgeo%5FclipSegmentLength1%29%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20clip%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FclipSegmentLength1%28segment%29%20%7B%0A%20%20%20%20return%20segment%2Elength%20%3E%201%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FclipBufferListener%28%29%20%7B%0A%20%20%20%20var%20lines%20%3D%20%5B%5D%2C%20line%3B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20lineStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20lines%2Epush%28line%20%3D%20%5B%5D%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20point%3A%20function%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20%20%20line%2Epush%28%5B%20%CE%BB%2C%20%CF%86%20%5D%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20lineEnd%3A%20d3%5Fnoop%2C%0A%20%20%20%20%20%20buffer%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20buffer%20%3D%20lines%3B%0A%20%20%20%20%20%20%20%20lines%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20line%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20return%20buffer%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20rejoin%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28lines%2Elength%20%3E%201%29%20lines%2Epush%28lines%2Epop%28%29%2Econcat%28lines%2Eshift%28%29%29%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FclipSort%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20%28%28a%20%3D%20a%2Ex%29%5B0%5D%20%3C%200%20%3F%20a%5B1%5D%20%2D%20half%CF%80%20%2D%20%CE%B5%20%3A%20half%CF%80%20%2D%20a%5B1%5D%29%20%2D%20%28%28b%20%3D%20b%2Ex%29%5B0%5D%20%3C%200%20%3F%20b%5B1%5D%20%2D%20half%CF%80%20%2D%20%CE%B5%20%3A%20half%CF%80%20%2D%20b%5B1%5D%29%3B%0A%20%20%7D%0A%20%20var%20d3%5Fgeo%5FclipAntimeridian%20%3D%20d3%5Fgeo%5Fclip%28d3%5Ftrue%2C%20d3%5Fgeo%5FclipAntimeridianLine%2C%20d3%5Fgeo%5FclipAntimeridianInterpolate%2C%20%5B%20%2D%CF%80%2C%20%2D%CF%80%20%2F%202%20%5D%29%3B%0A%20%20function%20d3%5Fgeo%5FclipAntimeridianLine%28listener%29%20%7B%0A%20%20%20%20var%20%CE%BB0%20%3D%20NaN%2C%20%CF%860%20%3D%20NaN%2C%20s%CE%BB0%20%3D%20NaN%2C%20clean%3B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20lineStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20clean%20%3D%201%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20point%3A%20function%28%CE%BB1%2C%20%CF%861%29%20%7B%0A%20%20%20%20%20%20%20%20var%20s%CE%BB1%20%3D%20%CE%BB1%20%3E%200%20%3F%20%CF%80%20%3A%20%2D%CF%80%2C%20d%CE%BB%20%3D%20abs%28%CE%BB1%20%2D%20%CE%BB0%29%3B%0A%20%20%20%20%20%20%20%20if%20%28abs%28d%CE%BB%20%2D%20%CF%80%29%20%3C%20%CE%B5%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28%CE%BB0%2C%20%CF%860%20%3D%20%28%CF%860%20%2B%20%CF%861%29%20%2F%202%20%3E%200%20%3F%20half%CF%80%20%3A%20%2Dhalf%CF%80%29%3B%0A%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28s%CE%BB0%2C%20%CF%860%29%3B%0A%20%20%20%20%20%20%20%20%20%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28s%CE%BB1%2C%20%CF%860%29%3B%0A%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28%CE%BB1%2C%20%CF%860%29%3B%0A%20%20%20%20%20%20%20%20%20%20clean%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28s%CE%BB0%20%21%3D%3D%20s%CE%BB1%20%26%26%20d%CE%BB%20%3E%3D%20%CF%80%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28abs%28%CE%BB0%20%2D%20s%CE%BB0%29%20%3C%20%CE%B5%29%20%CE%BB0%20%2D%3D%20s%CE%BB0%20%2A%20%CE%B5%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28abs%28%CE%BB1%20%2D%20s%CE%BB1%29%20%3C%20%CE%B5%29%20%CE%BB1%20%2D%3D%20s%CE%BB1%20%2A%20%CE%B5%3B%0A%20%20%20%20%20%20%20%20%20%20%CF%860%20%3D%20d3%5Fgeo%5FclipAntimeridianIntersect%28%CE%BB0%2C%20%CF%860%2C%20%CE%BB1%2C%20%CF%861%29%3B%0A%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28s%CE%BB0%2C%20%CF%860%29%3B%0A%20%20%20%20%20%20%20%20%20%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28s%CE%BB1%2C%20%CF%860%29%3B%0A%20%20%20%20%20%20%20%20%20%20clean%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20listener%2Epoint%28%CE%BB0%20%3D%20%CE%BB1%2C%20%CF%860%20%3D%20%CF%861%29%3B%0A%20%20%20%20%20%20%20%20s%CE%BB0%20%3D%20s%CE%BB1%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20lineEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%CE%BB0%20%3D%20%CF%860%20%3D%20NaN%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20clean%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%202%20%2D%20clean%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FclipAntimeridianIntersect%28%CE%BB0%2C%20%CF%860%2C%20%CE%BB1%2C%20%CF%861%29%20%7B%0A%20%20%20%20var%20cos%CF%860%2C%20cos%CF%861%2C%20sin%CE%BB0%5F%CE%BB1%20%3D%20Math%2Esin%28%CE%BB0%20%2D%20%CE%BB1%29%3B%0A%20%20%20%20return%20abs%28sin%CE%BB0%5F%CE%BB1%29%20%3E%20%CE%B5%20%3F%20Math%2Eatan%28%28Math%2Esin%28%CF%860%29%20%2A%20%28cos%CF%861%20%3D%20Math%2Ecos%28%CF%861%29%29%20%2A%20Math%2Esin%28%CE%BB1%29%20%2D%20Math%2Esin%28%CF%861%29%20%2A%20%28cos%CF%860%20%3D%20Math%2Ecos%28%CF%860%29%29%20%2A%20Math%2Esin%28%CE%BB0%29%29%20%2F%20%28cos%CF%860%20%2A%20cos%CF%861%20%2A%20sin%CE%BB0%5F%CE%BB1%29%29%20%3A%20%28%CF%860%20%2B%20%CF%861%29%20%2F%202%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FclipAntimeridianInterpolate%28from%2C%20to%2C%20direction%2C%20listener%29%20%7B%0A%20%20%20%20var%20%CF%86%3B%0A%20%20%20%20if%20%28from%20%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%CF%86%20%3D%20direction%20%2A%20half%CF%80%3B%0A%20%20%20%20%20%20listener%2Epoint%28%2D%CF%80%2C%20%CF%86%29%3B%0A%20%20%20%20%20%20listener%2Epoint%280%2C%20%CF%86%29%3B%0A%20%20%20%20%20%20listener%2Epoint%28%CF%80%2C%20%CF%86%29%3B%0A%20%20%20%20%20%20listener%2Epoint%28%CF%80%2C%200%29%3B%0A%20%20%20%20%20%20listener%2Epoint%28%CF%80%2C%20%2D%CF%86%29%3B%0A%20%20%20%20%20%20listener%2Epoint%280%2C%20%2D%CF%86%29%3B%0A%20%20%20%20%20%20listener%2Epoint%28%2D%CF%80%2C%20%2D%CF%86%29%3B%0A%20%20%20%20%20%20listener%2Epoint%28%2D%CF%80%2C%200%29%3B%0A%20%20%20%20%20%20listener%2Epoint%28%2D%CF%80%2C%20%CF%86%29%3B%0A%20%20%20%20%7D%20else%20if%20%28abs%28from%5B0%5D%20%2D%20to%5B0%5D%29%20%3E%20%CE%B5%29%20%7B%0A%20%20%20%20%20%20var%20s%20%3D%20from%5B0%5D%20%3C%20to%5B0%5D%20%3F%20%CF%80%20%3A%20%2D%CF%80%3B%0A%20%20%20%20%20%20%CF%86%20%3D%20direction%20%2A%20s%20%2F%202%3B%0A%20%20%20%20%20%20listener%2Epoint%28%2Ds%2C%20%CF%86%29%3B%0A%20%20%20%20%20%20listener%2Epoint%280%2C%20%CF%86%29%3B%0A%20%20%20%20%20%20listener%2Epoint%28s%2C%20%CF%86%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20listener%2Epoint%28to%5B0%5D%2C%20to%5B1%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FpointInPolygon%28point%2C%20polygon%29%20%7B%0A%20%20%20%20var%20meridian%20%3D%20point%5B0%5D%2C%20parallel%20%3D%20point%5B1%5D%2C%20meridianNormal%20%3D%20%5B%20Math%2Esin%28meridian%29%2C%20%2DMath%2Ecos%28meridian%29%2C%200%20%5D%2C%20polarAngle%20%3D%200%2C%20winding%20%3D%200%3B%0A%20%20%20%20d3%5Fgeo%5FareaRingSum%2Ereset%28%29%3B%0A%20%20%20%20for%20%28var%20i%20%3D%200%2C%20n%20%3D%20polygon%2Elength%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20var%20ring%20%3D%20polygon%5Bi%5D%2C%20m%20%3D%20ring%2Elength%3B%0A%20%20%20%20%20%20if%20%28%21m%29%20continue%3B%0A%20%20%20%20%20%20var%20point0%20%3D%20ring%5B0%5D%2C%20%CE%BB0%20%3D%20point0%5B0%5D%2C%20%CF%860%20%3D%20point0%5B1%5D%20%2F%202%20%2B%20%CF%80%20%2F%204%2C%20sin%CF%860%20%3D%20Math%2Esin%28%CF%860%29%2C%20cos%CF%860%20%3D%20Math%2Ecos%28%CF%860%29%2C%20j%20%3D%201%3B%0A%20%20%20%20%20%20while%20%28true%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28j%20%3D%3D%3D%20m%29%20j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20point%20%3D%20ring%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20var%20%CE%BB%20%3D%20point%5B0%5D%2C%20%CF%86%20%3D%20point%5B1%5D%20%2F%202%20%2B%20%CF%80%20%2F%204%2C%20sin%CF%86%20%3D%20Math%2Esin%28%CF%86%29%2C%20cos%CF%86%20%3D%20Math%2Ecos%28%CF%86%29%2C%20d%CE%BB%20%3D%20%CE%BB%20%2D%20%CE%BB0%2C%20sd%CE%BB%20%3D%20d%CE%BB%20%3E%3D%200%20%3F%201%20%3A%20%2D1%2C%20ad%CE%BB%20%3D%20sd%CE%BB%20%2A%20d%CE%BB%2C%20antimeridian%20%3D%20ad%CE%BB%20%3E%20%CF%80%2C%20k%20%3D%20sin%CF%860%20%2A%20sin%CF%86%3B%0A%20%20%20%20%20%20%20%20d3%5Fgeo%5FareaRingSum%2Eadd%28Math%2Eatan2%28k%20%2A%20sd%CE%BB%20%2A%20Math%2Esin%28ad%CE%BB%29%2C%20cos%CF%860%20%2A%20cos%CF%86%20%2B%20k%20%2A%20Math%2Ecos%28ad%CE%BB%29%29%29%3B%0A%20%20%20%20%20%20%20%20polarAngle%20%2B%3D%20antimeridian%20%3F%20d%CE%BB%20%2B%20sd%CE%BB%20%2A%20%CF%84%20%3A%20d%CE%BB%3B%0A%20%20%20%20%20%20%20%20if%20%28antimeridian%20%5E%20%CE%BB0%20%3E%3D%20meridian%20%5E%20%CE%BB%20%3E%3D%20meridian%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20arc%20%3D%20d3%5Fgeo%5FcartesianCross%28d3%5Fgeo%5Fcartesian%28point0%29%2C%20d3%5Fgeo%5Fcartesian%28point%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20d3%5Fgeo%5FcartesianNormalize%28arc%29%3B%0A%20%20%20%20%20%20%20%20%20%20var%20intersection%20%3D%20d3%5Fgeo%5FcartesianCross%28meridianNormal%2C%20arc%29%3B%0A%20%20%20%20%20%20%20%20%20%20d3%5Fgeo%5FcartesianNormalize%28intersection%29%3B%0A%20%20%20%20%20%20%20%20%20%20var%20%CF%86arc%20%3D%20%28antimeridian%20%5E%20d%CE%BB%20%3E%3D%200%20%3F%20%2D1%20%3A%201%29%20%2A%20d3%5Fasin%28intersection%5B2%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28parallel%20%3E%20%CF%86arc%20%7C%7C%20parallel%20%3D%3D%3D%20%CF%86arc%20%26%26%20%28arc%5B0%5D%20%7C%7C%20arc%5B1%5D%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20winding%20%2B%3D%20antimeridian%20%5E%20d%CE%BB%20%3E%3D%200%20%3F%201%20%3A%20%2D1%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%21j%2B%2B%29%20break%3B%0A%20%20%20%20%20%20%20%20%CE%BB0%20%3D%20%CE%BB%2C%20sin%CF%860%20%3D%20sin%CF%86%2C%20cos%CF%860%20%3D%20cos%CF%86%2C%20point0%20%3D%20point%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20%28polarAngle%20%3C%20%2D%CE%B5%20%7C%7C%20polarAngle%20%3C%20%CE%B5%20%26%26%20d3%5Fgeo%5FareaRingSum%20%3C%200%29%20%5E%20winding%20%26%201%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FclipCircle%28radius%29%20%7B%0A%20%20%20%20var%20cr%20%3D%20Math%2Ecos%28radius%29%2C%20smallRadius%20%3D%20cr%20%3E%200%2C%20notHemisphere%20%3D%20abs%28cr%29%20%3E%20%CE%B5%2C%20interpolate%20%3D%20d3%5Fgeo%5FcircleInterpolate%28radius%2C%206%20%2A%20d3%5Fradians%29%3B%0A%20%20%20%20return%20d3%5Fgeo%5Fclip%28visible%2C%20clipLine%2C%20interpolate%2C%20smallRadius%20%3F%20%5B%200%2C%20%2Dradius%20%5D%20%3A%20%5B%20%2D%CF%80%2C%20radius%20%2D%20%CF%80%20%5D%29%3B%0A%20%20%20%20function%20visible%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20return%20Math%2Ecos%28%CE%BB%29%20%2A%20Math%2Ecos%28%CF%86%29%20%3E%20cr%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20clipLine%28listener%29%20%7B%0A%20%20%20%20%20%20var%20point0%2C%20c0%2C%20v0%2C%20v00%2C%20clean%3B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20lineStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20v00%20%3D%20v0%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20clean%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20point%3A%20function%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20point1%20%3D%20%5B%20%CE%BB%2C%20%CF%86%20%5D%2C%20point2%2C%20v%20%3D%20visible%28%CE%BB%2C%20%CF%86%29%2C%20c%20%3D%20smallRadius%20%3F%20v%20%3F%200%20%3A%20code%28%CE%BB%2C%20%CF%86%29%20%3A%20v%20%3F%20code%28%CE%BB%20%2B%20%28%CE%BB%20%3C%200%20%3F%20%CF%80%20%3A%20%2D%CF%80%29%2C%20%CF%86%29%20%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21point0%20%26%26%20%28v00%20%3D%20v0%20%3D%20v%29%29%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28v%20%21%3D%3D%20v0%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20point2%20%3D%20intersect%28point0%2C%20point1%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28d3%5Fgeo%5FsphericalEqual%28point0%2C%20point2%29%20%7C%7C%20d3%5Fgeo%5FsphericalEqual%28point1%2C%20point2%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point1%5B0%5D%20%2B%3D%20%CE%B5%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point1%5B1%5D%20%2B%3D%20%CE%B5%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20v%20%3D%20visible%28point1%5B0%5D%2C%20point1%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28v%20%21%3D%3D%20v0%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clean%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point2%20%3D%20intersect%28point1%2C%20point0%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28point2%5B0%5D%2C%20point2%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20point2%20%3D%20intersect%28point0%2C%20point1%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28point2%5B0%5D%2C%20point2%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20point0%20%3D%20point2%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28notHemisphere%20%26%26%20point0%20%26%26%20smallRadius%20%5E%20v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20t%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21%28c%20%26%20c0%29%20%26%26%20%28t%20%3D%20intersect%28point1%2C%20point0%2C%20true%29%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clean%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28smallRadius%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28t%5B0%5D%5B0%5D%2C%20t%5B0%5D%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28t%5B1%5D%5B0%5D%2C%20t%5B1%5D%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28t%5B1%5D%5B0%5D%2C%20t%5B1%5D%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28t%5B0%5D%5B0%5D%2C%20t%5B0%5D%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28v%20%26%26%20%28%21point0%20%7C%7C%20%21d3%5Fgeo%5FsphericalEqual%28point0%2C%20point1%29%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28point1%5B0%5D%2C%20point1%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20point0%20%3D%20point1%2C%20v0%20%3D%20v%2C%20c0%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20lineEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28v0%29%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20point0%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20clean%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20clean%20%7C%20%28v00%20%26%26%20v0%29%20%3C%3C%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20intersect%28a%2C%20b%2C%20two%29%20%7B%0A%20%20%20%20%20%20var%20pa%20%3D%20d3%5Fgeo%5Fcartesian%28a%29%2C%20pb%20%3D%20d3%5Fgeo%5Fcartesian%28b%29%3B%0A%20%20%20%20%20%20var%20n1%20%3D%20%5B%201%2C%200%2C%200%20%5D%2C%20n2%20%3D%20d3%5Fgeo%5FcartesianCross%28pa%2C%20pb%29%2C%20n2n2%20%3D%20d3%5Fgeo%5FcartesianDot%28n2%2C%20n2%29%2C%20n1n2%20%3D%20n2%5B0%5D%2C%20determinant%20%3D%20n2n2%20%2D%20n1n2%20%2A%20n1n2%3B%0A%20%20%20%20%20%20if%20%28%21determinant%29%20return%20%21two%20%26%26%20a%3B%0A%20%20%20%20%20%20var%20c1%20%3D%20cr%20%2A%20n2n2%20%2F%20determinant%2C%20c2%20%3D%20%2Dcr%20%2A%20n1n2%20%2F%20determinant%2C%20n1xn2%20%3D%20d3%5Fgeo%5FcartesianCross%28n1%2C%20n2%29%2C%20A%20%3D%20d3%5Fgeo%5FcartesianScale%28n1%2C%20c1%29%2C%20B%20%3D%20d3%5Fgeo%5FcartesianScale%28n2%2C%20c2%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcartesianAdd%28A%2C%20B%29%3B%0A%20%20%20%20%20%20var%20u%20%3D%20n1xn2%2C%20w%20%3D%20d3%5Fgeo%5FcartesianDot%28A%2C%20u%29%2C%20uu%20%3D%20d3%5Fgeo%5FcartesianDot%28u%2C%20u%29%2C%20t2%20%3D%20w%20%2A%20w%20%2D%20uu%20%2A%20%28d3%5Fgeo%5FcartesianDot%28A%2C%20A%29%20%2D%201%29%3B%0A%20%20%20%20%20%20if%20%28t2%20%3C%200%29%20return%3B%0A%20%20%20%20%20%20var%20t%20%3D%20Math%2Esqrt%28t2%29%2C%20q%20%3D%20d3%5Fgeo%5FcartesianScale%28u%2C%20%28%2Dw%20%2D%20t%29%20%2F%20uu%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcartesianAdd%28q%2C%20A%29%3B%0A%20%20%20%20%20%20q%20%3D%20d3%5Fgeo%5Fspherical%28q%29%3B%0A%20%20%20%20%20%20if%20%28%21two%29%20return%20q%3B%0A%20%20%20%20%20%20var%20%CE%BB0%20%3D%20a%5B0%5D%2C%20%CE%BB1%20%3D%20b%5B0%5D%2C%20%CF%860%20%3D%20a%5B1%5D%2C%20%CF%861%20%3D%20b%5B1%5D%2C%20z%3B%0A%20%20%20%20%20%20if%20%28%CE%BB1%20%3C%20%CE%BB0%29%20z%20%3D%20%CE%BB0%2C%20%CE%BB0%20%3D%20%CE%BB1%2C%20%CE%BB1%20%3D%20z%3B%0A%20%20%20%20%20%20var%20%CE%B4%CE%BB%20%3D%20%CE%BB1%20%2D%20%CE%BB0%2C%20polar%20%3D%20abs%28%CE%B4%CE%BB%20%2D%20%CF%80%29%20%3C%20%CE%B5%2C%20meridian%20%3D%20polar%20%7C%7C%20%CE%B4%CE%BB%20%3C%20%CE%B5%3B%0A%20%20%20%20%20%20if%20%28%21polar%20%26%26%20%CF%861%20%3C%20%CF%860%29%20z%20%3D%20%CF%860%2C%20%CF%860%20%3D%20%CF%861%2C%20%CF%861%20%3D%20z%3B%0A%20%20%20%20%20%20if%20%28meridian%20%3F%20polar%20%3F%20%CF%860%20%2B%20%CF%861%20%3E%200%20%5E%20q%5B1%5D%20%3C%20%28abs%28q%5B0%5D%20%2D%20%CE%BB0%29%20%3C%20%CE%B5%20%3F%20%CF%860%20%3A%20%CF%861%29%20%3A%20%CF%860%20%3C%3D%20q%5B1%5D%20%26%26%20q%5B1%5D%20%3C%3D%20%CF%861%20%3A%20%CE%B4%CE%BB%20%3E%20%CF%80%20%5E%20%28%CE%BB0%20%3C%3D%20q%5B0%5D%20%26%26%20q%5B0%5D%20%3C%3D%20%CE%BB1%29%29%20%7B%0A%20%20%20%20%20%20%20%20var%20q1%20%3D%20d3%5Fgeo%5FcartesianScale%28u%2C%20%28%2Dw%20%2B%20t%29%20%2F%20uu%29%3B%0A%20%20%20%20%20%20%20%20d3%5Fgeo%5FcartesianAdd%28q1%2C%20A%29%3B%0A%20%20%20%20%20%20%20%20return%20%5B%20q%2C%20d3%5Fgeo%5Fspherical%28q1%29%20%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20function%20code%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20var%20r%20%3D%20smallRadius%20%3F%20radius%20%3A%20%CF%80%20%2D%20radius%2C%20code%20%3D%200%3B%0A%20%20%20%20%20%20if%20%28%CE%BB%20%3C%20%2Dr%29%20code%20%7C%3D%201%3B%20else%20if%20%28%CE%BB%20%3E%20r%29%20code%20%7C%3D%202%3B%0A%20%20%20%20%20%20if%20%28%CF%86%20%3C%20%2Dr%29%20code%20%7C%3D%204%3B%20else%20if%20%28%CF%86%20%3E%20r%29%20code%20%7C%3D%208%3B%0A%20%20%20%20%20%20return%20code%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FclipLine%28x0%2C%20y0%2C%20x1%2C%20y1%29%20%7B%0A%20%20%20%20return%20function%28line%29%20%7B%0A%20%20%20%20%20%20var%20a%20%3D%20line%2Ea%2C%20b%20%3D%20line%2Eb%2C%20ax%20%3D%20a%2Ex%2C%20ay%20%3D%20a%2Ey%2C%20bx%20%3D%20b%2Ex%2C%20by%20%3D%20b%2Ey%2C%20t0%20%3D%200%2C%20t1%20%3D%201%2C%20dx%20%3D%20bx%20%2D%20ax%2C%20dy%20%3D%20by%20%2D%20ay%2C%20r%3B%0A%20%20%20%20%20%20r%20%3D%20x0%20%2D%20ax%3B%0A%20%20%20%20%20%20if%20%28%21dx%20%26%26%20r%20%3E%200%29%20return%3B%0A%20%20%20%20%20%20r%20%2F%3D%20dx%3B%0A%20%20%20%20%20%20if%20%28dx%20%3C%200%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3C%20t0%29%20return%3B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3C%20t1%29%20t1%20%3D%20r%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28dx%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3E%20t1%29%20return%3B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3E%20t0%29%20t0%20%3D%20r%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20r%20%3D%20x1%20%2D%20ax%3B%0A%20%20%20%20%20%20if%20%28%21dx%20%26%26%20r%20%3C%200%29%20return%3B%0A%20%20%20%20%20%20r%20%2F%3D%20dx%3B%0A%20%20%20%20%20%20if%20%28dx%20%3C%200%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3E%20t1%29%20return%3B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3E%20t0%29%20t0%20%3D%20r%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28dx%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3C%20t0%29%20return%3B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3C%20t1%29%20t1%20%3D%20r%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20r%20%3D%20y0%20%2D%20ay%3B%0A%20%20%20%20%20%20if%20%28%21dy%20%26%26%20r%20%3E%200%29%20return%3B%0A%20%20%20%20%20%20r%20%2F%3D%20dy%3B%0A%20%20%20%20%20%20if%20%28dy%20%3C%200%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3C%20t0%29%20return%3B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3C%20t1%29%20t1%20%3D%20r%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28dy%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3E%20t1%29%20return%3B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3E%20t0%29%20t0%20%3D%20r%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20r%20%3D%20y1%20%2D%20ay%3B%0A%20%20%20%20%20%20if%20%28%21dy%20%26%26%20r%20%3C%200%29%20return%3B%0A%20%20%20%20%20%20r%20%2F%3D%20dy%3B%0A%20%20%20%20%20%20if%20%28dy%20%3C%200%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3E%20t1%29%20return%3B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3E%20t0%29%20t0%20%3D%20r%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28dy%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3C%20t0%29%20return%3B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3C%20t1%29%20t1%20%3D%20r%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28t0%20%3E%200%29%20line%2Ea%20%3D%20%7B%0A%20%20%20%20%20%20%20%20x%3A%20ax%20%2B%20t0%20%2A%20dx%2C%0A%20%20%20%20%20%20%20%20y%3A%20ay%20%2B%20t0%20%2A%20dy%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20if%20%28t1%20%3C%201%29%20line%2Eb%20%3D%20%7B%0A%20%20%20%20%20%20%20%20x%3A%20ax%20%2B%20t1%20%2A%20dx%2C%0A%20%20%20%20%20%20%20%20y%3A%20ay%20%2B%20t1%20%2A%20dy%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20return%20line%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20var%20d3%5Fgeo%5FclipExtentMAX%20%3D%201e9%3B%0A%20%20d3%2Egeo%2EclipExtent%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20x0%2C%20y0%2C%20x1%2C%20y1%2C%20stream%2C%20clip%2C%20clipExtent%20%3D%20%7B%0A%20%20%20%20%20%20stream%3A%20function%28output%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28stream%29%20stream%2Evalid%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20stream%20%3D%20clip%28output%29%3B%0A%20%20%20%20%20%20%20%20stream%2Evalid%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20return%20stream%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20extent%3A%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20%5B%20%5B%20x0%2C%20y0%20%5D%2C%20%5B%20x1%2C%20y1%20%5D%20%5D%3B%0A%20%20%20%20%20%20%20%20clip%20%3D%20d3%5Fgeo%5FclipExtent%28x0%20%3D%20%2B%5F%5B0%5D%5B0%5D%2C%20y0%20%3D%20%2B%5F%5B0%5D%5B1%5D%2C%20x1%20%3D%20%2B%5F%5B1%5D%5B0%5D%2C%20y1%20%3D%20%2B%5F%5B1%5D%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20if%20%28stream%29%20stream%2Evalid%20%3D%20false%2C%20stream%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20return%20clipExtent%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20clipExtent%2Eextent%28%5B%20%5B%200%2C%200%20%5D%2C%20%5B%20960%2C%20500%20%5D%20%5D%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FclipExtent%28x0%2C%20y0%2C%20x1%2C%20y1%29%20%7B%0A%20%20%20%20return%20function%28listener%29%20%7B%0A%20%20%20%20%20%20var%20listener%5F%20%3D%20listener%2C%20bufferListener%20%3D%20d3%5Fgeo%5FclipBufferListener%28%29%2C%20clipLine%20%3D%20d3%5Fgeom%5FclipLine%28x0%2C%20y0%2C%20x1%2C%20y1%29%2C%20segments%2C%20polygon%2C%20ring%3B%0A%20%20%20%20%20%20var%20clip%20%3D%20%7B%0A%20%20%20%20%20%20%20%20point%3A%20point%2C%0A%20%20%20%20%20%20%20%20lineStart%3A%20lineStart%2C%0A%20%20%20%20%20%20%20%20lineEnd%3A%20lineEnd%2C%0A%20%20%20%20%20%20%20%20polygonStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20listener%20%3D%20bufferListener%3B%0A%20%20%20%20%20%20%20%20%20%20segments%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20polygon%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20clean%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20polygonEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20listener%20%3D%20listener%5F%3B%0A%20%20%20%20%20%20%20%20%20%20segments%20%3D%20d3%2Emerge%28segments%29%3B%0A%20%20%20%20%20%20%20%20%20%20var%20clipStartInside%20%3D%20insidePolygon%28%5B%20x0%2C%20y1%20%5D%29%2C%20inside%20%3D%20clean%20%26%26%20clipStartInside%2C%20visible%20%3D%20segments%2Elength%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28inside%20%7C%7C%20visible%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20listener%2EpolygonStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28inside%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20interpolate%28null%2C%20null%2C%201%2C%20listener%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28visible%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20d3%5Fgeo%5FclipPolygon%28segments%2C%20compare%2C%20clipStartInside%2C%20interpolate%2C%20listener%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20listener%2EpolygonEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20segments%20%3D%20polygon%20%3D%20ring%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20function%20insidePolygon%28p%29%20%7B%0A%20%20%20%20%20%20%20%20var%20wn%20%3D%200%2C%20n%20%3D%20polygon%2Elength%2C%20y%20%3D%20p%5B1%5D%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20j%20%3D%201%2C%20v%20%3D%20polygon%5Bi%5D%2C%20m%20%3D%20v%2Elength%2C%20a%20%3D%20v%5B0%5D%2C%20b%3B%20j%20%3C%20m%3B%20%2B%2Bj%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20v%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28a%5B1%5D%20%3C%3D%20y%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28b%5B1%5D%20%3E%20y%20%26%26%20d3%5Fcross2d%28a%2C%20b%2C%20p%29%20%3E%200%29%20%2B%2Bwn%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28b%5B1%5D%20%3C%3D%20y%20%26%26%20d3%5Fcross2d%28a%2C%20b%2C%20p%29%20%3C%200%29%20%2D%2Dwn%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20a%20%3D%20b%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20wn%20%21%3D%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20interpolate%28from%2C%20to%2C%20direction%2C%20listener%29%20%7B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%200%2C%20a1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20%28from%20%3D%3D%20null%20%7C%7C%20%28a%20%3D%20corner%28from%2C%20direction%29%29%20%21%3D%3D%20%28a1%20%3D%20corner%28to%2C%20direction%29%29%20%7C%7C%20comparePoints%28from%2C%20to%29%20%3C%200%20%5E%20direction%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28a%20%3D%3D%3D%200%20%7C%7C%20a%20%3D%3D%3D%203%20%3F%20x0%20%3A%20x1%2C%20a%20%3E%201%20%3F%20y1%20%3A%20y0%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20while%20%28%28a%20%3D%20%28a%20%2B%20direction%20%2B%204%29%20%25%204%29%20%21%3D%3D%20a1%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28to%5B0%5D%2C%20to%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20pointVisible%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20%20%20return%20x0%20%3C%3D%20x%20%26%26%20x%20%3C%3D%20x1%20%26%26%20y0%20%3C%3D%20y%20%26%26%20y%20%3C%3D%20y1%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20point%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28pointVisible%28x%2C%20y%29%29%20listener%2Epoint%28x%2C%20y%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20x%5F%5F%2C%20y%5F%5F%2C%20v%5F%5F%2C%20x%5F%2C%20y%5F%2C%20v%5F%2C%20first%2C%20clean%3B%0A%20%20%20%20%20%20function%20lineStart%28%29%20%7B%0A%20%20%20%20%20%20%20%20clip%2Epoint%20%3D%20linePoint%3B%0A%20%20%20%20%20%20%20%20if%20%28polygon%29%20polygon%2Epush%28ring%20%3D%20%5B%5D%29%3B%0A%20%20%20%20%20%20%20%20first%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20v%5F%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20x%5F%20%3D%20y%5F%20%3D%20NaN%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20lineEnd%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28segments%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20linePoint%28x%5F%5F%2C%20y%5F%5F%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28v%5F%5F%20%26%26%20v%5F%29%20bufferListener%2Erejoin%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20segments%2Epush%28bufferListener%2Ebuffer%28%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20clip%2Epoint%20%3D%20point%3B%0A%20%20%20%20%20%20%20%20if%20%28v%5F%29%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20linePoint%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20%20%20x%20%3D%20Math%2Emax%28%2Dd3%5Fgeo%5FclipExtentMAX%2C%20Math%2Emin%28d3%5Fgeo%5FclipExtentMAX%2C%20x%29%29%3B%0A%20%20%20%20%20%20%20%20y%20%3D%20Math%2Emax%28%2Dd3%5Fgeo%5FclipExtentMAX%2C%20Math%2Emin%28d3%5Fgeo%5FclipExtentMAX%2C%20y%29%29%3B%0A%20%20%20%20%20%20%20%20var%20v%20%3D%20pointVisible%28x%2C%20y%29%3B%0A%20%20%20%20%20%20%20%20if%20%28polygon%29%20ring%2Epush%28%5B%20x%2C%20y%20%5D%29%3B%0A%20%20%20%20%20%20%20%20if%20%28first%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20x%5F%5F%20%3D%20x%2C%20y%5F%5F%20%3D%20y%2C%20v%5F%5F%20%3D%20v%3B%0A%20%20%20%20%20%20%20%20%20%20first%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28x%2C%20y%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28v%20%26%26%20v%5F%29%20listener%2Epoint%28x%2C%20y%29%3B%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20l%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20x%5F%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20y%5F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20y%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28clipLine%28l%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21v%5F%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28l%2Ea%2Ex%2C%20l%2Ea%2Ey%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28l%2Eb%2Ex%2C%20l%2Eb%2Ey%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21v%29%20listener%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clean%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28v%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20listener%2Epoint%28x%2C%20y%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clean%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20x%5F%20%3D%20x%2C%20y%5F%20%3D%20y%2C%20v%5F%20%3D%20v%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20clip%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20corner%28p%2C%20direction%29%20%7B%0A%20%20%20%20%20%20return%20abs%28p%5B0%5D%20%2D%20x0%29%20%3C%20%CE%B5%20%3F%20direction%20%3E%200%20%3F%200%20%3A%203%20%3A%20abs%28p%5B0%5D%20%2D%20x1%29%20%3C%20%CE%B5%20%3F%20direction%20%3E%200%20%3F%202%20%3A%201%20%3A%20abs%28p%5B1%5D%20%2D%20y0%29%20%3C%20%CE%B5%20%3F%20direction%20%3E%200%20%3F%201%20%3A%200%20%3A%20direction%20%3E%200%20%3F%203%20%3A%202%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20compare%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20return%20comparePoints%28a%2Ex%2C%20b%2Ex%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20comparePoints%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20var%20ca%20%3D%20corner%28a%2C%201%29%2C%20cb%20%3D%20corner%28b%2C%201%29%3B%0A%20%20%20%20%20%20return%20ca%20%21%3D%3D%20cb%20%3F%20ca%20%2D%20cb%20%3A%20ca%20%3D%3D%3D%200%20%3F%20b%5B1%5D%20%2D%20a%5B1%5D%20%3A%20ca%20%3D%3D%3D%201%20%3F%20a%5B0%5D%20%2D%20b%5B0%5D%20%3A%20ca%20%3D%3D%3D%202%20%3F%20a%5B1%5D%20%2D%20b%5B1%5D%20%3A%20b%5B0%5D%20%2D%20a%5B0%5D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5Fconic%28projectAt%29%20%7B%0A%20%20%20%20var%20%CF%860%20%3D%200%2C%20%CF%861%20%3D%20%CF%80%20%2F%203%2C%20m%20%3D%20d3%5Fgeo%5FprojectionMutator%28projectAt%29%2C%20p%20%3D%20m%28%CF%860%2C%20%CF%861%29%3B%0A%20%20%20%20p%2Eparallels%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20%5B%20%CF%860%20%2F%20%CF%80%20%2A%20180%2C%20%CF%861%20%2F%20%CF%80%20%2A%20180%20%5D%3B%0A%20%20%20%20%20%20return%20m%28%CF%860%20%3D%20%5F%5B0%5D%20%2A%20%CF%80%20%2F%20180%2C%20%CF%861%20%3D%20%5F%5B1%5D%20%2A%20%CF%80%20%2F%20180%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20p%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FconicEqualArea%28%CF%860%2C%20%CF%861%29%20%7B%0A%20%20%20%20var%20sin%CF%860%20%3D%20Math%2Esin%28%CF%860%29%2C%20n%20%3D%20%28sin%CF%860%20%2B%20Math%2Esin%28%CF%861%29%29%20%2F%202%2C%20C%20%3D%201%20%2B%20sin%CF%860%20%2A%20%282%20%2A%20n%20%2D%20sin%CF%860%29%2C%20%CF%810%20%3D%20Math%2Esqrt%28C%29%20%2F%20n%3B%0A%20%20%20%20function%20forward%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20var%20%CF%81%20%3D%20Math%2Esqrt%28C%20%2D%202%20%2A%20n%20%2A%20Math%2Esin%28%CF%86%29%29%20%2F%20n%3B%0A%20%20%20%20%20%20return%20%5B%20%CF%81%20%2A%20Math%2Esin%28%CE%BB%20%2A%3D%20n%29%2C%20%CF%810%20%2D%20%CF%81%20%2A%20Math%2Ecos%28%CE%BB%29%20%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20forward%2Einvert%20%3D%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20var%20%CF%810%5Fy%20%3D%20%CF%810%20%2D%20y%3B%0A%20%20%20%20%20%20return%20%5B%20Math%2Eatan2%28x%2C%20%CF%810%5Fy%29%20%2F%20n%2C%20d3%5Fasin%28%28C%20%2D%20%28x%20%2A%20x%20%2B%20%CF%810%5Fy%20%2A%20%CF%810%5Fy%29%20%2A%20n%20%2A%20n%29%20%2F%20%282%20%2A%20n%29%29%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20forward%3B%0A%20%20%7D%0A%20%20%28d3%2Egeo%2EconicEqualArea%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fgeo%5Fconic%28d3%5Fgeo%5FconicEqualArea%29%3B%0A%20%20%7D%29%2Eraw%20%3D%20d3%5Fgeo%5FconicEqualArea%3B%0A%20%20d3%2Egeo%2Ealbers%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%2Egeo%2EconicEqualArea%28%29%2Erotate%28%5B%2096%2C%200%20%5D%29%2Ecenter%28%5B%20%2D%2E6%2C%2038%2E7%20%5D%29%2Eparallels%28%5B%2029%2E5%2C%2045%2E5%20%5D%29%2Escale%281070%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Egeo%2EalbersUsa%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20lower48%20%3D%20d3%2Egeo%2Ealbers%28%29%3B%0A%20%20%20%20var%20alaska%20%3D%20d3%2Egeo%2EconicEqualArea%28%29%2Erotate%28%5B%20154%2C%200%20%5D%29%2Ecenter%28%5B%20%2D2%2C%2058%2E5%20%5D%29%2Eparallels%28%5B%2055%2C%2065%20%5D%29%3B%0A%20%20%20%20var%20hawaii%20%3D%20d3%2Egeo%2EconicEqualArea%28%29%2Erotate%28%5B%20157%2C%200%20%5D%29%2Ecenter%28%5B%20%2D3%2C%2019%2E9%20%5D%29%2Eparallels%28%5B%208%2C%2018%20%5D%29%3B%0A%20%20%20%20var%20point%2C%20pointStream%20%3D%20%7B%0A%20%20%20%20%20%20point%3A%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20%20%20point%20%3D%20%5B%20x%2C%20y%20%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%20lower48Point%2C%20alaskaPoint%2C%20hawaiiPoint%3B%0A%20%20%20%20function%20albersUsa%28coordinates%29%20%7B%0A%20%20%20%20%20%20var%20x%20%3D%20coordinates%5B0%5D%2C%20y%20%3D%20coordinates%5B1%5D%3B%0A%20%20%20%20%20%20point%20%3D%20null%3B%0A%20%20%20%20%20%20%28lower48Point%28x%2C%20y%29%2C%20point%29%20%7C%7C%20%28alaskaPoint%28x%2C%20y%29%2C%20point%29%20%7C%7C%20hawaiiPoint%28x%2C%20y%29%3B%0A%20%20%20%20%20%20return%20point%3B%0A%20%20%20%20%7D%0A%20%20%20%20albersUsa%2Einvert%20%3D%20function%28coordinates%29%20%7B%0A%20%20%20%20%20%20var%20k%20%3D%20lower48%2Escale%28%29%2C%20t%20%3D%20lower48%2Etranslate%28%29%2C%20x%20%3D%20%28coordinates%5B0%5D%20%2D%20t%5B0%5D%29%20%2F%20k%2C%20y%20%3D%20%28coordinates%5B1%5D%20%2D%20t%5B1%5D%29%20%2F%20k%3B%0A%20%20%20%20%20%20return%20%28y%20%3E%3D%20%2E12%20%26%26%20y%20%3C%20%2E234%20%26%26%20x%20%3E%3D%20%2D%2E425%20%26%26%20x%20%3C%20%2D%2E214%20%3F%20alaska%20%3A%20y%20%3E%3D%20%2E166%20%26%26%20y%20%3C%20%2E234%20%26%26%20x%20%3E%3D%20%2D%2E214%20%26%26%20x%20%3C%20%2D%2E115%20%3F%20hawaii%20%3A%20lower48%29%2Einvert%28coordinates%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20albersUsa%2Estream%20%3D%20function%28stream%29%20%7B%0A%20%20%20%20%20%20var%20lower48Stream%20%3D%20lower48%2Estream%28stream%29%2C%20alaskaStream%20%3D%20alaska%2Estream%28stream%29%2C%20hawaiiStream%20%3D%20hawaii%2Estream%28stream%29%3B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20point%3A%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20lower48Stream%2Epoint%28x%2C%20y%29%3B%0A%20%20%20%20%20%20%20%20%20%20alaskaStream%2Epoint%28x%2C%20y%29%3B%0A%20%20%20%20%20%20%20%20%20%20hawaiiStream%2Epoint%28x%2C%20y%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20sphere%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20lower48Stream%2Esphere%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20alaskaStream%2Esphere%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20hawaiiStream%2Esphere%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20lineStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20lower48Stream%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20alaskaStream%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20hawaiiStream%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20lineEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20lower48Stream%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20alaskaStream%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20hawaiiStream%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20polygonStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20lower48Stream%2EpolygonStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20alaskaStream%2EpolygonStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20hawaiiStream%2EpolygonStart%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20polygonEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20lower48Stream%2EpolygonEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20alaskaStream%2EpolygonEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20hawaiiStream%2EpolygonEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20albersUsa%2Eprecision%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20lower48%2Eprecision%28%29%3B%0A%20%20%20%20%20%20lower48%2Eprecision%28%5F%29%3B%0A%20%20%20%20%20%20alaska%2Eprecision%28%5F%29%3B%0A%20%20%20%20%20%20hawaii%2Eprecision%28%5F%29%3B%0A%20%20%20%20%20%20return%20albersUsa%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20albersUsa%2Escale%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20lower48%2Escale%28%29%3B%0A%20%20%20%20%20%20lower48%2Escale%28%5F%29%3B%0A%20%20%20%20%20%20alaska%2Escale%28%5F%20%2A%20%2E35%29%3B%0A%20%20%20%20%20%20hawaii%2Escale%28%5F%29%3B%0A%20%20%20%20%20%20return%20albersUsa%2Etranslate%28lower48%2Etranslate%28%29%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20albersUsa%2Etranslate%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20lower48%2Etranslate%28%29%3B%0A%20%20%20%20%20%20var%20k%20%3D%20lower48%2Escale%28%29%2C%20x%20%3D%20%2B%5F%5B0%5D%2C%20y%20%3D%20%2B%5F%5B1%5D%3B%0A%20%20%20%20%20%20lower48Point%20%3D%20lower48%2Etranslate%28%5F%29%2EclipExtent%28%5B%20%5B%20x%20%2D%20%2E455%20%2A%20k%2C%20y%20%2D%20%2E238%20%2A%20k%20%5D%2C%20%5B%20x%20%2B%20%2E455%20%2A%20k%2C%20y%20%2B%20%2E238%20%2A%20k%20%5D%20%5D%29%2Estream%28pointStream%29%2Epoint%3B%0A%20%20%20%20%20%20alaskaPoint%20%3D%20alaska%2Etranslate%28%5B%20x%20%2D%20%2E307%20%2A%20k%2C%20y%20%2B%20%2E201%20%2A%20k%20%5D%29%2EclipExtent%28%5B%20%5B%20x%20%2D%20%2E425%20%2A%20k%20%2B%20%CE%B5%2C%20y%20%2B%20%2E12%20%2A%20k%20%2B%20%CE%B5%20%5D%2C%20%5B%20x%20%2D%20%2E214%20%2A%20k%20%2D%20%CE%B5%2C%20y%20%2B%20%2E234%20%2A%20k%20%2D%20%CE%B5%20%5D%20%5D%29%2Estream%28pointStream%29%2Epoint%3B%0A%20%20%20%20%20%20hawaiiPoint%20%3D%20hawaii%2Etranslate%28%5B%20x%20%2D%20%2E205%20%2A%20k%2C%20y%20%2B%20%2E212%20%2A%20k%20%5D%29%2EclipExtent%28%5B%20%5B%20x%20%2D%20%2E214%20%2A%20k%20%2B%20%CE%B5%2C%20y%20%2B%20%2E166%20%2A%20k%20%2B%20%CE%B5%20%5D%2C%20%5B%20x%20%2D%20%2E115%20%2A%20k%20%2D%20%CE%B5%2C%20y%20%2B%20%2E234%20%2A%20k%20%2D%20%CE%B5%20%5D%20%5D%29%2Estream%28pointStream%29%2Epoint%3B%0A%20%20%20%20%20%20return%20albersUsa%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20albersUsa%2Escale%281070%29%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fgeo%5FpathAreaSum%2C%20d3%5Fgeo%5FpathAreaPolygon%2C%20d3%5Fgeo%5FpathArea%20%3D%20%7B%0A%20%20%20%20point%3A%20d3%5Fnoop%2C%0A%20%20%20%20lineStart%3A%20d3%5Fnoop%2C%0A%20%20%20%20lineEnd%3A%20d3%5Fnoop%2C%0A%20%20%20%20polygonStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathAreaPolygon%20%3D%200%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathArea%2ElineStart%20%3D%20d3%5Fgeo%5FpathAreaRingStart%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20polygonEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathArea%2ElineStart%20%3D%20d3%5Fgeo%5FpathArea%2ElineEnd%20%3D%20d3%5Fgeo%5FpathArea%2Epoint%20%3D%20d3%5Fnoop%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathAreaSum%20%2B%3D%20abs%28d3%5Fgeo%5FpathAreaPolygon%20%2F%202%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FpathAreaRingStart%28%29%20%7B%0A%20%20%20%20var%20x00%2C%20y00%2C%20x0%2C%20y0%3B%0A%20%20%20%20d3%5Fgeo%5FpathArea%2Epoint%20%3D%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathArea%2Epoint%20%3D%20nextPoint%3B%0A%20%20%20%20%20%20x00%20%3D%20x0%20%3D%20x%2C%20y00%20%3D%20y0%20%3D%20y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20nextPoint%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathAreaPolygon%20%2B%3D%20y0%20%2A%20x%20%2D%20x0%20%2A%20y%3B%0A%20%20%20%20%20%20x0%20%3D%20x%2C%20y0%20%3D%20y%3B%0A%20%20%20%20%7D%0A%20%20%20%20d3%5Fgeo%5FpathArea%2ElineEnd%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20nextPoint%28x00%2C%20y00%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20var%20d3%5Fgeo%5FpathBoundsX0%2C%20d3%5Fgeo%5FpathBoundsY0%2C%20d3%5Fgeo%5FpathBoundsX1%2C%20d3%5Fgeo%5FpathBoundsY1%3B%0A%20%20var%20d3%5Fgeo%5FpathBounds%20%3D%20%7B%0A%20%20%20%20point%3A%20d3%5Fgeo%5FpathBoundsPoint%2C%0A%20%20%20%20lineStart%3A%20d3%5Fnoop%2C%0A%20%20%20%20lineEnd%3A%20d3%5Fnoop%2C%0A%20%20%20%20polygonStart%3A%20d3%5Fnoop%2C%0A%20%20%20%20polygonEnd%3A%20d3%5Fnoop%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FpathBoundsPoint%28x%2C%20y%29%20%7B%0A%20%20%20%20if%20%28x%20%3C%20d3%5Fgeo%5FpathBoundsX0%29%20d3%5Fgeo%5FpathBoundsX0%20%3D%20x%3B%0A%20%20%20%20if%20%28x%20%3E%20d3%5Fgeo%5FpathBoundsX1%29%20d3%5Fgeo%5FpathBoundsX1%20%3D%20x%3B%0A%20%20%20%20if%20%28y%20%3C%20d3%5Fgeo%5FpathBoundsY0%29%20d3%5Fgeo%5FpathBoundsY0%20%3D%20y%3B%0A%20%20%20%20if%20%28y%20%3E%20d3%5Fgeo%5FpathBoundsY1%29%20d3%5Fgeo%5FpathBoundsY1%20%3D%20y%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FpathBuffer%28%29%20%7B%0A%20%20%20%20var%20pointCircle%20%3D%20d3%5Fgeo%5FpathBufferCircle%284%2E5%29%2C%20buffer%20%3D%20%5B%5D%3B%0A%20%20%20%20var%20stream%20%3D%20%7B%0A%20%20%20%20%20%20point%3A%20point%2C%0A%20%20%20%20%20%20lineStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20stream%2Epoint%20%3D%20pointLineStart%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20lineEnd%3A%20lineEnd%2C%0A%20%20%20%20%20%20polygonStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20stream%2ElineEnd%20%3D%20lineEndPolygon%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20polygonEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20stream%2ElineEnd%20%3D%20lineEnd%3B%0A%20%20%20%20%20%20%20%20stream%2Epoint%20%3D%20point%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20pointRadius%3A%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20%20%20pointCircle%20%3D%20d3%5Fgeo%5FpathBufferCircle%28%5F%29%3B%0A%20%20%20%20%20%20%20%20return%20stream%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20result%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28buffer%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20result%20%3D%20buffer%2Ejoin%28%22%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20buffer%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20point%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20buffer%2Epush%28%22M%22%2C%20x%2C%20%22%2C%22%2C%20y%2C%20pointCircle%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20pointLineStart%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20buffer%2Epush%28%22M%22%2C%20x%2C%20%22%2C%22%2C%20y%29%3B%0A%20%20%20%20%20%20stream%2Epoint%20%3D%20pointLine%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20pointLine%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20buffer%2Epush%28%22L%22%2C%20x%2C%20%22%2C%22%2C%20y%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20lineEnd%28%29%20%7B%0A%20%20%20%20%20%20stream%2Epoint%20%3D%20point%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20lineEndPolygon%28%29%20%7B%0A%20%20%20%20%20%20buffer%2Epush%28%22Z%22%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20stream%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FpathBufferCircle%28radius%29%20%7B%0A%20%20%20%20return%20%22m0%2C%22%20%2B%20radius%20%2B%20%22a%22%20%2B%20radius%20%2B%20%22%2C%22%20%2B%20radius%20%2B%20%22%200%201%2C1%200%2C%22%20%2B%20%2D2%20%2A%20radius%20%2B%20%22a%22%20%2B%20radius%20%2B%20%22%2C%22%20%2B%20radius%20%2B%20%22%200%201%2C1%200%2C%22%20%2B%202%20%2A%20radius%20%2B%20%22z%22%3B%0A%20%20%7D%0A%20%20var%20d3%5Fgeo%5FpathCentroid%20%3D%20%7B%0A%20%20%20%20point%3A%20d3%5Fgeo%5FpathCentroidPoint%2C%0A%20%20%20%20lineStart%3A%20d3%5Fgeo%5FpathCentroidLineStart%2C%0A%20%20%20%20lineEnd%3A%20d3%5Fgeo%5FpathCentroidLineEnd%2C%0A%20%20%20%20polygonStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathCentroid%2ElineStart%20%3D%20d3%5Fgeo%5FpathCentroidRingStart%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20polygonEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathCentroid%2Epoint%20%3D%20d3%5Fgeo%5FpathCentroidPoint%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathCentroid%2ElineStart%20%3D%20d3%5Fgeo%5FpathCentroidLineStart%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathCentroid%2ElineEnd%20%3D%20d3%5Fgeo%5FpathCentroidLineEnd%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FpathCentroidPoint%28x%2C%20y%29%20%7B%0A%20%20%20%20d3%5Fgeo%5FcentroidX0%20%2B%3D%20x%3B%0A%20%20%20%20d3%5Fgeo%5FcentroidY0%20%2B%3D%20y%3B%0A%20%20%20%20%2B%2Bd3%5Fgeo%5FcentroidZ0%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FpathCentroidLineStart%28%29%20%7B%0A%20%20%20%20var%20x0%2C%20y0%3B%0A%20%20%20%20d3%5Fgeo%5FpathCentroid%2Epoint%20%3D%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathCentroid%2Epoint%20%3D%20nextPoint%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathCentroidPoint%28x0%20%3D%20x%2C%20y0%20%3D%20y%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20nextPoint%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20var%20dx%20%3D%20x%20%2D%20x0%2C%20dy%20%3D%20y%20%2D%20y0%2C%20z%20%3D%20Math%2Esqrt%28dx%20%2A%20dx%20%2B%20dy%20%2A%20dy%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidX1%20%2B%3D%20z%20%2A%20%28x0%20%2B%20x%29%20%2F%202%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidY1%20%2B%3D%20z%20%2A%20%28y0%20%2B%20y%29%20%2F%202%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidZ1%20%2B%3D%20z%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathCentroidPoint%28x0%20%3D%20x%2C%20y0%20%3D%20y%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FpathCentroidLineEnd%28%29%20%7B%0A%20%20%20%20d3%5Fgeo%5FpathCentroid%2Epoint%20%3D%20d3%5Fgeo%5FpathCentroidPoint%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FpathCentroidRingStart%28%29%20%7B%0A%20%20%20%20var%20x00%2C%20y00%2C%20x0%2C%20y0%3B%0A%20%20%20%20d3%5Fgeo%5FpathCentroid%2Epoint%20%3D%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathCentroid%2Epoint%20%3D%20nextPoint%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathCentroidPoint%28x00%20%3D%20x0%20%3D%20x%2C%20y00%20%3D%20y0%20%3D%20y%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20nextPoint%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20var%20dx%20%3D%20x%20%2D%20x0%2C%20dy%20%3D%20y%20%2D%20y0%2C%20z%20%3D%20Math%2Esqrt%28dx%20%2A%20dx%20%2B%20dy%20%2A%20dy%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidX1%20%2B%3D%20z%20%2A%20%28x0%20%2B%20x%29%20%2F%202%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidY1%20%2B%3D%20z%20%2A%20%28y0%20%2B%20y%29%20%2F%202%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidZ1%20%2B%3D%20z%3B%0A%20%20%20%20%20%20z%20%3D%20y0%20%2A%20x%20%2D%20x0%20%2A%20y%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidX2%20%2B%3D%20z%20%2A%20%28x0%20%2B%20x%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidY2%20%2B%3D%20z%20%2A%20%28y0%20%2B%20y%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidZ2%20%2B%3D%20z%20%2A%203%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathCentroidPoint%28x0%20%3D%20x%2C%20y0%20%3D%20y%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20d3%5Fgeo%5FpathCentroid%2ElineEnd%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20nextPoint%28x00%2C%20y00%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FpathContext%28context%29%20%7B%0A%20%20%20%20var%20pointRadius%20%3D%204%2E5%3B%0A%20%20%20%20var%20stream%20%3D%20%7B%0A%20%20%20%20%20%20point%3A%20point%2C%0A%20%20%20%20%20%20lineStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20stream%2Epoint%20%3D%20pointLineStart%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20lineEnd%3A%20lineEnd%2C%0A%20%20%20%20%20%20polygonStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20stream%2ElineEnd%20%3D%20lineEndPolygon%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20polygonEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20stream%2ElineEnd%20%3D%20lineEnd%3B%0A%20%20%20%20%20%20%20%20stream%2Epoint%20%3D%20point%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20pointRadius%3A%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20%20%20pointRadius%20%3D%20%5F%3B%0A%20%20%20%20%20%20%20%20return%20stream%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20result%3A%20d3%5Fnoop%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20point%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20context%2EmoveTo%28x%20%2B%20pointRadius%2C%20y%29%3B%0A%20%20%20%20%20%20context%2Earc%28x%2C%20y%2C%20pointRadius%2C%200%2C%20%CF%84%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20pointLineStart%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20context%2EmoveTo%28x%2C%20y%29%3B%0A%20%20%20%20%20%20stream%2Epoint%20%3D%20pointLine%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20pointLine%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20context%2ElineTo%28x%2C%20y%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20lineEnd%28%29%20%7B%0A%20%20%20%20%20%20stream%2Epoint%20%3D%20point%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20lineEndPolygon%28%29%20%7B%0A%20%20%20%20%20%20context%2EclosePath%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20stream%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5Fresample%28project%29%20%7B%0A%20%20%20%20var%20%CE%B42%20%3D%20%2E5%2C%20cosMinDistance%20%3D%20Math%2Ecos%2830%20%2A%20d3%5Fradians%29%2C%20maxDepth%20%3D%2016%3B%0A%20%20%20%20function%20resample%28stream%29%20%7B%0A%20%20%20%20%20%20return%20%28maxDepth%20%3F%20resampleRecursive%20%3A%20resampleNone%29%28stream%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20resampleNone%28stream%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fgeo%5FtransformPoint%28stream%2C%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20%20%20x%20%3D%20project%28x%2C%20y%29%3B%0A%20%20%20%20%20%20%20%20stream%2Epoint%28x%5B0%5D%2C%20x%5B1%5D%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20resampleRecursive%28stream%29%20%7B%0A%20%20%20%20%20%20var%20%CE%BB00%2C%20%CF%8600%2C%20x00%2C%20y00%2C%20a00%2C%20b00%2C%20c00%2C%20%CE%BB0%2C%20x0%2C%20y0%2C%20a0%2C%20b0%2C%20c0%3B%0A%20%20%20%20%20%20var%20resample%20%3D%20%7B%0A%20%20%20%20%20%20%20%20point%3A%20point%2C%0A%20%20%20%20%20%20%20%20lineStart%3A%20lineStart%2C%0A%20%20%20%20%20%20%20%20lineEnd%3A%20lineEnd%2C%0A%20%20%20%20%20%20%20%20polygonStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20stream%2EpolygonStart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20resample%2ElineStart%20%3D%20ringStart%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20polygonEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20stream%2EpolygonEnd%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20resample%2ElineStart%20%3D%20lineStart%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20function%20point%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20%20%20x%20%3D%20project%28x%2C%20y%29%3B%0A%20%20%20%20%20%20%20%20stream%2Epoint%28x%5B0%5D%2C%20x%5B1%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20lineStart%28%29%20%7B%0A%20%20%20%20%20%20%20%20x0%20%3D%20NaN%3B%0A%20%20%20%20%20%20%20%20resample%2Epoint%20%3D%20linePoint%3B%0A%20%20%20%20%20%20%20%20stream%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20linePoint%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20d3%5Fgeo%5Fcartesian%28%5B%20%CE%BB%2C%20%CF%86%20%5D%29%2C%20p%20%3D%20project%28%CE%BB%2C%20%CF%86%29%3B%0A%20%20%20%20%20%20%20%20resampleLineTo%28x0%2C%20y0%2C%20%CE%BB0%2C%20a0%2C%20b0%2C%20c0%2C%20x0%20%3D%20p%5B0%5D%2C%20y0%20%3D%20p%5B1%5D%2C%20%CE%BB0%20%3D%20%CE%BB%2C%20a0%20%3D%20c%5B0%5D%2C%20b0%20%3D%20c%5B1%5D%2C%20c0%20%3D%20c%5B2%5D%2C%20maxDepth%2C%20stream%29%3B%0A%20%20%20%20%20%20%20%20stream%2Epoint%28x0%2C%20y0%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20lineEnd%28%29%20%7B%0A%20%20%20%20%20%20%20%20resample%2Epoint%20%3D%20point%3B%0A%20%20%20%20%20%20%20%20stream%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20ringStart%28%29%20%7B%0A%20%20%20%20%20%20%20%20lineStart%28%29%3B%0A%20%20%20%20%20%20%20%20resample%2Epoint%20%3D%20ringPoint%3B%0A%20%20%20%20%20%20%20%20resample%2ElineEnd%20%3D%20ringEnd%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20ringPoint%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20%20%20linePoint%28%CE%BB00%20%3D%20%CE%BB%2C%20%CF%8600%20%3D%20%CF%86%29%2C%20x00%20%3D%20x0%2C%20y00%20%3D%20y0%2C%20a00%20%3D%20a0%2C%20b00%20%3D%20b0%2C%20c00%20%3D%20c0%3B%0A%20%20%20%20%20%20%20%20resample%2Epoint%20%3D%20linePoint%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20ringEnd%28%29%20%7B%0A%20%20%20%20%20%20%20%20resampleLineTo%28x0%2C%20y0%2C%20%CE%BB0%2C%20a0%2C%20b0%2C%20c0%2C%20x00%2C%20y00%2C%20%CE%BB00%2C%20a00%2C%20b00%2C%20c00%2C%20maxDepth%2C%20stream%29%3B%0A%20%20%20%20%20%20%20%20resample%2ElineEnd%20%3D%20lineEnd%3B%0A%20%20%20%20%20%20%20%20lineEnd%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20resample%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20resampleLineTo%28x0%2C%20y0%2C%20%CE%BB0%2C%20a0%2C%20b0%2C%20c0%2C%20x1%2C%20y1%2C%20%CE%BB1%2C%20a1%2C%20b1%2C%20c1%2C%20depth%2C%20stream%29%20%7B%0A%20%20%20%20%20%20var%20dx%20%3D%20x1%20%2D%20x0%2C%20dy%20%3D%20y1%20%2D%20y0%2C%20d2%20%3D%20dx%20%2A%20dx%20%2B%20dy%20%2A%20dy%3B%0A%20%20%20%20%20%20if%20%28d2%20%3E%204%20%2A%20%CE%B42%20%26%26%20depth%2D%2D%29%20%7B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20a0%20%2B%20a1%2C%20b%20%3D%20b0%20%2B%20b1%2C%20c%20%3D%20c0%20%2B%20c1%2C%20m%20%3D%20Math%2Esqrt%28a%20%2A%20a%20%2B%20b%20%2A%20b%20%2B%20c%20%2A%20c%29%2C%20%CF%862%20%3D%20Math%2Easin%28c%20%2F%3D%20m%29%2C%20%CE%BB2%20%3D%20abs%28abs%28c%29%20%2D%201%29%20%3C%20%CE%B5%20%7C%7C%20abs%28%CE%BB0%20%2D%20%CE%BB1%29%20%3C%20%CE%B5%20%3F%20%28%CE%BB0%20%2B%20%CE%BB1%29%20%2F%202%20%3A%20Math%2Eatan2%28b%2C%20a%29%2C%20p%20%3D%20project%28%CE%BB2%2C%20%CF%862%29%2C%20x2%20%3D%20p%5B0%5D%2C%20y2%20%3D%20p%5B1%5D%2C%20dx2%20%3D%20x2%20%2D%20x0%2C%20dy2%20%3D%20y2%20%2D%20y0%2C%20dz%20%3D%20dy%20%2A%20dx2%20%2D%20dx%20%2A%20dy2%3B%0A%20%20%20%20%20%20%20%20if%20%28dz%20%2A%20dz%20%2F%20d2%20%3E%20%CE%B42%20%7C%7C%20abs%28%28dx%20%2A%20dx2%20%2B%20dy%20%2A%20dy2%29%20%2F%20d2%20%2D%20%2E5%29%20%3E%20%2E3%20%7C%7C%20a0%20%2A%20a1%20%2B%20b0%20%2A%20b1%20%2B%20c0%20%2A%20c1%20%3C%20cosMinDistance%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20resampleLineTo%28x0%2C%20y0%2C%20%CE%BB0%2C%20a0%2C%20b0%2C%20c0%2C%20x2%2C%20y2%2C%20%CE%BB2%2C%20a%20%2F%3D%20m%2C%20b%20%2F%3D%20m%2C%20c%2C%20depth%2C%20stream%29%3B%0A%20%20%20%20%20%20%20%20%20%20stream%2Epoint%28x2%2C%20y2%29%3B%0A%20%20%20%20%20%20%20%20%20%20resampleLineTo%28x2%2C%20y2%2C%20%CE%BB2%2C%20a%2C%20b%2C%20c%2C%20x1%2C%20y1%2C%20%CE%BB1%2C%20a1%2C%20b1%2C%20c1%2C%20depth%2C%20stream%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20resample%2Eprecision%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20Math%2Esqrt%28%CE%B42%29%3B%0A%20%20%20%20%20%20maxDepth%20%3D%20%28%CE%B42%20%3D%20%5F%20%2A%20%5F%29%20%3E%200%20%26%26%2016%3B%0A%20%20%20%20%20%20return%20resample%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20resample%3B%0A%20%20%7D%0A%20%20d3%2Egeo%2Epath%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20pointRadius%20%3D%204%2E5%2C%20projection%2C%20context%2C%20projectStream%2C%20contextStream%2C%20cacheStream%3B%0A%20%20%20%20function%20path%28object%29%20%7B%0A%20%20%20%20%20%20if%20%28object%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20pointRadius%20%3D%3D%3D%20%22function%22%29%20contextStream%2EpointRadius%28%2BpointRadius%2Eapply%28this%2C%20arguments%29%29%3B%0A%20%20%20%20%20%20%20%20if%20%28%21cacheStream%20%7C%7C%20%21cacheStream%2Evalid%29%20cacheStream%20%3D%20projectStream%28contextStream%29%3B%0A%20%20%20%20%20%20%20%20d3%2Egeo%2Estream%28object%2C%20cacheStream%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20contextStream%2Eresult%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20path%2Earea%20%3D%20function%28object%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathAreaSum%20%3D%200%3B%0A%20%20%20%20%20%20d3%2Egeo%2Estream%28object%2C%20projectStream%28d3%5Fgeo%5FpathArea%29%29%3B%0A%20%20%20%20%20%20return%20d3%5Fgeo%5FpathAreaSum%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20path%2Ecentroid%20%3D%20function%28object%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FcentroidX0%20%3D%20d3%5Fgeo%5FcentroidY0%20%3D%20d3%5Fgeo%5FcentroidZ0%20%3D%20d3%5Fgeo%5FcentroidX1%20%3D%20d3%5Fgeo%5FcentroidY1%20%3D%20d3%5Fgeo%5FcentroidZ1%20%3D%20d3%5Fgeo%5FcentroidX2%20%3D%20d3%5Fgeo%5FcentroidY2%20%3D%20d3%5Fgeo%5FcentroidZ2%20%3D%200%3B%0A%20%20%20%20%20%20d3%2Egeo%2Estream%28object%2C%20projectStream%28d3%5Fgeo%5FpathCentroid%29%29%3B%0A%20%20%20%20%20%20return%20d3%5Fgeo%5FcentroidZ2%20%3F%20%5B%20d3%5Fgeo%5FcentroidX2%20%2F%20d3%5Fgeo%5FcentroidZ2%2C%20d3%5Fgeo%5FcentroidY2%20%2F%20d3%5Fgeo%5FcentroidZ2%20%5D%20%3A%20d3%5Fgeo%5FcentroidZ1%20%3F%20%5B%20d3%5Fgeo%5FcentroidX1%20%2F%20d3%5Fgeo%5FcentroidZ1%2C%20d3%5Fgeo%5FcentroidY1%20%2F%20d3%5Fgeo%5FcentroidZ1%20%5D%20%3A%20d3%5Fgeo%5FcentroidZ0%20%3F%20%5B%20d3%5Fgeo%5FcentroidX0%20%2F%20d3%5Fgeo%5FcentroidZ0%2C%20d3%5Fgeo%5FcentroidY0%20%2F%20d3%5Fgeo%5FcentroidZ0%20%5D%20%3A%20%5B%20NaN%2C%20NaN%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20path%2Ebounds%20%3D%20function%28object%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5FpathBoundsX1%20%3D%20d3%5Fgeo%5FpathBoundsY1%20%3D%20%2D%28d3%5Fgeo%5FpathBoundsX0%20%3D%20d3%5Fgeo%5FpathBoundsY0%20%3D%20Infinity%29%3B%0A%20%20%20%20%20%20d3%2Egeo%2Estream%28object%2C%20projectStream%28d3%5Fgeo%5FpathBounds%29%29%3B%0A%20%20%20%20%20%20return%20%5B%20%5B%20d3%5Fgeo%5FpathBoundsX0%2C%20d3%5Fgeo%5FpathBoundsY0%20%5D%2C%20%5B%20d3%5Fgeo%5FpathBoundsX1%2C%20d3%5Fgeo%5FpathBoundsY1%20%5D%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20path%2Eprojection%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20projection%3B%0A%20%20%20%20%20%20projectStream%20%3D%20%28projection%20%3D%20%5F%29%20%3F%20%5F%2Estream%20%7C%7C%20d3%5Fgeo%5FpathProjectStream%28%5F%29%20%3A%20d3%5Fidentity%3B%0A%20%20%20%20%20%20return%20reset%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20path%2Econtext%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20context%3B%0A%20%20%20%20%20%20contextStream%20%3D%20%28context%20%3D%20%5F%29%20%3D%3D%20null%20%3F%20new%20d3%5Fgeo%5FpathBuffer%28%29%20%3A%20new%20d3%5Fgeo%5FpathContext%28%5F%29%3B%0A%20%20%20%20%20%20if%20%28typeof%20pointRadius%20%21%3D%3D%20%22function%22%29%20contextStream%2EpointRadius%28pointRadius%29%3B%0A%20%20%20%20%20%20return%20reset%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20path%2EpointRadius%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20pointRadius%3B%0A%20%20%20%20%20%20pointRadius%20%3D%20typeof%20%5F%20%3D%3D%3D%20%22function%22%20%3F%20%5F%20%3A%20%28contextStream%2EpointRadius%28%2B%5F%29%2C%20%2B%5F%29%3B%0A%20%20%20%20%20%20return%20path%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20reset%28%29%20%7B%0A%20%20%20%20%20%20cacheStream%20%3D%20null%3B%0A%20%20%20%20%20%20return%20path%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20path%2Eprojection%28d3%2Egeo%2EalbersUsa%28%29%29%2Econtext%28null%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FpathProjectStream%28project%29%20%7B%0A%20%20%20%20var%20resample%20%3D%20d3%5Fgeo%5Fresample%28function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20return%20project%28%5B%20x%20%2A%20d3%5Fdegrees%2C%20y%20%2A%20d3%5Fdegrees%20%5D%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%20%20return%20function%28stream%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fgeo%5FprojectionRadians%28resample%28stream%29%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2Egeo%2Etransform%20%3D%20function%28methods%29%20%7B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20stream%3A%20function%28stream%29%20%7B%0A%20%20%20%20%20%20%20%20var%20transform%20%3D%20new%20d3%5Fgeo%5Ftransform%28stream%29%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20k%20in%20methods%29%20transform%5Bk%5D%20%3D%20methods%5Bk%5D%3B%0A%20%20%20%20%20%20%20%20return%20transform%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5Ftransform%28stream%29%20%7B%0A%20%20%20%20this%2Estream%20%3D%20stream%3B%0A%20%20%7D%0A%20%20d3%5Fgeo%5Ftransform%2Eprototype%20%3D%20%7B%0A%20%20%20%20point%3A%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20this%2Estream%2Epoint%28x%2C%20y%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20sphere%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20this%2Estream%2Esphere%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20lineStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20this%2Estream%2ElineStart%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20lineEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20this%2Estream%2ElineEnd%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20polygonStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20this%2Estream%2EpolygonStart%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20polygonEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20this%2Estream%2EpolygonEnd%28%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FtransformPoint%28stream%2C%20point%29%20%7B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20point%3A%20point%2C%0A%20%20%20%20%20%20sphere%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20stream%2Esphere%28%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20lineStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20stream%2ElineStart%28%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20lineEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20stream%2ElineEnd%28%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20polygonStart%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20stream%2EpolygonStart%28%29%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20polygonEnd%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20stream%2EpolygonEnd%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2Egeo%2Eprojection%20%3D%20d3%5Fgeo%5Fprojection%3B%0A%20%20d3%2Egeo%2EprojectionMutator%20%3D%20d3%5Fgeo%5FprojectionMutator%3B%0A%20%20function%20d3%5Fgeo%5Fprojection%28project%29%20%7B%0A%20%20%20%20return%20d3%5Fgeo%5FprojectionMutator%28function%28%29%20%7B%0A%20%20%20%20%20%20return%20project%3B%0A%20%20%20%20%7D%29%28%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FprojectionMutator%28projectAt%29%20%7B%0A%20%20%20%20var%20project%2C%20rotate%2C%20projectRotate%2C%20projectResample%20%3D%20d3%5Fgeo%5Fresample%28function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20x%20%3D%20project%28x%2C%20y%29%3B%0A%20%20%20%20%20%20return%20%5B%20x%5B0%5D%20%2A%20k%20%2B%20%CE%B4x%2C%20%CE%B4y%20%2D%20x%5B1%5D%20%2A%20k%20%5D%3B%0A%20%20%20%20%7D%29%2C%20k%20%3D%20150%2C%20x%20%3D%20480%2C%20y%20%3D%20250%2C%20%CE%BB%20%3D%200%2C%20%CF%86%20%3D%200%2C%20%CE%B4%CE%BB%20%3D%200%2C%20%CE%B4%CF%86%20%3D%200%2C%20%CE%B4%CE%B3%20%3D%200%2C%20%CE%B4x%2C%20%CE%B4y%2C%20preclip%20%3D%20d3%5Fgeo%5FclipAntimeridian%2C%20postclip%20%3D%20d3%5Fidentity%2C%20clipAngle%20%3D%20null%2C%20clipExtent%20%3D%20null%2C%20stream%3B%0A%20%20%20%20function%20projection%28point%29%20%7B%0A%20%20%20%20%20%20point%20%3D%20projectRotate%28point%5B0%5D%20%2A%20d3%5Fradians%2C%20point%5B1%5D%20%2A%20d3%5Fradians%29%3B%0A%20%20%20%20%20%20return%20%5B%20point%5B0%5D%20%2A%20k%20%2B%20%CE%B4x%2C%20%CE%B4y%20%2D%20point%5B1%5D%20%2A%20k%20%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20invert%28point%29%20%7B%0A%20%20%20%20%20%20point%20%3D%20projectRotate%2Einvert%28%28point%5B0%5D%20%2D%20%CE%B4x%29%20%2F%20k%2C%20%28%CE%B4y%20%2D%20point%5B1%5D%29%20%2F%20k%29%3B%0A%20%20%20%20%20%20return%20point%20%26%26%20%5B%20point%5B0%5D%20%2A%20d3%5Fdegrees%2C%20point%5B1%5D%20%2A%20d3%5Fdegrees%20%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20projection%2Estream%20%3D%20function%28output%29%20%7B%0A%20%20%20%20%20%20if%20%28stream%29%20stream%2Evalid%20%3D%20false%3B%0A%20%20%20%20%20%20stream%20%3D%20d3%5Fgeo%5FprojectionRadians%28preclip%28rotate%2C%20projectResample%28postclip%28output%29%29%29%29%3B%0A%20%20%20%20%20%20stream%2Evalid%20%3D%20true%3B%0A%20%20%20%20%20%20return%20stream%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20projection%2EclipAngle%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20clipAngle%3B%0A%20%20%20%20%20%20preclip%20%3D%20%5F%20%3D%3D%20null%20%3F%20%28clipAngle%20%3D%20%5F%2C%20d3%5Fgeo%5FclipAntimeridian%29%20%3A%20d3%5Fgeo%5FclipCircle%28%28clipAngle%20%3D%20%2B%5F%29%20%2A%20d3%5Fradians%29%3B%0A%20%20%20%20%20%20return%20invalidate%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20projection%2EclipExtent%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20clipExtent%3B%0A%20%20%20%20%20%20clipExtent%20%3D%20%5F%3B%0A%20%20%20%20%20%20postclip%20%3D%20%5F%20%3F%20d3%5Fgeo%5FclipExtent%28%5F%5B0%5D%5B0%5D%2C%20%5F%5B0%5D%5B1%5D%2C%20%5F%5B1%5D%5B0%5D%2C%20%5F%5B1%5D%5B1%5D%29%20%3A%20d3%5Fidentity%3B%0A%20%20%20%20%20%20return%20invalidate%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20projection%2Escale%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20k%3B%0A%20%20%20%20%20%20k%20%3D%20%2B%5F%3B%0A%20%20%20%20%20%20return%20reset%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20projection%2Etranslate%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20%5B%20x%2C%20y%20%5D%3B%0A%20%20%20%20%20%20x%20%3D%20%2B%5F%5B0%5D%3B%0A%20%20%20%20%20%20y%20%3D%20%2B%5F%5B1%5D%3B%0A%20%20%20%20%20%20return%20reset%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20projection%2Ecenter%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20%5B%20%CE%BB%20%2A%20d3%5Fdegrees%2C%20%CF%86%20%2A%20d3%5Fdegrees%20%5D%3B%0A%20%20%20%20%20%20%CE%BB%20%3D%20%5F%5B0%5D%20%25%20360%20%2A%20d3%5Fradians%3B%0A%20%20%20%20%20%20%CF%86%20%3D%20%5F%5B1%5D%20%25%20360%20%2A%20d3%5Fradians%3B%0A%20%20%20%20%20%20return%20reset%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20projection%2Erotate%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20%5B%20%CE%B4%CE%BB%20%2A%20d3%5Fdegrees%2C%20%CE%B4%CF%86%20%2A%20d3%5Fdegrees%2C%20%CE%B4%CE%B3%20%2A%20d3%5Fdegrees%20%5D%3B%0A%20%20%20%20%20%20%CE%B4%CE%BB%20%3D%20%5F%5B0%5D%20%25%20360%20%2A%20d3%5Fradians%3B%0A%20%20%20%20%20%20%CE%B4%CF%86%20%3D%20%5F%5B1%5D%20%25%20360%20%2A%20d3%5Fradians%3B%0A%20%20%20%20%20%20%CE%B4%CE%B3%20%3D%20%5F%2Elength%20%3E%202%20%3F%20%5F%5B2%5D%20%25%20360%20%2A%20d3%5Fradians%20%3A%200%3B%0A%20%20%20%20%20%20return%20reset%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20d3%2Erebind%28projection%2C%20projectResample%2C%20%22precision%22%29%3B%0A%20%20%20%20function%20reset%28%29%20%7B%0A%20%20%20%20%20%20projectRotate%20%3D%20d3%5Fgeo%5Fcompose%28rotate%20%3D%20d3%5Fgeo%5Frotation%28%CE%B4%CE%BB%2C%20%CE%B4%CF%86%2C%20%CE%B4%CE%B3%29%2C%20project%29%3B%0A%20%20%20%20%20%20var%20center%20%3D%20project%28%CE%BB%2C%20%CF%86%29%3B%0A%20%20%20%20%20%20%CE%B4x%20%3D%20x%20%2D%20center%5B0%5D%20%2A%20k%3B%0A%20%20%20%20%20%20%CE%B4y%20%3D%20y%20%2B%20center%5B1%5D%20%2A%20k%3B%0A%20%20%20%20%20%20return%20invalidate%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20invalidate%28%29%20%7B%0A%20%20%20%20%20%20if%20%28stream%29%20stream%2Evalid%20%3D%20false%2C%20stream%20%3D%20null%3B%0A%20%20%20%20%20%20return%20projection%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20project%20%3D%20projectAt%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20projection%2Einvert%20%3D%20project%2Einvert%20%26%26%20invert%3B%0A%20%20%20%20%20%20return%20reset%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FprojectionRadians%28stream%29%20%7B%0A%20%20%20%20return%20d3%5Fgeo%5FtransformPoint%28stream%2C%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20stream%2Epoint%28x%20%2A%20d3%5Fradians%2C%20y%20%2A%20d3%5Fradians%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5Fequirectangular%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20return%20%5B%20%CE%BB%2C%20%CF%86%20%5D%3B%0A%20%20%7D%0A%20%20%28d3%2Egeo%2Eequirectangular%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fgeo%5Fprojection%28d3%5Fgeo%5Fequirectangular%29%3B%0A%20%20%7D%29%2Eraw%20%3D%20d3%5Fgeo%5Fequirectangular%2Einvert%20%3D%20d3%5Fgeo%5Fequirectangular%3B%0A%20%20d3%2Egeo%2Erotation%20%3D%20function%28rotate%29%20%7B%0A%20%20%20%20rotate%20%3D%20d3%5Fgeo%5Frotation%28rotate%5B0%5D%20%25%20360%20%2A%20d3%5Fradians%2C%20rotate%5B1%5D%20%2A%20d3%5Fradians%2C%20rotate%2Elength%20%3E%202%20%3F%20rotate%5B2%5D%20%2A%20d3%5Fradians%20%3A%200%29%3B%0A%20%20%20%20function%20forward%28coordinates%29%20%7B%0A%20%20%20%20%20%20coordinates%20%3D%20rotate%28coordinates%5B0%5D%20%2A%20d3%5Fradians%2C%20coordinates%5B1%5D%20%2A%20d3%5Fradians%29%3B%0A%20%20%20%20%20%20return%20coordinates%5B0%5D%20%2A%3D%20d3%5Fdegrees%2C%20coordinates%5B1%5D%20%2A%3D%20d3%5Fdegrees%2C%20coordinates%3B%0A%20%20%20%20%7D%0A%20%20%20%20forward%2Einvert%20%3D%20function%28coordinates%29%20%7B%0A%20%20%20%20%20%20coordinates%20%3D%20rotate%2Einvert%28coordinates%5B0%5D%20%2A%20d3%5Fradians%2C%20coordinates%5B1%5D%20%2A%20d3%5Fradians%29%3B%0A%20%20%20%20%20%20return%20coordinates%5B0%5D%20%2A%3D%20d3%5Fdegrees%2C%20coordinates%5B1%5D%20%2A%3D%20d3%5Fdegrees%2C%20coordinates%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20forward%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FidentityRotation%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20return%20%5B%20%CE%BB%20%3E%20%CF%80%20%3F%20%CE%BB%20%2D%20%CF%84%20%3A%20%CE%BB%20%3C%20%2D%CF%80%20%3F%20%CE%BB%20%2B%20%CF%84%20%3A%20%CE%BB%2C%20%CF%86%20%5D%3B%0A%20%20%7D%0A%20%20d3%5Fgeo%5FidentityRotation%2Einvert%20%3D%20d3%5Fgeo%5Fequirectangular%3B%0A%20%20function%20d3%5Fgeo%5Frotation%28%CE%B4%CE%BB%2C%20%CE%B4%CF%86%2C%20%CE%B4%CE%B3%29%20%7B%0A%20%20%20%20return%20%CE%B4%CE%BB%20%3F%20%CE%B4%CF%86%20%7C%7C%20%CE%B4%CE%B3%20%3F%20d3%5Fgeo%5Fcompose%28d3%5Fgeo%5Frotation%CE%BB%28%CE%B4%CE%BB%29%2C%20d3%5Fgeo%5Frotation%CF%86%CE%B3%28%CE%B4%CF%86%2C%20%CE%B4%CE%B3%29%29%20%3A%20d3%5Fgeo%5Frotation%CE%BB%28%CE%B4%CE%BB%29%20%3A%20%CE%B4%CF%86%20%7C%7C%20%CE%B4%CE%B3%20%3F%20d3%5Fgeo%5Frotation%CF%86%CE%B3%28%CE%B4%CF%86%2C%20%CE%B4%CE%B3%29%20%3A%20d3%5Fgeo%5FidentityRotation%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FforwardRotation%CE%BB%28%CE%B4%CE%BB%29%20%7B%0A%20%20%20%20return%20function%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20return%20%CE%BB%20%2B%3D%20%CE%B4%CE%BB%2C%20%5B%20%CE%BB%20%3E%20%CF%80%20%3F%20%CE%BB%20%2D%20%CF%84%20%3A%20%CE%BB%20%3C%20%2D%CF%80%20%3F%20%CE%BB%20%2B%20%CF%84%20%3A%20%CE%BB%2C%20%CF%86%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5Frotation%CE%BB%28%CE%B4%CE%BB%29%20%7B%0A%20%20%20%20var%20rotation%20%3D%20d3%5Fgeo%5FforwardRotation%CE%BB%28%CE%B4%CE%BB%29%3B%0A%20%20%20%20rotation%2Einvert%20%3D%20d3%5Fgeo%5FforwardRotation%CE%BB%28%2D%CE%B4%CE%BB%29%3B%0A%20%20%20%20return%20rotation%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5Frotation%CF%86%CE%B3%28%CE%B4%CF%86%2C%20%CE%B4%CE%B3%29%20%7B%0A%20%20%20%20var%20cos%CE%B4%CF%86%20%3D%20Math%2Ecos%28%CE%B4%CF%86%29%2C%20sin%CE%B4%CF%86%20%3D%20Math%2Esin%28%CE%B4%CF%86%29%2C%20cos%CE%B4%CE%B3%20%3D%20Math%2Ecos%28%CE%B4%CE%B3%29%2C%20sin%CE%B4%CE%B3%20%3D%20Math%2Esin%28%CE%B4%CE%B3%29%3B%0A%20%20%20%20function%20rotation%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20var%20cos%CF%86%20%3D%20Math%2Ecos%28%CF%86%29%2C%20x%20%3D%20Math%2Ecos%28%CE%BB%29%20%2A%20cos%CF%86%2C%20y%20%3D%20Math%2Esin%28%CE%BB%29%20%2A%20cos%CF%86%2C%20z%20%3D%20Math%2Esin%28%CF%86%29%2C%20k%20%3D%20z%20%2A%20cos%CE%B4%CF%86%20%2B%20x%20%2A%20sin%CE%B4%CF%86%3B%0A%20%20%20%20%20%20return%20%5B%20Math%2Eatan2%28y%20%2A%20cos%CE%B4%CE%B3%20%2D%20k%20%2A%20sin%CE%B4%CE%B3%2C%20x%20%2A%20cos%CE%B4%CF%86%20%2D%20z%20%2A%20sin%CE%B4%CF%86%29%2C%20d3%5Fasin%28k%20%2A%20cos%CE%B4%CE%B3%20%2B%20y%20%2A%20sin%CE%B4%CE%B3%29%20%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20rotation%2Einvert%20%3D%20function%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20var%20cos%CF%86%20%3D%20Math%2Ecos%28%CF%86%29%2C%20x%20%3D%20Math%2Ecos%28%CE%BB%29%20%2A%20cos%CF%86%2C%20y%20%3D%20Math%2Esin%28%CE%BB%29%20%2A%20cos%CF%86%2C%20z%20%3D%20Math%2Esin%28%CF%86%29%2C%20k%20%3D%20z%20%2A%20cos%CE%B4%CE%B3%20%2D%20y%20%2A%20sin%CE%B4%CE%B3%3B%0A%20%20%20%20%20%20return%20%5B%20Math%2Eatan2%28y%20%2A%20cos%CE%B4%CE%B3%20%2B%20z%20%2A%20sin%CE%B4%CE%B3%2C%20x%20%2A%20cos%CE%B4%CF%86%20%2B%20k%20%2A%20sin%CE%B4%CF%86%29%2C%20d3%5Fasin%28k%20%2A%20cos%CE%B4%CF%86%20%2D%20x%20%2A%20sin%CE%B4%CF%86%29%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20rotation%3B%0A%20%20%7D%0A%20%20d3%2Egeo%2Ecircle%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20origin%20%3D%20%5B%200%2C%200%20%5D%2C%20angle%2C%20precision%20%3D%206%2C%20interpolate%3B%0A%20%20%20%20function%20circle%28%29%20%7B%0A%20%20%20%20%20%20var%20center%20%3D%20typeof%20origin%20%3D%3D%3D%20%22function%22%20%3F%20origin%2Eapply%28this%2C%20arguments%29%20%3A%20origin%2C%20rotate%20%3D%20d3%5Fgeo%5Frotation%28%2Dcenter%5B0%5D%20%2A%20d3%5Fradians%2C%20%2Dcenter%5B1%5D%20%2A%20d3%5Fradians%2C%200%29%2Einvert%2C%20ring%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20interpolate%28null%2C%20null%2C%201%2C%20%7B%0A%20%20%20%20%20%20%20%20point%3A%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20ring%2Epush%28x%20%3D%20rotate%28x%2C%20y%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20x%5B0%5D%20%2A%3D%20d3%5Fdegrees%2C%20x%5B1%5D%20%2A%3D%20d3%5Fdegrees%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20%22Polygon%22%2C%0A%20%20%20%20%20%20%20%20coordinates%3A%20%5B%20ring%20%5D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20circle%2Eorigin%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20origin%3B%0A%20%20%20%20%20%20origin%20%3D%20x%3B%0A%20%20%20%20%20%20return%20circle%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20circle%2Eangle%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20angle%3B%0A%20%20%20%20%20%20interpolate%20%3D%20d3%5Fgeo%5FcircleInterpolate%28%28angle%20%3D%20%2Bx%29%20%2A%20d3%5Fradians%2C%20precision%20%2A%20d3%5Fradians%29%3B%0A%20%20%20%20%20%20return%20circle%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20circle%2Eprecision%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20precision%3B%0A%20%20%20%20%20%20interpolate%20%3D%20d3%5Fgeo%5FcircleInterpolate%28angle%20%2A%20d3%5Fradians%2C%20%28precision%20%3D%20%2B%5F%29%20%2A%20d3%5Fradians%29%3B%0A%20%20%20%20%20%20return%20circle%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20circle%2Eangle%2890%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FcircleInterpolate%28radius%2C%20precision%29%20%7B%0A%20%20%20%20var%20cr%20%3D%20Math%2Ecos%28radius%29%2C%20sr%20%3D%20Math%2Esin%28radius%29%3B%0A%20%20%20%20return%20function%28from%2C%20to%2C%20direction%2C%20listener%29%20%7B%0A%20%20%20%20%20%20var%20step%20%3D%20direction%20%2A%20precision%3B%0A%20%20%20%20%20%20if%20%28from%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20from%20%3D%20d3%5Fgeo%5FcircleAngle%28cr%2C%20from%29%3B%0A%20%20%20%20%20%20%20%20to%20%3D%20d3%5Fgeo%5FcircleAngle%28cr%2C%20to%29%3B%0A%20%20%20%20%20%20%20%20if%20%28direction%20%3E%200%20%3F%20from%20%3C%20to%20%3A%20from%20%3E%20to%29%20from%20%2B%3D%20direction%20%2A%20%CF%84%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20from%20%3D%20radius%20%2B%20direction%20%2A%20%CF%84%3B%0A%20%20%20%20%20%20%20%20to%20%3D%20radius%20%2D%20%2E5%20%2A%20step%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20%28var%20point%2C%20t%20%3D%20from%3B%20direction%20%3E%200%20%3F%20t%20%3E%20to%20%3A%20t%20%3C%20to%3B%20t%20%2D%3D%20step%29%20%7B%0A%20%20%20%20%20%20%20%20listener%2Epoint%28%28point%20%3D%20d3%5Fgeo%5Fspherical%28%5B%20cr%2C%20%2Dsr%20%2A%20Math%2Ecos%28t%29%2C%20%2Dsr%20%2A%20Math%2Esin%28t%29%20%5D%29%29%5B0%5D%2C%20point%5B1%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FcircleAngle%28cr%2C%20point%29%20%7B%0A%20%20%20%20var%20a%20%3D%20d3%5Fgeo%5Fcartesian%28point%29%3B%0A%20%20%20%20a%5B0%5D%20%2D%3D%20cr%3B%0A%20%20%20%20d3%5Fgeo%5FcartesianNormalize%28a%29%3B%0A%20%20%20%20var%20angle%20%3D%20d3%5Facos%28%2Da%5B1%5D%29%3B%0A%20%20%20%20return%20%28%28%2Da%5B2%5D%20%3C%200%20%3F%20%2Dangle%20%3A%20angle%29%20%2B%202%20%2A%20Math%2EPI%20%2D%20%CE%B5%29%20%25%20%282%20%2A%20Math%2EPI%29%3B%0A%20%20%7D%0A%20%20d3%2Egeo%2Edistance%20%3D%20function%28a%2C%20b%29%20%7B%0A%20%20%20%20var%20%CE%94%CE%BB%20%3D%20%28b%5B0%5D%20%2D%20a%5B0%5D%29%20%2A%20d3%5Fradians%2C%20%CF%860%20%3D%20a%5B1%5D%20%2A%20d3%5Fradians%2C%20%CF%861%20%3D%20b%5B1%5D%20%2A%20d3%5Fradians%2C%20sin%CE%94%CE%BB%20%3D%20Math%2Esin%28%CE%94%CE%BB%29%2C%20cos%CE%94%CE%BB%20%3D%20Math%2Ecos%28%CE%94%CE%BB%29%2C%20sin%CF%860%20%3D%20Math%2Esin%28%CF%860%29%2C%20cos%CF%860%20%3D%20Math%2Ecos%28%CF%860%29%2C%20sin%CF%861%20%3D%20Math%2Esin%28%CF%861%29%2C%20cos%CF%861%20%3D%20Math%2Ecos%28%CF%861%29%2C%20t%3B%0A%20%20%20%20return%20Math%2Eatan2%28Math%2Esqrt%28%28t%20%3D%20cos%CF%861%20%2A%20sin%CE%94%CE%BB%29%20%2A%20t%20%2B%20%28t%20%3D%20cos%CF%860%20%2A%20sin%CF%861%20%2D%20sin%CF%860%20%2A%20cos%CF%861%20%2A%20cos%CE%94%CE%BB%29%20%2A%20t%29%2C%20sin%CF%860%20%2A%20sin%CF%861%20%2B%20cos%CF%860%20%2A%20cos%CF%861%20%2A%20cos%CE%94%CE%BB%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Egeo%2Egraticule%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20x1%2C%20x0%2C%20X1%2C%20X0%2C%20y1%2C%20y0%2C%20Y1%2C%20Y0%2C%20dx%20%3D%2010%2C%20dy%20%3D%20dx%2C%20DX%20%3D%2090%2C%20DY%20%3D%20360%2C%20x%2C%20y%2C%20X%2C%20Y%2C%20precision%20%3D%202%2E5%3B%0A%20%20%20%20function%20graticule%28%29%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20%22MultiLineString%22%2C%0A%20%20%20%20%20%20%20%20coordinates%3A%20lines%28%29%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20lines%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%2Erange%28Math%2Eceil%28X0%20%2F%20DX%29%20%2A%20DX%2C%20X1%2C%20DX%29%2Emap%28X%29%2Econcat%28d3%2Erange%28Math%2Eceil%28Y0%20%2F%20DY%29%20%2A%20DY%2C%20Y1%2C%20DY%29%2Emap%28Y%29%29%2Econcat%28d3%2Erange%28Math%2Eceil%28x0%20%2F%20dx%29%20%2A%20dx%2C%20x1%2C%20dx%29%2Efilter%28function%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20abs%28x%20%25%20DX%29%20%3E%20%CE%B5%3B%0A%20%20%20%20%20%20%7D%29%2Emap%28x%29%29%2Econcat%28d3%2Erange%28Math%2Eceil%28y0%20%2F%20dy%29%20%2A%20dy%2C%20y1%2C%20dy%29%2Efilter%28function%28y%29%20%7B%0A%20%20%20%20%20%20%20%20return%20abs%28y%20%25%20DY%29%20%3E%20%CE%B5%3B%0A%20%20%20%20%20%20%7D%29%2Emap%28y%29%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20graticule%2Elines%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20lines%28%29%2Emap%28function%28coordinates%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20%22LineString%22%2C%0A%20%20%20%20%20%20%20%20%20%20coordinates%3A%20coordinates%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20graticule%2Eoutline%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20%22Polygon%22%2C%0A%20%20%20%20%20%20%20%20coordinates%3A%20%5B%20X%28X0%29%2Econcat%28Y%28Y1%29%2Eslice%281%29%2C%20X%28X1%29%2Ereverse%28%29%2Eslice%281%29%2C%20Y%28Y0%29%2Ereverse%28%29%2Eslice%281%29%29%20%5D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20graticule%2Eextent%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20graticule%2EminorExtent%28%29%3B%0A%20%20%20%20%20%20return%20graticule%2EmajorExtent%28%5F%29%2EminorExtent%28%5F%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20graticule%2EmajorExtent%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20%5B%20%5B%20X0%2C%20Y0%20%5D%2C%20%5B%20X1%2C%20Y1%20%5D%20%5D%3B%0A%20%20%20%20%20%20X0%20%3D%20%2B%5F%5B0%5D%5B0%5D%2C%20X1%20%3D%20%2B%5F%5B1%5D%5B0%5D%3B%0A%20%20%20%20%20%20Y0%20%3D%20%2B%5F%5B0%5D%5B1%5D%2C%20Y1%20%3D%20%2B%5F%5B1%5D%5B1%5D%3B%0A%20%20%20%20%20%20if%20%28X0%20%3E%20X1%29%20%5F%20%3D%20X0%2C%20X0%20%3D%20X1%2C%20X1%20%3D%20%5F%3B%0A%20%20%20%20%20%20if%20%28Y0%20%3E%20Y1%29%20%5F%20%3D%20Y0%2C%20Y0%20%3D%20Y1%2C%20Y1%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20graticule%2Eprecision%28precision%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20graticule%2EminorExtent%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20%5B%20%5B%20x0%2C%20y0%20%5D%2C%20%5B%20x1%2C%20y1%20%5D%20%5D%3B%0A%20%20%20%20%20%20x0%20%3D%20%2B%5F%5B0%5D%5B0%5D%2C%20x1%20%3D%20%2B%5F%5B1%5D%5B0%5D%3B%0A%20%20%20%20%20%20y0%20%3D%20%2B%5F%5B0%5D%5B1%5D%2C%20y1%20%3D%20%2B%5F%5B1%5D%5B1%5D%3B%0A%20%20%20%20%20%20if%20%28x0%20%3E%20x1%29%20%5F%20%3D%20x0%2C%20x0%20%3D%20x1%2C%20x1%20%3D%20%5F%3B%0A%20%20%20%20%20%20if%20%28y0%20%3E%20y1%29%20%5F%20%3D%20y0%2C%20y0%20%3D%20y1%2C%20y1%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20graticule%2Eprecision%28precision%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20graticule%2Estep%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20graticule%2EminorStep%28%29%3B%0A%20%20%20%20%20%20return%20graticule%2EmajorStep%28%5F%29%2EminorStep%28%5F%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20graticule%2EmajorStep%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20%5B%20DX%2C%20DY%20%5D%3B%0A%20%20%20%20%20%20DX%20%3D%20%2B%5F%5B0%5D%2C%20DY%20%3D%20%2B%5F%5B1%5D%3B%0A%20%20%20%20%20%20return%20graticule%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20graticule%2EminorStep%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20%5B%20dx%2C%20dy%20%5D%3B%0A%20%20%20%20%20%20dx%20%3D%20%2B%5F%5B0%5D%2C%20dy%20%3D%20%2B%5F%5B1%5D%3B%0A%20%20%20%20%20%20return%20graticule%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20graticule%2Eprecision%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20precision%3B%0A%20%20%20%20%20%20precision%20%3D%20%2B%5F%3B%0A%20%20%20%20%20%20x%20%3D%20d3%5Fgeo%5FgraticuleX%28y0%2C%20y1%2C%2090%29%3B%0A%20%20%20%20%20%20y%20%3D%20d3%5Fgeo%5FgraticuleY%28x0%2C%20x1%2C%20precision%29%3B%0A%20%20%20%20%20%20X%20%3D%20d3%5Fgeo%5FgraticuleX%28Y0%2C%20Y1%2C%2090%29%3B%0A%20%20%20%20%20%20Y%20%3D%20d3%5Fgeo%5FgraticuleY%28X0%2C%20X1%2C%20precision%29%3B%0A%20%20%20%20%20%20return%20graticule%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20graticule%2EmajorExtent%28%5B%20%5B%20%2D180%2C%20%2D90%20%2B%20%CE%B5%20%5D%2C%20%5B%20180%2C%2090%20%2D%20%CE%B5%20%5D%20%5D%29%2EminorExtent%28%5B%20%5B%20%2D180%2C%20%2D80%20%2D%20%CE%B5%20%5D%2C%20%5B%20180%2C%2080%20%2B%20%CE%B5%20%5D%20%5D%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FgraticuleX%28y0%2C%20y1%2C%20dy%29%20%7B%0A%20%20%20%20var%20y%20%3D%20d3%2Erange%28y0%2C%20y1%20%2D%20%CE%B5%2C%20dy%29%2Econcat%28y1%29%3B%0A%20%20%20%20return%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20y%2Emap%28function%28y%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%20x%2C%20y%20%5D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5FgraticuleY%28x0%2C%20x1%2C%20dx%29%20%7B%0A%20%20%20%20var%20x%20%3D%20d3%2Erange%28x0%2C%20x1%20%2D%20%CE%B5%2C%20dx%29%2Econcat%28x1%29%3B%0A%20%20%20%20return%20function%28y%29%20%7B%0A%20%20%20%20%20%20return%20x%2Emap%28function%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%20x%2C%20y%20%5D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsource%28d%29%20%7B%0A%20%20%20%20return%20d%2Esource%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftarget%28d%29%20%7B%0A%20%20%20%20return%20d%2Etarget%3B%0A%20%20%7D%0A%20%20d3%2Egeo%2EgreatArc%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20source%20%3D%20d3%5Fsource%2C%20source%5F%2C%20target%20%3D%20d3%5Ftarget%2C%20target%5F%3B%0A%20%20%20%20function%20greatArc%28%29%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20%22LineString%22%2C%0A%20%20%20%20%20%20%20%20coordinates%3A%20%5B%20source%5F%20%7C%7C%20source%2Eapply%28this%2C%20arguments%29%2C%20target%5F%20%7C%7C%20target%2Eapply%28this%2C%20arguments%29%20%5D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20greatArc%2Edistance%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%2Egeo%2Edistance%28source%5F%20%7C%7C%20source%2Eapply%28this%2C%20arguments%29%2C%20target%5F%20%7C%7C%20target%2Eapply%28this%2C%20arguments%29%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20greatArc%2Esource%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20source%3B%0A%20%20%20%20%20%20source%20%3D%20%5F%2C%20source%5F%20%3D%20typeof%20%5F%20%3D%3D%3D%20%22function%22%20%3F%20null%20%3A%20%5F%3B%0A%20%20%20%20%20%20return%20greatArc%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20greatArc%2Etarget%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20target%3B%0A%20%20%20%20%20%20target%20%3D%20%5F%2C%20target%5F%20%3D%20typeof%20%5F%20%3D%3D%3D%20%22function%22%20%3F%20null%20%3A%20%5F%3B%0A%20%20%20%20%20%20return%20greatArc%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20greatArc%2Eprecision%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20arguments%2Elength%20%3F%20greatArc%20%3A%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20greatArc%3B%0A%20%20%7D%3B%0A%20%20d3%2Egeo%2Einterpolate%20%3D%20function%28source%2C%20target%29%20%7B%0A%20%20%20%20return%20d3%5Fgeo%5Finterpolate%28source%5B0%5D%20%2A%20d3%5Fradians%2C%20source%5B1%5D%20%2A%20d3%5Fradians%2C%20target%5B0%5D%20%2A%20d3%5Fradians%2C%20target%5B1%5D%20%2A%20d3%5Fradians%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5Finterpolate%28x0%2C%20y0%2C%20x1%2C%20y1%29%20%7B%0A%20%20%20%20var%20cy0%20%3D%20Math%2Ecos%28y0%29%2C%20sy0%20%3D%20Math%2Esin%28y0%29%2C%20cy1%20%3D%20Math%2Ecos%28y1%29%2C%20sy1%20%3D%20Math%2Esin%28y1%29%2C%20kx0%20%3D%20cy0%20%2A%20Math%2Ecos%28x0%29%2C%20ky0%20%3D%20cy0%20%2A%20Math%2Esin%28x0%29%2C%20kx1%20%3D%20cy1%20%2A%20Math%2Ecos%28x1%29%2C%20ky1%20%3D%20cy1%20%2A%20Math%2Esin%28x1%29%2C%20d%20%3D%202%20%2A%20Math%2Easin%28Math%2Esqrt%28d3%5Fhaversin%28y1%20%2D%20y0%29%20%2B%20cy0%20%2A%20cy1%20%2A%20d3%5Fhaversin%28x1%20%2D%20x0%29%29%29%2C%20k%20%3D%201%20%2F%20Math%2Esin%28d%29%3B%0A%20%20%20%20var%20interpolate%20%3D%20d%20%3F%20function%28t%29%20%7B%0A%20%20%20%20%20%20var%20B%20%3D%20Math%2Esin%28t%20%2A%3D%20d%29%20%2A%20k%2C%20A%20%3D%20Math%2Esin%28d%20%2D%20t%29%20%2A%20k%2C%20x%20%3D%20A%20%2A%20kx0%20%2B%20B%20%2A%20kx1%2C%20y%20%3D%20A%20%2A%20ky0%20%2B%20B%20%2A%20ky1%2C%20z%20%3D%20A%20%2A%20sy0%20%2B%20B%20%2A%20sy1%3B%0A%20%20%20%20%20%20return%20%5B%20Math%2Eatan2%28y%2C%20x%29%20%2A%20d3%5Fdegrees%2C%20Math%2Eatan2%28z%2C%20Math%2Esqrt%28x%20%2A%20x%20%2B%20y%20%2A%20y%29%29%20%2A%20d3%5Fdegrees%20%5D%3B%0A%20%20%20%20%7D%20%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20%5B%20x0%20%2A%20d3%5Fdegrees%2C%20y0%20%2A%20d3%5Fdegrees%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20interpolate%2Edistance%20%3D%20d%3B%0A%20%20%20%20return%20interpolate%3B%0A%20%20%7D%0A%20%20d3%2Egeo%2Elength%20%3D%20function%28object%29%20%7B%0A%20%20%20%20d3%5Fgeo%5FlengthSum%20%3D%200%3B%0A%20%20%20%20d3%2Egeo%2Estream%28object%2C%20d3%5Fgeo%5Flength%29%3B%0A%20%20%20%20return%20d3%5Fgeo%5FlengthSum%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fgeo%5FlengthSum%3B%0A%20%20var%20d3%5Fgeo%5Flength%20%3D%20%7B%0A%20%20%20%20sphere%3A%20d3%5Fnoop%2C%0A%20%20%20%20point%3A%20d3%5Fnoop%2C%0A%20%20%20%20lineStart%3A%20d3%5Fgeo%5FlengthLineStart%2C%0A%20%20%20%20lineEnd%3A%20d3%5Fnoop%2C%0A%20%20%20%20polygonStart%3A%20d3%5Fnoop%2C%0A%20%20%20%20polygonEnd%3A%20d3%5Fnoop%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FlengthLineStart%28%29%20%7B%0A%20%20%20%20var%20%CE%BB0%2C%20sin%CF%860%2C%20cos%CF%860%3B%0A%20%20%20%20d3%5Fgeo%5Flength%2Epoint%20%3D%20function%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20%CE%BB0%20%3D%20%CE%BB%20%2A%20d3%5Fradians%2C%20sin%CF%860%20%3D%20Math%2Esin%28%CF%86%20%2A%3D%20d3%5Fradians%29%2C%20cos%CF%860%20%3D%20Math%2Ecos%28%CF%86%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5Flength%2Epoint%20%3D%20nextPoint%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20d3%5Fgeo%5Flength%2ElineEnd%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeo%5Flength%2Epoint%20%3D%20d3%5Fgeo%5Flength%2ElineEnd%20%3D%20d3%5Fnoop%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20nextPoint%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20var%20sin%CF%86%20%3D%20Math%2Esin%28%CF%86%20%2A%3D%20d3%5Fradians%29%2C%20cos%CF%86%20%3D%20Math%2Ecos%28%CF%86%29%2C%20t%20%3D%20abs%28%28%CE%BB%20%2A%3D%20d3%5Fradians%29%20%2D%20%CE%BB0%29%2C%20cos%CE%94%CE%BB%20%3D%20Math%2Ecos%28t%29%3B%0A%20%20%20%20%20%20d3%5Fgeo%5FlengthSum%20%2B%3D%20Math%2Eatan2%28Math%2Esqrt%28%28t%20%3D%20cos%CF%86%20%2A%20Math%2Esin%28t%29%29%20%2A%20t%20%2B%20%28t%20%3D%20cos%CF%860%20%2A%20sin%CF%86%20%2D%20sin%CF%860%20%2A%20cos%CF%86%20%2A%20cos%CE%94%CE%BB%29%20%2A%20t%29%2C%20sin%CF%860%20%2A%20sin%CF%86%20%2B%20cos%CF%860%20%2A%20cos%CF%86%20%2A%20cos%CE%94%CE%BB%29%3B%0A%20%20%20%20%20%20%CE%BB0%20%3D%20%CE%BB%2C%20sin%CF%860%20%3D%20sin%CF%86%2C%20cos%CF%860%20%3D%20cos%CF%86%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Fgeo%5Fazimuthal%28scale%2C%20angle%29%20%7B%0A%20%20%20%20function%20azimuthal%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20var%20cos%CE%BB%20%3D%20Math%2Ecos%28%CE%BB%29%2C%20cos%CF%86%20%3D%20Math%2Ecos%28%CF%86%29%2C%20k%20%3D%20scale%28cos%CE%BB%20%2A%20cos%CF%86%29%3B%0A%20%20%20%20%20%20return%20%5B%20k%20%2A%20cos%CF%86%20%2A%20Math%2Esin%28%CE%BB%29%2C%20k%20%2A%20Math%2Esin%28%CF%86%29%20%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20azimuthal%2Einvert%20%3D%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20var%20%CF%81%20%3D%20Math%2Esqrt%28x%20%2A%20x%20%2B%20y%20%2A%20y%29%2C%20c%20%3D%20angle%28%CF%81%29%2C%20sinc%20%3D%20Math%2Esin%28c%29%2C%20cosc%20%3D%20Math%2Ecos%28c%29%3B%0A%20%20%20%20%20%20return%20%5B%20Math%2Eatan2%28x%20%2A%20sinc%2C%20%CF%81%20%2A%20cosc%29%2C%20Math%2Easin%28%CF%81%20%26%26%20y%20%2A%20sinc%20%2F%20%CF%81%29%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20azimuthal%3B%0A%20%20%7D%0A%20%20var%20d3%5Fgeo%5FazimuthalEqualArea%20%3D%20d3%5Fgeo%5Fazimuthal%28function%28cos%CE%BBcos%CF%86%29%20%7B%0A%20%20%20%20return%20Math%2Esqrt%282%20%2F%20%281%20%2B%20cos%CE%BBcos%CF%86%29%29%3B%0A%20%20%7D%2C%20function%28%CF%81%29%20%7B%0A%20%20%20%20return%202%20%2A%20Math%2Easin%28%CF%81%20%2F%202%29%3B%0A%20%20%7D%29%3B%0A%20%20%28d3%2Egeo%2EazimuthalEqualArea%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fgeo%5Fprojection%28d3%5Fgeo%5FazimuthalEqualArea%29%3B%0A%20%20%7D%29%2Eraw%20%3D%20d3%5Fgeo%5FazimuthalEqualArea%3B%0A%20%20var%20d3%5Fgeo%5FazimuthalEquidistant%20%3D%20d3%5Fgeo%5Fazimuthal%28function%28cos%CE%BBcos%CF%86%29%20%7B%0A%20%20%20%20var%20c%20%3D%20Math%2Eacos%28cos%CE%BBcos%CF%86%29%3B%0A%20%20%20%20return%20c%20%26%26%20c%20%2F%20Math%2Esin%28c%29%3B%0A%20%20%7D%2C%20d3%5Fidentity%29%3B%0A%20%20%28d3%2Egeo%2EazimuthalEquidistant%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fgeo%5Fprojection%28d3%5Fgeo%5FazimuthalEquidistant%29%3B%0A%20%20%7D%29%2Eraw%20%3D%20d3%5Fgeo%5FazimuthalEquidistant%3B%0A%20%20function%20d3%5Fgeo%5FconicConformal%28%CF%860%2C%20%CF%861%29%20%7B%0A%20%20%20%20var%20cos%CF%860%20%3D%20Math%2Ecos%28%CF%860%29%2C%20t%20%3D%20function%28%CF%86%29%20%7B%0A%20%20%20%20%20%20return%20Math%2Etan%28%CF%80%20%2F%204%20%2B%20%CF%86%20%2F%202%29%3B%0A%20%20%20%20%7D%2C%20n%20%3D%20%CF%860%20%3D%3D%3D%20%CF%861%20%3F%20Math%2Esin%28%CF%860%29%20%3A%20Math%2Elog%28cos%CF%860%20%2F%20Math%2Ecos%28%CF%861%29%29%20%2F%20Math%2Elog%28t%28%CF%861%29%20%2F%20t%28%CF%860%29%29%2C%20F%20%3D%20cos%CF%860%20%2A%20Math%2Epow%28t%28%CF%860%29%2C%20n%29%20%2F%20n%3B%0A%20%20%20%20if%20%28%21n%29%20return%20d3%5Fgeo%5Fmercator%3B%0A%20%20%20%20function%20forward%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20if%20%28F%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%CF%86%20%3C%20%2Dhalf%CF%80%20%2B%20%CE%B5%29%20%CF%86%20%3D%20%2Dhalf%CF%80%20%2B%20%CE%B5%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%CF%86%20%3E%20half%CF%80%20%2D%20%CE%B5%29%20%CF%86%20%3D%20half%CF%80%20%2D%20%CE%B5%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20%CF%81%20%3D%20F%20%2F%20Math%2Epow%28t%28%CF%86%29%2C%20n%29%3B%0A%20%20%20%20%20%20return%20%5B%20%CF%81%20%2A%20Math%2Esin%28n%20%2A%20%CE%BB%29%2C%20F%20%2D%20%CF%81%20%2A%20Math%2Ecos%28n%20%2A%20%CE%BB%29%20%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20forward%2Einvert%20%3D%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20var%20%CF%810%5Fy%20%3D%20F%20%2D%20y%2C%20%CF%81%20%3D%20d3%5Fsgn%28n%29%20%2A%20Math%2Esqrt%28x%20%2A%20x%20%2B%20%CF%810%5Fy%20%2A%20%CF%810%5Fy%29%3B%0A%20%20%20%20%20%20return%20%5B%20Math%2Eatan2%28x%2C%20%CF%810%5Fy%29%20%2F%20n%2C%202%20%2A%20Math%2Eatan%28Math%2Epow%28F%20%2F%20%CF%81%2C%201%20%2F%20n%29%29%20%2D%20half%CF%80%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20forward%3B%0A%20%20%7D%0A%20%20%28d3%2Egeo%2EconicConformal%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fgeo%5Fconic%28d3%5Fgeo%5FconicConformal%29%3B%0A%20%20%7D%29%2Eraw%20%3D%20d3%5Fgeo%5FconicConformal%3B%0A%20%20function%20d3%5Fgeo%5FconicEquidistant%28%CF%860%2C%20%CF%861%29%20%7B%0A%20%20%20%20var%20cos%CF%860%20%3D%20Math%2Ecos%28%CF%860%29%2C%20n%20%3D%20%CF%860%20%3D%3D%3D%20%CF%861%20%3F%20Math%2Esin%28%CF%860%29%20%3A%20%28cos%CF%860%20%2D%20Math%2Ecos%28%CF%861%29%29%20%2F%20%28%CF%861%20%2D%20%CF%860%29%2C%20G%20%3D%20cos%CF%860%20%2F%20n%20%2B%20%CF%860%3B%0A%20%20%20%20if%20%28abs%28n%29%20%3C%20%CE%B5%29%20return%20d3%5Fgeo%5Fequirectangular%3B%0A%20%20%20%20function%20forward%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20%20%20var%20%CF%81%20%3D%20G%20%2D%20%CF%86%3B%0A%20%20%20%20%20%20return%20%5B%20%CF%81%20%2A%20Math%2Esin%28n%20%2A%20%CE%BB%29%2C%20G%20%2D%20%CF%81%20%2A%20Math%2Ecos%28n%20%2A%20%CE%BB%29%20%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20forward%2Einvert%20%3D%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20%20%20var%20%CF%810%5Fy%20%3D%20G%20%2D%20y%3B%0A%20%20%20%20%20%20return%20%5B%20Math%2Eatan2%28x%2C%20%CF%810%5Fy%29%20%2F%20n%2C%20G%20%2D%20d3%5Fsgn%28n%29%20%2A%20Math%2Esqrt%28x%20%2A%20x%20%2B%20%CF%810%5Fy%20%2A%20%CF%810%5Fy%29%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20forward%3B%0A%20%20%7D%0A%20%20%28d3%2Egeo%2EconicEquidistant%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fgeo%5Fconic%28d3%5Fgeo%5FconicEquidistant%29%3B%0A%20%20%7D%29%2Eraw%20%3D%20d3%5Fgeo%5FconicEquidistant%3B%0A%20%20var%20d3%5Fgeo%5Fgnomonic%20%3D%20d3%5Fgeo%5Fazimuthal%28function%28cos%CE%BBcos%CF%86%29%20%7B%0A%20%20%20%20return%201%20%2F%20cos%CE%BBcos%CF%86%3B%0A%20%20%7D%2C%20Math%2Eatan%29%3B%0A%20%20%28d3%2Egeo%2Egnomonic%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fgeo%5Fprojection%28d3%5Fgeo%5Fgnomonic%29%3B%0A%20%20%7D%29%2Eraw%20%3D%20d3%5Fgeo%5Fgnomonic%3B%0A%20%20function%20d3%5Fgeo%5Fmercator%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20return%20%5B%20%CE%BB%2C%20Math%2Elog%28Math%2Etan%28%CF%80%20%2F%204%20%2B%20%CF%86%20%2F%202%29%29%20%5D%3B%0A%20%20%7D%0A%20%20d3%5Fgeo%5Fmercator%2Einvert%20%3D%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20return%20%5B%20x%2C%202%20%2A%20Math%2Eatan%28Math%2Eexp%28y%29%29%20%2D%20half%CF%80%20%5D%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeo%5FmercatorProjection%28project%29%20%7B%0A%20%20%20%20var%20m%20%3D%20d3%5Fgeo%5Fprojection%28project%29%2C%20scale%20%3D%20m%2Escale%2C%20translate%20%3D%20m%2Etranslate%2C%20clipExtent%20%3D%20m%2EclipExtent%2C%20clipAuto%3B%0A%20%20%20%20m%2Escale%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20v%20%3D%20scale%2Eapply%28m%2C%20arguments%29%3B%0A%20%20%20%20%20%20return%20v%20%3D%3D%3D%20m%20%3F%20clipAuto%20%3F%20m%2EclipExtent%28null%29%20%3A%20m%20%3A%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20m%2Etranslate%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20v%20%3D%20translate%2Eapply%28m%2C%20arguments%29%3B%0A%20%20%20%20%20%20return%20v%20%3D%3D%3D%20m%20%3F%20clipAuto%20%3F%20m%2EclipExtent%28null%29%20%3A%20m%20%3A%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20m%2EclipExtent%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20var%20v%20%3D%20clipExtent%2Eapply%28m%2C%20arguments%29%3B%0A%20%20%20%20%20%20if%20%28v%20%3D%3D%3D%20m%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28clipAuto%20%3D%20%5F%20%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20k%20%3D%20%CF%80%20%2A%20scale%28%29%2C%20t%20%3D%20translate%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20clipExtent%28%5B%20%5B%20t%5B0%5D%20%2D%20k%2C%20t%5B1%5D%20%2D%20k%20%5D%2C%20%5B%20t%5B0%5D%20%2B%20k%2C%20t%5B1%5D%20%2B%20k%20%5D%20%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20%28clipAuto%29%20%7B%0A%20%20%20%20%20%20%20%20v%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20m%2EclipExtent%28null%29%3B%0A%20%20%7D%0A%20%20%28d3%2Egeo%2Emercator%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fgeo%5FmercatorProjection%28d3%5Fgeo%5Fmercator%29%3B%0A%20%20%7D%29%2Eraw%20%3D%20d3%5Fgeo%5Fmercator%3B%0A%20%20var%20d3%5Fgeo%5Forthographic%20%3D%20d3%5Fgeo%5Fazimuthal%28function%28%29%20%7B%0A%20%20%20%20return%201%3B%0A%20%20%7D%2C%20Math%2Easin%29%3B%0A%20%20%28d3%2Egeo%2Eorthographic%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fgeo%5Fprojection%28d3%5Fgeo%5Forthographic%29%3B%0A%20%20%7D%29%2Eraw%20%3D%20d3%5Fgeo%5Forthographic%3B%0A%20%20var%20d3%5Fgeo%5Fstereographic%20%3D%20d3%5Fgeo%5Fazimuthal%28function%28cos%CE%BBcos%CF%86%29%20%7B%0A%20%20%20%20return%201%20%2F%20%281%20%2B%20cos%CE%BBcos%CF%86%29%3B%0A%20%20%7D%2C%20function%28%CF%81%29%20%7B%0A%20%20%20%20return%202%20%2A%20Math%2Eatan%28%CF%81%29%3B%0A%20%20%7D%29%3B%0A%20%20%28d3%2Egeo%2Estereographic%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fgeo%5Fprojection%28d3%5Fgeo%5Fstereographic%29%3B%0A%20%20%7D%29%2Eraw%20%3D%20d3%5Fgeo%5Fstereographic%3B%0A%20%20function%20d3%5Fgeo%5FtransverseMercator%28%CE%BB%2C%20%CF%86%29%20%7B%0A%20%20%20%20return%20%5B%20Math%2Elog%28Math%2Etan%28%CF%80%20%2F%204%20%2B%20%CF%86%20%2F%202%29%29%2C%20%2D%CE%BB%20%5D%3B%0A%20%20%7D%0A%20%20d3%5Fgeo%5FtransverseMercator%2Einvert%20%3D%20function%28x%2C%20y%29%20%7B%0A%20%20%20%20return%20%5B%20%2Dy%2C%202%20%2A%20Math%2Eatan%28Math%2Eexp%28x%29%29%20%2D%20half%CF%80%20%5D%3B%0A%20%20%7D%3B%0A%20%20%28d3%2Egeo%2EtransverseMercator%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20projection%20%3D%20d3%5Fgeo%5FmercatorProjection%28d3%5Fgeo%5FtransverseMercator%29%2C%20center%20%3D%20projection%2Ecenter%2C%20rotate%20%3D%20projection%2Erotate%3B%0A%20%20%20%20projection%2Ecenter%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20return%20%5F%20%3F%20center%28%5B%20%2D%5F%5B1%5D%2C%20%5F%5B0%5D%20%5D%29%20%3A%20%28%5F%20%3D%20center%28%29%2C%20%5B%20%5F%5B1%5D%2C%20%2D%5F%5B0%5D%20%5D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20projection%2Erotate%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20return%20%5F%20%3F%20rotate%28%5B%20%5F%5B0%5D%2C%20%5F%5B1%5D%2C%20%5F%2Elength%20%3E%202%20%3F%20%5F%5B2%5D%20%2B%2090%20%3A%2090%20%5D%29%20%3A%20%28%5F%20%3D%20rotate%28%29%2C%20%0A%20%20%20%20%20%20%5B%20%5F%5B0%5D%2C%20%5F%5B1%5D%2C%20%5F%5B2%5D%20%2D%2090%20%5D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20rotate%28%5B%200%2C%200%2C%2090%20%5D%29%3B%0A%20%20%7D%29%2Eraw%20%3D%20d3%5Fgeo%5FtransverseMercator%3B%0A%20%20d3%2Egeom%20%3D%20%7B%7D%3B%0A%20%20function%20d3%5Fgeom%5FpointX%28d%29%20%7B%0A%20%20%20%20return%20d%5B0%5D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FpointY%28d%29%20%7B%0A%20%20%20%20return%20d%5B1%5D%3B%0A%20%20%7D%0A%20%20d3%2Egeom%2Ehull%20%3D%20function%28vertices%29%20%7B%0A%20%20%20%20var%20x%20%3D%20d3%5Fgeom%5FpointX%2C%20y%20%3D%20d3%5Fgeom%5FpointY%3B%0A%20%20%20%20if%20%28arguments%2Elength%29%20return%20hull%28vertices%29%3B%0A%20%20%20%20function%20hull%28data%29%20%7B%0A%20%20%20%20%20%20if%20%28data%2Elength%20%3C%203%29%20return%20%5B%5D%3B%0A%20%20%20%20%20%20var%20fx%20%3D%20d3%5Ffunctor%28x%29%2C%20fy%20%3D%20d3%5Ffunctor%28y%29%2C%20i%2C%20n%20%3D%20data%2Elength%2C%20points%20%3D%20%5B%5D%2C%20flippedPoints%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20points%2Epush%28%5B%20%2Bfx%2Ecall%28this%2C%20data%5Bi%5D%2C%20i%29%2C%20%2Bfy%2Ecall%28this%2C%20data%5Bi%5D%2C%20i%29%2C%20i%20%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20points%2Esort%28d3%5Fgeom%5FhullOrder%29%3B%0A%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20flippedPoints%2Epush%28%5B%20points%5Bi%5D%5B0%5D%2C%20%2Dpoints%5Bi%5D%5B1%5D%20%5D%29%3B%0A%20%20%20%20%20%20var%20upper%20%3D%20d3%5Fgeom%5FhullUpper%28points%29%2C%20lower%20%3D%20d3%5Fgeom%5FhullUpper%28flippedPoints%29%3B%0A%20%20%20%20%20%20var%20skipLeft%20%3D%20lower%5B0%5D%20%3D%3D%3D%20upper%5B0%5D%2C%20skipRight%20%3D%20lower%5Blower%2Elength%20%2D%201%5D%20%3D%3D%3D%20upper%5Bupper%2Elength%20%2D%201%5D%2C%20polygon%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20%28i%20%3D%20upper%2Elength%20%2D%201%3B%20i%20%3E%3D%200%3B%20%2D%2Di%29%20polygon%2Epush%28data%5Bpoints%5Bupper%5Bi%5D%5D%5B2%5D%5D%29%3B%0A%20%20%20%20%20%20for%20%28i%20%3D%20%2BskipLeft%3B%20i%20%3C%20lower%2Elength%20%2D%20skipRight%3B%20%2B%2Bi%29%20polygon%2Epush%28data%5Bpoints%5Blower%5Bi%5D%5D%5B2%5D%5D%29%3B%0A%20%20%20%20%20%20return%20polygon%3B%0A%20%20%20%20%7D%0A%20%20%20%20hull%2Ex%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20return%20arguments%2Elength%20%3F%20%28x%20%3D%20%5F%2C%20hull%29%20%3A%20x%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20hull%2Ey%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20return%20arguments%2Elength%20%3F%20%28y%20%3D%20%5F%2C%20hull%29%20%3A%20y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20hull%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeom%5FhullUpper%28points%29%20%7B%0A%20%20%20%20var%20n%20%3D%20points%2Elength%2C%20hull%20%3D%20%5B%200%2C%201%20%5D%2C%20hs%20%3D%202%3B%0A%20%20%20%20for%20%28var%20i%20%3D%202%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20while%20%28hs%20%3E%201%20%26%26%20d3%5Fcross2d%28points%5Bhull%5Bhs%20%2D%202%5D%5D%2C%20points%5Bhull%5Bhs%20%2D%201%5D%5D%2C%20points%5Bi%5D%29%20%3C%3D%200%29%20%2D%2Dhs%3B%0A%20%20%20%20%20%20hull%5Bhs%2B%2B%5D%20%3D%20i%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20hull%2Eslice%280%2C%20hs%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FhullOrder%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20a%5B0%5D%20%2D%20b%5B0%5D%20%7C%7C%20a%5B1%5D%20%2D%20b%5B1%5D%3B%0A%20%20%7D%0A%20%20d3%2Egeom%2Epolygon%20%3D%20function%28coordinates%29%20%7B%0A%20%20%20%20d3%5Fsubclass%28coordinates%2C%20d3%5Fgeom%5FpolygonPrototype%29%3B%0A%20%20%20%20return%20coordinates%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fgeom%5FpolygonPrototype%20%3D%20d3%2Egeom%2Epolygon%2Eprototype%20%3D%20%5B%5D%3B%0A%20%20d3%5Fgeom%5FpolygonPrototype%2Earea%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20this%2Elength%2C%20a%2C%20b%20%3D%20this%5Bn%20%2D%201%5D%2C%20area%20%3D%200%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20a%20%3D%20b%3B%0A%20%20%20%20%20%20b%20%3D%20this%5Bi%5D%3B%0A%20%20%20%20%20%20area%20%2B%3D%20a%5B1%5D%20%2A%20b%5B0%5D%20%2D%20a%5B0%5D%20%2A%20b%5B1%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20area%20%2A%20%2E5%3B%0A%20%20%7D%3B%0A%20%20d3%5Fgeom%5FpolygonPrototype%2Ecentroid%20%3D%20function%28k%29%20%7B%0A%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20this%2Elength%2C%20x%20%3D%200%2C%20y%20%3D%200%2C%20a%2C%20b%20%3D%20this%5Bn%20%2D%201%5D%2C%20c%3B%0A%20%20%20%20if%20%28%21arguments%2Elength%29%20k%20%3D%20%2D1%20%2F%20%286%20%2A%20this%2Earea%28%29%29%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20a%20%3D%20b%3B%0A%20%20%20%20%20%20b%20%3D%20this%5Bi%5D%3B%0A%20%20%20%20%20%20c%20%3D%20a%5B0%5D%20%2A%20b%5B1%5D%20%2D%20b%5B0%5D%20%2A%20a%5B1%5D%3B%0A%20%20%20%20%20%20x%20%2B%3D%20%28a%5B0%5D%20%2B%20b%5B0%5D%29%20%2A%20c%3B%0A%20%20%20%20%20%20y%20%2B%3D%20%28a%5B1%5D%20%2B%20b%5B1%5D%29%20%2A%20c%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%5B%20x%20%2A%20k%2C%20y%20%2A%20k%20%5D%3B%0A%20%20%7D%3B%0A%20%20d3%5Fgeom%5FpolygonPrototype%2Eclip%20%3D%20function%28subject%29%20%7B%0A%20%20%20%20var%20input%2C%20closed%20%3D%20d3%5Fgeom%5FpolygonClosed%28subject%29%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20this%2Elength%20%2D%20d3%5Fgeom%5FpolygonClosed%28this%29%2C%20j%2C%20m%2C%20a%20%3D%20this%5Bn%20%2D%201%5D%2C%20b%2C%20c%2C%20d%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20input%20%3D%20subject%2Eslice%28%29%3B%0A%20%20%20%20%20%20subject%2Elength%20%3D%200%3B%0A%20%20%20%20%20%20b%20%3D%20this%5Bi%5D%3B%0A%20%20%20%20%20%20c%20%3D%20input%5B%28m%20%3D%20input%2Elength%20%2D%20closed%29%20%2D%201%5D%3B%0A%20%20%20%20%20%20j%20%3D%20%2D1%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bj%20%3C%20m%29%20%7B%0A%20%20%20%20%20%20%20%20d%20%3D%20input%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28d3%5Fgeom%5FpolygonInside%28d%2C%20a%2C%20b%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21d3%5Fgeom%5FpolygonInside%28c%2C%20a%2C%20b%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20subject%2Epush%28d3%5Fgeom%5FpolygonIntersect%28c%2C%20d%2C%20a%2C%20b%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20subject%2Epush%28d%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28d3%5Fgeom%5FpolygonInside%28c%2C%20a%2C%20b%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20subject%2Epush%28d3%5Fgeom%5FpolygonIntersect%28c%2C%20d%2C%20a%2C%20b%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20c%20%3D%20d%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28closed%29%20subject%2Epush%28subject%5B0%5D%29%3B%0A%20%20%20%20%20%20a%20%3D%20b%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20subject%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeom%5FpolygonInside%28p%2C%20a%2C%20b%29%20%7B%0A%20%20%20%20return%20%28b%5B0%5D%20%2D%20a%5B0%5D%29%20%2A%20%28p%5B1%5D%20%2D%20a%5B1%5D%29%20%3C%20%28b%5B1%5D%20%2D%20a%5B1%5D%29%20%2A%20%28p%5B0%5D%20%2D%20a%5B0%5D%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FpolygonIntersect%28c%2C%20d%2C%20a%2C%20b%29%20%7B%0A%20%20%20%20var%20x1%20%3D%20c%5B0%5D%2C%20x3%20%3D%20a%5B0%5D%2C%20x21%20%3D%20d%5B0%5D%20%2D%20x1%2C%20x43%20%3D%20b%5B0%5D%20%2D%20x3%2C%20y1%20%3D%20c%5B1%5D%2C%20y3%20%3D%20a%5B1%5D%2C%20y21%20%3D%20d%5B1%5D%20%2D%20y1%2C%20y43%20%3D%20b%5B1%5D%20%2D%20y3%2C%20ua%20%3D%20%28x43%20%2A%20%28y1%20%2D%20y3%29%20%2D%20y43%20%2A%20%28x1%20%2D%20x3%29%29%20%2F%20%28y43%20%2A%20x21%20%2D%20x43%20%2A%20y21%29%3B%0A%20%20%20%20return%20%5B%20x1%20%2B%20ua%20%2A%20x21%2C%20y1%20%2B%20ua%20%2A%20y21%20%5D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FpolygonClosed%28coordinates%29%20%7B%0A%20%20%20%20var%20a%20%3D%20coordinates%5B0%5D%2C%20b%20%3D%20coordinates%5Bcoordinates%2Elength%20%2D%201%5D%3B%0A%20%20%20%20return%20%21%28a%5B0%5D%20%2D%20b%5B0%5D%20%7C%7C%20a%5B1%5D%20%2D%20b%5B1%5D%29%3B%0A%20%20%7D%0A%20%20var%20d3%5Fgeom%5FvoronoiEdges%2C%20d3%5Fgeom%5FvoronoiCells%2C%20d3%5Fgeom%5FvoronoiBeaches%2C%20d3%5Fgeom%5FvoronoiBeachPool%20%3D%20%5B%5D%2C%20d3%5Fgeom%5FvoronoiFirstCircle%2C%20d3%5Fgeom%5FvoronoiCircles%2C%20d3%5Fgeom%5FvoronoiCirclePool%20%3D%20%5B%5D%3B%0A%20%20function%20d3%5Fgeom%5FvoronoiBeach%28%29%20%7B%0A%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackNode%28this%29%3B%0A%20%20%20%20this%2Eedge%20%3D%20this%2Esite%20%3D%20this%2Ecircle%20%3D%20null%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiCreateBeach%28site%29%20%7B%0A%20%20%20%20var%20beach%20%3D%20d3%5Fgeom%5FvoronoiBeachPool%2Epop%28%29%20%7C%7C%20new%20d3%5Fgeom%5FvoronoiBeach%28%29%3B%0A%20%20%20%20beach%2Esite%20%3D%20site%3B%0A%20%20%20%20return%20beach%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiDetachBeach%28beach%29%20%7B%0A%20%20%20%20d3%5Fgeom%5FvoronoiDetachCircle%28beach%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiBeaches%2Eremove%28beach%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiBeachPool%2Epush%28beach%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackNode%28beach%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiRemoveBeach%28beach%29%20%7B%0A%20%20%20%20var%20circle%20%3D%20beach%2Ecircle%2C%20x%20%3D%20circle%2Ex%2C%20y%20%3D%20circle%2Ecy%2C%20vertex%20%3D%20%7B%0A%20%20%20%20%20%20x%3A%20x%2C%0A%20%20%20%20%20%20y%3A%20y%0A%20%20%20%20%7D%2C%20previous%20%3D%20beach%2EP%2C%20next%20%3D%20beach%2EN%2C%20disappearing%20%3D%20%5B%20beach%20%5D%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiDetachBeach%28beach%29%3B%0A%20%20%20%20var%20lArc%20%3D%20previous%3B%0A%20%20%20%20while%20%28lArc%2Ecircle%20%26%26%20abs%28x%20%2D%20lArc%2Ecircle%2Ex%29%20%3C%20%CE%B5%20%26%26%20abs%28y%20%2D%20lArc%2Ecircle%2Ecy%29%20%3C%20%CE%B5%29%20%7B%0A%20%20%20%20%20%20previous%20%3D%20lArc%2EP%3B%0A%20%20%20%20%20%20disappearing%2Eunshift%28lArc%29%3B%0A%20%20%20%20%20%20d3%5Fgeom%5FvoronoiDetachBeach%28lArc%29%3B%0A%20%20%20%20%20%20lArc%20%3D%20previous%3B%0A%20%20%20%20%7D%0A%20%20%20%20disappearing%2Eunshift%28lArc%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiDetachCircle%28lArc%29%3B%0A%20%20%20%20var%20rArc%20%3D%20next%3B%0A%20%20%20%20while%20%28rArc%2Ecircle%20%26%26%20abs%28x%20%2D%20rArc%2Ecircle%2Ex%29%20%3C%20%CE%B5%20%26%26%20abs%28y%20%2D%20rArc%2Ecircle%2Ecy%29%20%3C%20%CE%B5%29%20%7B%0A%20%20%20%20%20%20next%20%3D%20rArc%2EN%3B%0A%20%20%20%20%20%20disappearing%2Epush%28rArc%29%3B%0A%20%20%20%20%20%20d3%5Fgeom%5FvoronoiDetachBeach%28rArc%29%3B%0A%20%20%20%20%20%20rArc%20%3D%20next%3B%0A%20%20%20%20%7D%0A%20%20%20%20disappearing%2Epush%28rArc%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiDetachCircle%28rArc%29%3B%0A%20%20%20%20var%20nArcs%20%3D%20disappearing%2Elength%2C%20iArc%3B%0A%20%20%20%20for%20%28iArc%20%3D%201%3B%20iArc%20%3C%20nArcs%3B%20%2B%2BiArc%29%20%7B%0A%20%20%20%20%20%20rArc%20%3D%20disappearing%5BiArc%5D%3B%0A%20%20%20%20%20%20lArc%20%3D%20disappearing%5BiArc%20%2D%201%5D%3B%0A%20%20%20%20%20%20d3%5Fgeom%5FvoronoiSetEdgeEnd%28rArc%2Eedge%2C%20lArc%2Esite%2C%20rArc%2Esite%2C%20vertex%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20lArc%20%3D%20disappearing%5B0%5D%3B%0A%20%20%20%20rArc%20%3D%20disappearing%5BnArcs%20%2D%201%5D%3B%0A%20%20%20%20rArc%2Eedge%20%3D%20d3%5Fgeom%5FvoronoiCreateEdge%28lArc%2Esite%2C%20rArc%2Esite%2C%20null%2C%20vertex%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiAttachCircle%28lArc%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiAttachCircle%28rArc%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiAddBeach%28site%29%20%7B%0A%20%20%20%20var%20x%20%3D%20site%2Ex%2C%20directrix%20%3D%20site%2Ey%2C%20lArc%2C%20rArc%2C%20dxl%2C%20dxr%2C%20node%20%3D%20d3%5Fgeom%5FvoronoiBeaches%2E%5F%3B%0A%20%20%20%20while%20%28node%29%20%7B%0A%20%20%20%20%20%20dxl%20%3D%20d3%5Fgeom%5FvoronoiLeftBreakPoint%28node%2C%20directrix%29%20%2D%20x%3B%0A%20%20%20%20%20%20if%20%28dxl%20%3E%20%CE%B5%29%20node%20%3D%20node%2EL%3B%20else%20%7B%0A%20%20%20%20%20%20%20%20dxr%20%3D%20x%20%2D%20d3%5Fgeom%5FvoronoiRightBreakPoint%28node%2C%20directrix%29%3B%0A%20%20%20%20%20%20%20%20if%20%28dxr%20%3E%20%CE%B5%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21node%2ER%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lArc%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20node%20%3D%20node%2ER%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28dxl%20%3E%20%2D%CE%B5%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lArc%20%3D%20node%2EP%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20rArc%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28dxr%20%3E%20%2D%CE%B5%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lArc%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20rArc%20%3D%20node%2EN%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lArc%20%3D%20rArc%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20var%20newArc%20%3D%20d3%5Fgeom%5FvoronoiCreateBeach%28site%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiBeaches%2Einsert%28lArc%2C%20newArc%29%3B%0A%20%20%20%20if%20%28%21lArc%20%26%26%20%21rArc%29%20return%3B%0A%20%20%20%20if%20%28lArc%20%3D%3D%3D%20rArc%29%20%7B%0A%20%20%20%20%20%20d3%5Fgeom%5FvoronoiDetachCircle%28lArc%29%3B%0A%20%20%20%20%20%20rArc%20%3D%20d3%5Fgeom%5FvoronoiCreateBeach%28lArc%2Esite%29%3B%0A%20%20%20%20%20%20d3%5Fgeom%5FvoronoiBeaches%2Einsert%28newArc%2C%20rArc%29%3B%0A%20%20%20%20%20%20newArc%2Eedge%20%3D%20rArc%2Eedge%20%3D%20d3%5Fgeom%5FvoronoiCreateEdge%28lArc%2Esite%2C%20newArc%2Esite%29%3B%0A%20%20%20%20%20%20d3%5Fgeom%5FvoronoiAttachCircle%28lArc%29%3B%0A%20%20%20%20%20%20d3%5Fgeom%5FvoronoiAttachCircle%28rArc%29%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28%21rArc%29%20%7B%0A%20%20%20%20%20%20newArc%2Eedge%20%3D%20d3%5Fgeom%5FvoronoiCreateEdge%28lArc%2Esite%2C%20newArc%2Esite%29%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20d3%5Fgeom%5FvoronoiDetachCircle%28lArc%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiDetachCircle%28rArc%29%3B%0A%20%20%20%20var%20lSite%20%3D%20lArc%2Esite%2C%20ax%20%3D%20lSite%2Ex%2C%20ay%20%3D%20lSite%2Ey%2C%20bx%20%3D%20site%2Ex%20%2D%20ax%2C%20by%20%3D%20site%2Ey%20%2D%20ay%2C%20rSite%20%3D%20rArc%2Esite%2C%20cx%20%3D%20rSite%2Ex%20%2D%20ax%2C%20cy%20%3D%20rSite%2Ey%20%2D%20ay%2C%20d%20%3D%202%20%2A%20%28bx%20%2A%20cy%20%2D%20by%20%2A%20cx%29%2C%20hb%20%3D%20bx%20%2A%20bx%20%2B%20by%20%2A%20by%2C%20hc%20%3D%20cx%20%2A%20cx%20%2B%20cy%20%2A%20cy%2C%20vertex%20%3D%20%7B%0A%20%20%20%20%20%20x%3A%20%28cy%20%2A%20hb%20%2D%20by%20%2A%20hc%29%20%2F%20d%20%2B%20ax%2C%0A%20%20%20%20%20%20y%3A%20%28bx%20%2A%20hc%20%2D%20cx%20%2A%20hb%29%20%2F%20d%20%2B%20ay%0A%20%20%20%20%7D%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiSetEdgeEnd%28rArc%2Eedge%2C%20lSite%2C%20rSite%2C%20vertex%29%3B%0A%20%20%20%20newArc%2Eedge%20%3D%20d3%5Fgeom%5FvoronoiCreateEdge%28lSite%2C%20site%2C%20null%2C%20vertex%29%3B%0A%20%20%20%20rArc%2Eedge%20%3D%20d3%5Fgeom%5FvoronoiCreateEdge%28site%2C%20rSite%2C%20null%2C%20vertex%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiAttachCircle%28lArc%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiAttachCircle%28rArc%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiLeftBreakPoint%28arc%2C%20directrix%29%20%7B%0A%20%20%20%20var%20site%20%3D%20arc%2Esite%2C%20rfocx%20%3D%20site%2Ex%2C%20rfocy%20%3D%20site%2Ey%2C%20pby2%20%3D%20rfocy%20%2D%20directrix%3B%0A%20%20%20%20if%20%28%21pby2%29%20return%20rfocx%3B%0A%20%20%20%20var%20lArc%20%3D%20arc%2EP%3B%0A%20%20%20%20if%20%28%21lArc%29%20return%20%2DInfinity%3B%0A%20%20%20%20site%20%3D%20lArc%2Esite%3B%0A%20%20%20%20var%20lfocx%20%3D%20site%2Ex%2C%20lfocy%20%3D%20site%2Ey%2C%20plby2%20%3D%20lfocy%20%2D%20directrix%3B%0A%20%20%20%20if%20%28%21plby2%29%20return%20lfocx%3B%0A%20%20%20%20var%20hl%20%3D%20lfocx%20%2D%20rfocx%2C%20aby2%20%3D%201%20%2F%20pby2%20%2D%201%20%2F%20plby2%2C%20b%20%3D%20hl%20%2F%20plby2%3B%0A%20%20%20%20if%20%28aby2%29%20return%20%28%2Db%20%2B%20Math%2Esqrt%28b%20%2A%20b%20%2D%202%20%2A%20aby2%20%2A%20%28hl%20%2A%20hl%20%2F%20%28%2D2%20%2A%20plby2%29%20%2D%20lfocy%20%2B%20plby2%20%2F%202%20%2B%20rfocy%20%2D%20pby2%20%2F%202%29%29%29%20%2F%20aby2%20%2B%20rfocx%3B%0A%20%20%20%20return%20%28rfocx%20%2B%20lfocx%29%20%2F%202%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiRightBreakPoint%28arc%2C%20directrix%29%20%7B%0A%20%20%20%20var%20rArc%20%3D%20arc%2EN%3B%0A%20%20%20%20if%20%28rArc%29%20return%20d3%5Fgeom%5FvoronoiLeftBreakPoint%28rArc%2C%20directrix%29%3B%0A%20%20%20%20var%20site%20%3D%20arc%2Esite%3B%0A%20%20%20%20return%20site%2Ey%20%3D%3D%3D%20directrix%20%3F%20site%2Ex%20%3A%20Infinity%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiCell%28site%29%20%7B%0A%20%20%20%20this%2Esite%20%3D%20site%3B%0A%20%20%20%20this%2Eedges%20%3D%20%5B%5D%3B%0A%20%20%7D%0A%20%20d3%5Fgeom%5FvoronoiCell%2Eprototype%2Eprepare%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20halfEdges%20%3D%20this%2Eedges%2C%20iHalfEdge%20%3D%20halfEdges%2Elength%2C%20edge%3B%0A%20%20%20%20while%20%28iHalfEdge%2D%2D%29%20%7B%0A%20%20%20%20%20%20edge%20%3D%20halfEdges%5BiHalfEdge%5D%2Eedge%3B%0A%20%20%20%20%20%20if%20%28%21edge%2Eb%20%7C%7C%20%21edge%2Ea%29%20halfEdges%2Esplice%28iHalfEdge%2C%201%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20halfEdges%2Esort%28d3%5Fgeom%5FvoronoiHalfEdgeOrder%29%3B%0A%20%20%20%20return%20halfEdges%2Elength%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeom%5FvoronoiCloseCells%28extent%29%20%7B%0A%20%20%20%20var%20x0%20%3D%20extent%5B0%5D%5B0%5D%2C%20x1%20%3D%20extent%5B1%5D%5B0%5D%2C%20y0%20%3D%20extent%5B0%5D%5B1%5D%2C%20y1%20%3D%20extent%5B1%5D%5B1%5D%2C%20x2%2C%20y2%2C%20x3%2C%20y3%2C%20cells%20%3D%20d3%5Fgeom%5FvoronoiCells%2C%20iCell%20%3D%20cells%2Elength%2C%20cell%2C%20iHalfEdge%2C%20halfEdges%2C%20nHalfEdges%2C%20start%2C%20end%3B%0A%20%20%20%20while%20%28iCell%2D%2D%29%20%7B%0A%20%20%20%20%20%20cell%20%3D%20cells%5BiCell%5D%3B%0A%20%20%20%20%20%20if%20%28%21cell%20%7C%7C%20%21cell%2Eprepare%28%29%29%20continue%3B%0A%20%20%20%20%20%20halfEdges%20%3D%20cell%2Eedges%3B%0A%20%20%20%20%20%20nHalfEdges%20%3D%20halfEdges%2Elength%3B%0A%20%20%20%20%20%20iHalfEdge%20%3D%200%3B%0A%20%20%20%20%20%20while%20%28iHalfEdge%20%3C%20nHalfEdges%29%20%7B%0A%20%20%20%20%20%20%20%20end%20%3D%20halfEdges%5BiHalfEdge%5D%2Eend%28%29%2C%20x3%20%3D%20end%2Ex%2C%20y3%20%3D%20end%2Ey%3B%0A%20%20%20%20%20%20%20%20start%20%3D%20halfEdges%5B%2B%2BiHalfEdge%20%25%20nHalfEdges%5D%2Estart%28%29%2C%20x2%20%3D%20start%2Ex%2C%20y2%20%3D%20start%2Ey%3B%0A%20%20%20%20%20%20%20%20if%20%28abs%28x3%20%2D%20x2%29%20%3E%20%CE%B5%20%7C%7C%20abs%28y3%20%2D%20y2%29%20%3E%20%CE%B5%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20halfEdges%2Esplice%28iHalfEdge%2C%200%2C%20new%20d3%5Fgeom%5FvoronoiHalfEdge%28d3%5Fgeom%5FvoronoiCreateBorderEdge%28cell%2Esite%2C%20end%2C%20abs%28x3%20%2D%20x0%29%20%3C%20%CE%B5%20%26%26%20y1%20%2D%20y3%20%3E%20%CE%B5%20%3F%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20x0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20abs%28x2%20%2D%20x0%29%20%3C%20%CE%B5%20%3F%20y2%20%3A%20y1%0A%20%20%20%20%20%20%20%20%20%20%7D%20%3A%20abs%28y3%20%2D%20y1%29%20%3C%20%CE%B5%20%26%26%20x1%20%2D%20x3%20%3E%20%CE%B5%20%3F%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20abs%28y2%20%2D%20y1%29%20%3C%20%CE%B5%20%3F%20x2%20%3A%20x1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20y1%0A%20%20%20%20%20%20%20%20%20%20%7D%20%3A%20abs%28x3%20%2D%20x1%29%20%3C%20%CE%B5%20%26%26%20y3%20%2D%20y0%20%3E%20%CE%B5%20%3F%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20x1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20abs%28x2%20%2D%20x1%29%20%3C%20%CE%B5%20%3F%20y2%20%3A%20y0%0A%20%20%20%20%20%20%20%20%20%20%7D%20%3A%20abs%28y3%20%2D%20y0%29%20%3C%20%CE%B5%20%26%26%20x3%20%2D%20x0%20%3E%20%CE%B5%20%3F%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20abs%28y2%20%2D%20y0%29%20%3C%20%CE%B5%20%3F%20x2%20%3A%20x0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20y0%0A%20%20%20%20%20%20%20%20%20%20%7D%20%3A%20null%29%2C%20cell%2Esite%2C%20null%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%2B%2BnHalfEdges%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiHalfEdgeOrder%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20b%2Eangle%20%2D%20a%2Eangle%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiCircle%28%29%20%7B%0A%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackNode%28this%29%3B%0A%20%20%20%20this%2Ex%20%3D%20this%2Ey%20%3D%20this%2Earc%20%3D%20this%2Esite%20%3D%20this%2Ecy%20%3D%20null%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiAttachCircle%28arc%29%20%7B%0A%20%20%20%20var%20lArc%20%3D%20arc%2EP%2C%20rArc%20%3D%20arc%2EN%3B%0A%20%20%20%20if%20%28%21lArc%20%7C%7C%20%21rArc%29%20return%3B%0A%20%20%20%20var%20lSite%20%3D%20lArc%2Esite%2C%20cSite%20%3D%20arc%2Esite%2C%20rSite%20%3D%20rArc%2Esite%3B%0A%20%20%20%20if%20%28lSite%20%3D%3D%3D%20rSite%29%20return%3B%0A%20%20%20%20var%20bx%20%3D%20cSite%2Ex%2C%20by%20%3D%20cSite%2Ey%2C%20ax%20%3D%20lSite%2Ex%20%2D%20bx%2C%20ay%20%3D%20lSite%2Ey%20%2D%20by%2C%20cx%20%3D%20rSite%2Ex%20%2D%20bx%2C%20cy%20%3D%20rSite%2Ey%20%2D%20by%3B%0A%20%20%20%20var%20d%20%3D%202%20%2A%20%28ax%20%2A%20cy%20%2D%20ay%20%2A%20cx%29%3B%0A%20%20%20%20if%20%28d%20%3E%3D%20%2D%CE%B52%29%20return%3B%0A%20%20%20%20var%20ha%20%3D%20ax%20%2A%20ax%20%2B%20ay%20%2A%20ay%2C%20hc%20%3D%20cx%20%2A%20cx%20%2B%20cy%20%2A%20cy%2C%20x%20%3D%20%28cy%20%2A%20ha%20%2D%20ay%20%2A%20hc%29%20%2F%20d%2C%20y%20%3D%20%28ax%20%2A%20hc%20%2D%20cx%20%2A%20ha%29%20%2F%20d%2C%20cy%20%3D%20y%20%2B%20by%3B%0A%20%20%20%20var%20circle%20%3D%20d3%5Fgeom%5FvoronoiCirclePool%2Epop%28%29%20%7C%7C%20new%20d3%5Fgeom%5FvoronoiCircle%28%29%3B%0A%20%20%20%20circle%2Earc%20%3D%20arc%3B%0A%20%20%20%20circle%2Esite%20%3D%20cSite%3B%0A%20%20%20%20circle%2Ex%20%3D%20x%20%2B%20bx%3B%0A%20%20%20%20circle%2Ey%20%3D%20cy%20%2B%20Math%2Esqrt%28x%20%2A%20x%20%2B%20y%20%2A%20y%29%3B%0A%20%20%20%20circle%2Ecy%20%3D%20cy%3B%0A%20%20%20%20arc%2Ecircle%20%3D%20circle%3B%0A%20%20%20%20var%20before%20%3D%20null%2C%20node%20%3D%20d3%5Fgeom%5FvoronoiCircles%2E%5F%3B%0A%20%20%20%20while%20%28node%29%20%7B%0A%20%20%20%20%20%20if%20%28circle%2Ey%20%3C%20node%2Ey%20%7C%7C%20circle%2Ey%20%3D%3D%3D%20node%2Ey%20%26%26%20circle%2Ex%20%3C%3D%20node%2Ex%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28node%2EL%29%20node%20%3D%20node%2EL%3B%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20before%20%3D%20node%2EP%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20%28node%2ER%29%20node%20%3D%20node%2ER%3B%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20before%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20d3%5Fgeom%5FvoronoiCircles%2Einsert%28before%2C%20circle%29%3B%0A%20%20%20%20if%20%28%21before%29%20d3%5Fgeom%5FvoronoiFirstCircle%20%3D%20circle%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiDetachCircle%28arc%29%20%7B%0A%20%20%20%20var%20circle%20%3D%20arc%2Ecircle%3B%0A%20%20%20%20if%20%28circle%29%20%7B%0A%20%20%20%20%20%20if%20%28%21circle%2EP%29%20d3%5Fgeom%5FvoronoiFirstCircle%20%3D%20circle%2EN%3B%0A%20%20%20%20%20%20d3%5Fgeom%5FvoronoiCircles%2Eremove%28circle%29%3B%0A%20%20%20%20%20%20d3%5Fgeom%5FvoronoiCirclePool%2Epush%28circle%29%3B%0A%20%20%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackNode%28circle%29%3B%0A%20%20%20%20%20%20arc%2Ecircle%20%3D%20null%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiClipEdges%28extent%29%20%7B%0A%20%20%20%20var%20edges%20%3D%20d3%5Fgeom%5FvoronoiEdges%2C%20clip%20%3D%20d3%5Fgeom%5FclipLine%28extent%5B0%5D%5B0%5D%2C%20extent%5B0%5D%5B1%5D%2C%20extent%5B1%5D%5B0%5D%2C%20extent%5B1%5D%5B1%5D%29%2C%20i%20%3D%20edges%2Elength%2C%20e%3B%0A%20%20%20%20while%20%28i%2D%2D%29%20%7B%0A%20%20%20%20%20%20e%20%3D%20edges%5Bi%5D%3B%0A%20%20%20%20%20%20if%20%28%21d3%5Fgeom%5FvoronoiConnectEdge%28e%2C%20extent%29%20%7C%7C%20%21clip%28e%29%20%7C%7C%20abs%28e%2Ea%2Ex%20%2D%20e%2Eb%2Ex%29%20%3C%20%CE%B5%20%26%26%20abs%28e%2Ea%2Ey%20%2D%20e%2Eb%2Ey%29%20%3C%20%CE%B5%29%20%7B%0A%20%20%20%20%20%20%20%20e%2Ea%20%3D%20e%2Eb%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20edges%2Esplice%28i%2C%201%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiConnectEdge%28edge%2C%20extent%29%20%7B%0A%20%20%20%20var%20vb%20%3D%20edge%2Eb%3B%0A%20%20%20%20if%20%28vb%29%20return%20true%3B%0A%20%20%20%20var%20va%20%3D%20edge%2Ea%2C%20x0%20%3D%20extent%5B0%5D%5B0%5D%2C%20x1%20%3D%20extent%5B1%5D%5B0%5D%2C%20y0%20%3D%20extent%5B0%5D%5B1%5D%2C%20y1%20%3D%20extent%5B1%5D%5B1%5D%2C%20lSite%20%3D%20edge%2El%2C%20rSite%20%3D%20edge%2Er%2C%20lx%20%3D%20lSite%2Ex%2C%20ly%20%3D%20lSite%2Ey%2C%20rx%20%3D%20rSite%2Ex%2C%20ry%20%3D%20rSite%2Ey%2C%20fx%20%3D%20%28lx%20%2B%20rx%29%20%2F%202%2C%20fy%20%3D%20%28ly%20%2B%20ry%29%20%2F%202%2C%20fm%2C%20fb%3B%0A%20%20%20%20if%20%28ry%20%3D%3D%3D%20ly%29%20%7B%0A%20%20%20%20%20%20if%20%28fx%20%3C%20x0%20%7C%7C%20fx%20%3E%3D%20x1%29%20return%3B%0A%20%20%20%20%20%20if%20%28lx%20%3E%20rx%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21va%29%20va%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20x%3A%20fx%2C%0A%20%20%20%20%20%20%20%20%20%20y%3A%20y0%0A%20%20%20%20%20%20%20%20%7D%3B%20else%20if%20%28va%2Ey%20%3E%3D%20y1%29%20return%3B%0A%20%20%20%20%20%20%20%20vb%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20x%3A%20fx%2C%0A%20%20%20%20%20%20%20%20%20%20y%3A%20y1%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21va%29%20va%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20x%3A%20fx%2C%0A%20%20%20%20%20%20%20%20%20%20y%3A%20y1%0A%20%20%20%20%20%20%20%20%7D%3B%20else%20if%20%28va%2Ey%20%3C%20y0%29%20return%3B%0A%20%20%20%20%20%20%20%20vb%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20x%3A%20fx%2C%0A%20%20%20%20%20%20%20%20%20%20y%3A%20y0%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20fm%20%3D%20%28lx%20%2D%20rx%29%20%2F%20%28ry%20%2D%20ly%29%3B%0A%20%20%20%20%20%20fb%20%3D%20fy%20%2D%20fm%20%2A%20fx%3B%0A%20%20%20%20%20%20if%20%28fm%20%3C%20%2D1%20%7C%7C%20fm%20%3E%201%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28lx%20%3E%20rx%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21va%29%20va%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%28y0%20%2D%20fb%29%20%2F%20fm%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20y0%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%20else%20if%20%28va%2Ey%20%3E%3D%20y1%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20vb%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%28y1%20%2D%20fb%29%20%2F%20fm%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20y1%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21va%29%20va%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%28y1%20%2D%20fb%29%20%2F%20fm%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20y1%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%20else%20if%20%28va%2Ey%20%3C%20y0%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20vb%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%28y0%20%2D%20fb%29%20%2F%20fm%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20y0%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20%28ly%20%3C%20ry%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21va%29%20va%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20x0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20fm%20%2A%20x0%20%2B%20fb%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%20else%20if%20%28va%2Ex%20%3E%3D%20x1%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20vb%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20x1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20fm%20%2A%20x1%20%2B%20fb%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21va%29%20va%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20x1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20fm%20%2A%20x1%20%2B%20fb%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%20else%20if%20%28va%2Ex%20%3C%20x0%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20vb%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20x0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20fm%20%2A%20x0%20%2B%20fb%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20edge%2Ea%20%3D%20va%3B%0A%20%20%20%20edge%2Eb%20%3D%20vb%3B%0A%20%20%20%20return%20true%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiEdge%28lSite%2C%20rSite%29%20%7B%0A%20%20%20%20this%2El%20%3D%20lSite%3B%0A%20%20%20%20this%2Er%20%3D%20rSite%3B%0A%20%20%20%20this%2Ea%20%3D%20this%2Eb%20%3D%20null%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiCreateEdge%28lSite%2C%20rSite%2C%20va%2C%20vb%29%20%7B%0A%20%20%20%20var%20edge%20%3D%20new%20d3%5Fgeom%5FvoronoiEdge%28lSite%2C%20rSite%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiEdges%2Epush%28edge%29%3B%0A%20%20%20%20if%20%28va%29%20d3%5Fgeom%5FvoronoiSetEdgeEnd%28edge%2C%20lSite%2C%20rSite%2C%20va%29%3B%0A%20%20%20%20if%20%28vb%29%20d3%5Fgeom%5FvoronoiSetEdgeEnd%28edge%2C%20rSite%2C%20lSite%2C%20vb%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiCells%5BlSite%2Ei%5D%2Eedges%2Epush%28new%20d3%5Fgeom%5FvoronoiHalfEdge%28edge%2C%20lSite%2C%20rSite%29%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiCells%5BrSite%2Ei%5D%2Eedges%2Epush%28new%20d3%5Fgeom%5FvoronoiHalfEdge%28edge%2C%20rSite%2C%20lSite%29%29%3B%0A%20%20%20%20return%20edge%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiCreateBorderEdge%28lSite%2C%20va%2C%20vb%29%20%7B%0A%20%20%20%20var%20edge%20%3D%20new%20d3%5Fgeom%5FvoronoiEdge%28lSite%2C%20null%29%3B%0A%20%20%20%20edge%2Ea%20%3D%20va%3B%0A%20%20%20%20edge%2Eb%20%3D%20vb%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiEdges%2Epush%28edge%29%3B%0A%20%20%20%20return%20edge%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiSetEdgeEnd%28edge%2C%20lSite%2C%20rSite%2C%20vertex%29%20%7B%0A%20%20%20%20if%20%28%21edge%2Ea%20%26%26%20%21edge%2Eb%29%20%7B%0A%20%20%20%20%20%20edge%2Ea%20%3D%20vertex%3B%0A%20%20%20%20%20%20edge%2El%20%3D%20lSite%3B%0A%20%20%20%20%20%20edge%2Er%20%3D%20rSite%3B%0A%20%20%20%20%7D%20else%20if%20%28edge%2El%20%3D%3D%3D%20rSite%29%20%7B%0A%20%20%20%20%20%20edge%2Eb%20%3D%20vertex%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20edge%2Ea%20%3D%20vertex%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiHalfEdge%28edge%2C%20lSite%2C%20rSite%29%20%7B%0A%20%20%20%20var%20va%20%3D%20edge%2Ea%2C%20vb%20%3D%20edge%2Eb%3B%0A%20%20%20%20this%2Eedge%20%3D%20edge%3B%0A%20%20%20%20this%2Esite%20%3D%20lSite%3B%0A%20%20%20%20this%2Eangle%20%3D%20rSite%20%3F%20Math%2Eatan2%28rSite%2Ey%20%2D%20lSite%2Ey%2C%20rSite%2Ex%20%2D%20lSite%2Ex%29%20%3A%20edge%2El%20%3D%3D%3D%20lSite%20%3F%20Math%2Eatan2%28vb%2Ex%20%2D%20va%2Ex%2C%20va%2Ey%20%2D%20vb%2Ey%29%20%3A%20Math%2Eatan2%28va%2Ex%20%2D%20vb%2Ex%2C%20vb%2Ey%20%2D%20va%2Ey%29%3B%0A%20%20%7D%0A%20%20d3%5Fgeom%5FvoronoiHalfEdge%2Eprototype%20%3D%20%7B%0A%20%20%20%20start%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2Eedge%2El%20%3D%3D%3D%20this%2Esite%20%3F%20this%2Eedge%2Ea%20%3A%20this%2Eedge%2Eb%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20end%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20this%2Eedge%2El%20%3D%3D%3D%20this%2Esite%20%3F%20this%2Eedge%2Eb%20%3A%20this%2Eedge%2Ea%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeom%5FvoronoiRedBlackTree%28%29%20%7B%0A%20%20%20%20this%2E%5F%20%3D%20null%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiRedBlackNode%28node%29%20%7B%0A%20%20%20%20node%2EU%20%3D%20node%2EC%20%3D%20node%2EL%20%3D%20node%2ER%20%3D%20node%2EP%20%3D%20node%2EN%20%3D%20null%3B%0A%20%20%7D%0A%20%20d3%5Fgeom%5FvoronoiRedBlackTree%2Eprototype%20%3D%20%7B%0A%20%20%20%20insert%3A%20function%28after%2C%20node%29%20%7B%0A%20%20%20%20%20%20var%20parent%2C%20grandpa%2C%20uncle%3B%0A%20%20%20%20%20%20if%20%28after%29%20%7B%0A%20%20%20%20%20%20%20%20node%2EP%20%3D%20after%3B%0A%20%20%20%20%20%20%20%20node%2EN%20%3D%20after%2EN%3B%0A%20%20%20%20%20%20%20%20if%20%28after%2EN%29%20after%2EN%2EP%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20after%2EN%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20if%20%28after%2ER%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20after%20%3D%20after%2ER%3B%0A%20%20%20%20%20%20%20%20%20%20while%20%28after%2EL%29%20after%20%3D%20after%2EL%3B%0A%20%20%20%20%20%20%20%20%20%20after%2EL%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20after%2ER%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20parent%20%3D%20after%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28this%2E%5F%29%20%7B%0A%20%20%20%20%20%20%20%20after%20%3D%20d3%5Fgeom%5FvoronoiRedBlackFirst%28this%2E%5F%29%3B%0A%20%20%20%20%20%20%20%20node%2EP%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20node%2EN%20%3D%20after%3B%0A%20%20%20%20%20%20%20%20after%2EP%20%3D%20after%2EL%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20parent%20%3D%20after%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20node%2EP%20%3D%20node%2EN%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this%2E%5F%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20parent%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20node%2EL%20%3D%20node%2ER%20%3D%20null%3B%0A%20%20%20%20%20%20node%2EU%20%3D%20parent%3B%0A%20%20%20%20%20%20node%2EC%20%3D%20true%3B%0A%20%20%20%20%20%20after%20%3D%20node%3B%0A%20%20%20%20%20%20while%20%28parent%20%26%26%20parent%2EC%29%20%7B%0A%20%20%20%20%20%20%20%20grandpa%20%3D%20parent%2EU%3B%0A%20%20%20%20%20%20%20%20if%20%28parent%20%3D%3D%3D%20grandpa%2EL%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20uncle%20%3D%20grandpa%2ER%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28uncle%20%26%26%20uncle%2EC%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20parent%2EC%20%3D%20uncle%2EC%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20grandpa%2EC%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20after%20%3D%20grandpa%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28after%20%3D%3D%3D%20parent%2ER%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackRotateLeft%28this%2C%20parent%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20after%20%3D%20parent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent%20%3D%20after%2EU%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20parent%2EC%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20grandpa%2EC%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackRotateRight%28this%2C%20grandpa%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20uncle%20%3D%20grandpa%2EL%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28uncle%20%26%26%20uncle%2EC%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20parent%2EC%20%3D%20uncle%2EC%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20grandpa%2EC%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20after%20%3D%20grandpa%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28after%20%3D%3D%3D%20parent%2EL%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackRotateRight%28this%2C%20parent%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20after%20%3D%20parent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent%20%3D%20after%2EU%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20parent%2EC%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20grandpa%2EC%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackRotateLeft%28this%2C%20grandpa%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20parent%20%3D%20after%2EU%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this%2E%5F%2EC%20%3D%20false%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20remove%3A%20function%28node%29%20%7B%0A%20%20%20%20%20%20if%20%28node%2EN%29%20node%2EN%2EP%20%3D%20node%2EP%3B%0A%20%20%20%20%20%20if%20%28node%2EP%29%20node%2EP%2EN%20%3D%20node%2EN%3B%0A%20%20%20%20%20%20node%2EN%20%3D%20node%2EP%20%3D%20null%3B%0A%20%20%20%20%20%20var%20parent%20%3D%20node%2EU%2C%20sibling%2C%20left%20%3D%20node%2EL%2C%20right%20%3D%20node%2ER%2C%20next%2C%20red%3B%0A%20%20%20%20%20%20if%20%28%21left%29%20next%20%3D%20right%3B%20else%20if%20%28%21right%29%20next%20%3D%20left%3B%20else%20next%20%3D%20d3%5Fgeom%5FvoronoiRedBlackFirst%28right%29%3B%0A%20%20%20%20%20%20if%20%28parent%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28parent%2EL%20%3D%3D%3D%20node%29%20parent%2EL%20%3D%20next%3B%20else%20parent%2ER%20%3D%20next%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this%2E%5F%20%3D%20next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28left%20%26%26%20right%29%20%7B%0A%20%20%20%20%20%20%20%20red%20%3D%20next%2EC%3B%0A%20%20%20%20%20%20%20%20next%2EC%20%3D%20node%2EC%3B%0A%20%20%20%20%20%20%20%20next%2EL%20%3D%20left%3B%0A%20%20%20%20%20%20%20%20left%2EU%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20if%20%28next%20%21%3D%3D%20right%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20parent%20%3D%20next%2EU%3B%0A%20%20%20%20%20%20%20%20%20%20next%2EU%20%3D%20node%2EU%3B%0A%20%20%20%20%20%20%20%20%20%20node%20%3D%20next%2ER%3B%0A%20%20%20%20%20%20%20%20%20%20parent%2EL%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20next%2ER%20%3D%20right%3B%0A%20%20%20%20%20%20%20%20%20%20right%2EU%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20next%2EU%20%3D%20parent%3B%0A%20%20%20%20%20%20%20%20%20%20parent%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%20%20node%20%3D%20next%2ER%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20red%20%3D%20node%2EC%3B%0A%20%20%20%20%20%20%20%20node%20%3D%20next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28node%29%20node%2EU%20%3D%20parent%3B%0A%20%20%20%20%20%20if%20%28red%29%20return%3B%0A%20%20%20%20%20%20if%20%28node%20%26%26%20node%2EC%29%20%7B%0A%20%20%20%20%20%20%20%20node%2EC%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20if%20%28node%20%3D%3D%3D%20this%2E%5F%29%20break%3B%0A%20%20%20%20%20%20%20%20if%20%28node%20%3D%3D%3D%20parent%2EL%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20parent%2ER%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28sibling%2EC%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sibling%2EC%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20parent%2EC%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackRotateLeft%28this%2C%20parent%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20parent%2ER%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28sibling%2EL%20%26%26%20sibling%2EL%2EC%20%7C%7C%20sibling%2ER%20%26%26%20sibling%2ER%2EC%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21sibling%2ER%20%7C%7C%20%21sibling%2ER%2EC%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sibling%2EL%2EC%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sibling%2EC%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackRotateRight%28this%2C%20sibling%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20parent%2ER%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20sibling%2EC%20%3D%20parent%2EC%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20parent%2EC%20%3D%20sibling%2ER%2EC%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackRotateLeft%28this%2C%20parent%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20node%20%3D%20this%2E%5F%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20parent%2EL%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28sibling%2EC%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sibling%2EC%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20parent%2EC%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackRotateRight%28this%2C%20parent%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20parent%2EL%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28sibling%2EL%20%26%26%20sibling%2EL%2EC%20%7C%7C%20sibling%2ER%20%26%26%20sibling%2ER%2EC%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21sibling%2EL%20%7C%7C%20%21sibling%2EL%2EC%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sibling%2ER%2EC%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sibling%2EC%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackRotateLeft%28this%2C%20sibling%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20parent%2EL%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20sibling%2EC%20%3D%20parent%2EC%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20parent%2EC%20%3D%20sibling%2EL%2EC%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20d3%5Fgeom%5FvoronoiRedBlackRotateRight%28this%2C%20parent%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20node%20%3D%20this%2E%5F%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20sibling%2EC%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20node%20%3D%20parent%3B%0A%20%20%20%20%20%20%20%20parent%20%3D%20parent%2EU%3B%0A%20%20%20%20%20%20%7D%20while%20%28%21node%2EC%29%3B%0A%20%20%20%20%20%20if%20%28node%29%20node%2EC%20%3D%20false%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeom%5FvoronoiRedBlackRotateLeft%28tree%2C%20node%29%20%7B%0A%20%20%20%20var%20p%20%3D%20node%2C%20q%20%3D%20node%2ER%2C%20parent%20%3D%20p%2EU%3B%0A%20%20%20%20if%20%28parent%29%20%7B%0A%20%20%20%20%20%20if%20%28parent%2EL%20%3D%3D%3D%20p%29%20parent%2EL%20%3D%20q%3B%20else%20parent%2ER%20%3D%20q%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20tree%2E%5F%20%3D%20q%3B%0A%20%20%20%20%7D%0A%20%20%20%20q%2EU%20%3D%20parent%3B%0A%20%20%20%20p%2EU%20%3D%20q%3B%0A%20%20%20%20p%2ER%20%3D%20q%2EL%3B%0A%20%20%20%20if%20%28p%2ER%29%20p%2ER%2EU%20%3D%20p%3B%0A%20%20%20%20q%2EL%20%3D%20p%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiRedBlackRotateRight%28tree%2C%20node%29%20%7B%0A%20%20%20%20var%20p%20%3D%20node%2C%20q%20%3D%20node%2EL%2C%20parent%20%3D%20p%2EU%3B%0A%20%20%20%20if%20%28parent%29%20%7B%0A%20%20%20%20%20%20if%20%28parent%2EL%20%3D%3D%3D%20p%29%20parent%2EL%20%3D%20q%3B%20else%20parent%2ER%20%3D%20q%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20tree%2E%5F%20%3D%20q%3B%0A%20%20%20%20%7D%0A%20%20%20%20q%2EU%20%3D%20parent%3B%0A%20%20%20%20p%2EU%20%3D%20q%3B%0A%20%20%20%20p%2EL%20%3D%20q%2ER%3B%0A%20%20%20%20if%20%28p%2EL%29%20p%2EL%2EU%20%3D%20p%3B%0A%20%20%20%20q%2ER%20%3D%20p%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiRedBlackFirst%28node%29%20%7B%0A%20%20%20%20while%20%28node%2EL%29%20node%20%3D%20node%2EL%3B%0A%20%20%20%20return%20node%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5Fvoronoi%28sites%2C%20bbox%29%20%7B%0A%20%20%20%20var%20site%20%3D%20sites%2Esort%28d3%5Fgeom%5FvoronoiVertexOrder%29%2Epop%28%29%2C%20x0%2C%20y0%2C%20circle%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiEdges%20%3D%20%5B%5D%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiCells%20%3D%20new%20Array%28sites%2Elength%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiBeaches%20%3D%20new%20d3%5Fgeom%5FvoronoiRedBlackTree%28%29%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiCircles%20%3D%20new%20d3%5Fgeom%5FvoronoiRedBlackTree%28%29%3B%0A%20%20%20%20while%20%28true%29%20%7B%0A%20%20%20%20%20%20circle%20%3D%20d3%5Fgeom%5FvoronoiFirstCircle%3B%0A%20%20%20%20%20%20if%20%28site%20%26%26%20%28%21circle%20%7C%7C%20site%2Ey%20%3C%20circle%2Ey%20%7C%7C%20site%2Ey%20%3D%3D%3D%20circle%2Ey%20%26%26%20site%2Ex%20%3C%20circle%2Ex%29%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28site%2Ex%20%21%3D%3D%20x0%20%7C%7C%20site%2Ey%20%21%3D%3D%20y0%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20d3%5Fgeom%5FvoronoiCells%5Bsite%2Ei%5D%20%3D%20new%20d3%5Fgeom%5FvoronoiCell%28site%29%3B%0A%20%20%20%20%20%20%20%20%20%20d3%5Fgeom%5FvoronoiAddBeach%28site%29%3B%0A%20%20%20%20%20%20%20%20%20%20x0%20%3D%20site%2Ex%2C%20y0%20%3D%20site%2Ey%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20site%20%3D%20sites%2Epop%28%29%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28circle%29%20%7B%0A%20%20%20%20%20%20%20%20d3%5Fgeom%5FvoronoiRemoveBeach%28circle%2Earc%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28bbox%29%20d3%5Fgeom%5FvoronoiClipEdges%28bbox%29%2C%20d3%5Fgeom%5FvoronoiCloseCells%28bbox%29%3B%0A%20%20%20%20var%20diagram%20%3D%20%7B%0A%20%20%20%20%20%20cells%3A%20d3%5Fgeom%5FvoronoiCells%2C%0A%20%20%20%20%20%20edges%3A%20d3%5Fgeom%5FvoronoiEdges%0A%20%20%20%20%7D%3B%0A%20%20%20%20d3%5Fgeom%5FvoronoiBeaches%20%3D%20d3%5Fgeom%5FvoronoiCircles%20%3D%20d3%5Fgeom%5FvoronoiEdges%20%3D%20d3%5Fgeom%5FvoronoiCells%20%3D%20null%3B%0A%20%20%20%20return%20diagram%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FvoronoiVertexOrder%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20b%2Ey%20%2D%20a%2Ey%20%7C%7C%20b%2Ex%20%2D%20a%2Ex%3B%0A%20%20%7D%0A%20%20d3%2Egeom%2Evoronoi%20%3D%20function%28points%29%20%7B%0A%20%20%20%20var%20x%20%3D%20d3%5Fgeom%5FpointX%2C%20y%20%3D%20d3%5Fgeom%5FpointY%2C%20fx%20%3D%20x%2C%20fy%20%3D%20y%2C%20clipExtent%20%3D%20d3%5Fgeom%5FvoronoiClipExtent%3B%0A%20%20%20%20if%20%28points%29%20return%20voronoi%28points%29%3B%0A%20%20%20%20function%20voronoi%28data%29%20%7B%0A%20%20%20%20%20%20var%20polygons%20%3D%20new%20Array%28data%2Elength%29%2C%20x0%20%3D%20clipExtent%5B0%5D%5B0%5D%2C%20y0%20%3D%20clipExtent%5B0%5D%5B1%5D%2C%20x1%20%3D%20clipExtent%5B1%5D%5B0%5D%2C%20y1%20%3D%20clipExtent%5B1%5D%5B1%5D%3B%0A%20%20%20%20%20%20d3%5Fgeom%5Fvoronoi%28sites%28data%29%2C%20clipExtent%29%2Ecells%2EforEach%28function%28cell%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20var%20edges%20%3D%20cell%2Eedges%2C%20site%20%3D%20cell%2Esite%2C%20polygon%20%3D%20polygons%5Bi%5D%20%3D%20edges%2Elength%20%3F%20edges%2Emap%28function%28e%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20s%20%3D%20e%2Estart%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20return%20%5B%20s%2Ex%2C%20s%2Ey%20%5D%3B%0A%20%20%20%20%20%20%20%20%7D%29%20%3A%20site%2Ex%20%3E%3D%20x0%20%26%26%20site%2Ex%20%3C%3D%20x1%20%26%26%20site%2Ey%20%3E%3D%20y0%20%26%26%20site%2Ey%20%3C%3D%20y1%20%3F%20%5B%20%5B%20x0%2C%20y1%20%5D%2C%20%5B%20x1%2C%20y1%20%5D%2C%20%5B%20x1%2C%20y0%20%5D%2C%20%5B%20x0%2C%20y0%20%5D%20%5D%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20polygon%2Epoint%20%3D%20data%5Bi%5D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20return%20polygons%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20sites%28data%29%20%7B%0A%20%20%20%20%20%20return%20data%2Emap%28function%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20x%3A%20Math%2Eround%28fx%28d%2C%20i%29%20%2F%20%CE%B5%29%20%2A%20%CE%B5%2C%0A%20%20%20%20%20%20%20%20%20%20y%3A%20Math%2Eround%28fy%28d%2C%20i%29%20%2F%20%CE%B5%29%20%2A%20%CE%B5%2C%0A%20%20%20%20%20%20%20%20%20%20i%3A%20i%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20voronoi%2Elinks%20%3D%20function%28data%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fgeom%5Fvoronoi%28sites%28data%29%29%2Eedges%2Efilter%28function%28edge%29%20%7B%0A%20%20%20%20%20%20%20%20return%20edge%2El%20%26%26%20edge%2Er%3B%0A%20%20%20%20%20%20%7D%29%2Emap%28function%28edge%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20source%3A%20data%5Bedge%2El%2Ei%5D%2C%0A%20%20%20%20%20%20%20%20%20%20target%3A%20data%5Bedge%2Er%2Ei%5D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20voronoi%2Etriangles%20%3D%20function%28data%29%20%7B%0A%20%20%20%20%20%20var%20triangles%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20d3%5Fgeom%5Fvoronoi%28sites%28data%29%29%2Ecells%2EforEach%28function%28cell%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20var%20site%20%3D%20cell%2Esite%2C%20edges%20%3D%20cell%2Eedges%2Esort%28d3%5Fgeom%5FvoronoiHalfEdgeOrder%29%2C%20j%20%3D%20%2D1%2C%20m%20%3D%20edges%2Elength%2C%20e0%2C%20s0%2C%20e1%20%3D%20edges%5Bm%20%2D%201%5D%2Eedge%2C%20s1%20%3D%20e1%2El%20%3D%3D%3D%20site%20%3F%20e1%2Er%20%3A%20e1%2El%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bj%20%3C%20m%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20e0%20%3D%20e1%3B%0A%20%20%20%20%20%20%20%20%20%20s0%20%3D%20s1%3B%0A%20%20%20%20%20%20%20%20%20%20e1%20%3D%20edges%5Bj%5D%2Eedge%3B%0A%20%20%20%20%20%20%20%20%20%20s1%20%3D%20e1%2El%20%3D%3D%3D%20site%20%3F%20e1%2Er%20%3A%20e1%2El%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28i%20%3C%20s0%2Ei%20%26%26%20i%20%3C%20s1%2Ei%20%26%26%20d3%5Fgeom%5FvoronoiTriangleArea%28site%2C%20s0%2C%20s1%29%20%3C%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20triangles%2Epush%28%5B%20data%5Bi%5D%2C%20data%5Bs0%2Ei%5D%2C%20data%5Bs1%2Ei%5D%20%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20return%20triangles%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20voronoi%2Ex%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20return%20arguments%2Elength%20%3F%20%28fx%20%3D%20d3%5Ffunctor%28x%20%3D%20%5F%29%2C%20voronoi%29%20%3A%20x%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20voronoi%2Ey%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20return%20arguments%2Elength%20%3F%20%28fy%20%3D%20d3%5Ffunctor%28y%20%3D%20%5F%29%2C%20voronoi%29%20%3A%20y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20voronoi%2EclipExtent%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20clipExtent%20%3D%3D%3D%20d3%5Fgeom%5FvoronoiClipExtent%20%3F%20null%20%3A%20clipExtent%3B%0A%20%20%20%20%20%20clipExtent%20%3D%20%5F%20%3D%3D%20null%20%3F%20d3%5Fgeom%5FvoronoiClipExtent%20%3A%20%5F%3B%0A%20%20%20%20%20%20return%20voronoi%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20voronoi%2Esize%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20clipExtent%20%3D%3D%3D%20d3%5Fgeom%5FvoronoiClipExtent%20%3F%20null%20%3A%20clipExtent%20%26%26%20clipExtent%5B1%5D%3B%0A%20%20%20%20%20%20return%20voronoi%2EclipExtent%28%5F%20%26%26%20%5B%20%5B%200%2C%200%20%5D%2C%20%5F%20%5D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20voronoi%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fgeom%5FvoronoiClipExtent%20%3D%20%5B%20%5B%20%2D1e6%2C%20%2D1e6%20%5D%2C%20%5B%201e6%2C%201e6%20%5D%20%5D%3B%0A%20%20function%20d3%5Fgeom%5FvoronoiTriangleArea%28a%2C%20b%2C%20c%29%20%7B%0A%20%20%20%20return%20%28a%2Ex%20%2D%20c%2Ex%29%20%2A%20%28b%2Ey%20%2D%20a%2Ey%29%20%2D%20%28a%2Ex%20%2D%20b%2Ex%29%20%2A%20%28c%2Ey%20%2D%20a%2Ey%29%3B%0A%20%20%7D%0A%20%20d3%2Egeom%2Edelaunay%20%3D%20function%28vertices%29%20%7B%0A%20%20%20%20return%20d3%2Egeom%2Evoronoi%28%29%2Etriangles%28vertices%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Egeom%2Equadtree%20%3D%20function%28points%2C%20x1%2C%20y1%2C%20x2%2C%20y2%29%20%7B%0A%20%20%20%20var%20x%20%3D%20d3%5Fgeom%5FpointX%2C%20y%20%3D%20d3%5Fgeom%5FpointY%2C%20compat%3B%0A%20%20%20%20if%20%28compat%20%3D%20arguments%2Elength%29%20%7B%0A%20%20%20%20%20%20x%20%3D%20d3%5Fgeom%5FquadtreeCompatX%3B%0A%20%20%20%20%20%20y%20%3D%20d3%5Fgeom%5FquadtreeCompatY%3B%0A%20%20%20%20%20%20if%20%28compat%20%3D%3D%3D%203%29%20%7B%0A%20%20%20%20%20%20%20%20y2%20%3D%20y1%3B%0A%20%20%20%20%20%20%20%20x2%20%3D%20x1%3B%0A%20%20%20%20%20%20%20%20y1%20%3D%20x1%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20quadtree%28points%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20quadtree%28data%29%20%7B%0A%20%20%20%20%20%20var%20d%2C%20fx%20%3D%20d3%5Ffunctor%28x%29%2C%20fy%20%3D%20d3%5Ffunctor%28y%29%2C%20xs%2C%20ys%2C%20i%2C%20n%2C%20x1%5F%2C%20y1%5F%2C%20x2%5F%2C%20y2%5F%3B%0A%20%20%20%20%20%20if%20%28x1%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20x1%5F%20%3D%20x1%2C%20y1%5F%20%3D%20y1%2C%20x2%5F%20%3D%20x2%2C%20y2%5F%20%3D%20y2%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20x2%5F%20%3D%20y2%5F%20%3D%20%2D%28x1%5F%20%3D%20y1%5F%20%3D%20Infinity%29%3B%0A%20%20%20%20%20%20%20%20xs%20%3D%20%5B%5D%2C%20ys%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20n%20%3D%20data%2Elength%3B%0A%20%20%20%20%20%20%20%20if%20%28compat%29%20for%20%28i%20%3D%200%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20d%20%3D%20data%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28d%2Ex%20%3C%20x1%5F%29%20x1%5F%20%3D%20d%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28d%2Ey%20%3C%20y1%5F%29%20y1%5F%20%3D%20d%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28d%2Ex%20%3E%20x2%5F%29%20x2%5F%20%3D%20d%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28d%2Ey%20%3E%20y2%5F%29%20y2%5F%20%3D%20d%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20xs%2Epush%28d%2Ex%29%3B%0A%20%20%20%20%20%20%20%20%20%20ys%2Epush%28d%2Ey%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20for%20%28i%20%3D%200%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20x%5F%20%3D%20%2Bfx%28d%20%3D%20data%5Bi%5D%2C%20i%29%2C%20y%5F%20%3D%20%2Bfy%28d%2C%20i%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28x%5F%20%3C%20x1%5F%29%20x1%5F%20%3D%20x%5F%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28y%5F%20%3C%20y1%5F%29%20y1%5F%20%3D%20y%5F%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28x%5F%20%3E%20x2%5F%29%20x2%5F%20%3D%20x%5F%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28y%5F%20%3E%20y2%5F%29%20y2%5F%20%3D%20y%5F%3B%0A%20%20%20%20%20%20%20%20%20%20xs%2Epush%28x%5F%29%3B%0A%20%20%20%20%20%20%20%20%20%20ys%2Epush%28y%5F%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20dx%20%3D%20x2%5F%20%2D%20x1%5F%2C%20dy%20%3D%20y2%5F%20%2D%20y1%5F%3B%0A%20%20%20%20%20%20if%20%28dx%20%3E%20dy%29%20y2%5F%20%3D%20y1%5F%20%2B%20dx%3B%20else%20x2%5F%20%3D%20x1%5F%20%2B%20dy%3B%0A%20%20%20%20%20%20function%20insert%28n%2C%20d%2C%20x%2C%20y%2C%20x1%2C%20y1%2C%20x2%2C%20y2%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28isNaN%28x%29%20%7C%7C%20isNaN%28y%29%29%20return%3B%0A%20%20%20%20%20%20%20%20if%20%28n%2Eleaf%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20nx%20%3D%20n%2Ex%2C%20ny%20%3D%20n%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28nx%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28abs%28nx%20%2D%20x%29%20%2B%20abs%28ny%20%2D%20y%29%20%3C%20%2E01%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertChild%28n%2C%20d%2C%20x%2C%20y%2C%20x1%2C%20y1%2C%20x2%2C%20y2%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20nPoint%20%3D%20n%2Epoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20n%2Ex%20%3D%20n%2Ey%20%3D%20n%2Epoint%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertChild%28n%2C%20nPoint%2C%20nx%2C%20ny%2C%20x1%2C%20y1%2C%20x2%2C%20y2%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20insertChild%28n%2C%20d%2C%20x%2C%20y%2C%20x1%2C%20y1%2C%20x2%2C%20y2%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20n%2Ex%20%3D%20x%2C%20n%2Ey%20%3D%20y%2C%20n%2Epoint%20%3D%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20insertChild%28n%2C%20d%2C%20x%2C%20y%2C%20x1%2C%20y1%2C%20x2%2C%20y2%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20insertChild%28n%2C%20d%2C%20x%2C%20y%2C%20x1%2C%20y1%2C%20x2%2C%20y2%29%20%7B%0A%20%20%20%20%20%20%20%20var%20xm%20%3D%20%28x1%20%2B%20x2%29%20%2A%20%2E5%2C%20ym%20%3D%20%28y1%20%2B%20y2%29%20%2A%20%2E5%2C%20right%20%3D%20x%20%3E%3D%20xm%2C%20below%20%3D%20y%20%3E%3D%20ym%2C%20i%20%3D%20below%20%3C%3C%201%20%7C%20right%3B%0A%20%20%20%20%20%20%20%20n%2Eleaf%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20n%20%3D%20n%2Enodes%5Bi%5D%20%7C%7C%20%28n%2Enodes%5Bi%5D%20%3D%20d3%5Fgeom%5FquadtreeNode%28%29%29%3B%0A%20%20%20%20%20%20%20%20if%20%28right%29%20x1%20%3D%20xm%3B%20else%20x2%20%3D%20xm%3B%0A%20%20%20%20%20%20%20%20if%20%28below%29%20y1%20%3D%20ym%3B%20else%20y2%20%3D%20ym%3B%0A%20%20%20%20%20%20%20%20insert%28n%2C%20d%2C%20x%2C%20y%2C%20x1%2C%20y1%2C%20x2%2C%20y2%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20root%20%3D%20d3%5Fgeom%5FquadtreeNode%28%29%3B%0A%20%20%20%20%20%20root%2Eadd%20%3D%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20insert%28root%2C%20d%2C%20%2Bfx%28d%2C%20%2B%2Bi%29%2C%20%2Bfy%28d%2C%20i%29%2C%20x1%5F%2C%20y1%5F%2C%20x2%5F%2C%20y2%5F%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20root%2Evisit%20%3D%20function%28f%29%20%7B%0A%20%20%20%20%20%20%20%20d3%5Fgeom%5FquadtreeVisit%28f%2C%20root%2C%20x1%5F%2C%20y1%5F%2C%20x2%5F%2C%20y2%5F%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20root%2Efind%20%3D%20function%28point%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Fgeom%5FquadtreeFind%28root%2C%20point%5B0%5D%2C%20point%5B1%5D%2C%20x1%5F%2C%20y1%5F%2C%20x2%5F%2C%20y2%5F%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20i%20%3D%20%2D1%3B%0A%20%20%20%20%20%20if%20%28x1%20%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20insert%28root%2C%20data%5Bi%5D%2C%20xs%5Bi%5D%2C%20ys%5Bi%5D%2C%20x1%5F%2C%20y1%5F%2C%20x2%5F%2C%20y2%5F%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2D%2Di%3B%0A%20%20%20%20%20%20%7D%20else%20data%2EforEach%28root%2Eadd%29%3B%0A%20%20%20%20%20%20xs%20%3D%20ys%20%3D%20data%20%3D%20d%20%3D%20null%3B%0A%20%20%20%20%20%20return%20root%3B%0A%20%20%20%20%7D%0A%20%20%20%20quadtree%2Ex%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20return%20arguments%2Elength%20%3F%20%28x%20%3D%20%5F%2C%20quadtree%29%20%3A%20x%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20quadtree%2Ey%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20return%20arguments%2Elength%20%3F%20%28y%20%3D%20%5F%2C%20quadtree%29%20%3A%20y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20quadtree%2Eextent%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20x1%20%3D%3D%20null%20%3F%20null%20%3A%20%5B%20%5B%20x1%2C%20y1%20%5D%2C%20%5B%20x2%2C%20y2%20%5D%20%5D%3B%0A%20%20%20%20%20%20if%20%28%5F%20%3D%3D%20null%29%20x1%20%3D%20y1%20%3D%20x2%20%3D%20y2%20%3D%20null%3B%20else%20x1%20%3D%20%2B%5F%5B0%5D%5B0%5D%2C%20y1%20%3D%20%2B%5F%5B0%5D%5B1%5D%2C%20x2%20%3D%20%2B%5F%5B1%5D%5B0%5D%2C%20%0A%20%20%20%20%20%20y2%20%3D%20%2B%5F%5B1%5D%5B1%5D%3B%0A%20%20%20%20%20%20return%20quadtree%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20quadtree%2Esize%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20x1%20%3D%3D%20null%20%3F%20null%20%3A%20%5B%20x2%20%2D%20x1%2C%20y2%20%2D%20y1%20%5D%3B%0A%20%20%20%20%20%20if%20%28%5F%20%3D%3D%20null%29%20x1%20%3D%20y1%20%3D%20x2%20%3D%20y2%20%3D%20null%3B%20else%20x1%20%3D%20y1%20%3D%200%2C%20x2%20%3D%20%2B%5F%5B0%5D%2C%20y2%20%3D%20%2B%5F%5B1%5D%3B%0A%20%20%20%20%20%20return%20quadtree%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20quadtree%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fgeom%5FquadtreeCompatX%28d%29%20%7B%0A%20%20%20%20return%20d%2Ex%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FquadtreeCompatY%28d%29%20%7B%0A%20%20%20%20return%20d%2Ey%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FquadtreeNode%28%29%20%7B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20leaf%3A%20true%2C%0A%20%20%20%20%20%20nodes%3A%20%5B%5D%2C%0A%20%20%20%20%20%20point%3A%20null%2C%0A%20%20%20%20%20%20x%3A%20null%2C%0A%20%20%20%20%20%20y%3A%20null%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FquadtreeVisit%28f%2C%20node%2C%20x1%2C%20y1%2C%20x2%2C%20y2%29%20%7B%0A%20%20%20%20if%20%28%21f%28node%2C%20x1%2C%20y1%2C%20x2%2C%20y2%29%29%20%7B%0A%20%20%20%20%20%20var%20sx%20%3D%20%28x1%20%2B%20x2%29%20%2A%20%2E5%2C%20sy%20%3D%20%28y1%20%2B%20y2%29%20%2A%20%2E5%2C%20children%20%3D%20node%2Enodes%3B%0A%20%20%20%20%20%20if%20%28children%5B0%5D%29%20d3%5Fgeom%5FquadtreeVisit%28f%2C%20children%5B0%5D%2C%20x1%2C%20y1%2C%20sx%2C%20sy%29%3B%0A%20%20%20%20%20%20if%20%28children%5B1%5D%29%20d3%5Fgeom%5FquadtreeVisit%28f%2C%20children%5B1%5D%2C%20sx%2C%20y1%2C%20x2%2C%20sy%29%3B%0A%20%20%20%20%20%20if%20%28children%5B2%5D%29%20d3%5Fgeom%5FquadtreeVisit%28f%2C%20children%5B2%5D%2C%20x1%2C%20sy%2C%20sx%2C%20y2%29%3B%0A%20%20%20%20%20%20if%20%28children%5B3%5D%29%20d3%5Fgeom%5FquadtreeVisit%28f%2C%20children%5B3%5D%2C%20sx%2C%20sy%2C%20x2%2C%20y2%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Fgeom%5FquadtreeFind%28root%2C%20x%2C%20y%2C%20x0%2C%20y0%2C%20x3%2C%20y3%29%20%7B%0A%20%20%20%20var%20minDistance2%20%3D%20Infinity%2C%20closestPoint%3B%0A%20%20%20%20%28function%20find%28node%2C%20x1%2C%20y1%2C%20x2%2C%20y2%29%20%7B%0A%20%20%20%20%20%20if%20%28x1%20%3E%20x3%20%7C%7C%20y1%20%3E%20y3%20%7C%7C%20x2%20%3C%20x0%20%7C%7C%20y2%20%3C%20y0%29%20return%3B%0A%20%20%20%20%20%20if%20%28point%20%3D%20node%2Epoint%29%20%7B%0A%20%20%20%20%20%20%20%20var%20point%2C%20dx%20%3D%20x%20%2D%20point%5B0%5D%2C%20dy%20%3D%20y%20%2D%20point%5B1%5D%2C%20distance2%20%3D%20dx%20%2A%20dx%20%2B%20dy%20%2A%20dy%3B%0A%20%20%20%20%20%20%20%20if%20%28distance2%20%3C%20minDistance2%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20distance%20%3D%20Math%2Esqrt%28minDistance2%20%3D%20distance2%29%3B%0A%20%20%20%20%20%20%20%20%20%20x0%20%3D%20x%20%2D%20distance%2C%20y0%20%3D%20y%20%2D%20distance%3B%0A%20%20%20%20%20%20%20%20%20%20x3%20%3D%20x%20%2B%20distance%2C%20y3%20%3D%20y%20%2B%20distance%3B%0A%20%20%20%20%20%20%20%20%20%20closestPoint%20%3D%20point%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20children%20%3D%20node%2Enodes%2C%20xm%20%3D%20%28x1%20%2B%20x2%29%20%2A%20%2E5%2C%20ym%20%3D%20%28y1%20%2B%20y2%29%20%2A%20%2E5%2C%20right%20%3D%20x%20%3E%3D%20xm%2C%20below%20%3D%20y%20%3E%3D%20ym%3B%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%20below%20%3C%3C%201%20%7C%20right%2C%20j%20%3D%20i%20%2B%204%3B%20i%20%3C%20j%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28node%20%3D%20children%5Bi%20%26%203%5D%29%20switch%20%28i%20%26%203%29%20%7B%0A%20%20%20%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20%20%20find%28node%2C%20x1%2C%20y1%2C%20xm%2C%20ym%29%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20find%28node%2C%20xm%2C%20y1%2C%20x2%2C%20ym%29%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20find%28node%2C%20x1%2C%20ym%2C%20xm%2C%20y2%29%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20case%203%3A%0A%20%20%20%20%20%20%20%20%20%20find%28node%2C%20xm%2C%20ym%2C%20x2%2C%20y2%29%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29%28root%2C%20x0%2C%20y0%2C%20x3%2C%20y3%29%3B%0A%20%20%20%20return%20closestPoint%3B%0A%20%20%7D%0A%20%20d3%2EinterpolateRgb%20%3D%20d3%5FinterpolateRgb%3B%0A%20%20function%20d3%5FinterpolateRgb%28a%2C%20b%29%20%7B%0A%20%20%20%20a%20%3D%20d3%2Ergb%28a%29%3B%0A%20%20%20%20b%20%3D%20d3%2Ergb%28b%29%3B%0A%20%20%20%20var%20ar%20%3D%20a%2Er%2C%20ag%20%3D%20a%2Eg%2C%20ab%20%3D%20a%2Eb%2C%20br%20%3D%20b%2Er%20%2D%20ar%2C%20bg%20%3D%20b%2Eg%20%2D%20ag%2C%20bb%20%3D%20b%2Eb%20%2D%20ab%3B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20return%20%22%23%22%20%2B%20d3%5Frgb%5Fhex%28Math%2Eround%28ar%20%2B%20br%20%2A%20t%29%29%20%2B%20d3%5Frgb%5Fhex%28Math%2Eround%28ag%20%2B%20bg%20%2A%20t%29%29%20%2B%20d3%5Frgb%5Fhex%28Math%2Eround%28ab%20%2B%20bb%20%2A%20t%29%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2EinterpolateObject%20%3D%20d3%5FinterpolateObject%3B%0A%20%20function%20d3%5FinterpolateObject%28a%2C%20b%29%20%7B%0A%20%20%20%20var%20i%20%3D%20%7B%7D%2C%20c%20%3D%20%7B%7D%2C%20k%3B%0A%20%20%20%20for%20%28k%20in%20a%29%20%7B%0A%20%20%20%20%20%20if%20%28k%20in%20b%29%20%7B%0A%20%20%20%20%20%20%20%20i%5Bk%5D%20%3D%20d3%5Finterpolate%28a%5Bk%5D%2C%20b%5Bk%5D%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20c%5Bk%5D%20%3D%20a%5Bk%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20for%20%28k%20in%20b%29%20%7B%0A%20%20%20%20%20%20if%20%28%21%28k%20in%20a%29%29%20%7B%0A%20%20%20%20%20%20%20%20c%5Bk%5D%20%3D%20b%5Bk%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20for%20%28k%20in%20i%29%20c%5Bk%5D%20%3D%20i%5Bk%5D%28t%29%3B%0A%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2EinterpolateNumber%20%3D%20d3%5FinterpolateNumber%3B%0A%20%20function%20d3%5FinterpolateNumber%28a%2C%20b%29%20%7B%0A%20%20%20%20a%20%3D%20%2Ba%2C%20b%20%3D%20%2Bb%3B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20return%20a%20%2A%20%281%20%2D%20t%29%20%2B%20b%20%2A%20t%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2EinterpolateString%20%3D%20d3%5FinterpolateString%3B%0A%20%20function%20d3%5FinterpolateString%28a%2C%20b%29%20%7B%0A%20%20%20%20var%20bi%20%3D%20d3%5Finterpolate%5FnumberA%2ElastIndex%20%3D%20d3%5Finterpolate%5FnumberB%2ElastIndex%20%3D%200%2C%20am%2C%20bm%2C%20bs%2C%20i%20%3D%20%2D1%2C%20s%20%3D%20%5B%5D%2C%20q%20%3D%20%5B%5D%3B%0A%20%20%20%20a%20%3D%20a%20%2B%20%22%22%2C%20b%20%3D%20b%20%2B%20%22%22%3B%0A%20%20%20%20while%20%28%28am%20%3D%20d3%5Finterpolate%5FnumberA%2Eexec%28a%29%29%20%26%26%20%28bm%20%3D%20d3%5Finterpolate%5FnumberB%2Eexec%28b%29%29%29%20%7B%0A%20%20%20%20%20%20if%20%28%28bs%20%3D%20bm%2Eindex%29%20%3E%20bi%29%20%7B%0A%20%20%20%20%20%20%20%20bs%20%3D%20b%2Eslice%28bi%2C%20bs%29%3B%0A%20%20%20%20%20%20%20%20if%20%28s%5Bi%5D%29%20s%5Bi%5D%20%2B%3D%20bs%3B%20else%20s%5B%2B%2Bi%5D%20%3D%20bs%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28%28am%20%3D%20am%5B0%5D%29%20%3D%3D%3D%20%28bm%20%3D%20bm%5B0%5D%29%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28s%5Bi%5D%29%20s%5Bi%5D%20%2B%3D%20bm%3B%20else%20s%5B%2B%2Bi%5D%20%3D%20bm%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20s%5B%2B%2Bi%5D%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20q%2Epush%28%7B%0A%20%20%20%20%20%20%20%20%20%20i%3A%20i%2C%0A%20%20%20%20%20%20%20%20%20%20x%3A%20d3%5FinterpolateNumber%28am%2C%20bm%29%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20bi%20%3D%20d3%5Finterpolate%5FnumberB%2ElastIndex%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28bi%20%3C%20b%2Elength%29%20%7B%0A%20%20%20%20%20%20bs%20%3D%20b%2Eslice%28bi%29%3B%0A%20%20%20%20%20%20if%20%28s%5Bi%5D%29%20s%5Bi%5D%20%2B%3D%20bs%3B%20else%20s%5B%2B%2Bi%5D%20%3D%20bs%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20s%2Elength%20%3C%202%20%3F%20q%5B0%5D%20%3F%20%28b%20%3D%20q%5B0%5D%2Ex%2C%20function%28t%29%20%7B%0A%20%20%20%20%20%20return%20b%28t%29%20%2B%20%22%22%3B%0A%20%20%20%20%7D%29%20%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20b%3B%0A%20%20%20%20%7D%20%3A%20%28b%20%3D%20q%2Elength%2C%20function%28t%29%20%7B%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20o%3B%20i%20%3C%20b%3B%20%2B%2Bi%29%20s%5B%28o%20%3D%20q%5Bi%5D%29%2Ei%5D%20%3D%20o%2Ex%28t%29%3B%0A%20%20%20%20%20%20return%20s%2Ejoin%28%22%22%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%0A%20%20var%20d3%5Finterpolate%5FnumberA%20%3D%20%2F%5B%2D%2B%5D%3F%28%3F%3A%5Cd%2B%5C%2E%3F%5Cd%2A%7C%5C%2E%3F%5Cd%2B%29%28%3F%3A%5BeE%5D%5B%2D%2B%5D%3F%5Cd%2B%29%3F%2Fg%2C%20d3%5Finterpolate%5FnumberB%20%3D%20new%20RegExp%28d3%5Finterpolate%5FnumberA%2Esource%2C%20%22g%22%29%3B%0A%20%20d3%2Einterpolate%20%3D%20d3%5Finterpolate%3B%0A%20%20function%20d3%5Finterpolate%28a%2C%20b%29%20%7B%0A%20%20%20%20var%20i%20%3D%20d3%2Einterpolators%2Elength%2C%20f%3B%0A%20%20%20%20while%20%28%2D%2Di%20%3E%3D%200%20%26%26%20%21%28f%20%3D%20d3%2Einterpolators%5Bi%5D%28a%2C%20b%29%29%29%20%3B%0A%20%20%20%20return%20f%3B%0A%20%20%7D%0A%20%20d3%2Einterpolators%20%3D%20%5B%20function%28a%2C%20b%29%20%7B%0A%20%20%20%20var%20t%20%3D%20typeof%20b%3B%0A%20%20%20%20return%20%28t%20%3D%3D%3D%20%22string%22%20%3F%20d3%5Frgb%5Fnames%2Ehas%28b%29%20%7C%7C%20%2F%5E%28%23%7Crgb%5C%28%7Chsl%5C%28%29%2F%2Etest%28b%29%20%3F%20d3%5FinterpolateRgb%20%3A%20d3%5FinterpolateString%20%3A%20b%20instanceof%20d3%5Fcolor%20%3F%20d3%5FinterpolateRgb%20%3A%20Array%2EisArray%28b%29%20%3F%20d3%5FinterpolateArray%20%3A%20t%20%3D%3D%3D%20%22object%22%20%26%26%20isNaN%28b%29%20%3F%20d3%5FinterpolateObject%20%3A%20d3%5FinterpolateNumber%29%28a%2C%20b%29%3B%0A%20%20%7D%20%5D%3B%0A%20%20d3%2EinterpolateArray%20%3D%20d3%5FinterpolateArray%3B%0A%20%20function%20d3%5FinterpolateArray%28a%2C%20b%29%20%7B%0A%20%20%20%20var%20x%20%3D%20%5B%5D%2C%20c%20%3D%20%5B%5D%2C%20na%20%3D%20a%2Elength%2C%20nb%20%3D%20b%2Elength%2C%20n0%20%3D%20Math%2Emin%28a%2Elength%2C%20b%2Elength%29%2C%20i%3B%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20n0%3B%20%2B%2Bi%29%20x%2Epush%28d3%5Finterpolate%28a%5Bi%5D%2C%20b%5Bi%5D%29%29%3B%0A%20%20%20%20for%20%28%3Bi%20%3C%20na%3B%20%2B%2Bi%29%20c%5Bi%5D%20%3D%20a%5Bi%5D%3B%0A%20%20%20%20for%20%28%3Bi%20%3C%20nb%3B%20%2B%2Bi%29%20c%5Bi%5D%20%3D%20b%5Bi%5D%3B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20n0%3B%20%2B%2Bi%29%20c%5Bi%5D%20%3D%20x%5Bi%5D%28t%29%3B%0A%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20var%20d3%5Fease%5Fdefault%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fidentity%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fease%20%3D%20d3%2Emap%28%7B%0A%20%20%20%20linear%3A%20d3%5Fease%5Fdefault%2C%0A%20%20%20%20poly%3A%20d3%5Fease%5Fpoly%2C%0A%20%20%20%20quad%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fease%5Fquad%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20cubic%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fease%5Fcubic%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20sin%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fease%5Fsin%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20exp%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fease%5Fexp%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20circle%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fease%5Fcircle%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20elastic%3A%20d3%5Fease%5Felastic%2C%0A%20%20%20%20back%3A%20d3%5Fease%5Fback%2C%0A%20%20%20%20bounce%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fease%5Fbounce%3B%0A%20%20%20%20%7D%0A%20%20%7D%29%3B%0A%20%20var%20d3%5Fease%5Fmode%20%3D%20d3%2Emap%28%7B%0A%20%20%20%20%22in%22%3A%20d3%5Fidentity%2C%0A%20%20%20%20out%3A%20d3%5Fease%5Freverse%2C%0A%20%20%20%20%22in%2Dout%22%3A%20d3%5Fease%5Freflect%2C%0A%20%20%20%20%22out%2Din%22%3A%20function%28f%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fease%5Freflect%28d3%5Fease%5Freverse%28f%29%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%29%3B%0A%20%20d3%2Eease%20%3D%20function%28name%29%20%7B%0A%20%20%20%20var%20i%20%3D%20name%2EindexOf%28%22%2D%22%29%2C%20t%20%3D%20i%20%3E%3D%200%20%3F%20name%2Eslice%280%2C%20i%29%20%3A%20name%2C%20m%20%3D%20i%20%3E%3D%200%20%3F%20name%2Eslice%28i%20%2B%201%29%20%3A%20%22in%22%3B%0A%20%20%20%20t%20%3D%20d3%5Fease%2Eget%28t%29%20%7C%7C%20d3%5Fease%5Fdefault%3B%0A%20%20%20%20m%20%3D%20d3%5Fease%5Fmode%2Eget%28m%29%20%7C%7C%20d3%5Fidentity%3B%0A%20%20%20%20return%20d3%5Fease%5Fclamp%28m%28t%2Eapply%28null%2C%20d3%5FarraySlice%2Ecall%28arguments%2C%201%29%29%29%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fease%5Fclamp%28f%29%20%7B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20return%20t%20%3C%3D%200%20%3F%200%20%3A%20t%20%3E%3D%201%20%3F%201%20%3A%20f%28t%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fease%5Freverse%28f%29%20%7B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20return%201%20%2D%20f%281%20%2D%20t%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fease%5Freflect%28f%29%20%7B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20return%20%2E5%20%2A%20%28t%20%3C%20%2E5%20%3F%20f%282%20%2A%20t%29%20%3A%202%20%2D%20f%282%20%2D%202%20%2A%20t%29%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fease%5Fquad%28t%29%20%7B%0A%20%20%20%20return%20t%20%2A%20t%3B%0A%20%20%7D%0A%20%20function%20d3%5Fease%5Fcubic%28t%29%20%7B%0A%20%20%20%20return%20t%20%2A%20t%20%2A%20t%3B%0A%20%20%7D%0A%20%20function%20d3%5Fease%5FcubicInOut%28t%29%20%7B%0A%20%20%20%20if%20%28t%20%3C%3D%200%29%20return%200%3B%0A%20%20%20%20if%20%28t%20%3E%3D%201%29%20return%201%3B%0A%20%20%20%20var%20t2%20%3D%20t%20%2A%20t%2C%20t3%20%3D%20t2%20%2A%20t%3B%0A%20%20%20%20return%204%20%2A%20%28t%20%3C%20%2E5%20%3F%20t3%20%3A%203%20%2A%20%28t%20%2D%20t2%29%20%2B%20t3%20%2D%20%2E75%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fease%5Fpoly%28e%29%20%7B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20return%20Math%2Epow%28t%2C%20e%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fease%5Fsin%28t%29%20%7B%0A%20%20%20%20return%201%20%2D%20Math%2Ecos%28t%20%2A%20half%CF%80%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fease%5Fexp%28t%29%20%7B%0A%20%20%20%20return%20Math%2Epow%282%2C%2010%20%2A%20%28t%20%2D%201%29%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fease%5Fcircle%28t%29%20%7B%0A%20%20%20%20return%201%20%2D%20Math%2Esqrt%281%20%2D%20t%20%2A%20t%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fease%5Felastic%28a%2C%20p%29%20%7B%0A%20%20%20%20var%20s%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20p%20%3D%20%2E45%3B%0A%20%20%20%20if%20%28arguments%2Elength%29%20s%20%3D%20p%20%2F%20%CF%84%20%2A%20Math%2Easin%281%20%2F%20a%29%3B%20else%20a%20%3D%201%2C%20s%20%3D%20p%20%2F%204%3B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20return%201%20%2B%20a%20%2A%20Math%2Epow%282%2C%20%2D10%20%2A%20t%29%20%2A%20Math%2Esin%28%28t%20%2D%20s%29%20%2A%20%CF%84%20%2F%20p%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fease%5Fback%28s%29%20%7B%0A%20%20%20%20if%20%28%21s%29%20s%20%3D%201%2E70158%3B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20return%20t%20%2A%20t%20%2A%20%28%28s%20%2B%201%29%20%2A%20t%20%2D%20s%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fease%5Fbounce%28t%29%20%7B%0A%20%20%20%20return%20t%20%3C%201%20%2F%202%2E75%20%3F%207%2E5625%20%2A%20t%20%2A%20t%20%3A%20t%20%3C%202%20%2F%202%2E75%20%3F%207%2E5625%20%2A%20%28t%20%2D%3D%201%2E5%20%2F%202%2E75%29%20%2A%20t%20%2B%20%2E75%20%3A%20t%20%3C%202%2E5%20%2F%202%2E75%20%3F%207%2E5625%20%2A%20%28t%20%2D%3D%202%2E25%20%2F%202%2E75%29%20%2A%20t%20%2B%20%2E9375%20%3A%207%2E5625%20%2A%20%28t%20%2D%3D%202%2E625%20%2F%202%2E75%29%20%2A%20t%20%2B%20%2E984375%3B%0A%20%20%7D%0A%20%20d3%2EinterpolateHcl%20%3D%20d3%5FinterpolateHcl%3B%0A%20%20function%20d3%5FinterpolateHcl%28a%2C%20b%29%20%7B%0A%20%20%20%20a%20%3D%20d3%2Ehcl%28a%29%3B%0A%20%20%20%20b%20%3D%20d3%2Ehcl%28b%29%3B%0A%20%20%20%20var%20ah%20%3D%20a%2Eh%2C%20ac%20%3D%20a%2Ec%2C%20al%20%3D%20a%2El%2C%20bh%20%3D%20b%2Eh%20%2D%20ah%2C%20bc%20%3D%20b%2Ec%20%2D%20ac%2C%20bl%20%3D%20b%2El%20%2D%20al%3B%0A%20%20%20%20if%20%28isNaN%28bc%29%29%20bc%20%3D%200%2C%20ac%20%3D%20isNaN%28ac%29%20%3F%20b%2Ec%20%3A%20ac%3B%0A%20%20%20%20if%20%28isNaN%28bh%29%29%20bh%20%3D%200%2C%20ah%20%3D%20isNaN%28ah%29%20%3F%20b%2Eh%20%3A%20ah%3B%20else%20if%20%28bh%20%3E%20180%29%20bh%20%2D%3D%20360%3B%20else%20if%20%28bh%20%3C%20%2D180%29%20bh%20%2B%3D%20360%3B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fhcl%5Flab%28ah%20%2B%20bh%20%2A%20t%2C%20ac%20%2B%20bc%20%2A%20t%2C%20al%20%2B%20bl%20%2A%20t%29%20%2B%20%22%22%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2EinterpolateHsl%20%3D%20d3%5FinterpolateHsl%3B%0A%20%20function%20d3%5FinterpolateHsl%28a%2C%20b%29%20%7B%0A%20%20%20%20a%20%3D%20d3%2Ehsl%28a%29%3B%0A%20%20%20%20b%20%3D%20d3%2Ehsl%28b%29%3B%0A%20%20%20%20var%20ah%20%3D%20a%2Eh%2C%20as%20%3D%20a%2Es%2C%20al%20%3D%20a%2El%2C%20bh%20%3D%20b%2Eh%20%2D%20ah%2C%20bs%20%3D%20b%2Es%20%2D%20as%2C%20bl%20%3D%20b%2El%20%2D%20al%3B%0A%20%20%20%20if%20%28isNaN%28bs%29%29%20bs%20%3D%200%2C%20as%20%3D%20isNaN%28as%29%20%3F%20b%2Es%20%3A%20as%3B%0A%20%20%20%20if%20%28isNaN%28bh%29%29%20bh%20%3D%200%2C%20ah%20%3D%20isNaN%28ah%29%20%3F%20b%2Eh%20%3A%20ah%3B%20else%20if%20%28bh%20%3E%20180%29%20bh%20%2D%3D%20360%3B%20else%20if%20%28bh%20%3C%20%2D180%29%20bh%20%2B%3D%20360%3B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fhsl%5Frgb%28ah%20%2B%20bh%20%2A%20t%2C%20as%20%2B%20bs%20%2A%20t%2C%20al%20%2B%20bl%20%2A%20t%29%20%2B%20%22%22%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2EinterpolateLab%20%3D%20d3%5FinterpolateLab%3B%0A%20%20function%20d3%5FinterpolateLab%28a%2C%20b%29%20%7B%0A%20%20%20%20a%20%3D%20d3%2Elab%28a%29%3B%0A%20%20%20%20b%20%3D%20d3%2Elab%28b%29%3B%0A%20%20%20%20var%20al%20%3D%20a%2El%2C%20aa%20%3D%20a%2Ea%2C%20ab%20%3D%20a%2Eb%2C%20bl%20%3D%20b%2El%20%2D%20al%2C%20ba%20%3D%20b%2Ea%20%2D%20aa%2C%20bb%20%3D%20b%2Eb%20%2D%20ab%3B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Flab%5Frgb%28al%20%2B%20bl%20%2A%20t%2C%20aa%20%2B%20ba%20%2A%20t%2C%20ab%20%2B%20bb%20%2A%20t%29%20%2B%20%22%22%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2EinterpolateRound%20%3D%20d3%5FinterpolateRound%3B%0A%20%20function%20d3%5FinterpolateRound%28a%2C%20b%29%20%7B%0A%20%20%20%20b%20%2D%3D%20a%3B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20return%20Math%2Eround%28a%20%2B%20b%20%2A%20t%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2Etransform%20%3D%20function%28string%29%20%7B%0A%20%20%20%20var%20g%20%3D%20d3%5Fdocument%2EcreateElementNS%28d3%2Ens%2Eprefix%2Esvg%2C%20%22g%22%29%3B%0A%20%20%20%20return%20%28d3%2Etransform%20%3D%20function%28string%29%20%7B%0A%20%20%20%20%20%20if%20%28string%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20g%2EsetAttribute%28%22transform%22%2C%20string%29%3B%0A%20%20%20%20%20%20%20%20var%20t%20%3D%20g%2Etransform%2EbaseVal%2Econsolidate%28%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20new%20d3%5Ftransform%28t%20%3F%20t%2Ematrix%20%3A%20d3%5FtransformIdentity%29%3B%0A%20%20%20%20%7D%29%28string%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Ftransform%28m%29%20%7B%0A%20%20%20%20var%20r0%20%3D%20%5B%20m%2Ea%2C%20m%2Eb%20%5D%2C%20r1%20%3D%20%5B%20m%2Ec%2C%20m%2Ed%20%5D%2C%20kx%20%3D%20d3%5FtransformNormalize%28r0%29%2C%20kz%20%3D%20d3%5FtransformDot%28r0%2C%20r1%29%2C%20ky%20%3D%20d3%5FtransformNormalize%28d3%5FtransformCombine%28r1%2C%20r0%2C%20%2Dkz%29%29%20%7C%7C%200%3B%0A%20%20%20%20if%20%28r0%5B0%5D%20%2A%20r1%5B1%5D%20%3C%20r1%5B0%5D%20%2A%20r0%5B1%5D%29%20%7B%0A%20%20%20%20%20%20r0%5B0%5D%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20r0%5B1%5D%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20kx%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20kz%20%2A%3D%20%2D1%3B%0A%20%20%20%20%7D%0A%20%20%20%20this%2Erotate%20%3D%20%28kx%20%3F%20Math%2Eatan2%28r0%5B1%5D%2C%20r0%5B0%5D%29%20%3A%20Math%2Eatan2%28%2Dr1%5B0%5D%2C%20r1%5B1%5D%29%29%20%2A%20d3%5Fdegrees%3B%0A%20%20%20%20this%2Etranslate%20%3D%20%5B%20m%2Ee%2C%20m%2Ef%20%5D%3B%0A%20%20%20%20this%2Escale%20%3D%20%5B%20kx%2C%20ky%20%5D%3B%0A%20%20%20%20this%2Eskew%20%3D%20ky%20%3F%20Math%2Eatan2%28kz%2C%20ky%29%20%2A%20d3%5Fdegrees%20%3A%200%3B%0A%20%20%7D%0A%20%20d3%5Ftransform%2Eprototype%2EtoString%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20%22translate%28%22%20%2B%20this%2Etranslate%20%2B%20%22%29rotate%28%22%20%2B%20this%2Erotate%20%2B%20%22%29skewX%28%22%20%2B%20this%2Eskew%20%2B%20%22%29scale%28%22%20%2B%20this%2Escale%20%2B%20%22%29%22%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5FtransformDot%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20a%5B0%5D%20%2A%20b%5B0%5D%20%2B%20a%5B1%5D%20%2A%20b%5B1%5D%3B%0A%20%20%7D%0A%20%20function%20d3%5FtransformNormalize%28a%29%20%7B%0A%20%20%20%20var%20k%20%3D%20Math%2Esqrt%28d3%5FtransformDot%28a%2C%20a%29%29%3B%0A%20%20%20%20if%20%28k%29%20%7B%0A%20%20%20%20%20%20a%5B0%5D%20%2F%3D%20k%3B%0A%20%20%20%20%20%20a%5B1%5D%20%2F%3D%20k%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20k%3B%0A%20%20%7D%0A%20%20function%20d3%5FtransformCombine%28a%2C%20b%2C%20k%29%20%7B%0A%20%20%20%20a%5B0%5D%20%2B%3D%20k%20%2A%20b%5B0%5D%3B%0A%20%20%20%20a%5B1%5D%20%2B%3D%20k%20%2A%20b%5B1%5D%3B%0A%20%20%20%20return%20a%3B%0A%20%20%7D%0A%20%20var%20d3%5FtransformIdentity%20%3D%20%7B%0A%20%20%20%20a%3A%201%2C%0A%20%20%20%20b%3A%200%2C%0A%20%20%20%20c%3A%200%2C%0A%20%20%20%20d%3A%201%2C%0A%20%20%20%20e%3A%200%2C%0A%20%20%20%20f%3A%200%0A%20%20%7D%3B%0A%20%20d3%2EinterpolateTransform%20%3D%20d3%5FinterpolateTransform%3B%0A%20%20function%20d3%5FinterpolateTransform%28a%2C%20b%29%20%7B%0A%20%20%20%20var%20s%20%3D%20%5B%5D%2C%20q%20%3D%20%5B%5D%2C%20n%2C%20A%20%3D%20d3%2Etransform%28a%29%2C%20B%20%3D%20d3%2Etransform%28b%29%2C%20ta%20%3D%20A%2Etranslate%2C%20tb%20%3D%20B%2Etranslate%2C%20ra%20%3D%20A%2Erotate%2C%20rb%20%3D%20B%2Erotate%2C%20wa%20%3D%20A%2Eskew%2C%20wb%20%3D%20B%2Eskew%2C%20ka%20%3D%20A%2Escale%2C%20kb%20%3D%20B%2Escale%3B%0A%20%20%20%20if%20%28ta%5B0%5D%20%21%3D%20tb%5B0%5D%20%7C%7C%20ta%5B1%5D%20%21%3D%20tb%5B1%5D%29%20%7B%0A%20%20%20%20%20%20s%2Epush%28%22translate%28%22%2C%20null%2C%20%22%2C%22%2C%20null%2C%20%22%29%22%29%3B%0A%20%20%20%20%20%20q%2Epush%28%7B%0A%20%20%20%20%20%20%20%20i%3A%201%2C%0A%20%20%20%20%20%20%20%20x%3A%20d3%5FinterpolateNumber%28ta%5B0%5D%2C%20tb%5B0%5D%29%0A%20%20%20%20%20%20%7D%2C%20%7B%0A%20%20%20%20%20%20%20%20i%3A%203%2C%0A%20%20%20%20%20%20%20%20x%3A%20d3%5FinterpolateNumber%28ta%5B1%5D%2C%20tb%5B1%5D%29%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%20else%20if%20%28tb%5B0%5D%20%7C%7C%20tb%5B1%5D%29%20%7B%0A%20%20%20%20%20%20s%2Epush%28%22translate%28%22%20%2B%20tb%20%2B%20%22%29%22%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20s%2Epush%28%22%22%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28ra%20%21%3D%20rb%29%20%7B%0A%20%20%20%20%20%20if%20%28ra%20%2D%20rb%20%3E%20180%29%20rb%20%2B%3D%20360%3B%20else%20if%20%28rb%20%2D%20ra%20%3E%20180%29%20ra%20%2B%3D%20360%3B%0A%20%20%20%20%20%20q%2Epush%28%7B%0A%20%20%20%20%20%20%20%20i%3A%20s%2Epush%28s%2Epop%28%29%20%2B%20%22rotate%28%22%2C%20null%2C%20%22%29%22%29%20%2D%202%2C%0A%20%20%20%20%20%20%20%20x%3A%20d3%5FinterpolateNumber%28ra%2C%20rb%29%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%20else%20if%20%28rb%29%20%7B%0A%20%20%20%20%20%20s%2Epush%28s%2Epop%28%29%20%2B%20%22rotate%28%22%20%2B%20rb%20%2B%20%22%29%22%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28wa%20%21%3D%20wb%29%20%7B%0A%20%20%20%20%20%20q%2Epush%28%7B%0A%20%20%20%20%20%20%20%20i%3A%20s%2Epush%28s%2Epop%28%29%20%2B%20%22skewX%28%22%2C%20null%2C%20%22%29%22%29%20%2D%202%2C%0A%20%20%20%20%20%20%20%20x%3A%20d3%5FinterpolateNumber%28wa%2C%20wb%29%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%20else%20if%20%28wb%29%20%7B%0A%20%20%20%20%20%20s%2Epush%28s%2Epop%28%29%20%2B%20%22skewX%28%22%20%2B%20wb%20%2B%20%22%29%22%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28ka%5B0%5D%20%21%3D%20kb%5B0%5D%20%7C%7C%20ka%5B1%5D%20%21%3D%20kb%5B1%5D%29%20%7B%0A%20%20%20%20%20%20n%20%3D%20s%2Epush%28s%2Epop%28%29%20%2B%20%22scale%28%22%2C%20null%2C%20%22%2C%22%2C%20null%2C%20%22%29%22%29%3B%0A%20%20%20%20%20%20q%2Epush%28%7B%0A%20%20%20%20%20%20%20%20i%3A%20n%20%2D%204%2C%0A%20%20%20%20%20%20%20%20x%3A%20d3%5FinterpolateNumber%28ka%5B0%5D%2C%20kb%5B0%5D%29%0A%20%20%20%20%20%20%7D%2C%20%7B%0A%20%20%20%20%20%20%20%20i%3A%20n%20%2D%202%2C%0A%20%20%20%20%20%20%20%20x%3A%20d3%5FinterpolateNumber%28ka%5B1%5D%2C%20kb%5B1%5D%29%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%20else%20if%20%28kb%5B0%5D%20%21%3D%201%20%7C%7C%20kb%5B1%5D%20%21%3D%201%29%20%7B%0A%20%20%20%20%20%20s%2Epush%28s%2Epop%28%29%20%2B%20%22scale%28%22%20%2B%20kb%20%2B%20%22%29%22%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20n%20%3D%20q%2Elength%3B%0A%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20%2D1%2C%20o%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20s%5B%28o%20%3D%20q%5Bi%5D%29%2Ei%5D%20%3D%20o%2Ex%28t%29%3B%0A%20%20%20%20%20%20return%20s%2Ejoin%28%22%22%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5FuninterpolateNumber%28a%2C%20b%29%20%7B%0A%20%20%20%20b%20%3D%20%28b%20%2D%3D%20a%20%3D%20%2Ba%29%20%7C%7C%201%20%2F%20b%3B%0A%20%20%20%20return%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20%28x%20%2D%20a%29%20%2F%20b%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5FuninterpolateClamp%28a%2C%20b%29%20%7B%0A%20%20%20%20b%20%3D%20%28b%20%2D%3D%20a%20%3D%20%2Ba%29%20%7C%7C%201%20%2F%20b%3B%0A%20%20%20%20return%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20Math%2Emax%280%2C%20Math%2Emin%281%2C%20%28x%20%2D%20a%29%20%2F%20b%29%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2Elayout%20%3D%20%7B%7D%3B%0A%20%20d3%2Elayout%2Ebundle%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20function%28links%29%20%7B%0A%20%20%20%20%20%20var%20paths%20%3D%20%5B%5D%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20links%2Elength%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20paths%2Epush%28d3%5Flayout%5FbundlePath%28links%5Bi%5D%29%29%3B%0A%20%20%20%20%20%20return%20paths%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Flayout%5FbundlePath%28link%29%20%7B%0A%20%20%20%20var%20start%20%3D%20link%2Esource%2C%20end%20%3D%20link%2Etarget%2C%20lca%20%3D%20d3%5Flayout%5FbundleLeastCommonAncestor%28start%2C%20end%29%2C%20points%20%3D%20%5B%20start%20%5D%3B%0A%20%20%20%20while%20%28start%20%21%3D%3D%20lca%29%20%7B%0A%20%20%20%20%20%20start%20%3D%20start%2Eparent%3B%0A%20%20%20%20%20%20points%2Epush%28start%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20k%20%3D%20points%2Elength%3B%0A%20%20%20%20while%20%28end%20%21%3D%3D%20lca%29%20%7B%0A%20%20%20%20%20%20points%2Esplice%28k%2C%200%2C%20end%29%3B%0A%20%20%20%20%20%20end%20%3D%20end%2Eparent%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20points%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FbundleAncestors%28node%29%20%7B%0A%20%20%20%20var%20ancestors%20%3D%20%5B%5D%2C%20parent%20%3D%20node%2Eparent%3B%0A%20%20%20%20while%20%28parent%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20ancestors%2Epush%28node%29%3B%0A%20%20%20%20%20%20node%20%3D%20parent%3B%0A%20%20%20%20%20%20parent%20%3D%20parent%2Eparent%3B%0A%20%20%20%20%7D%0A%20%20%20%20ancestors%2Epush%28node%29%3B%0A%20%20%20%20return%20ancestors%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FbundleLeastCommonAncestor%28a%2C%20b%29%20%7B%0A%20%20%20%20if%20%28a%20%3D%3D%3D%20b%29%20return%20a%3B%0A%20%20%20%20var%20aNodes%20%3D%20d3%5Flayout%5FbundleAncestors%28a%29%2C%20bNodes%20%3D%20d3%5Flayout%5FbundleAncestors%28b%29%2C%20aNode%20%3D%20aNodes%2Epop%28%29%2C%20bNode%20%3D%20bNodes%2Epop%28%29%2C%20sharedNode%20%3D%20null%3B%0A%20%20%20%20while%20%28aNode%20%3D%3D%3D%20bNode%29%20%7B%0A%20%20%20%20%20%20sharedNode%20%3D%20aNode%3B%0A%20%20%20%20%20%20aNode%20%3D%20aNodes%2Epop%28%29%3B%0A%20%20%20%20%20%20bNode%20%3D%20bNodes%2Epop%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20sharedNode%3B%0A%20%20%7D%0A%20%20d3%2Elayout%2Echord%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20chord%20%3D%20%7B%7D%2C%20chords%2C%20groups%2C%20matrix%2C%20n%2C%20padding%20%3D%200%2C%20sortGroups%2C%20sortSubgroups%2C%20sortChords%3B%0A%20%20%20%20function%20relayout%28%29%20%7B%0A%20%20%20%20%20%20var%20subgroups%20%3D%20%7B%7D%2C%20groupSums%20%3D%20%5B%5D%2C%20groupIndex%20%3D%20d3%2Erange%28n%29%2C%20subgroupIndex%20%3D%20%5B%5D%2C%20k%2C%20x%2C%20x0%2C%20i%2C%20j%3B%0A%20%20%20%20%20%20chords%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20groups%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20k%20%3D%200%2C%20i%20%3D%20%2D1%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20x%20%3D%200%2C%20j%20%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bj%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20x%20%2B%3D%20matrix%5Bi%5D%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20groupSums%2Epush%28x%29%3B%0A%20%20%20%20%20%20%20%20subgroupIndex%2Epush%28d3%2Erange%28n%29%29%3B%0A%20%20%20%20%20%20%20%20k%20%2B%3D%20x%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28sortGroups%29%20%7B%0A%20%20%20%20%20%20%20%20groupIndex%2Esort%28function%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20sortGroups%28groupSums%5Ba%5D%2C%20groupSums%5Bb%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28sortSubgroups%29%20%7B%0A%20%20%20%20%20%20%20%20subgroupIndex%2EforEach%28function%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20d%2Esort%28function%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20sortSubgroups%28matrix%5Bi%5D%5Ba%5D%2C%20matrix%5Bi%5D%5Bb%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20k%20%3D%20%28%CF%84%20%2D%20padding%20%2A%20n%29%20%2F%20k%3B%0A%20%20%20%20%20%20x%20%3D%200%2C%20i%20%3D%20%2D1%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20x0%20%3D%20x%2C%20j%20%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bj%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20di%20%3D%20groupIndex%5Bi%5D%2C%20dj%20%3D%20subgroupIndex%5Bdi%5D%5Bj%5D%2C%20v%20%3D%20matrix%5Bdi%5D%5Bdj%5D%2C%20a0%20%3D%20x%2C%20a1%20%3D%20x%20%2B%3D%20v%20%2A%20k%3B%0A%20%20%20%20%20%20%20%20%20%20subgroups%5Bdi%20%2B%20%22%2D%22%20%2B%20dj%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20index%3A%20di%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20subindex%3A%20dj%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20startAngle%3A%20a0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20endAngle%3A%20a1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20v%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20groups%5Bdi%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20index%3A%20di%2C%0A%20%20%20%20%20%20%20%20%20%20startAngle%3A%20x0%2C%0A%20%20%20%20%20%20%20%20%20%20endAngle%3A%20x%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20%28x%20%2D%20x0%29%20%2F%20k%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20x%20%2B%3D%20padding%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20i%20%3D%20%2D1%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20j%20%3D%20i%20%2D%201%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bj%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20source%20%3D%20subgroups%5Bi%20%2B%20%22%2D%22%20%2B%20j%5D%2C%20target%20%3D%20subgroups%5Bj%20%2B%20%22%2D%22%20%2B%20i%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28source%2Evalue%20%7C%7C%20target%2Evalue%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20chords%2Epush%28source%2Evalue%20%3C%20target%2Evalue%20%3F%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20source%3A%20target%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20target%3A%20source%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20source%3A%20source%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20target%3A%20target%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28sortChords%29%20resort%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20resort%28%29%20%7B%0A%20%20%20%20%20%20chords%2Esort%28function%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20return%20sortChords%28%28a%2Esource%2Evalue%20%2B%20a%2Etarget%2Evalue%29%20%2F%202%2C%20%28b%2Esource%2Evalue%20%2B%20b%2Etarget%2Evalue%29%20%2F%202%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20chord%2Ematrix%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20matrix%3B%0A%20%20%20%20%20%20n%20%3D%20%28matrix%20%3D%20x%29%20%26%26%20matrix%2Elength%3B%0A%20%20%20%20%20%20chords%20%3D%20groups%20%3D%20null%3B%0A%20%20%20%20%20%20return%20chord%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20chord%2Epadding%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20padding%3B%0A%20%20%20%20%20%20padding%20%3D%20x%3B%0A%20%20%20%20%20%20chords%20%3D%20groups%20%3D%20null%3B%0A%20%20%20%20%20%20return%20chord%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20chord%2EsortGroups%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20sortGroups%3B%0A%20%20%20%20%20%20sortGroups%20%3D%20x%3B%0A%20%20%20%20%20%20chords%20%3D%20groups%20%3D%20null%3B%0A%20%20%20%20%20%20return%20chord%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20chord%2EsortSubgroups%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20sortSubgroups%3B%0A%20%20%20%20%20%20sortSubgroups%20%3D%20x%3B%0A%20%20%20%20%20%20chords%20%3D%20null%3B%0A%20%20%20%20%20%20return%20chord%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20chord%2EsortChords%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20sortChords%3B%0A%20%20%20%20%20%20sortChords%20%3D%20x%3B%0A%20%20%20%20%20%20if%20%28chords%29%20resort%28%29%3B%0A%20%20%20%20%20%20return%20chord%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20chord%2Echords%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20if%20%28%21chords%29%20relayout%28%29%3B%0A%20%20%20%20%20%20return%20chords%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20chord%2Egroups%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20if%20%28%21groups%29%20relayout%28%29%3B%0A%20%20%20%20%20%20return%20groups%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20chord%3B%0A%20%20%7D%3B%0A%20%20d3%2Elayout%2Eforce%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20force%20%3D%20%7B%7D%2C%20event%20%3D%20d3%2Edispatch%28%22start%22%2C%20%22tick%22%2C%20%22end%22%29%2C%20size%20%3D%20%5B%201%2C%201%20%5D%2C%20drag%2C%20alpha%2C%20friction%20%3D%20%2E9%2C%20linkDistance%20%3D%20d3%5Flayout%5FforceLinkDistance%2C%20linkStrength%20%3D%20d3%5Flayout%5FforceLinkStrength%2C%20charge%20%3D%20%2D30%2C%20chargeDistance2%20%3D%20d3%5Flayout%5FforceChargeDistance2%2C%20gravity%20%3D%20%2E1%2C%20theta2%20%3D%20%2E64%2C%20nodes%20%3D%20%5B%5D%2C%20links%20%3D%20%5B%5D%2C%20distances%2C%20strengths%2C%20charges%3B%0A%20%20%20%20function%20repulse%28node%29%20%7B%0A%20%20%20%20%20%20return%20function%28quad%2C%20x1%2C%20%5F%2C%20x2%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28quad%2Epoint%20%21%3D%3D%20node%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20dx%20%3D%20quad%2Ecx%20%2D%20node%2Ex%2C%20dy%20%3D%20quad%2Ecy%20%2D%20node%2Ey%2C%20dw%20%3D%20x2%20%2D%20x1%2C%20dn%20%3D%20dx%20%2A%20dx%20%2B%20dy%20%2A%20dy%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28dw%20%2A%20dw%20%2F%20theta2%20%3C%20dn%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28dn%20%3C%20chargeDistance2%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20k%20%3D%20quad%2Echarge%20%2F%20dn%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20node%2Epx%20%2D%3D%20dx%20%2A%20k%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20node%2Epy%20%2D%3D%20dy%20%2A%20k%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28quad%2Epoint%20%26%26%20dn%20%26%26%20dn%20%3C%20chargeDistance2%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20k%20%3D%20quad%2EpointCharge%20%2F%20dn%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20node%2Epx%20%2D%3D%20dx%20%2A%20k%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20node%2Epy%20%2D%3D%20dy%20%2A%20k%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%21quad%2Echarge%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20force%2Etick%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20if%20%28%28alpha%20%2A%3D%20%2E99%29%20%3C%20%2E005%29%20%7B%0A%20%20%20%20%20%20%20%20event%2Eend%28%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20%22end%22%2C%0A%20%20%20%20%20%20%20%20%20%20alpha%3A%20alpha%20%3D%200%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20n%20%3D%20nodes%2Elength%2C%20m%20%3D%20links%2Elength%2C%20q%2C%20i%2C%20o%2C%20s%2C%20t%2C%20l%2C%20k%2C%20x%2C%20y%3B%0A%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20m%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20o%20%3D%20links%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20s%20%3D%20o%2Esource%3B%0A%20%20%20%20%20%20%20%20t%20%3D%20o%2Etarget%3B%0A%20%20%20%20%20%20%20%20x%20%3D%20t%2Ex%20%2D%20s%2Ex%3B%0A%20%20%20%20%20%20%20%20y%20%3D%20t%2Ey%20%2D%20s%2Ey%3B%0A%20%20%20%20%20%20%20%20if%20%28l%20%3D%20x%20%2A%20x%20%2B%20y%20%2A%20y%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20l%20%3D%20alpha%20%2A%20strengths%5Bi%5D%20%2A%20%28%28l%20%3D%20Math%2Esqrt%28l%29%29%20%2D%20distances%5Bi%5D%29%20%2F%20l%3B%0A%20%20%20%20%20%20%20%20%20%20x%20%2A%3D%20l%3B%0A%20%20%20%20%20%20%20%20%20%20y%20%2A%3D%20l%3B%0A%20%20%20%20%20%20%20%20%20%20t%2Ex%20%2D%3D%20x%20%2A%20%28k%20%3D%20s%2Eweight%20%2F%20%28t%2Eweight%20%2B%20s%2Eweight%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20t%2Ey%20%2D%3D%20y%20%2A%20k%3B%0A%20%20%20%20%20%20%20%20%20%20s%2Ex%20%2B%3D%20x%20%2A%20%28k%20%3D%201%20%2D%20k%29%3B%0A%20%20%20%20%20%20%20%20%20%20s%2Ey%20%2B%3D%20y%20%2A%20k%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28k%20%3D%20alpha%20%2A%20gravity%29%20%7B%0A%20%20%20%20%20%20%20%20x%20%3D%20size%5B0%5D%20%2F%202%3B%0A%20%20%20%20%20%20%20%20y%20%3D%20size%5B1%5D%20%2F%202%3B%0A%20%20%20%20%20%20%20%20i%20%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20if%20%28k%29%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%20%3D%20nodes%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20o%2Ex%20%2B%3D%20%28x%20%2D%20o%2Ex%29%20%2A%20k%3B%0A%20%20%20%20%20%20%20%20%20%20o%2Ey%20%2B%3D%20%28y%20%2D%20o%2Ey%29%20%2A%20k%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28charge%29%20%7B%0A%20%20%20%20%20%20%20%20d3%5Flayout%5FforceAccumulate%28q%20%3D%20d3%2Egeom%2Equadtree%28nodes%29%2C%20alpha%2C%20charges%29%3B%0A%20%20%20%20%20%20%20%20i%20%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21%28o%20%3D%20nodes%5Bi%5D%29%2Efixed%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20q%2Evisit%28repulse%28o%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20i%20%3D%20%2D1%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20o%20%3D%20nodes%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28o%2Efixed%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%2Ex%20%3D%20o%2Epx%3B%0A%20%20%20%20%20%20%20%20%20%20o%2Ey%20%3D%20o%2Epy%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%2Ex%20%2D%3D%20%28o%2Epx%20%2D%20%28o%2Epx%20%3D%20o%2Ex%29%29%20%2A%20friction%3B%0A%20%20%20%20%20%20%20%20%20%20o%2Ey%20%2D%3D%20%28o%2Epy%20%2D%20%28o%2Epy%20%3D%20o%2Ey%29%29%20%2A%20friction%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20event%2Etick%28%7B%0A%20%20%20%20%20%20%20%20type%3A%20%22tick%22%2C%0A%20%20%20%20%20%20%20%20alpha%3A%20alpha%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2Enodes%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20nodes%3B%0A%20%20%20%20%20%20nodes%20%3D%20x%3B%0A%20%20%20%20%20%20return%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2Elinks%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20links%3B%0A%20%20%20%20%20%20links%20%3D%20x%3B%0A%20%20%20%20%20%20return%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2Esize%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20size%3B%0A%20%20%20%20%20%20size%20%3D%20x%3B%0A%20%20%20%20%20%20return%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2ElinkDistance%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20linkDistance%3B%0A%20%20%20%20%20%20linkDistance%20%3D%20typeof%20x%20%3D%3D%3D%20%22function%22%20%3F%20x%20%3A%20%2Bx%3B%0A%20%20%20%20%20%20return%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2Edistance%20%3D%20force%2ElinkDistance%3B%0A%20%20%20%20force%2ElinkStrength%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20linkStrength%3B%0A%20%20%20%20%20%20linkStrength%20%3D%20typeof%20x%20%3D%3D%3D%20%22function%22%20%3F%20x%20%3A%20%2Bx%3B%0A%20%20%20%20%20%20return%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2Efriction%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20friction%3B%0A%20%20%20%20%20%20friction%20%3D%20%2Bx%3B%0A%20%20%20%20%20%20return%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2Echarge%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20charge%3B%0A%20%20%20%20%20%20charge%20%3D%20typeof%20x%20%3D%3D%3D%20%22function%22%20%3F%20x%20%3A%20%2Bx%3B%0A%20%20%20%20%20%20return%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2EchargeDistance%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20Math%2Esqrt%28chargeDistance2%29%3B%0A%20%20%20%20%20%20chargeDistance2%20%3D%20x%20%2A%20x%3B%0A%20%20%20%20%20%20return%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2Egravity%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20gravity%3B%0A%20%20%20%20%20%20gravity%20%3D%20%2Bx%3B%0A%20%20%20%20%20%20return%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2Etheta%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20Math%2Esqrt%28theta2%29%3B%0A%20%20%20%20%20%20theta2%20%3D%20x%20%2A%20x%3B%0A%20%20%20%20%20%20return%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2Ealpha%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20alpha%3B%0A%20%20%20%20%20%20x%20%3D%20%2Bx%3B%0A%20%20%20%20%20%20if%20%28alpha%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28x%20%3E%200%29%20alpha%20%3D%20x%3B%20else%20alpha%20%3D%200%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28x%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20event%2Estart%28%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20%22start%22%2C%0A%20%20%20%20%20%20%20%20%20%20alpha%3A%20alpha%20%3D%20x%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20d3%2Etimer%28force%2Etick%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2Estart%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20i%2C%20n%20%3D%20nodes%2Elength%2C%20m%20%3D%20links%2Elength%2C%20w%20%3D%20size%5B0%5D%2C%20h%20%3D%20size%5B1%5D%2C%20neighbors%2C%20o%3B%0A%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%28o%20%3D%20nodes%5Bi%5D%29%2Eindex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20o%2Eweight%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20m%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20o%20%3D%20links%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20o%2Esource%20%3D%3D%20%22number%22%29%20o%2Esource%20%3D%20nodes%5Bo%2Esource%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20o%2Etarget%20%3D%3D%20%22number%22%29%20o%2Etarget%20%3D%20nodes%5Bo%2Etarget%5D%3B%0A%20%20%20%20%20%20%20%20%2B%2Bo%2Esource%2Eweight%3B%0A%20%20%20%20%20%20%20%20%2B%2Bo%2Etarget%2Eweight%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20o%20%3D%20nodes%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28isNaN%28o%2Ex%29%29%20o%2Ex%20%3D%20position%28%22x%22%2C%20w%29%3B%0A%20%20%20%20%20%20%20%20if%20%28isNaN%28o%2Ey%29%29%20o%2Ey%20%3D%20position%28%22y%22%2C%20h%29%3B%0A%20%20%20%20%20%20%20%20if%20%28isNaN%28o%2Epx%29%29%20o%2Epx%20%3D%20o%2Ex%3B%0A%20%20%20%20%20%20%20%20if%20%28isNaN%28o%2Epy%29%29%20o%2Epy%20%3D%20o%2Ey%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20distances%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20if%20%28typeof%20linkDistance%20%3D%3D%3D%20%22function%22%29%20for%20%28i%20%3D%200%3B%20i%20%3C%20m%3B%20%2B%2Bi%29%20distances%5Bi%5D%20%3D%20%2BlinkDistance%2Ecall%28this%2C%20links%5Bi%5D%2C%20i%29%3B%20else%20for%20%28i%20%3D%200%3B%20i%20%3C%20m%3B%20%2B%2Bi%29%20distances%5Bi%5D%20%3D%20linkDistance%3B%0A%20%20%20%20%20%20strengths%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20if%20%28typeof%20linkStrength%20%3D%3D%3D%20%22function%22%29%20for%20%28i%20%3D%200%3B%20i%20%3C%20m%3B%20%2B%2Bi%29%20strengths%5Bi%5D%20%3D%20%2BlinkStrength%2Ecall%28this%2C%20links%5Bi%5D%2C%20i%29%3B%20else%20for%20%28i%20%3D%200%3B%20i%20%3C%20m%3B%20%2B%2Bi%29%20strengths%5Bi%5D%20%3D%20linkStrength%3B%0A%20%20%20%20%20%20charges%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20if%20%28typeof%20charge%20%3D%3D%3D%20%22function%22%29%20for%20%28i%20%3D%200%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20charges%5Bi%5D%20%3D%20%2Bcharge%2Ecall%28this%2C%20nodes%5Bi%5D%2C%20i%29%3B%20else%20for%20%28i%20%3D%200%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20charges%5Bi%5D%20%3D%20charge%3B%0A%20%20%20%20%20%20function%20position%28dimension%2C%20size%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21neighbors%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20neighbors%20%3D%20new%20Array%28n%29%3B%0A%20%20%20%20%20%20%20%20%20%20for%20%28j%20%3D%200%3B%20j%20%3C%20n%3B%20%2B%2Bj%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20neighbors%5Bj%5D%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20for%20%28j%20%3D%200%3B%20j%20%3C%20m%3B%20%2B%2Bj%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20o%20%3D%20links%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20neighbors%5Bo%2Esource%2Eindex%5D%2Epush%28o%2Etarget%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20neighbors%5Bo%2Etarget%2Eindex%5D%2Epush%28o%2Esource%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20candidates%20%3D%20neighbors%5Bi%5D%2C%20j%20%3D%20%2D1%2C%20m%20%3D%20candidates%2Elength%2C%20x%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bj%20%3C%20m%29%20if%20%28%21isNaN%28x%20%3D%20candidates%5Bj%5D%5Bdimension%5D%29%29%20return%20x%3B%0A%20%20%20%20%20%20%20%20return%20Math%2Erandom%28%29%20%2A%20size%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20force%2Eresume%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2Eresume%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20force%2Ealpha%28%2E1%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2Estop%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20force%2Ealpha%280%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20force%2Edrag%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20if%20%28%21drag%29%20drag%20%3D%20d3%2Ebehavior%2Edrag%28%29%2Eorigin%28d3%5Fidentity%29%2Eon%28%22dragstart%2Eforce%22%2C%20d3%5Flayout%5FforceDragstart%29%2Eon%28%22drag%2Eforce%22%2C%20dragmove%29%2Eon%28%22dragend%2Eforce%22%2C%20d3%5Flayout%5FforceDragend%29%3B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20drag%3B%0A%20%20%20%20%20%20this%2Eon%28%22mouseover%2Eforce%22%2C%20d3%5Flayout%5FforceMouseover%29%2Eon%28%22mouseout%2Eforce%22%2C%20d3%5Flayout%5FforceMouseout%29%2Ecall%28drag%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20dragmove%28d%29%20%7B%0A%20%20%20%20%20%20d%2Epx%20%3D%20d3%2Eevent%2Ex%2C%20d%2Epy%20%3D%20d3%2Eevent%2Ey%3B%0A%20%20%20%20%20%20force%2Eresume%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%2Erebind%28force%2C%20event%2C%20%22on%22%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Flayout%5FforceDragstart%28d%29%20%7B%0A%20%20%20%20d%2Efixed%20%7C%3D%202%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FforceDragend%28d%29%20%7B%0A%20%20%20%20d%2Efixed%20%26%3D%20%7E6%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FforceMouseover%28d%29%20%7B%0A%20%20%20%20d%2Efixed%20%7C%3D%204%3B%0A%20%20%20%20d%2Epx%20%3D%20d%2Ex%2C%20d%2Epy%20%3D%20d%2Ey%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FforceMouseout%28d%29%20%7B%0A%20%20%20%20d%2Efixed%20%26%3D%20%7E4%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FforceAccumulate%28quad%2C%20alpha%2C%20charges%29%20%7B%0A%20%20%20%20var%20cx%20%3D%200%2C%20cy%20%3D%200%3B%0A%20%20%20%20quad%2Echarge%20%3D%200%3B%0A%20%20%20%20if%20%28%21quad%2Eleaf%29%20%7B%0A%20%20%20%20%20%20var%20nodes%20%3D%20quad%2Enodes%2C%20n%20%3D%20nodes%2Elength%2C%20i%20%3D%20%2D1%2C%20c%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20c%20%3D%20nodes%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28c%20%3D%3D%20null%29%20continue%3B%0A%20%20%20%20%20%20%20%20d3%5Flayout%5FforceAccumulate%28c%2C%20alpha%2C%20charges%29%3B%0A%20%20%20%20%20%20%20%20quad%2Echarge%20%2B%3D%20c%2Echarge%3B%0A%20%20%20%20%20%20%20%20cx%20%2B%3D%20c%2Echarge%20%2A%20c%2Ecx%3B%0A%20%20%20%20%20%20%20%20cy%20%2B%3D%20c%2Echarge%20%2A%20c%2Ecy%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28quad%2Epoint%29%20%7B%0A%20%20%20%20%20%20if%20%28%21quad%2Eleaf%29%20%7B%0A%20%20%20%20%20%20%20%20quad%2Epoint%2Ex%20%2B%3D%20Math%2Erandom%28%29%20%2D%20%2E5%3B%0A%20%20%20%20%20%20%20%20quad%2Epoint%2Ey%20%2B%3D%20Math%2Erandom%28%29%20%2D%20%2E5%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20k%20%3D%20alpha%20%2A%20charges%5Bquad%2Epoint%2Eindex%5D%3B%0A%20%20%20%20%20%20quad%2Echarge%20%2B%3D%20quad%2EpointCharge%20%3D%20k%3B%0A%20%20%20%20%20%20cx%20%2B%3D%20k%20%2A%20quad%2Epoint%2Ex%3B%0A%20%20%20%20%20%20cy%20%2B%3D%20k%20%2A%20quad%2Epoint%2Ey%3B%0A%20%20%20%20%7D%0A%20%20%20%20quad%2Ecx%20%3D%20cx%20%2F%20quad%2Echarge%3B%0A%20%20%20%20quad%2Ecy%20%3D%20cy%20%2F%20quad%2Echarge%3B%0A%20%20%7D%0A%20%20var%20d3%5Flayout%5FforceLinkDistance%20%3D%2020%2C%20d3%5Flayout%5FforceLinkStrength%20%3D%201%2C%20d3%5Flayout%5FforceChargeDistance2%20%3D%20Infinity%3B%0A%20%20d3%2Elayout%2Ehierarchy%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20sort%20%3D%20d3%5Flayout%5FhierarchySort%2C%20children%20%3D%20d3%5Flayout%5FhierarchyChildren%2C%20value%20%3D%20d3%5Flayout%5FhierarchyValue%3B%0A%20%20%20%20function%20hierarchy%28root%29%20%7B%0A%20%20%20%20%20%20var%20stack%20%3D%20%5B%20root%20%5D%2C%20nodes%20%3D%20%5B%5D%2C%20node%3B%0A%20%20%20%20%20%20root%2Edepth%20%3D%200%3B%0A%20%20%20%20%20%20while%20%28%28node%20%3D%20stack%2Epop%28%29%29%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20nodes%2Epush%28node%29%3B%0A%20%20%20%20%20%20%20%20if%20%28%28childs%20%3D%20children%2Ecall%28hierarchy%2C%20node%2C%20node%2Edepth%29%29%20%26%26%20%28n%20%3D%20childs%2Elength%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20n%2C%20childs%2C%20child%3B%0A%20%20%20%20%20%20%20%20%20%20while%20%28%2D%2Dn%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20stack%2Epush%28child%20%3D%20childs%5Bn%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20child%2Eparent%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20child%2Edepth%20%3D%20node%2Edepth%20%2B%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28value%29%20node%2Evalue%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20node%2Echildren%20%3D%20childs%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28value%29%20node%2Evalue%20%3D%20%2Bvalue%2Ecall%28hierarchy%2C%20node%2C%20node%2Edepth%29%20%7C%7C%200%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20node%2Echildren%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitAfter%28root%2C%20function%28node%29%20%7B%0A%20%20%20%20%20%20%20%20var%20childs%2C%20parent%3B%0A%20%20%20%20%20%20%20%20if%20%28sort%20%26%26%20%28childs%20%3D%20node%2Echildren%29%29%20childs%2Esort%28sort%29%3B%0A%20%20%20%20%20%20%20%20if%20%28value%20%26%26%20%28parent%20%3D%20node%2Eparent%29%29%20parent%2Evalue%20%2B%3D%20node%2Evalue%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20return%20nodes%3B%0A%20%20%20%20%7D%0A%20%20%20%20hierarchy%2Esort%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20sort%3B%0A%20%20%20%20%20%20sort%20%3D%20x%3B%0A%20%20%20%20%20%20return%20hierarchy%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20hierarchy%2Echildren%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20children%3B%0A%20%20%20%20%20%20children%20%3D%20x%3B%0A%20%20%20%20%20%20return%20hierarchy%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20hierarchy%2Evalue%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20value%3B%0A%20%20%20%20%20%20value%20%3D%20x%3B%0A%20%20%20%20%20%20return%20hierarchy%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20hierarchy%2Erevalue%20%3D%20function%28root%29%20%7B%0A%20%20%20%20%20%20if%20%28value%29%20%7B%0A%20%20%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitBefore%28root%2C%20function%28node%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28node%2Echildren%29%20node%2Evalue%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitAfter%28root%2C%20function%28node%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20parent%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21node%2Echildren%29%20node%2Evalue%20%3D%20%2Bvalue%2Ecall%28hierarchy%2C%20node%2C%20node%2Edepth%29%20%7C%7C%200%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28parent%20%3D%20node%2Eparent%29%20parent%2Evalue%20%2B%3D%20node%2Evalue%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20root%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20hierarchy%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Flayout%5FhierarchyRebind%28object%2C%20hierarchy%29%20%7B%0A%20%20%20%20d3%2Erebind%28object%2C%20hierarchy%2C%20%22sort%22%2C%20%22children%22%2C%20%22value%22%29%3B%0A%20%20%20%20object%2Enodes%20%3D%20object%3B%0A%20%20%20%20object%2Elinks%20%3D%20d3%5Flayout%5FhierarchyLinks%3B%0A%20%20%20%20return%20object%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FhierarchyVisitBefore%28node%2C%20callback%29%20%7B%0A%20%20%20%20var%20nodes%20%3D%20%5B%20node%20%5D%3B%0A%20%20%20%20while%20%28%28node%20%3D%20nodes%2Epop%28%29%29%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20callback%28node%29%3B%0A%20%20%20%20%20%20if%20%28%28children%20%3D%20node%2Echildren%29%20%26%26%20%28n%20%3D%20children%2Elength%29%29%20%7B%0A%20%20%20%20%20%20%20%20var%20n%2C%20children%3B%0A%20%20%20%20%20%20%20%20while%20%28%2D%2Dn%20%3E%3D%200%29%20nodes%2Epush%28children%5Bn%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FhierarchyVisitAfter%28node%2C%20callback%29%20%7B%0A%20%20%20%20var%20nodes%20%3D%20%5B%20node%20%5D%2C%20nodes2%20%3D%20%5B%5D%3B%0A%20%20%20%20while%20%28%28node%20%3D%20nodes%2Epop%28%29%29%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20nodes2%2Epush%28node%29%3B%0A%20%20%20%20%20%20if%20%28%28children%20%3D%20node%2Echildren%29%20%26%26%20%28n%20%3D%20children%2Elength%29%29%20%7B%0A%20%20%20%20%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%2C%20children%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20nodes%2Epush%28children%5Bi%5D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20while%20%28%28node%20%3D%20nodes2%2Epop%28%29%29%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20callback%28node%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FhierarchyChildren%28d%29%20%7B%0A%20%20%20%20return%20d%2Echildren%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FhierarchyValue%28d%29%20%7B%0A%20%20%20%20return%20d%2Evalue%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FhierarchySort%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20b%2Evalue%20%2D%20a%2Evalue%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FhierarchyLinks%28nodes%29%20%7B%0A%20%20%20%20return%20d3%2Emerge%28nodes%2Emap%28function%28parent%29%20%7B%0A%20%20%20%20%20%20return%20%28parent%2Echildren%20%7C%7C%20%5B%5D%29%2Emap%28function%28child%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20source%3A%20parent%2C%0A%20%20%20%20%20%20%20%20%20%20target%3A%20child%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%29%29%3B%0A%20%20%7D%0A%20%20d3%2Elayout%2Epartition%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20hierarchy%20%3D%20d3%2Elayout%2Ehierarchy%28%29%2C%20size%20%3D%20%5B%201%2C%201%20%5D%3B%0A%20%20%20%20function%20position%28node%2C%20x%2C%20dx%2C%20dy%29%20%7B%0A%20%20%20%20%20%20var%20children%20%3D%20node%2Echildren%3B%0A%20%20%20%20%20%20node%2Ex%20%3D%20x%3B%0A%20%20%20%20%20%20node%2Ey%20%3D%20node%2Edepth%20%2A%20dy%3B%0A%20%20%20%20%20%20node%2Edx%20%3D%20dx%3B%0A%20%20%20%20%20%20node%2Edy%20%3D%20dy%3B%0A%20%20%20%20%20%20if%20%28children%20%26%26%20%28n%20%3D%20children%2Elength%29%29%20%7B%0A%20%20%20%20%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%2C%20c%2C%20d%3B%0A%20%20%20%20%20%20%20%20dx%20%3D%20node%2Evalue%20%3F%20dx%20%2F%20node%2Evalue%20%3A%200%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20position%28c%20%3D%20children%5Bi%5D%2C%20x%2C%20d%20%3D%20c%2Evalue%20%2A%20dx%2C%20dy%29%3B%0A%20%20%20%20%20%20%20%20%20%20x%20%2B%3D%20d%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20function%20depth%28node%29%20%7B%0A%20%20%20%20%20%20var%20children%20%3D%20node%2Echildren%2C%20d%20%3D%200%3B%0A%20%20%20%20%20%20if%20%28children%20%26%26%20%28n%20%3D%20children%2Elength%29%29%20%7B%0A%20%20%20%20%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20d%20%3D%20Math%2Emax%28d%2C%20depth%28children%5Bi%5D%29%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%201%20%2B%20d%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20partition%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20var%20nodes%20%3D%20hierarchy%2Ecall%28this%2C%20d%2C%20i%29%3B%0A%20%20%20%20%20%20position%28nodes%5B0%5D%2C%200%2C%20size%5B0%5D%2C%20size%5B1%5D%20%2F%20depth%28nodes%5B0%5D%29%29%3B%0A%20%20%20%20%20%20return%20nodes%3B%0A%20%20%20%20%7D%0A%20%20%20%20partition%2Esize%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20size%3B%0A%20%20%20%20%20%20size%20%3D%20x%3B%0A%20%20%20%20%20%20return%20partition%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20d3%5Flayout%5FhierarchyRebind%28partition%2C%20hierarchy%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Elayout%2Epie%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20value%20%3D%20Number%2C%20sort%20%3D%20d3%5Flayout%5FpieSortByValue%2C%20startAngle%20%3D%200%2C%20endAngle%20%3D%20%CF%84%2C%20padAngle%20%3D%200%3B%0A%20%20%20%20function%20pie%28data%29%20%7B%0A%20%20%20%20%20%20var%20n%20%3D%20data%2Elength%2C%20values%20%3D%20data%2Emap%28function%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%2Bvalue%2Ecall%28pie%2C%20d%2C%20i%29%3B%0A%20%20%20%20%20%20%7D%29%2C%20a%20%3D%20%2B%28typeof%20startAngle%20%3D%3D%3D%20%22function%22%20%3F%20startAngle%2Eapply%28this%2C%20arguments%29%20%3A%20startAngle%29%2C%20da%20%3D%20%28typeof%20endAngle%20%3D%3D%3D%20%22function%22%20%3F%20endAngle%2Eapply%28this%2C%20arguments%29%20%3A%20endAngle%29%20%2D%20a%2C%20p%20%3D%20Math%2Emin%28Math%2Eabs%28da%29%20%2F%20n%2C%20%2B%28typeof%20padAngle%20%3D%3D%3D%20%22function%22%20%3F%20padAngle%2Eapply%28this%2C%20arguments%29%20%3A%20padAngle%29%29%2C%20pa%20%3D%20p%20%2A%20%28da%20%3C%200%20%3F%20%2D1%20%3A%201%29%2C%20k%20%3D%20%28da%20%2D%20n%20%2A%20pa%29%20%2F%20d3%2Esum%28values%29%2C%20index%20%3D%20d3%2Erange%28n%29%2C%20arcs%20%3D%20%5B%5D%2C%20v%3B%0A%20%20%20%20%20%20if%20%28sort%20%21%3D%20null%29%20index%2Esort%28sort%20%3D%3D%3D%20d3%5Flayout%5FpieSortByValue%20%3F%20function%28i%2C%20j%29%20%7B%0A%20%20%20%20%20%20%20%20return%20values%5Bj%5D%20%2D%20values%5Bi%5D%3B%0A%20%20%20%20%20%20%7D%20%3A%20function%28i%2C%20j%29%20%7B%0A%20%20%20%20%20%20%20%20return%20sort%28data%5Bi%5D%2C%20data%5Bj%5D%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20index%2EforEach%28function%28i%29%20%7B%0A%20%20%20%20%20%20%20%20arcs%5Bi%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20data%3A%20data%5Bi%5D%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20v%20%3D%20values%5Bi%5D%2C%0A%20%20%20%20%20%20%20%20%20%20startAngle%3A%20a%2C%0A%20%20%20%20%20%20%20%20%20%20endAngle%3A%20a%20%2B%3D%20v%20%2A%20k%20%2B%20pa%2C%0A%20%20%20%20%20%20%20%20%20%20padAngle%3A%20p%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20return%20arcs%3B%0A%20%20%20%20%7D%0A%20%20%20%20pie%2Evalue%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20value%3B%0A%20%20%20%20%20%20value%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20pie%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20pie%2Esort%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20sort%3B%0A%20%20%20%20%20%20sort%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20pie%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20pie%2EstartAngle%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20startAngle%3B%0A%20%20%20%20%20%20startAngle%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20pie%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20pie%2EendAngle%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20endAngle%3B%0A%20%20%20%20%20%20endAngle%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20pie%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20pie%2EpadAngle%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20padAngle%3B%0A%20%20%20%20%20%20padAngle%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20pie%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20pie%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Flayout%5FpieSortByValue%20%3D%20%7B%7D%3B%0A%20%20d3%2Elayout%2Estack%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20values%20%3D%20d3%5Fidentity%2C%20order%20%3D%20d3%5Flayout%5FstackOrderDefault%2C%20offset%20%3D%20d3%5Flayout%5FstackOffsetZero%2C%20out%20%3D%20d3%5Flayout%5FstackOut%2C%20x%20%3D%20d3%5Flayout%5FstackX%2C%20y%20%3D%20d3%5Flayout%5FstackY%3B%0A%20%20%20%20function%20stack%28data%2C%20index%29%20%7B%0A%20%20%20%20%20%20if%20%28%21%28n%20%3D%20data%2Elength%29%29%20return%20data%3B%0A%20%20%20%20%20%20var%20series%20%3D%20data%2Emap%28function%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20return%20values%2Ecall%28stack%2C%20d%2C%20i%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20var%20points%20%3D%20series%2Emap%28function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d%2Emap%28function%28v%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%5B%20x%2Ecall%28stack%2C%20v%2C%20i%29%2C%20y%2Ecall%28stack%2C%20v%2C%20i%29%20%5D%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20var%20orders%20%3D%20order%2Ecall%28stack%2C%20points%2C%20index%29%3B%0A%20%20%20%20%20%20series%20%3D%20d3%2Epermute%28series%2C%20orders%29%3B%0A%20%20%20%20%20%20points%20%3D%20d3%2Epermute%28points%2C%20orders%29%3B%0A%20%20%20%20%20%20var%20offsets%20%3D%20offset%2Ecall%28stack%2C%20points%2C%20index%29%3B%0A%20%20%20%20%20%20var%20m%20%3D%20series%5B0%5D%2Elength%2C%20n%2C%20i%2C%20j%2C%20o%3B%0A%20%20%20%20%20%20for%20%28j%20%3D%200%3B%20j%20%3C%20m%3B%20%2B%2Bj%29%20%7B%0A%20%20%20%20%20%20%20%20out%2Ecall%28stack%2C%20series%5B0%5D%5Bj%5D%2C%20o%20%3D%20offsets%5Bj%5D%2C%20points%5B0%5D%5Bj%5D%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%201%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20out%2Ecall%28stack%2C%20series%5Bi%5D%5Bj%5D%2C%20o%20%2B%3D%20points%5Bi%20%2D%201%5D%5Bj%5D%5B1%5D%2C%20points%5Bi%5D%5Bj%5D%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20data%3B%0A%20%20%20%20%7D%0A%20%20%20%20stack%2Evalues%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20values%3B%0A%20%20%20%20%20%20values%20%3D%20x%3B%0A%20%20%20%20%20%20return%20stack%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20stack%2Eorder%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20order%3B%0A%20%20%20%20%20%20order%20%3D%20typeof%20x%20%3D%3D%3D%20%22function%22%20%3F%20x%20%3A%20d3%5Flayout%5FstackOrders%2Eget%28x%29%20%7C%7C%20d3%5Flayout%5FstackOrderDefault%3B%0A%20%20%20%20%20%20return%20stack%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20stack%2Eoffset%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20offset%3B%0A%20%20%20%20%20%20offset%20%3D%20typeof%20x%20%3D%3D%3D%20%22function%22%20%3F%20x%20%3A%20d3%5Flayout%5FstackOffsets%2Eget%28x%29%20%7C%7C%20d3%5Flayout%5FstackOffsetZero%3B%0A%20%20%20%20%20%20return%20stack%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20stack%2Ex%20%3D%20function%28z%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20x%3B%0A%20%20%20%20%20%20x%20%3D%20z%3B%0A%20%20%20%20%20%20return%20stack%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20stack%2Ey%20%3D%20function%28z%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20y%3B%0A%20%20%20%20%20%20y%20%3D%20z%3B%0A%20%20%20%20%20%20return%20stack%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20stack%2Eout%20%3D%20function%28z%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20out%3B%0A%20%20%20%20%20%20out%20%3D%20z%3B%0A%20%20%20%20%20%20return%20stack%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20stack%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Flayout%5FstackX%28d%29%20%7B%0A%20%20%20%20return%20d%2Ex%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FstackY%28d%29%20%7B%0A%20%20%20%20return%20d%2Ey%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FstackOut%28d%2C%20y0%2C%20y%29%20%7B%0A%20%20%20%20d%2Ey0%20%3D%20y0%3B%0A%20%20%20%20d%2Ey%20%3D%20y%3B%0A%20%20%7D%0A%20%20var%20d3%5Flayout%5FstackOrders%20%3D%20d3%2Emap%28%7B%0A%20%20%20%20%22inside%2Dout%22%3A%20function%28data%29%20%7B%0A%20%20%20%20%20%20var%20n%20%3D%20data%2Elength%2C%20i%2C%20j%2C%20max%20%3D%20data%2Emap%28d3%5Flayout%5FstackMaxIndex%29%2C%20sums%20%3D%20data%2Emap%28d3%5Flayout%5FstackReduceSum%29%2C%20index%20%3D%20d3%2Erange%28n%29%2Esort%28function%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20%20%20return%20max%5Ba%5D%20%2D%20max%5Bb%5D%3B%0A%20%20%20%20%20%20%7D%29%2C%20top%20%3D%200%2C%20bottom%20%3D%200%2C%20tops%20%3D%20%5B%5D%2C%20bottoms%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20j%20%3D%20index%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28top%20%3C%20bottom%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20top%20%2B%3D%20sums%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20tops%2Epush%28j%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20bottom%20%2B%3D%20sums%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20bottoms%2Epush%28j%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20bottoms%2Ereverse%28%29%2Econcat%28tops%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20reverse%3A%20function%28data%29%20%7B%0A%20%20%20%20%20%20return%20d3%2Erange%28data%2Elength%29%2Ereverse%28%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22default%22%3A%20d3%5Flayout%5FstackOrderDefault%0A%20%20%7D%29%3B%0A%20%20var%20d3%5Flayout%5FstackOffsets%20%3D%20d3%2Emap%28%7B%0A%20%20%20%20silhouette%3A%20function%28data%29%20%7B%0A%20%20%20%20%20%20var%20n%20%3D%20data%2Elength%2C%20m%20%3D%20data%5B0%5D%2Elength%2C%20sums%20%3D%20%5B%5D%2C%20max%20%3D%200%2C%20i%2C%20j%2C%20o%2C%20y0%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20%28j%20%3D%200%3B%20j%20%3C%20m%3B%20%2B%2Bj%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20o%20%3D%200%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20o%20%2B%3D%20data%5Bi%5D%5Bj%5D%5B1%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28o%20%3E%20max%29%20max%20%3D%20o%3B%0A%20%20%20%20%20%20%20%20sums%2Epush%28o%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20%28j%20%3D%200%3B%20j%20%3C%20m%3B%20%2B%2Bj%29%20%7B%0A%20%20%20%20%20%20%20%20y0%5Bj%5D%20%3D%20%28max%20%2D%20sums%5Bj%5D%29%20%2F%202%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20y0%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20wiggle%3A%20function%28data%29%20%7B%0A%20%20%20%20%20%20var%20n%20%3D%20data%2Elength%2C%20x%20%3D%20data%5B0%5D%2C%20m%20%3D%20x%2Elength%2C%20i%2C%20j%2C%20k%2C%20s1%2C%20s2%2C%20s3%2C%20dx%2C%20o%2C%20o0%2C%20y0%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20y0%5B0%5D%20%3D%20o%20%3D%20o0%20%3D%200%3B%0A%20%20%20%20%20%20for%20%28j%20%3D%201%3B%20j%20%3C%20m%3B%20%2B%2Bj%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20s1%20%3D%200%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20s1%20%2B%3D%20data%5Bi%5D%5Bj%5D%5B1%5D%3B%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20s2%20%3D%200%2C%20dx%20%3D%20x%5Bj%5D%5B0%5D%20%2D%20x%5Bj%20%2D%201%5D%5B0%5D%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20%28k%20%3D%200%2C%20s3%20%3D%20%28data%5Bi%5D%5Bj%5D%5B1%5D%20%2D%20data%5Bi%5D%5Bj%20%2D%201%5D%5B1%5D%29%20%2F%20%282%20%2A%20dx%29%3B%20k%20%3C%20i%3B%20%2B%2Bk%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20s3%20%2B%3D%20%28data%5Bk%5D%5Bj%5D%5B1%5D%20%2D%20data%5Bk%5D%5Bj%20%2D%201%5D%5B1%5D%29%20%2F%20dx%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20s2%20%2B%3D%20s3%20%2A%20data%5Bi%5D%5Bj%5D%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20y0%5Bj%5D%20%3D%20o%20%2D%3D%20s1%20%3F%20s2%20%2F%20s1%20%2A%20dx%20%3A%200%3B%0A%20%20%20%20%20%20%20%20if%20%28o%20%3C%20o0%29%20o0%20%3D%20o%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20%28j%20%3D%200%3B%20j%20%3C%20m%3B%20%2B%2Bj%29%20y0%5Bj%5D%20%2D%3D%20o0%3B%0A%20%20%20%20%20%20return%20y0%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20expand%3A%20function%28data%29%20%7B%0A%20%20%20%20%20%20var%20n%20%3D%20data%2Elength%2C%20m%20%3D%20data%5B0%5D%2Elength%2C%20k%20%3D%201%20%2F%20n%2C%20i%2C%20j%2C%20o%2C%20y0%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20%28j%20%3D%200%3B%20j%20%3C%20m%3B%20%2B%2Bj%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20o%20%3D%200%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20o%20%2B%3D%20data%5Bi%5D%5Bj%5D%5B1%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28o%29%20for%20%28i%20%3D%200%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20data%5Bi%5D%5Bj%5D%5B1%5D%20%2F%3D%20o%3B%20else%20for%20%28i%20%3D%200%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20data%5Bi%5D%5Bj%5D%5B1%5D%20%3D%20k%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20%28j%20%3D%200%3B%20j%20%3C%20m%3B%20%2B%2Bj%29%20y0%5Bj%5D%20%3D%200%3B%0A%20%20%20%20%20%20return%20y0%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20zero%3A%20d3%5Flayout%5FstackOffsetZero%0A%20%20%7D%29%3B%0A%20%20function%20d3%5Flayout%5FstackOrderDefault%28data%29%20%7B%0A%20%20%20%20return%20d3%2Erange%28data%2Elength%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FstackOffsetZero%28data%29%20%7B%0A%20%20%20%20var%20j%20%3D%20%2D1%2C%20m%20%3D%20data%5B0%5D%2Elength%2C%20y0%20%3D%20%5B%5D%3B%0A%20%20%20%20while%20%28%2B%2Bj%20%3C%20m%29%20y0%5Bj%5D%20%3D%200%3B%0A%20%20%20%20return%20y0%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FstackMaxIndex%28array%29%20%7B%0A%20%20%20%20var%20i%20%3D%201%2C%20j%20%3D%200%2C%20v%20%3D%20array%5B0%5D%5B1%5D%2C%20k%2C%20n%20%3D%20array%2Elength%3B%0A%20%20%20%20for%20%28%3Bi%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20if%20%28%28k%20%3D%20array%5Bi%5D%5B1%5D%29%20%3E%20v%29%20%7B%0A%20%20%20%20%20%20%20%20j%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20v%20%3D%20k%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20j%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FstackReduceSum%28d%29%20%7B%0A%20%20%20%20return%20d%2Ereduce%28d3%5Flayout%5FstackSum%2C%200%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FstackSum%28p%2C%20d%29%20%7B%0A%20%20%20%20return%20p%20%2B%20d%5B1%5D%3B%0A%20%20%7D%0A%20%20d3%2Elayout%2Ehistogram%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20frequency%20%3D%20true%2C%20valuer%20%3D%20Number%2C%20ranger%20%3D%20d3%5Flayout%5FhistogramRange%2C%20binner%20%3D%20d3%5Flayout%5FhistogramBinSturges%3B%0A%20%20%20%20function%20histogram%28data%2C%20i%29%20%7B%0A%20%20%20%20%20%20var%20bins%20%3D%20%5B%5D%2C%20values%20%3D%20data%2Emap%28valuer%2C%20this%29%2C%20range%20%3D%20ranger%2Ecall%28this%2C%20values%2C%20i%29%2C%20thresholds%20%3D%20binner%2Ecall%28this%2C%20range%2C%20values%2C%20i%29%2C%20bin%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20values%2Elength%2C%20m%20%3D%20thresholds%2Elength%20%2D%201%2C%20k%20%3D%20frequency%20%3F%201%20%3A%201%20%2F%20n%2C%20x%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20m%29%20%7B%0A%20%20%20%20%20%20%20%20bin%20%3D%20bins%5Bi%5D%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20bin%2Edx%20%3D%20thresholds%5Bi%20%2B%201%5D%20%2D%20%28bin%2Ex%20%3D%20thresholds%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20bin%2Ey%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28m%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20i%20%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20x%20%3D%20values%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28x%20%3E%3D%20range%5B0%5D%20%26%26%20x%20%3C%3D%20range%5B1%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20bin%20%3D%20bins%5Bd3%2Ebisect%28thresholds%2C%20x%2C%201%2C%20m%29%20%2D%201%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bin%2Ey%20%2B%3D%20k%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bin%2Epush%28data%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20bins%3B%0A%20%20%20%20%7D%0A%20%20%20%20histogram%2Evalue%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20valuer%3B%0A%20%20%20%20%20%20valuer%20%3D%20x%3B%0A%20%20%20%20%20%20return%20histogram%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20histogram%2Erange%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20ranger%3B%0A%20%20%20%20%20%20ranger%20%3D%20d3%5Ffunctor%28x%29%3B%0A%20%20%20%20%20%20return%20histogram%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20histogram%2Ebins%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20binner%3B%0A%20%20%20%20%20%20binner%20%3D%20typeof%20x%20%3D%3D%3D%20%22number%22%20%3F%20function%28range%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Flayout%5FhistogramBinFixed%28range%2C%20x%29%3B%0A%20%20%20%20%20%20%7D%20%3A%20d3%5Ffunctor%28x%29%3B%0A%20%20%20%20%20%20return%20histogram%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20histogram%2Efrequency%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20frequency%3B%0A%20%20%20%20%20%20frequency%20%3D%20%21%21x%3B%0A%20%20%20%20%20%20return%20histogram%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20histogram%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Flayout%5FhistogramBinSturges%28range%2C%20values%29%20%7B%0A%20%20%20%20return%20d3%5Flayout%5FhistogramBinFixed%28range%2C%20Math%2Eceil%28Math%2Elog%28values%2Elength%29%20%2F%20Math%2ELN2%20%2B%201%29%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FhistogramBinFixed%28range%2C%20n%29%20%7B%0A%20%20%20%20var%20x%20%3D%20%2D1%2C%20b%20%3D%20%2Brange%5B0%5D%2C%20m%20%3D%20%28range%5B1%5D%20%2D%20b%29%20%2F%20n%2C%20f%20%3D%20%5B%5D%3B%0A%20%20%20%20while%20%28%2B%2Bx%20%3C%3D%20n%29%20f%5Bx%5D%20%3D%20m%20%2A%20x%20%2B%20b%3B%0A%20%20%20%20return%20f%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FhistogramRange%28values%29%20%7B%0A%20%20%20%20return%20%5B%20d3%2Emin%28values%29%2C%20d3%2Emax%28values%29%20%5D%3B%0A%20%20%7D%0A%20%20d3%2Elayout%2Epack%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20hierarchy%20%3D%20d3%2Elayout%2Ehierarchy%28%29%2Esort%28d3%5Flayout%5FpackSort%29%2C%20padding%20%3D%200%2C%20size%20%3D%20%5B%201%2C%201%20%5D%2C%20radius%3B%0A%20%20%20%20function%20pack%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20var%20nodes%20%3D%20hierarchy%2Ecall%28this%2C%20d%2C%20i%29%2C%20root%20%3D%20nodes%5B0%5D%2C%20w%20%3D%20size%5B0%5D%2C%20h%20%3D%20size%5B1%5D%2C%20r%20%3D%20radius%20%3D%3D%20null%20%3F%20Math%2Esqrt%20%3A%20typeof%20radius%20%3D%3D%3D%20%22function%22%20%3F%20radius%20%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20radius%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20root%2Ex%20%3D%20root%2Ey%20%3D%200%3B%0A%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitAfter%28root%2C%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20d%2Er%20%3D%20%2Br%28d%2Evalue%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitAfter%28root%2C%20d3%5Flayout%5FpackSiblings%29%3B%0A%20%20%20%20%20%20if%20%28padding%29%20%7B%0A%20%20%20%20%20%20%20%20var%20dr%20%3D%20padding%20%2A%20%28radius%20%3F%201%20%3A%20Math%2Emax%282%20%2A%20root%2Er%20%2F%20w%2C%202%20%2A%20root%2Er%20%2F%20h%29%29%20%2F%202%3B%0A%20%20%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitAfter%28root%2C%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20d%2Er%20%2B%3D%20dr%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitAfter%28root%2C%20d3%5Flayout%5FpackSiblings%29%3B%0A%20%20%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitAfter%28root%2C%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20d%2Er%20%2D%3D%20dr%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20d3%5Flayout%5FpackTransform%28root%2C%20w%20%2F%202%2C%20h%20%2F%202%2C%20radius%20%3F%201%20%3A%201%20%2F%20Math%2Emax%282%20%2A%20root%2Er%20%2F%20w%2C%202%20%2A%20root%2Er%20%2F%20h%29%29%3B%0A%20%20%20%20%20%20return%20nodes%3B%0A%20%20%20%20%7D%0A%20%20%20%20pack%2Esize%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20size%3B%0A%20%20%20%20%20%20size%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20pack%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20pack%2Eradius%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20radius%3B%0A%20%20%20%20%20%20radius%20%3D%20%5F%20%3D%3D%20null%20%7C%7C%20typeof%20%5F%20%3D%3D%3D%20%22function%22%20%3F%20%5F%20%3A%20%2B%5F%3B%0A%20%20%20%20%20%20return%20pack%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20pack%2Epadding%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20padding%3B%0A%20%20%20%20%20%20padding%20%3D%20%2B%5F%3B%0A%20%20%20%20%20%20return%20pack%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20d3%5Flayout%5FhierarchyRebind%28pack%2C%20hierarchy%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Flayout%5FpackSort%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20a%2Evalue%20%2D%20b%2Evalue%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FpackInsert%28a%2C%20b%29%20%7B%0A%20%20%20%20var%20c%20%3D%20a%2E%5Fpack%5Fnext%3B%0A%20%20%20%20a%2E%5Fpack%5Fnext%20%3D%20b%3B%0A%20%20%20%20b%2E%5Fpack%5Fprev%20%3D%20a%3B%0A%20%20%20%20b%2E%5Fpack%5Fnext%20%3D%20c%3B%0A%20%20%20%20c%2E%5Fpack%5Fprev%20%3D%20b%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FpackSplice%28a%2C%20b%29%20%7B%0A%20%20%20%20a%2E%5Fpack%5Fnext%20%3D%20b%3B%0A%20%20%20%20b%2E%5Fpack%5Fprev%20%3D%20a%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FpackIntersects%28a%2C%20b%29%20%7B%0A%20%20%20%20var%20dx%20%3D%20b%2Ex%20%2D%20a%2Ex%2C%20dy%20%3D%20b%2Ey%20%2D%20a%2Ey%2C%20dr%20%3D%20a%2Er%20%2B%20b%2Er%3B%0A%20%20%20%20return%20%2E999%20%2A%20dr%20%2A%20dr%20%3E%20dx%20%2A%20dx%20%2B%20dy%20%2A%20dy%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FpackSiblings%28node%29%20%7B%0A%20%20%20%20if%20%28%21%28nodes%20%3D%20node%2Echildren%29%20%7C%7C%20%21%28n%20%3D%20nodes%2Elength%29%29%20return%3B%0A%20%20%20%20var%20nodes%2C%20xMin%20%3D%20Infinity%2C%20xMax%20%3D%20%2DInfinity%2C%20yMin%20%3D%20Infinity%2C%20yMax%20%3D%20%2DInfinity%2C%20a%2C%20b%2C%20c%2C%20i%2C%20j%2C%20k%2C%20n%3B%0A%20%20%20%20function%20bound%28node%29%20%7B%0A%20%20%20%20%20%20xMin%20%3D%20Math%2Emin%28node%2Ex%20%2D%20node%2Er%2C%20xMin%29%3B%0A%20%20%20%20%20%20xMax%20%3D%20Math%2Emax%28node%2Ex%20%2B%20node%2Er%2C%20xMax%29%3B%0A%20%20%20%20%20%20yMin%20%3D%20Math%2Emin%28node%2Ey%20%2D%20node%2Er%2C%20yMin%29%3B%0A%20%20%20%20%20%20yMax%20%3D%20Math%2Emax%28node%2Ey%20%2B%20node%2Er%2C%20yMax%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20nodes%2EforEach%28d3%5Flayout%5FpackLink%29%3B%0A%20%20%20%20a%20%3D%20nodes%5B0%5D%3B%0A%20%20%20%20a%2Ex%20%3D%20%2Da%2Er%3B%0A%20%20%20%20a%2Ey%20%3D%200%3B%0A%20%20%20%20bound%28a%29%3B%0A%20%20%20%20if%20%28n%20%3E%201%29%20%7B%0A%20%20%20%20%20%20b%20%3D%20nodes%5B1%5D%3B%0A%20%20%20%20%20%20b%2Ex%20%3D%20b%2Er%3B%0A%20%20%20%20%20%20b%2Ey%20%3D%200%3B%0A%20%20%20%20%20%20bound%28b%29%3B%0A%20%20%20%20%20%20if%20%28n%20%3E%202%29%20%7B%0A%20%20%20%20%20%20%20%20c%20%3D%20nodes%5B2%5D%3B%0A%20%20%20%20%20%20%20%20d3%5Flayout%5FpackPlace%28a%2C%20b%2C%20c%29%3B%0A%20%20%20%20%20%20%20%20bound%28c%29%3B%0A%20%20%20%20%20%20%20%20d3%5Flayout%5FpackInsert%28a%2C%20c%29%3B%0A%20%20%20%20%20%20%20%20a%2E%5Fpack%5Fprev%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20d3%5Flayout%5FpackInsert%28c%2C%20b%29%3B%0A%20%20%20%20%20%20%20%20b%20%3D%20a%2E%5Fpack%5Fnext%3B%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%203%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20d3%5Flayout%5FpackPlace%28a%2C%20b%2C%20c%20%3D%20nodes%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20var%20isect%20%3D%200%2C%20s1%20%3D%201%2C%20s2%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20for%20%28j%20%3D%20b%2E%5Fpack%5Fnext%3B%20j%20%21%3D%3D%20b%3B%20j%20%3D%20j%2E%5Fpack%5Fnext%2C%20s1%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28d3%5Flayout%5FpackIntersects%28j%2C%20c%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20isect%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28isect%20%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28k%20%3D%20a%2E%5Fpack%5Fprev%3B%20k%20%21%3D%3D%20j%2E%5Fpack%5Fprev%3B%20k%20%3D%20k%2E%5Fpack%5Fprev%2C%20s2%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28d3%5Flayout%5FpackIntersects%28k%2C%20c%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28isect%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28s1%20%3C%20s2%20%7C%7C%20s1%20%3D%3D%20s2%20%26%26%20b%2Er%20%3C%20a%2Er%29%20d3%5Flayout%5FpackSplice%28a%2C%20b%20%3D%20j%29%3B%20else%20d3%5Flayout%5FpackSplice%28a%20%3D%20k%2C%20b%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20i%2D%2D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20d3%5Flayout%5FpackInsert%28a%2C%20c%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bound%28c%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20var%20cx%20%3D%20%28xMin%20%2B%20xMax%29%20%2F%202%2C%20cy%20%3D%20%28yMin%20%2B%20yMax%29%20%2F%202%2C%20cr%20%3D%200%3B%0A%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20c%20%3D%20nodes%5Bi%5D%3B%0A%20%20%20%20%20%20c%2Ex%20%2D%3D%20cx%3B%0A%20%20%20%20%20%20c%2Ey%20%2D%3D%20cy%3B%0A%20%20%20%20%20%20cr%20%3D%20Math%2Emax%28cr%2C%20c%2Er%20%2B%20Math%2Esqrt%28c%2Ex%20%2A%20c%2Ex%20%2B%20c%2Ey%20%2A%20c%2Ey%29%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20node%2Er%20%3D%20cr%3B%0A%20%20%20%20nodes%2EforEach%28d3%5Flayout%5FpackUnlink%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FpackLink%28node%29%20%7B%0A%20%20%20%20node%2E%5Fpack%5Fnext%20%3D%20node%2E%5Fpack%5Fprev%20%3D%20node%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FpackUnlink%28node%29%20%7B%0A%20%20%20%20delete%20node%2E%5Fpack%5Fnext%3B%0A%20%20%20%20delete%20node%2E%5Fpack%5Fprev%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FpackTransform%28node%2C%20x%2C%20y%2C%20k%29%20%7B%0A%20%20%20%20var%20children%20%3D%20node%2Echildren%3B%0A%20%20%20%20node%2Ex%20%3D%20x%20%2B%3D%20k%20%2A%20node%2Ex%3B%0A%20%20%20%20node%2Ey%20%3D%20y%20%2B%3D%20k%20%2A%20node%2Ey%3B%0A%20%20%20%20node%2Er%20%2A%3D%20k%3B%0A%20%20%20%20if%20%28children%29%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20children%2Elength%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20d3%5Flayout%5FpackTransform%28children%5Bi%5D%2C%20x%2C%20y%2C%20k%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FpackPlace%28a%2C%20b%2C%20c%29%20%7B%0A%20%20%20%20var%20db%20%3D%20a%2Er%20%2B%20c%2Er%2C%20dx%20%3D%20b%2Ex%20%2D%20a%2Ex%2C%20dy%20%3D%20b%2Ey%20%2D%20a%2Ey%3B%0A%20%20%20%20if%20%28db%20%26%26%20%28dx%20%7C%7C%20dy%29%29%20%7B%0A%20%20%20%20%20%20var%20da%20%3D%20b%2Er%20%2B%20c%2Er%2C%20dc%20%3D%20dx%20%2A%20dx%20%2B%20dy%20%2A%20dy%3B%0A%20%20%20%20%20%20da%20%2A%3D%20da%3B%0A%20%20%20%20%20%20db%20%2A%3D%20db%3B%0A%20%20%20%20%20%20var%20x%20%3D%20%2E5%20%2B%20%28db%20%2D%20da%29%20%2F%20%282%20%2A%20dc%29%2C%20y%20%3D%20Math%2Esqrt%28Math%2Emax%280%2C%202%20%2A%20da%20%2A%20%28db%20%2B%20dc%29%20%2D%20%28db%20%2D%3D%20dc%29%20%2A%20db%20%2D%20da%20%2A%20da%29%29%20%2F%20%282%20%2A%20dc%29%3B%0A%20%20%20%20%20%20c%2Ex%20%3D%20a%2Ex%20%2B%20x%20%2A%20dx%20%2B%20y%20%2A%20dy%3B%0A%20%20%20%20%20%20c%2Ey%20%3D%20a%2Ey%20%2B%20x%20%2A%20dy%20%2D%20y%20%2A%20dx%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20c%2Ex%20%3D%20a%2Ex%20%2B%20db%3B%0A%20%20%20%20%20%20c%2Ey%20%3D%20a%2Ey%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20d3%2Elayout%2Etree%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20hierarchy%20%3D%20d3%2Elayout%2Ehierarchy%28%29%2Esort%28null%29%2Evalue%28null%29%2C%20separation%20%3D%20d3%5Flayout%5FtreeSeparation%2C%20size%20%3D%20%5B%201%2C%201%20%5D%2C%20nodeSize%20%3D%20null%3B%0A%20%20%20%20function%20tree%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20var%20nodes%20%3D%20hierarchy%2Ecall%28this%2C%20d%2C%20i%29%2C%20root0%20%3D%20nodes%5B0%5D%2C%20root1%20%3D%20wrapTree%28root0%29%3B%0A%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitAfter%28root1%2C%20firstWalk%29%2C%20root1%2Eparent%2Em%20%3D%20%2Droot1%2Ez%3B%0A%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitBefore%28root1%2C%20secondWalk%29%3B%0A%20%20%20%20%20%20if%20%28nodeSize%29%20d3%5Flayout%5FhierarchyVisitBefore%28root0%2C%20sizeNode%29%3B%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20left%20%3D%20root0%2C%20right%20%3D%20root0%2C%20bottom%20%3D%20root0%3B%0A%20%20%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitBefore%28root0%2C%20function%28node%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28node%2Ex%20%3C%20left%2Ex%29%20left%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28node%2Ex%20%3E%20right%2Ex%29%20right%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28node%2Edepth%20%3E%20bottom%2Edepth%29%20bottom%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20var%20tx%20%3D%20separation%28left%2C%20right%29%20%2F%202%20%2D%20left%2Ex%2C%20kx%20%3D%20size%5B0%5D%20%2F%20%28right%2Ex%20%2B%20separation%28right%2C%20left%29%20%2F%202%20%2B%20tx%29%2C%20ky%20%3D%20size%5B1%5D%20%2F%20%28bottom%2Edepth%20%7C%7C%201%29%3B%0A%20%20%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitBefore%28root0%2C%20function%28node%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%2Ex%20%3D%20%28node%2Ex%20%2B%20tx%29%20%2A%20kx%3B%0A%20%20%20%20%20%20%20%20%20%20node%2Ey%20%3D%20node%2Edepth%20%2A%20ky%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20nodes%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20wrapTree%28root0%29%20%7B%0A%20%20%20%20%20%20var%20root1%20%3D%20%7B%0A%20%20%20%20%20%20%20%20A%3A%20null%2C%0A%20%20%20%20%20%20%20%20children%3A%20%5B%20root0%20%5D%0A%20%20%20%20%20%20%7D%2C%20queue%20%3D%20%5B%20root1%20%5D%2C%20node1%3B%0A%20%20%20%20%20%20while%20%28%28node1%20%3D%20queue%2Epop%28%29%29%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20children%20%3D%20node1%2Echildren%2C%20child%2C%20i%20%3D%200%2C%20n%20%3D%20children%2Elength%3B%20i%20%3C%20n%3B%20%2B%2Bi%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20queue%2Epush%28%28children%5Bi%5D%20%3D%20child%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%5F%3A%20children%5Bi%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20parent%3A%20node1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20children%3A%20%28child%20%3D%20children%5Bi%5D%2Echildren%29%20%26%26%20child%2Eslice%28%29%20%7C%7C%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20z%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20m%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20c%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20s%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20t%3A%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20i%3A%20i%0A%20%20%20%20%20%20%20%20%20%20%7D%29%2Ea%20%3D%20child%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20root1%2Echildren%5B0%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20firstWalk%28v%29%20%7B%0A%20%20%20%20%20%20var%20children%20%3D%20v%2Echildren%2C%20siblings%20%3D%20v%2Eparent%2Echildren%2C%20w%20%3D%20v%2Ei%20%3F%20siblings%5Bv%2Ei%20%2D%201%5D%20%3A%20null%3B%0A%20%20%20%20%20%20if%20%28children%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20d3%5Flayout%5FtreeShift%28v%29%3B%0A%20%20%20%20%20%20%20%20var%20midpoint%20%3D%20%28children%5B0%5D%2Ez%20%2B%20children%5Bchildren%2Elength%20%2D%201%5D%2Ez%29%20%2F%202%3B%0A%20%20%20%20%20%20%20%20if%20%28w%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20v%2Ez%20%3D%20w%2Ez%20%2B%20separation%28v%2E%5F%2C%20w%2E%5F%29%3B%0A%20%20%20%20%20%20%20%20%20%20v%2Em%20%3D%20v%2Ez%20%2D%20midpoint%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20v%2Ez%20%3D%20midpoint%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20%28w%29%20%7B%0A%20%20%20%20%20%20%20%20v%2Ez%20%3D%20w%2Ez%20%2B%20separation%28v%2E%5F%2C%20w%2E%5F%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20v%2Eparent%2EA%20%3D%20apportion%28v%2C%20w%2C%20v%2Eparent%2EA%20%7C%7C%20siblings%5B0%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20secondWalk%28v%29%20%7B%0A%20%20%20%20%20%20v%2E%5F%2Ex%20%3D%20v%2Ez%20%2B%20v%2Eparent%2Em%3B%0A%20%20%20%20%20%20v%2Em%20%2B%3D%20v%2Eparent%2Em%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20apportion%28v%2C%20w%2C%20ancestor%29%20%7B%0A%20%20%20%20%20%20if%20%28w%29%20%7B%0A%20%20%20%20%20%20%20%20var%20vip%20%3D%20v%2C%20vop%20%3D%20v%2C%20vim%20%3D%20w%2C%20vom%20%3D%20vip%2Eparent%2Echildren%5B0%5D%2C%20sip%20%3D%20vip%2Em%2C%20sop%20%3D%20vop%2Em%2C%20sim%20%3D%20vim%2Em%2C%20som%20%3D%20vom%2Em%2C%20shift%3B%0A%20%20%20%20%20%20%20%20while%20%28vim%20%3D%20d3%5Flayout%5FtreeRight%28vim%29%2C%20vip%20%3D%20d3%5Flayout%5FtreeLeft%28vip%29%2C%20vim%20%26%26%20vip%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20vom%20%3D%20d3%5Flayout%5FtreeLeft%28vom%29%3B%0A%20%20%20%20%20%20%20%20%20%20vop%20%3D%20d3%5Flayout%5FtreeRight%28vop%29%3B%0A%20%20%20%20%20%20%20%20%20%20vop%2Ea%20%3D%20v%3B%0A%20%20%20%20%20%20%20%20%20%20shift%20%3D%20vim%2Ez%20%2B%20sim%20%2D%20vip%2Ez%20%2D%20sip%20%2B%20separation%28vim%2E%5F%2C%20vip%2E%5F%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28shift%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20d3%5Flayout%5FtreeMove%28d3%5Flayout%5FtreeAncestor%28vim%2C%20v%2C%20ancestor%29%2C%20v%2C%20shift%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sip%20%2B%3D%20shift%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sop%20%2B%3D%20shift%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20sim%20%2B%3D%20vim%2Em%3B%0A%20%20%20%20%20%20%20%20%20%20sip%20%2B%3D%20vip%2Em%3B%0A%20%20%20%20%20%20%20%20%20%20som%20%2B%3D%20vom%2Em%3B%0A%20%20%20%20%20%20%20%20%20%20sop%20%2B%3D%20vop%2Em%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28vim%20%26%26%20%21d3%5Flayout%5FtreeRight%28vop%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20vop%2Et%20%3D%20vim%3B%0A%20%20%20%20%20%20%20%20%20%20vop%2Em%20%2B%3D%20sim%20%2D%20sop%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28vip%20%26%26%20%21d3%5Flayout%5FtreeLeft%28vom%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20vom%2Et%20%3D%20vip%3B%0A%20%20%20%20%20%20%20%20%20%20vom%2Em%20%2B%3D%20sip%20%2D%20som%3B%0A%20%20%20%20%20%20%20%20%20%20ancestor%20%3D%20v%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20ancestor%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20sizeNode%28node%29%20%7B%0A%20%20%20%20%20%20node%2Ex%20%2A%3D%20size%5B0%5D%3B%0A%20%20%20%20%20%20node%2Ey%20%3D%20node%2Edepth%20%2A%20size%5B1%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20tree%2Eseparation%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20separation%3B%0A%20%20%20%20%20%20separation%20%3D%20x%3B%0A%20%20%20%20%20%20return%20tree%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20tree%2Esize%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20nodeSize%20%3F%20null%20%3A%20size%3B%0A%20%20%20%20%20%20nodeSize%20%3D%20%28size%20%3D%20x%29%20%3D%3D%20null%20%3F%20sizeNode%20%3A%20null%3B%0A%20%20%20%20%20%20return%20tree%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20tree%2EnodeSize%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20nodeSize%20%3F%20size%20%3A%20null%3B%0A%20%20%20%20%20%20nodeSize%20%3D%20%28size%20%3D%20x%29%20%3D%3D%20null%20%3F%20null%20%3A%20sizeNode%3B%0A%20%20%20%20%20%20return%20tree%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20d3%5Flayout%5FhierarchyRebind%28tree%2C%20hierarchy%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Flayout%5FtreeSeparation%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20a%2Eparent%20%3D%3D%20b%2Eparent%20%3F%201%20%3A%202%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FtreeLeft%28v%29%20%7B%0A%20%20%20%20var%20children%20%3D%20v%2Echildren%3B%0A%20%20%20%20return%20children%2Elength%20%3F%20children%5B0%5D%20%3A%20v%2Et%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FtreeRight%28v%29%20%7B%0A%20%20%20%20var%20children%20%3D%20v%2Echildren%2C%20n%3B%0A%20%20%20%20return%20%28n%20%3D%20children%2Elength%29%20%3F%20children%5Bn%20%2D%201%5D%20%3A%20v%2Et%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FtreeMove%28wm%2C%20wp%2C%20shift%29%20%7B%0A%20%20%20%20var%20change%20%3D%20shift%20%2F%20%28wp%2Ei%20%2D%20wm%2Ei%29%3B%0A%20%20%20%20wp%2Ec%20%2D%3D%20change%3B%0A%20%20%20%20wp%2Es%20%2B%3D%20shift%3B%0A%20%20%20%20wm%2Ec%20%2B%3D%20change%3B%0A%20%20%20%20wp%2Ez%20%2B%3D%20shift%3B%0A%20%20%20%20wp%2Em%20%2B%3D%20shift%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FtreeShift%28v%29%20%7B%0A%20%20%20%20var%20shift%20%3D%200%2C%20change%20%3D%200%2C%20children%20%3D%20v%2Echildren%2C%20i%20%3D%20children%2Elength%2C%20w%3B%0A%20%20%20%20while%20%28%2D%2Di%20%3E%3D%200%29%20%7B%0A%20%20%20%20%20%20w%20%3D%20children%5Bi%5D%3B%0A%20%20%20%20%20%20w%2Ez%20%2B%3D%20shift%3B%0A%20%20%20%20%20%20w%2Em%20%2B%3D%20shift%3B%0A%20%20%20%20%20%20shift%20%2B%3D%20w%2Es%20%2B%20%28change%20%2B%3D%20w%2Ec%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FtreeAncestor%28vim%2C%20v%2C%20ancestor%29%20%7B%0A%20%20%20%20return%20vim%2Ea%2Eparent%20%3D%3D%3D%20v%2Eparent%20%3F%20vim%2Ea%20%3A%20ancestor%3B%0A%20%20%7D%0A%20%20d3%2Elayout%2Ecluster%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20hierarchy%20%3D%20d3%2Elayout%2Ehierarchy%28%29%2Esort%28null%29%2Evalue%28null%29%2C%20separation%20%3D%20d3%5Flayout%5FtreeSeparation%2C%20size%20%3D%20%5B%201%2C%201%20%5D%2C%20nodeSize%20%3D%20false%3B%0A%20%20%20%20function%20cluster%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20var%20nodes%20%3D%20hierarchy%2Ecall%28this%2C%20d%2C%20i%29%2C%20root%20%3D%20nodes%5B0%5D%2C%20previousNode%2C%20x%20%3D%200%3B%0A%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitAfter%28root%2C%20function%28node%29%20%7B%0A%20%20%20%20%20%20%20%20var%20children%20%3D%20node%2Echildren%3B%0A%20%20%20%20%20%20%20%20if%20%28children%20%26%26%20children%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%2Ex%20%3D%20d3%5Flayout%5FclusterX%28children%29%3B%0A%20%20%20%20%20%20%20%20%20%20node%2Ey%20%3D%20d3%5Flayout%5FclusterY%28children%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%2Ex%20%3D%20previousNode%20%3F%20x%20%2B%3D%20separation%28node%2C%20previousNode%29%20%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20node%2Ey%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20previousNode%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20var%20left%20%3D%20d3%5Flayout%5FclusterLeft%28root%29%2C%20right%20%3D%20d3%5Flayout%5FclusterRight%28root%29%2C%20x0%20%3D%20left%2Ex%20%2D%20separation%28left%2C%20right%29%20%2F%202%2C%20x1%20%3D%20right%2Ex%20%2B%20separation%28right%2C%20left%29%20%2F%202%3B%0A%20%20%20%20%20%20d3%5Flayout%5FhierarchyVisitAfter%28root%2C%20nodeSize%20%3F%20function%28node%29%20%7B%0A%20%20%20%20%20%20%20%20node%2Ex%20%3D%20%28node%2Ex%20%2D%20root%2Ex%29%20%2A%20size%5B0%5D%3B%0A%20%20%20%20%20%20%20%20node%2Ey%20%3D%20%28root%2Ey%20%2D%20node%2Ey%29%20%2A%20size%5B1%5D%3B%0A%20%20%20%20%20%20%7D%20%3A%20function%28node%29%20%7B%0A%20%20%20%20%20%20%20%20node%2Ex%20%3D%20%28node%2Ex%20%2D%20x0%29%20%2F%20%28x1%20%2D%20x0%29%20%2A%20size%5B0%5D%3B%0A%20%20%20%20%20%20%20%20node%2Ey%20%3D%20%281%20%2D%20%28root%2Ey%20%3F%20node%2Ey%20%2F%20root%2Ey%20%3A%201%29%29%20%2A%20size%5B1%5D%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20return%20nodes%3B%0A%20%20%20%20%7D%0A%20%20%20%20cluster%2Eseparation%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20separation%3B%0A%20%20%20%20%20%20separation%20%3D%20x%3B%0A%20%20%20%20%20%20return%20cluster%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20cluster%2Esize%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20nodeSize%20%3F%20null%20%3A%20size%3B%0A%20%20%20%20%20%20nodeSize%20%3D%20%28size%20%3D%20x%29%20%3D%3D%20null%3B%0A%20%20%20%20%20%20return%20cluster%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20cluster%2EnodeSize%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20nodeSize%20%3F%20size%20%3A%20null%3B%0A%20%20%20%20%20%20nodeSize%20%3D%20%28size%20%3D%20x%29%20%21%3D%20null%3B%0A%20%20%20%20%20%20return%20cluster%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20d3%5Flayout%5FhierarchyRebind%28cluster%2C%20hierarchy%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Flayout%5FclusterY%28children%29%20%7B%0A%20%20%20%20return%201%20%2B%20d3%2Emax%28children%2C%20function%28child%29%20%7B%0A%20%20%20%20%20%20return%20child%2Ey%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FclusterX%28children%29%20%7B%0A%20%20%20%20return%20children%2Ereduce%28function%28x%2C%20child%29%20%7B%0A%20%20%20%20%20%20return%20x%20%2B%20child%2Ex%3B%0A%20%20%20%20%7D%2C%200%29%20%2F%20children%2Elength%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FclusterLeft%28node%29%20%7B%0A%20%20%20%20var%20children%20%3D%20node%2Echildren%3B%0A%20%20%20%20return%20children%20%26%26%20children%2Elength%20%3F%20d3%5Flayout%5FclusterLeft%28children%5B0%5D%29%20%3A%20node%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FclusterRight%28node%29%20%7B%0A%20%20%20%20var%20children%20%3D%20node%2Echildren%2C%20n%3B%0A%20%20%20%20return%20children%20%26%26%20%28n%20%3D%20children%2Elength%29%20%3F%20d3%5Flayout%5FclusterRight%28children%5Bn%20%2D%201%5D%29%20%3A%20node%3B%0A%20%20%7D%0A%20%20d3%2Elayout%2Etreemap%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20hierarchy%20%3D%20d3%2Elayout%2Ehierarchy%28%29%2C%20round%20%3D%20Math%2Eround%2C%20size%20%3D%20%5B%201%2C%201%20%5D%2C%20padding%20%3D%20null%2C%20pad%20%3D%20d3%5Flayout%5FtreemapPadNull%2C%20sticky%20%3D%20false%2C%20stickies%2C%20mode%20%3D%20%22squarify%22%2C%20ratio%20%3D%20%2E5%20%2A%20%281%20%2B%20Math%2Esqrt%285%29%29%3B%0A%20%20%20%20function%20scale%28children%2C%20k%29%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20children%2Elength%2C%20child%2C%20area%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20area%20%3D%20%28child%20%3D%20children%5Bi%5D%29%2Evalue%20%2A%20%28k%20%3C%200%20%3F%200%20%3A%20k%29%3B%0A%20%20%20%20%20%20%20%20child%2Earea%20%3D%20isNaN%28area%29%20%7C%7C%20area%20%3C%3D%200%20%3F%200%20%3A%20area%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20function%20squarify%28node%29%20%7B%0A%20%20%20%20%20%20var%20children%20%3D%20node%2Echildren%3B%0A%20%20%20%20%20%20if%20%28children%20%26%26%20children%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20var%20rect%20%3D%20pad%28node%29%2C%20row%20%3D%20%5B%5D%2C%20remaining%20%3D%20children%2Eslice%28%29%2C%20child%2C%20best%20%3D%20Infinity%2C%20score%2C%20u%20%3D%20mode%20%3D%3D%3D%20%22slice%22%20%3F%20rect%2Edx%20%3A%20mode%20%3D%3D%3D%20%22dice%22%20%3F%20rect%2Edy%20%3A%20mode%20%3D%3D%3D%20%22slice%2Ddice%22%20%3F%20node%2Edepth%20%26%201%20%3F%20rect%2Edy%20%3A%20rect%2Edx%20%3A%20Math%2Emin%28rect%2Edx%2C%20rect%2Edy%29%2C%20n%3B%0A%20%20%20%20%20%20%20%20scale%28remaining%2C%20rect%2Edx%20%2A%20rect%2Edy%20%2F%20node%2Evalue%29%3B%0A%20%20%20%20%20%20%20%20row%2Earea%20%3D%200%3B%0A%20%20%20%20%20%20%20%20while%20%28%28n%20%3D%20remaining%2Elength%29%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20row%2Epush%28child%20%3D%20remaining%5Bn%20%2D%201%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20row%2Earea%20%2B%3D%20child%2Earea%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28mode%20%21%3D%3D%20%22squarify%22%20%7C%7C%20%28score%20%3D%20worst%28row%2C%20u%29%29%20%3C%3D%20best%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20remaining%2Epop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20best%20%3D%20score%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20row%2Earea%20%2D%3D%20row%2Epop%28%29%2Earea%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20position%28row%2C%20u%2C%20rect%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20u%20%3D%20Math%2Emin%28rect%2Edx%2C%20rect%2Edy%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20row%2Elength%20%3D%20row%2Earea%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20best%20%3D%20Infinity%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28row%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20position%28row%2C%20u%2C%20rect%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%20%20row%2Elength%20%3D%20row%2Earea%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20children%2EforEach%28squarify%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20function%20stickify%28node%29%20%7B%0A%20%20%20%20%20%20var%20children%20%3D%20node%2Echildren%3B%0A%20%20%20%20%20%20if%20%28children%20%26%26%20children%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20var%20rect%20%3D%20pad%28node%29%2C%20remaining%20%3D%20children%2Eslice%28%29%2C%20child%2C%20row%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20scale%28remaining%2C%20rect%2Edx%20%2A%20rect%2Edy%20%2F%20node%2Evalue%29%3B%0A%20%20%20%20%20%20%20%20row%2Earea%20%3D%200%3B%0A%20%20%20%20%20%20%20%20while%20%28child%20%3D%20remaining%2Epop%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20row%2Epush%28child%29%3B%0A%20%20%20%20%20%20%20%20%20%20row%2Earea%20%2B%3D%20child%2Earea%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28child%2Ez%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position%28row%2C%20child%2Ez%20%3F%20rect%2Edx%20%3A%20rect%2Edy%2C%20rect%2C%20%21remaining%2Elength%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20row%2Elength%20%3D%20row%2Earea%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20children%2EforEach%28stickify%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20function%20worst%28row%2C%20u%29%20%7B%0A%20%20%20%20%20%20var%20s%20%3D%20row%2Earea%2C%20r%2C%20rmax%20%3D%200%2C%20rmin%20%3D%20Infinity%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20row%2Elength%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21%28r%20%3D%20row%5Bi%5D%2Earea%29%29%20continue%3B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3C%20rmin%29%20rmin%20%3D%20r%3B%0A%20%20%20%20%20%20%20%20if%20%28r%20%3E%20rmax%29%20rmax%20%3D%20r%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20s%20%2A%3D%20s%3B%0A%20%20%20%20%20%20u%20%2A%3D%20u%3B%0A%20%20%20%20%20%20return%20s%20%3F%20Math%2Emax%28u%20%2A%20rmax%20%2A%20ratio%20%2F%20s%2C%20s%20%2F%20%28u%20%2A%20rmin%20%2A%20ratio%29%29%20%3A%20Infinity%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20position%28row%2C%20u%2C%20rect%2C%20flush%29%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20row%2Elength%2C%20x%20%3D%20rect%2Ex%2C%20y%20%3D%20rect%2Ey%2C%20v%20%3D%20u%20%3F%20round%28row%2Earea%20%2F%20u%29%20%3A%200%2C%20o%3B%0A%20%20%20%20%20%20if%20%28u%20%3D%3D%20rect%2Edx%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28flush%20%7C%7C%20v%20%3E%20rect%2Edy%29%20v%20%3D%20rect%2Edy%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%20%3D%20row%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20o%2Ex%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20o%2Ey%20%3D%20y%3B%0A%20%20%20%20%20%20%20%20%20%20o%2Edy%20%3D%20v%3B%0A%20%20%20%20%20%20%20%20%20%20x%20%2B%3D%20o%2Edx%20%3D%20Math%2Emin%28rect%2Ex%20%2B%20rect%2Edx%20%2D%20x%2C%20v%20%3F%20round%28o%2Earea%20%2F%20v%29%20%3A%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20o%2Ez%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20o%2Edx%20%2B%3D%20rect%2Ex%20%2B%20rect%2Edx%20%2D%20x%3B%0A%20%20%20%20%20%20%20%20rect%2Ey%20%2B%3D%20v%3B%0A%20%20%20%20%20%20%20%20rect%2Edy%20%2D%3D%20v%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20%28flush%20%7C%7C%20v%20%3E%20rect%2Edx%29%20v%20%3D%20rect%2Edx%3B%0A%20%20%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20o%20%3D%20row%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20o%2Ex%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20o%2Ey%20%3D%20y%3B%0A%20%20%20%20%20%20%20%20%20%20o%2Edx%20%3D%20v%3B%0A%20%20%20%20%20%20%20%20%20%20y%20%2B%3D%20o%2Edy%20%3D%20Math%2Emin%28rect%2Ey%20%2B%20rect%2Edy%20%2D%20y%2C%20v%20%3F%20round%28o%2Earea%20%2F%20v%29%20%3A%200%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20o%2Ez%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20o%2Edy%20%2B%3D%20rect%2Ey%20%2B%20rect%2Edy%20%2D%20y%3B%0A%20%20%20%20%20%20%20%20rect%2Ex%20%2B%3D%20v%3B%0A%20%20%20%20%20%20%20%20rect%2Edx%20%2D%3D%20v%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20function%20treemap%28d%29%20%7B%0A%20%20%20%20%20%20var%20nodes%20%3D%20stickies%20%7C%7C%20hierarchy%28d%29%2C%20root%20%3D%20nodes%5B0%5D%3B%0A%20%20%20%20%20%20root%2Ex%20%3D%200%3B%0A%20%20%20%20%20%20root%2Ey%20%3D%200%3B%0A%20%20%20%20%20%20root%2Edx%20%3D%20size%5B0%5D%3B%0A%20%20%20%20%20%20root%2Edy%20%3D%20size%5B1%5D%3B%0A%20%20%20%20%20%20if%20%28stickies%29%20hierarchy%2Erevalue%28root%29%3B%0A%20%20%20%20%20%20scale%28%5B%20root%20%5D%2C%20root%2Edx%20%2A%20root%2Edy%20%2F%20root%2Evalue%29%3B%0A%20%20%20%20%20%20%28stickies%20%3F%20stickify%20%3A%20squarify%29%28root%29%3B%0A%20%20%20%20%20%20if%20%28sticky%29%20stickies%20%3D%20nodes%3B%0A%20%20%20%20%20%20return%20nodes%3B%0A%20%20%20%20%7D%0A%20%20%20%20treemap%2Esize%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20size%3B%0A%20%20%20%20%20%20size%20%3D%20x%3B%0A%20%20%20%20%20%20return%20treemap%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20treemap%2Epadding%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20padding%3B%0A%20%20%20%20%20%20function%20padFunction%28node%29%20%7B%0A%20%20%20%20%20%20%20%20var%20p%20%3D%20x%2Ecall%28treemap%2C%20node%2C%20node%2Edepth%29%3B%0A%20%20%20%20%20%20%20%20return%20p%20%3D%3D%20null%20%3F%20d3%5Flayout%5FtreemapPadNull%28node%29%20%3A%20d3%5Flayout%5FtreemapPad%28node%2C%20typeof%20p%20%3D%3D%3D%20%22number%22%20%3F%20%5B%20p%2C%20p%2C%20p%2C%20p%20%5D%20%3A%20p%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20padConstant%28node%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d3%5Flayout%5FtreemapPad%28node%2C%20x%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20type%3B%0A%20%20%20%20%20%20pad%20%3D%20%28padding%20%3D%20x%29%20%3D%3D%20null%20%3F%20d3%5Flayout%5FtreemapPadNull%20%3A%20%28type%20%3D%20typeof%20x%29%20%3D%3D%3D%20%22function%22%20%3F%20padFunction%20%3A%20type%20%3D%3D%3D%20%22number%22%20%3F%20%28x%20%3D%20%5B%20x%2C%20x%2C%20x%2C%20x%20%5D%2C%20%0A%20%20%20%20%20%20padConstant%29%20%3A%20padConstant%3B%0A%20%20%20%20%20%20return%20treemap%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20treemap%2Eround%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20round%20%21%3D%20Number%3B%0A%20%20%20%20%20%20round%20%3D%20x%20%3F%20Math%2Eround%20%3A%20Number%3B%0A%20%20%20%20%20%20return%20treemap%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20treemap%2Esticky%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20sticky%3B%0A%20%20%20%20%20%20sticky%20%3D%20x%3B%0A%20%20%20%20%20%20stickies%20%3D%20null%3B%0A%20%20%20%20%20%20return%20treemap%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20treemap%2Eratio%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20ratio%3B%0A%20%20%20%20%20%20ratio%20%3D%20x%3B%0A%20%20%20%20%20%20return%20treemap%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20treemap%2Emode%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20mode%3B%0A%20%20%20%20%20%20mode%20%3D%20x%20%2B%20%22%22%3B%0A%20%20%20%20%20%20return%20treemap%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20d3%5Flayout%5FhierarchyRebind%28treemap%2C%20hierarchy%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Flayout%5FtreemapPadNull%28node%29%20%7B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20x%3A%20node%2Ex%2C%0A%20%20%20%20%20%20y%3A%20node%2Ey%2C%0A%20%20%20%20%20%20dx%3A%20node%2Edx%2C%0A%20%20%20%20%20%20dy%3A%20node%2Edy%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Flayout%5FtreemapPad%28node%2C%20padding%29%20%7B%0A%20%20%20%20var%20x%20%3D%20node%2Ex%20%2B%20padding%5B3%5D%2C%20y%20%3D%20node%2Ey%20%2B%20padding%5B0%5D%2C%20dx%20%3D%20node%2Edx%20%2D%20padding%5B1%5D%20%2D%20padding%5B3%5D%2C%20dy%20%3D%20node%2Edy%20%2D%20padding%5B0%5D%20%2D%20padding%5B2%5D%3B%0A%20%20%20%20if%20%28dx%20%3C%200%29%20%7B%0A%20%20%20%20%20%20x%20%2B%3D%20dx%20%2F%202%3B%0A%20%20%20%20%20%20dx%20%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28dy%20%3C%200%29%20%7B%0A%20%20%20%20%20%20y%20%2B%3D%20dy%20%2F%202%3B%0A%20%20%20%20%20%20dy%20%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20x%3A%20x%2C%0A%20%20%20%20%20%20y%3A%20y%2C%0A%20%20%20%20%20%20dx%3A%20dx%2C%0A%20%20%20%20%20%20dy%3A%20dy%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2Erandom%20%3D%20%7B%0A%20%20%20%20normal%3A%20function%28%C2%B5%2C%20%CF%83%29%20%7B%0A%20%20%20%20%20%20var%20n%20%3D%20arguments%2Elength%3B%0A%20%20%20%20%20%20if%20%28n%20%3C%202%29%20%CF%83%20%3D%201%3B%0A%20%20%20%20%20%20if%20%28n%20%3C%201%29%20%C2%B5%20%3D%200%3B%0A%20%20%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20x%2C%20y%2C%20r%3B%0A%20%20%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20%20%20x%20%3D%20Math%2Erandom%28%29%20%2A%202%20%2D%201%3B%0A%20%20%20%20%20%20%20%20%20%20y%20%3D%20Math%2Erandom%28%29%20%2A%202%20%2D%201%3B%0A%20%20%20%20%20%20%20%20%20%20r%20%3D%20x%20%2A%20x%20%2B%20y%20%2A%20y%3B%0A%20%20%20%20%20%20%20%20%7D%20while%20%28%21r%20%7C%7C%20r%20%3E%201%29%3B%0A%20%20%20%20%20%20%20%20return%20%C2%B5%20%2B%20%CF%83%20%2A%20x%20%2A%20Math%2Esqrt%28%2D2%20%2A%20Math%2Elog%28r%29%20%2F%20r%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20logNormal%3A%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20random%20%3D%20d3%2Erandom%2Enormal%2Eapply%28d3%2C%20arguments%29%3B%0A%20%20%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20Math%2Eexp%28random%28%29%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20bates%3A%20function%28m%29%20%7B%0A%20%20%20%20%20%20var%20random%20%3D%20d3%2Erandom%2EirwinHall%28m%29%3B%0A%20%20%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20random%28%29%20%2F%20m%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20irwinHall%3A%20function%28m%29%20%7B%0A%20%20%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20s%20%3D%200%2C%20j%20%3D%200%3B%20j%20%3C%20m%3B%20j%2B%2B%29%20s%20%2B%3D%20Math%2Erandom%28%29%3B%0A%20%20%20%20%20%20%20%20return%20s%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20d3%2Escale%20%3D%20%7B%7D%3B%0A%20%20function%20d3%5FscaleExtent%28domain%29%20%7B%0A%20%20%20%20var%20start%20%3D%20domain%5B0%5D%2C%20stop%20%3D%20domain%5Bdomain%2Elength%20%2D%201%5D%3B%0A%20%20%20%20return%20start%20%3C%20stop%20%3F%20%5B%20start%2C%20stop%20%5D%20%3A%20%5B%20stop%2C%20start%20%5D%3B%0A%20%20%7D%0A%20%20function%20d3%5FscaleRange%28scale%29%20%7B%0A%20%20%20%20return%20scale%2ErangeExtent%20%3F%20scale%2ErangeExtent%28%29%20%3A%20d3%5FscaleExtent%28scale%2Erange%28%29%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fscale%5Fbilinear%28domain%2C%20range%2C%20uninterpolate%2C%20interpolate%29%20%7B%0A%20%20%20%20var%20u%20%3D%20uninterpolate%28domain%5B0%5D%2C%20domain%5B1%5D%29%2C%20i%20%3D%20interpolate%28range%5B0%5D%2C%20range%5B1%5D%29%3B%0A%20%20%20%20return%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20i%28u%28x%29%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fscale%5Fnice%28domain%2C%20nice%29%20%7B%0A%20%20%20%20var%20i0%20%3D%200%2C%20i1%20%3D%20domain%2Elength%20%2D%201%2C%20x0%20%3D%20domain%5Bi0%5D%2C%20x1%20%3D%20domain%5Bi1%5D%2C%20dx%3B%0A%20%20%20%20if%20%28x1%20%3C%20x0%29%20%7B%0A%20%20%20%20%20%20dx%20%3D%20i0%2C%20i0%20%3D%20i1%2C%20i1%20%3D%20dx%3B%0A%20%20%20%20%20%20dx%20%3D%20x0%2C%20x0%20%3D%20x1%2C%20x1%20%3D%20dx%3B%0A%20%20%20%20%7D%0A%20%20%20%20domain%5Bi0%5D%20%3D%20nice%2Efloor%28x0%29%3B%0A%20%20%20%20domain%5Bi1%5D%20%3D%20nice%2Eceil%28x1%29%3B%0A%20%20%20%20return%20domain%3B%0A%20%20%7D%0A%20%20function%20d3%5Fscale%5FniceStep%28step%29%20%7B%0A%20%20%20%20return%20step%20%3F%20%7B%0A%20%20%20%20%20%20floor%3A%20function%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20Math%2Efloor%28x%20%2F%20step%29%20%2A%20step%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20ceil%3A%20function%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20Math%2Eceil%28x%20%2F%20step%29%20%2A%20step%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20%3A%20d3%5Fscale%5FniceIdentity%3B%0A%20%20%7D%0A%20%20var%20d3%5Fscale%5FniceIdentity%20%3D%20%7B%0A%20%20%20%20floor%3A%20d3%5Fidentity%2C%0A%20%20%20%20ceil%3A%20d3%5Fidentity%0A%20%20%7D%3B%0A%20%20function%20d3%5Fscale%5Fpolylinear%28domain%2C%20range%2C%20uninterpolate%2C%20interpolate%29%20%7B%0A%20%20%20%20var%20u%20%3D%20%5B%5D%2C%20i%20%3D%20%5B%5D%2C%20j%20%3D%200%2C%20k%20%3D%20Math%2Emin%28domain%2Elength%2C%20range%2Elength%29%20%2D%201%3B%0A%20%20%20%20if%20%28domain%5Bk%5D%20%3C%20domain%5B0%5D%29%20%7B%0A%20%20%20%20%20%20domain%20%3D%20domain%2Eslice%28%29%2Ereverse%28%29%3B%0A%20%20%20%20%20%20range%20%3D%20range%2Eslice%28%29%2Ereverse%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20while%20%28%2B%2Bj%20%3C%3D%20k%29%20%7B%0A%20%20%20%20%20%20u%2Epush%28uninterpolate%28domain%5Bj%20%2D%201%5D%2C%20domain%5Bj%5D%29%29%3B%0A%20%20%20%20%20%20i%2Epush%28interpolate%28range%5Bj%20%2D%201%5D%2C%20range%5Bj%5D%29%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20function%28x%29%20%7B%0A%20%20%20%20%20%20var%20j%20%3D%20d3%2Ebisect%28domain%2C%20x%2C%201%2C%20k%29%20%2D%201%3B%0A%20%20%20%20%20%20return%20i%5Bj%5D%28u%5Bj%5D%28x%29%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2Escale%2Elinear%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fscale%5Flinear%28%5B%200%2C%201%20%5D%2C%20%5B%200%2C%201%20%5D%2C%20d3%5Finterpolate%2C%20false%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fscale%5Flinear%28domain%2C%20range%2C%20interpolate%2C%20clamp%29%20%7B%0A%20%20%20%20var%20output%2C%20input%3B%0A%20%20%20%20function%20rescale%28%29%20%7B%0A%20%20%20%20%20%20var%20linear%20%3D%20Math%2Emin%28domain%2Elength%2C%20range%2Elength%29%20%3E%202%20%3F%20d3%5Fscale%5Fpolylinear%20%3A%20d3%5Fscale%5Fbilinear%2C%20uninterpolate%20%3D%20clamp%20%3F%20d3%5FuninterpolateClamp%20%3A%20d3%5FuninterpolateNumber%3B%0A%20%20%20%20%20%20output%20%3D%20linear%28domain%2C%20range%2C%20uninterpolate%2C%20interpolate%29%3B%0A%20%20%20%20%20%20input%20%3D%20linear%28range%2C%20domain%2C%20uninterpolate%2C%20d3%5Finterpolate%29%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20scale%28x%29%20%7B%0A%20%20%20%20%20%20return%20output%28x%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20scale%2Einvert%20%3D%20function%28y%29%20%7B%0A%20%20%20%20%20%20return%20input%28y%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Edomain%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20domain%3B%0A%20%20%20%20%20%20domain%20%3D%20x%2Emap%28Number%29%3B%0A%20%20%20%20%20%20return%20rescale%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Erange%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20range%3B%0A%20%20%20%20%20%20range%20%3D%20x%3B%0A%20%20%20%20%20%20return%20rescale%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2ErangeRound%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20scale%2Erange%28x%29%2Einterpolate%28d3%5FinterpolateRound%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Eclamp%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20clamp%3B%0A%20%20%20%20%20%20clamp%20%3D%20x%3B%0A%20%20%20%20%20%20return%20rescale%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Einterpolate%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20interpolate%3B%0A%20%20%20%20%20%20interpolate%20%3D%20x%3B%0A%20%20%20%20%20%20return%20rescale%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Eticks%20%3D%20function%28m%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5FlinearTicks%28domain%2C%20m%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2EtickFormat%20%3D%20function%28m%2C%20format%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5FlinearTickFormat%28domain%2C%20m%2C%20format%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Enice%20%3D%20function%28m%29%20%7B%0A%20%20%20%20%20%20d3%5Fscale%5FlinearNice%28domain%2C%20m%29%3B%0A%20%20%20%20%20%20return%20rescale%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Ecopy%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5Flinear%28domain%2C%20range%2C%20interpolate%2C%20clamp%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20rescale%28%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fscale%5FlinearRebind%28scale%2C%20linear%29%20%7B%0A%20%20%20%20return%20d3%2Erebind%28scale%2C%20linear%2C%20%22range%22%2C%20%22rangeRound%22%2C%20%22interpolate%22%2C%20%22clamp%22%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fscale%5FlinearNice%28domain%2C%20m%29%20%7B%0A%20%20%20%20return%20d3%5Fscale%5Fnice%28domain%2C%20d3%5Fscale%5FniceStep%28d3%5Fscale%5FlinearTickRange%28domain%2C%20m%29%5B2%5D%29%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fscale%5FlinearTickRange%28domain%2C%20m%29%20%7B%0A%20%20%20%20if%20%28m%20%3D%3D%20null%29%20m%20%3D%2010%3B%0A%20%20%20%20var%20extent%20%3D%20d3%5FscaleExtent%28domain%29%2C%20span%20%3D%20extent%5B1%5D%20%2D%20extent%5B0%5D%2C%20step%20%3D%20Math%2Epow%2810%2C%20Math%2Efloor%28Math%2Elog%28span%20%2F%20m%29%20%2F%20Math%2ELN10%29%29%2C%20err%20%3D%20m%20%2F%20span%20%2A%20step%3B%0A%20%20%20%20if%20%28err%20%3C%3D%20%2E15%29%20step%20%2A%3D%2010%3B%20else%20if%20%28err%20%3C%3D%20%2E35%29%20step%20%2A%3D%205%3B%20else%20if%20%28err%20%3C%3D%20%2E75%29%20step%20%2A%3D%202%3B%0A%20%20%20%20extent%5B0%5D%20%3D%20Math%2Eceil%28extent%5B0%5D%20%2F%20step%29%20%2A%20step%3B%0A%20%20%20%20extent%5B1%5D%20%3D%20Math%2Efloor%28extent%5B1%5D%20%2F%20step%29%20%2A%20step%20%2B%20step%20%2A%20%2E5%3B%0A%20%20%20%20extent%5B2%5D%20%3D%20step%3B%0A%20%20%20%20return%20extent%3B%0A%20%20%7D%0A%20%20function%20d3%5Fscale%5FlinearTicks%28domain%2C%20m%29%20%7B%0A%20%20%20%20return%20d3%2Erange%2Eapply%28d3%2C%20d3%5Fscale%5FlinearTickRange%28domain%2C%20m%29%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fscale%5FlinearTickFormat%28domain%2C%20m%2C%20format%29%20%7B%0A%20%20%20%20var%20range%20%3D%20d3%5Fscale%5FlinearTickRange%28domain%2C%20m%29%3B%0A%20%20%20%20if%20%28format%29%20%7B%0A%20%20%20%20%20%20var%20match%20%3D%20d3%5Fformat%5Fre%2Eexec%28format%29%3B%0A%20%20%20%20%20%20match%2Eshift%28%29%3B%0A%20%20%20%20%20%20if%20%28match%5B8%5D%20%3D%3D%3D%20%22s%22%29%20%7B%0A%20%20%20%20%20%20%20%20var%20prefix%20%3D%20d3%2EformatPrefix%28Math%2Emax%28abs%28range%5B0%5D%29%2C%20abs%28range%5B1%5D%29%29%29%3B%0A%20%20%20%20%20%20%20%20if%20%28%21match%5B7%5D%29%20match%5B7%5D%20%3D%20%22%2E%22%20%2B%20d3%5Fscale%5FlinearPrecision%28prefix%2Escale%28range%5B2%5D%29%29%3B%0A%20%20%20%20%20%20%20%20match%5B8%5D%20%3D%20%22f%22%3B%0A%20%20%20%20%20%20%20%20format%20%3D%20d3%2Eformat%28match%2Ejoin%28%22%22%29%29%3B%0A%20%20%20%20%20%20%20%20return%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20format%28prefix%2Escale%28d%29%29%20%2B%20prefix%2Esymbol%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28%21match%5B7%5D%29%20match%5B7%5D%20%3D%20%22%2E%22%20%2B%20d3%5Fscale%5FlinearFormatPrecision%28match%5B8%5D%2C%20range%29%3B%0A%20%20%20%20%20%20format%20%3D%20match%2Ejoin%28%22%22%29%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20format%20%3D%20%22%2C%2E%22%20%2B%20d3%5Fscale%5FlinearPrecision%28range%5B2%5D%29%20%2B%20%22f%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%2Eformat%28format%29%3B%0A%20%20%7D%0A%20%20var%20d3%5Fscale%5FlinearFormatSignificant%20%3D%20%7B%0A%20%20%20%20s%3A%201%2C%0A%20%20%20%20g%3A%201%2C%0A%20%20%20%20p%3A%201%2C%0A%20%20%20%20r%3A%201%2C%0A%20%20%20%20e%3A%201%0A%20%20%7D%3B%0A%20%20function%20d3%5Fscale%5FlinearPrecision%28value%29%20%7B%0A%20%20%20%20return%20%2DMath%2Efloor%28Math%2Elog%28value%29%20%2F%20Math%2ELN10%20%2B%20%2E01%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fscale%5FlinearFormatPrecision%28type%2C%20range%29%20%7B%0A%20%20%20%20var%20p%20%3D%20d3%5Fscale%5FlinearPrecision%28range%5B2%5D%29%3B%0A%20%20%20%20return%20type%20in%20d3%5Fscale%5FlinearFormatSignificant%20%3F%20Math%2Eabs%28p%20%2D%20d3%5Fscale%5FlinearPrecision%28Math%2Emax%28abs%28range%5B0%5D%29%2C%20abs%28range%5B1%5D%29%29%29%29%20%2B%20%2B%28type%20%21%3D%3D%20%22e%22%29%20%3A%20p%20%2D%20%28type%20%3D%3D%3D%20%22%25%22%29%20%2A%202%3B%0A%20%20%7D%0A%20%20d3%2Escale%2Elog%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fscale%5Flog%28d3%2Escale%2Elinear%28%29%2Edomain%28%5B%200%2C%201%20%5D%29%2C%2010%2C%20true%2C%20%5B%201%2C%2010%20%5D%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fscale%5Flog%28linear%2C%20base%2C%20positive%2C%20domain%29%20%7B%0A%20%20%20%20function%20log%28x%29%20%7B%0A%20%20%20%20%20%20return%20%28positive%20%3F%20Math%2Elog%28x%20%3C%200%20%3F%200%20%3A%20x%29%20%3A%20%2DMath%2Elog%28x%20%3E%200%20%3F%200%20%3A%20%2Dx%29%29%20%2F%20Math%2Elog%28base%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20pow%28x%29%20%7B%0A%20%20%20%20%20%20return%20positive%20%3F%20Math%2Epow%28base%2C%20x%29%20%3A%20%2DMath%2Epow%28base%2C%20%2Dx%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20scale%28x%29%20%7B%0A%20%20%20%20%20%20return%20linear%28log%28x%29%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20scale%2Einvert%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20pow%28linear%2Einvert%28x%29%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Edomain%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20domain%3B%0A%20%20%20%20%20%20positive%20%3D%20x%5B0%5D%20%3E%3D%200%3B%0A%20%20%20%20%20%20linear%2Edomain%28%28domain%20%3D%20x%2Emap%28Number%29%29%2Emap%28log%29%29%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Ebase%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20base%3B%0A%20%20%20%20%20%20base%20%3D%20%2B%5F%3B%0A%20%20%20%20%20%20linear%2Edomain%28domain%2Emap%28log%29%29%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Enice%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20niced%20%3D%20d3%5Fscale%5Fnice%28domain%2Emap%28log%29%2C%20positive%20%3F%20Math%20%3A%20d3%5Fscale%5FlogNiceNegative%29%3B%0A%20%20%20%20%20%20linear%2Edomain%28niced%29%3B%0A%20%20%20%20%20%20domain%20%3D%20niced%2Emap%28pow%29%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Eticks%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20extent%20%3D%20d3%5FscaleExtent%28domain%29%2C%20ticks%20%3D%20%5B%5D%2C%20u%20%3D%20extent%5B0%5D%2C%20v%20%3D%20extent%5B1%5D%2C%20i%20%3D%20Math%2Efloor%28log%28u%29%29%2C%20j%20%3D%20Math%2Eceil%28log%28v%29%29%2C%20n%20%3D%20base%20%25%201%20%3F%202%20%3A%20base%3B%0A%20%20%20%20%20%20if%20%28isFinite%28j%20%2D%20i%29%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28positive%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20%28%3Bi%20%3C%20j%3B%20i%2B%2B%29%20for%20%28var%20k%20%3D%201%3B%20k%20%3C%20n%3B%20k%2B%2B%29%20ticks%2Epush%28pow%28i%29%20%2A%20k%29%3B%0A%20%20%20%20%20%20%20%20%20%20ticks%2Epush%28pow%28i%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20ticks%2Epush%28pow%28i%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20for%20%28%3Bi%2B%2B%20%3C%20j%3B%20%29%20for%20%28var%20k%20%3D%20n%20%2D%201%3B%20k%20%3E%200%3B%20k%2D%2D%29%20ticks%2Epush%28pow%28i%29%20%2A%20k%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20ticks%5Bi%5D%20%3C%20u%3B%20i%2B%2B%29%20%7B%7D%0A%20%20%20%20%20%20%20%20for%20%28j%20%3D%20ticks%2Elength%3B%20ticks%5Bj%20%2D%201%5D%20%3E%20v%3B%20j%2D%2D%29%20%7B%7D%0A%20%20%20%20%20%20%20%20ticks%20%3D%20ticks%2Eslice%28i%2C%20j%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20ticks%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2EtickFormat%20%3D%20function%28n%2C%20format%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20d3%5Fscale%5FlogFormat%3B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20format%20%3D%20d3%5Fscale%5FlogFormat%3B%20else%20if%20%28typeof%20format%20%21%3D%3D%20%22function%22%29%20format%20%3D%20d3%2Eformat%28format%29%3B%0A%20%20%20%20%20%20var%20k%20%3D%20Math%2Emax%28%2E1%2C%20n%20%2F%20scale%2Eticks%28%29%2Elength%29%2C%20f%20%3D%20positive%20%3F%20%28e%20%3D%201e%2D12%2C%20Math%2Eceil%29%20%3A%20%28e%20%3D%20%2D1e%2D12%2C%20%0A%20%20%20%20%20%20Math%2Efloor%29%2C%20e%3B%0A%20%20%20%20%20%20return%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d%20%2F%20pow%28f%28log%28d%29%20%2B%20e%29%29%20%3C%3D%20k%20%3F%20format%28d%29%20%3A%20%22%22%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Ecopy%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5Flog%28linear%2Ecopy%28%29%2C%20base%2C%20positive%2C%20domain%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20d3%5Fscale%5FlinearRebind%28scale%2C%20linear%29%3B%0A%20%20%7D%0A%20%20var%20d3%5Fscale%5FlogFormat%20%3D%20d3%2Eformat%28%22%2E0e%22%29%2C%20d3%5Fscale%5FlogNiceNegative%20%3D%20%7B%0A%20%20%20%20floor%3A%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20%2DMath%2Eceil%28%2Dx%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20ceil%3A%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20%2DMath%2Efloor%28%2Dx%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20d3%2Escale%2Epow%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fscale%5Fpow%28d3%2Escale%2Elinear%28%29%2C%201%2C%20%5B%200%2C%201%20%5D%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fscale%5Fpow%28linear%2C%20exponent%2C%20domain%29%20%7B%0A%20%20%20%20var%20powp%20%3D%20d3%5Fscale%5FpowPow%28exponent%29%2C%20powb%20%3D%20d3%5Fscale%5FpowPow%281%20%2F%20exponent%29%3B%0A%20%20%20%20function%20scale%28x%29%20%7B%0A%20%20%20%20%20%20return%20linear%28powp%28x%29%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20scale%2Einvert%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20powb%28linear%2Einvert%28x%29%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Edomain%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20domain%3B%0A%20%20%20%20%20%20linear%2Edomain%28%28domain%20%3D%20x%2Emap%28Number%29%29%2Emap%28powp%29%29%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Eticks%20%3D%20function%28m%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5FlinearTicks%28domain%2C%20m%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2EtickFormat%20%3D%20function%28m%2C%20format%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5FlinearTickFormat%28domain%2C%20m%2C%20format%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Enice%20%3D%20function%28m%29%20%7B%0A%20%20%20%20%20%20return%20scale%2Edomain%28d3%5Fscale%5FlinearNice%28domain%2C%20m%29%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Eexponent%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20exponent%3B%0A%20%20%20%20%20%20powp%20%3D%20d3%5Fscale%5FpowPow%28exponent%20%3D%20x%29%3B%0A%20%20%20%20%20%20powb%20%3D%20d3%5Fscale%5FpowPow%281%20%2F%20exponent%29%3B%0A%20%20%20%20%20%20linear%2Edomain%28domain%2Emap%28powp%29%29%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Ecopy%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5Fpow%28linear%2Ecopy%28%29%2C%20exponent%2C%20domain%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20d3%5Fscale%5FlinearRebind%28scale%2C%20linear%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fscale%5FpowPow%28e%29%20%7B%0A%20%20%20%20return%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20x%20%3C%200%20%3F%20%2DMath%2Epow%28%2Dx%2C%20e%29%20%3A%20Math%2Epow%28x%2C%20e%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2Escale%2Esqrt%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%2Escale%2Epow%28%29%2Eexponent%28%2E5%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Escale%2Eordinal%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fscale%5Fordinal%28%5B%5D%2C%20%7B%0A%20%20%20%20%20%20t%3A%20%22range%22%2C%0A%20%20%20%20%20%20a%3A%20%5B%20%5B%5D%20%5D%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fscale%5Fordinal%28domain%2C%20ranger%29%20%7B%0A%20%20%20%20var%20index%2C%20range%2C%20rangeBand%3B%0A%20%20%20%20function%20scale%28x%29%20%7B%0A%20%20%20%20%20%20return%20range%5B%28%28index%2Eget%28x%29%20%7C%7C%20%28ranger%2Et%20%3D%3D%3D%20%22range%22%20%3F%20index%2Eset%28x%2C%20domain%2Epush%28x%29%29%20%3A%20NaN%29%29%20%2D%201%29%20%25%20range%2Elength%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20steps%28start%2C%20step%29%20%7B%0A%20%20%20%20%20%20return%20d3%2Erange%28domain%2Elength%29%2Emap%28function%28i%29%20%7B%0A%20%20%20%20%20%20%20%20return%20start%20%2B%20step%20%2A%20i%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20scale%2Edomain%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20domain%3B%0A%20%20%20%20%20%20domain%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20index%20%3D%20new%20d3%5FMap%28%29%3B%0A%20%20%20%20%20%20var%20i%20%3D%20%2D1%2C%20n%20%3D%20x%2Elength%2C%20xi%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20if%20%28%21index%2Ehas%28xi%20%3D%20x%5Bi%5D%29%29%20index%2Eset%28xi%2C%20domain%2Epush%28xi%29%29%3B%0A%20%20%20%20%20%20return%20scale%5Branger%2Et%5D%2Eapply%28scale%2C%20ranger%2Ea%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Erange%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20range%3B%0A%20%20%20%20%20%20range%20%3D%20x%3B%0A%20%20%20%20%20%20rangeBand%20%3D%200%3B%0A%20%20%20%20%20%20ranger%20%3D%20%7B%0A%20%20%20%20%20%20%20%20t%3A%20%22range%22%2C%0A%20%20%20%20%20%20%20%20a%3A%20arguments%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2ErangePoints%20%3D%20function%28x%2C%20padding%29%20%7B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20padding%20%3D%200%3B%0A%20%20%20%20%20%20var%20start%20%3D%20x%5B0%5D%2C%20stop%20%3D%20x%5B1%5D%2C%20step%20%3D%20domain%2Elength%20%3C%202%20%3F%20%28start%20%3D%20%28start%20%2B%20stop%29%20%2F%202%2C%20%0A%20%20%20%20%20%200%29%20%3A%20%28stop%20%2D%20start%29%20%2F%20%28domain%2Elength%20%2D%201%20%2B%20padding%29%3B%0A%20%20%20%20%20%20range%20%3D%20steps%28start%20%2B%20step%20%2A%20padding%20%2F%202%2C%20step%29%3B%0A%20%20%20%20%20%20rangeBand%20%3D%200%3B%0A%20%20%20%20%20%20ranger%20%3D%20%7B%0A%20%20%20%20%20%20%20%20t%3A%20%22rangePoints%22%2C%0A%20%20%20%20%20%20%20%20a%3A%20arguments%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2ErangeRoundPoints%20%3D%20function%28x%2C%20padding%29%20%7B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20padding%20%3D%200%3B%0A%20%20%20%20%20%20var%20start%20%3D%20x%5B0%5D%2C%20stop%20%3D%20x%5B1%5D%2C%20step%20%3D%20domain%2Elength%20%3C%202%20%3F%20%28start%20%3D%20stop%20%3D%20Math%2Eround%28%28start%20%2B%20stop%29%20%2F%202%29%2C%20%0A%20%20%20%20%20%200%29%20%3A%20%28stop%20%2D%20start%29%20%2F%20%28domain%2Elength%20%2D%201%20%2B%20padding%29%20%7C%200%3B%0A%20%20%20%20%20%20range%20%3D%20steps%28start%20%2B%20Math%2Eround%28step%20%2A%20padding%20%2F%202%20%2B%20%28stop%20%2D%20start%20%2D%20%28domain%2Elength%20%2D%201%20%2B%20padding%29%20%2A%20step%29%20%2F%202%29%2C%20step%29%3B%0A%20%20%20%20%20%20rangeBand%20%3D%200%3B%0A%20%20%20%20%20%20ranger%20%3D%20%7B%0A%20%20%20%20%20%20%20%20t%3A%20%22rangeRoundPoints%22%2C%0A%20%20%20%20%20%20%20%20a%3A%20arguments%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2ErangeBands%20%3D%20function%28x%2C%20padding%2C%20outerPadding%29%20%7B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20padding%20%3D%200%3B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%203%29%20outerPadding%20%3D%20padding%3B%0A%20%20%20%20%20%20var%20reverse%20%3D%20x%5B1%5D%20%3C%20x%5B0%5D%2C%20start%20%3D%20x%5Breverse%20%2D%200%5D%2C%20stop%20%3D%20x%5B1%20%2D%20reverse%5D%2C%20step%20%3D%20%28stop%20%2D%20start%29%20%2F%20%28domain%2Elength%20%2D%20padding%20%2B%202%20%2A%20outerPadding%29%3B%0A%20%20%20%20%20%20range%20%3D%20steps%28start%20%2B%20step%20%2A%20outerPadding%2C%20step%29%3B%0A%20%20%20%20%20%20if%20%28reverse%29%20range%2Ereverse%28%29%3B%0A%20%20%20%20%20%20rangeBand%20%3D%20step%20%2A%20%281%20%2D%20padding%29%3B%0A%20%20%20%20%20%20ranger%20%3D%20%7B%0A%20%20%20%20%20%20%20%20t%3A%20%22rangeBands%22%2C%0A%20%20%20%20%20%20%20%20a%3A%20arguments%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2ErangeRoundBands%20%3D%20function%28x%2C%20padding%2C%20outerPadding%29%20%7B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20padding%20%3D%200%3B%0A%20%20%20%20%20%20if%20%28arguments%2Elength%20%3C%203%29%20outerPadding%20%3D%20padding%3B%0A%20%20%20%20%20%20var%20reverse%20%3D%20x%5B1%5D%20%3C%20x%5B0%5D%2C%20start%20%3D%20x%5Breverse%20%2D%200%5D%2C%20stop%20%3D%20x%5B1%20%2D%20reverse%5D%2C%20step%20%3D%20Math%2Efloor%28%28stop%20%2D%20start%29%20%2F%20%28domain%2Elength%20%2D%20padding%20%2B%202%20%2A%20outerPadding%29%29%3B%0A%20%20%20%20%20%20range%20%3D%20steps%28start%20%2B%20Math%2Eround%28%28stop%20%2D%20start%20%2D%20%28domain%2Elength%20%2D%20padding%29%20%2A%20step%29%20%2F%202%29%2C%20step%29%3B%0A%20%20%20%20%20%20if%20%28reverse%29%20range%2Ereverse%28%29%3B%0A%20%20%20%20%20%20rangeBand%20%3D%20Math%2Eround%28step%20%2A%20%281%20%2D%20padding%29%29%3B%0A%20%20%20%20%20%20ranger%20%3D%20%7B%0A%20%20%20%20%20%20%20%20t%3A%20%22rangeRoundBands%22%2C%0A%20%20%20%20%20%20%20%20a%3A%20arguments%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2ErangeBand%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20rangeBand%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2ErangeExtent%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5FscaleExtent%28ranger%2Ea%5B0%5D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Ecopy%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5Fordinal%28domain%2C%20ranger%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20scale%2Edomain%28domain%29%3B%0A%20%20%7D%0A%20%20d3%2Escale%2Ecategory10%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%2Escale%2Eordinal%28%29%2Erange%28d3%5Fcategory10%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Escale%2Ecategory20%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%2Escale%2Eordinal%28%29%2Erange%28d3%5Fcategory20%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Escale%2Ecategory20b%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%2Escale%2Eordinal%28%29%2Erange%28d3%5Fcategory20b%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Escale%2Ecategory20c%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%2Escale%2Eordinal%28%29%2Erange%28d3%5Fcategory20c%29%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fcategory10%20%3D%20%5B%202062260%2C%2016744206%2C%202924588%2C%2014034728%2C%209725885%2C%209197131%2C%2014907330%2C%208355711%2C%2012369186%2C%201556175%20%5D%2Emap%28d3%5FrgbString%29%3B%0A%20%20var%20d3%5Fcategory20%20%3D%20%5B%202062260%2C%2011454440%2C%2016744206%2C%2016759672%2C%202924588%2C%2010018698%2C%2014034728%2C%2016750742%2C%209725885%2C%2012955861%2C%209197131%2C%2012885140%2C%2014907330%2C%2016234194%2C%208355711%2C%2013092807%2C%2012369186%2C%2014408589%2C%201556175%2C%2010410725%20%5D%2Emap%28d3%5FrgbString%29%3B%0A%20%20var%20d3%5Fcategory20b%20%3D%20%5B%203750777%2C%205395619%2C%207040719%2C%2010264286%2C%206519097%2C%209216594%2C%2011915115%2C%2013556636%2C%209202993%2C%2012426809%2C%2015186514%2C%2015190932%2C%208666169%2C%2011356490%2C%2014049643%2C%2015177372%2C%208077683%2C%2010834324%2C%2013528509%2C%2014589654%20%5D%2Emap%28d3%5FrgbString%29%3B%0A%20%20var%20d3%5Fcategory20c%20%3D%20%5B%203244733%2C%207057110%2C%2010406625%2C%2013032431%2C%2015095053%2C%2016616764%2C%2016625259%2C%2016634018%2C%203253076%2C%207652470%2C%2010607003%2C%2013101504%2C%207695281%2C%2010394312%2C%2012369372%2C%2014342891%2C%206513507%2C%209868950%2C%2012434877%2C%2014277081%20%5D%2Emap%28d3%5FrgbString%29%3B%0A%20%20d3%2Escale%2Equantile%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fscale%5Fquantile%28%5B%5D%2C%20%5B%5D%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fscale%5Fquantile%28domain%2C%20range%29%20%7B%0A%20%20%20%20var%20thresholds%3B%0A%20%20%20%20function%20rescale%28%29%20%7B%0A%20%20%20%20%20%20var%20k%20%3D%200%2C%20q%20%3D%20range%2Elength%3B%0A%20%20%20%20%20%20thresholds%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bk%20%3C%20q%29%20thresholds%5Bk%20%2D%201%5D%20%3D%20d3%2Equantile%28domain%2C%20k%20%2F%20q%29%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20scale%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21isNaN%28x%20%3D%20%2Bx%29%29%20return%20range%5Bd3%2Ebisect%28thresholds%2C%20x%29%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20scale%2Edomain%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20domain%3B%0A%20%20%20%20%20%20domain%20%3D%20x%2Emap%28d3%5Fnumber%29%2Efilter%28d3%5Fnumeric%29%2Esort%28d3%5Fascending%29%3B%0A%20%20%20%20%20%20return%20rescale%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Erange%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20range%3B%0A%20%20%20%20%20%20range%20%3D%20x%3B%0A%20%20%20%20%20%20return%20rescale%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Equantiles%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20thresholds%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2EinvertExtent%20%3D%20function%28y%29%20%7B%0A%20%20%20%20%20%20y%20%3D%20range%2EindexOf%28y%29%3B%0A%20%20%20%20%20%20return%20y%20%3C%200%20%3F%20%5B%20NaN%2C%20NaN%20%5D%20%3A%20%5B%20y%20%3E%200%20%3F%20thresholds%5By%20%2D%201%5D%20%3A%20domain%5B0%5D%2C%20y%20%3C%20thresholds%2Elength%20%3F%20thresholds%5By%5D%20%3A%20domain%5Bdomain%2Elength%20%2D%201%5D%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Ecopy%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5Fquantile%28domain%2C%20range%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20rescale%28%29%3B%0A%20%20%7D%0A%20%20d3%2Escale%2Equantize%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fscale%5Fquantize%280%2C%201%2C%20%5B%200%2C%201%20%5D%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fscale%5Fquantize%28x0%2C%20x1%2C%20range%29%20%7B%0A%20%20%20%20var%20kx%2C%20i%3B%0A%20%20%20%20function%20scale%28x%29%20%7B%0A%20%20%20%20%20%20return%20range%5BMath%2Emax%280%2C%20Math%2Emin%28i%2C%20Math%2Efloor%28kx%20%2A%20%28x%20%2D%20x0%29%29%29%29%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20rescale%28%29%20%7B%0A%20%20%20%20%20%20kx%20%3D%20range%2Elength%20%2F%20%28x1%20%2D%20x0%29%3B%0A%20%20%20%20%20%20i%20%3D%20range%2Elength%20%2D%201%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%0A%20%20%20%20scale%2Edomain%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20%5B%20x0%2C%20x1%20%5D%3B%0A%20%20%20%20%20%20x0%20%3D%20%2Bx%5B0%5D%3B%0A%20%20%20%20%20%20x1%20%3D%20%2Bx%5Bx%2Elength%20%2D%201%5D%3B%0A%20%20%20%20%20%20return%20rescale%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Erange%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20range%3B%0A%20%20%20%20%20%20range%20%3D%20x%3B%0A%20%20%20%20%20%20return%20rescale%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2EinvertExtent%20%3D%20function%28y%29%20%7B%0A%20%20%20%20%20%20y%20%3D%20range%2EindexOf%28y%29%3B%0A%20%20%20%20%20%20y%20%3D%20y%20%3C%200%20%3F%20NaN%20%3A%20y%20%2F%20kx%20%2B%20x0%3B%0A%20%20%20%20%20%20return%20%5B%20y%2C%20y%20%2B%201%20%2F%20kx%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Ecopy%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5Fquantize%28x0%2C%20x1%2C%20range%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20rescale%28%29%3B%0A%20%20%7D%0A%20%20d3%2Escale%2Ethreshold%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fscale%5Fthreshold%28%5B%20%2E5%20%5D%2C%20%5B%200%2C%201%20%5D%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fscale%5Fthreshold%28domain%2C%20range%29%20%7B%0A%20%20%20%20function%20scale%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28x%20%3C%3D%20x%29%20return%20range%5Bd3%2Ebisect%28domain%2C%20x%29%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20scale%2Edomain%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20domain%3B%0A%20%20%20%20%20%20domain%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Erange%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20range%3B%0A%20%20%20%20%20%20range%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2EinvertExtent%20%3D%20function%28y%29%20%7B%0A%20%20%20%20%20%20y%20%3D%20range%2EindexOf%28y%29%3B%0A%20%20%20%20%20%20return%20%5B%20domain%5By%20%2D%201%5D%2C%20domain%5By%5D%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Ecopy%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5Fthreshold%28domain%2C%20range%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20scale%3B%0A%20%20%7D%0A%20%20d3%2Escale%2Eidentity%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fscale%5Fidentity%28%5B%200%2C%201%20%5D%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fscale%5Fidentity%28domain%29%20%7B%0A%20%20%20%20function%20identity%28x%29%20%7B%0A%20%20%20%20%20%20return%20%2Bx%3B%0A%20%20%20%20%7D%0A%20%20%20%20identity%2Einvert%20%3D%20identity%3B%0A%20%20%20%20identity%2Edomain%20%3D%20identity%2Erange%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20domain%3B%0A%20%20%20%20%20%20domain%20%3D%20x%2Emap%28identity%29%3B%0A%20%20%20%20%20%20return%20identity%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20identity%2Eticks%20%3D%20function%28m%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5FlinearTicks%28domain%2C%20m%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20identity%2EtickFormat%20%3D%20function%28m%2C%20format%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5FlinearTickFormat%28domain%2C%20m%2C%20format%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20identity%2Ecopy%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fscale%5Fidentity%28domain%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20identity%3B%0A%20%20%7D%0A%20%20d3%2Esvg%20%3D%20%7B%7D%3B%0A%20%20function%20d3%5Fzero%28%29%20%7B%0A%20%20%20%20return%200%3B%0A%20%20%7D%0A%20%20d3%2Esvg%2Earc%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20innerRadius%20%3D%20d3%5Fsvg%5FarcInnerRadius%2C%20outerRadius%20%3D%20d3%5Fsvg%5FarcOuterRadius%2C%20cornerRadius%20%3D%20d3%5Fzero%2C%20padRadius%20%3D%20d3%5Fsvg%5FarcAuto%2C%20startAngle%20%3D%20d3%5Fsvg%5FarcStartAngle%2C%20endAngle%20%3D%20d3%5Fsvg%5FarcEndAngle%2C%20padAngle%20%3D%20d3%5Fsvg%5FarcPadAngle%3B%0A%20%20%20%20function%20arc%28%29%20%7B%0A%20%20%20%20%20%20var%20r0%20%3D%20Math%2Emax%280%2C%20%2BinnerRadius%2Eapply%28this%2C%20arguments%29%29%2C%20r1%20%3D%20Math%2Emax%280%2C%20%2BouterRadius%2Eapply%28this%2C%20arguments%29%29%2C%20a0%20%3D%20startAngle%2Eapply%28this%2C%20arguments%29%20%2D%20half%CF%80%2C%20a1%20%3D%20endAngle%2Eapply%28this%2C%20arguments%29%20%2D%20half%CF%80%2C%20da%20%3D%20Math%2Eabs%28a1%20%2D%20a0%29%2C%20cw%20%3D%20a0%20%3E%20a1%20%3F%200%20%3A%201%3B%0A%20%20%20%20%20%20if%20%28r1%20%3C%20r0%29%20rc%20%3D%20r1%2C%20r1%20%3D%20r0%2C%20r0%20%3D%20rc%3B%0A%20%20%20%20%20%20if%20%28da%20%3E%3D%20%CF%84%CE%B5%29%20return%20circleSegment%28r1%2C%20cw%29%20%2B%20%28r0%20%3F%20circleSegment%28r0%2C%201%20%2D%20cw%29%20%3A%20%22%22%29%20%2B%20%22Z%22%3B%0A%20%20%20%20%20%20var%20rc%2C%20cr%2C%20rp%2C%20ap%2C%20p0%20%3D%200%2C%20p1%20%3D%200%2C%20x0%2C%20y0%2C%20x1%2C%20y1%2C%20x2%2C%20y2%2C%20x3%2C%20y3%2C%20path%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20if%20%28ap%20%3D%20%28%2BpadAngle%2Eapply%28this%2C%20arguments%29%20%7C%7C%200%29%20%2F%202%29%20%7B%0A%20%20%20%20%20%20%20%20rp%20%3D%20padRadius%20%3D%3D%3D%20d3%5Fsvg%5FarcAuto%20%3F%20Math%2Esqrt%28r0%20%2A%20r0%20%2B%20r1%20%2A%20r1%29%20%3A%20%2BpadRadius%2Eapply%28this%2C%20arguments%29%3B%0A%20%20%20%20%20%20%20%20if%20%28%21cw%29%20p1%20%2A%3D%20%2D1%3B%0A%20%20%20%20%20%20%20%20if%20%28r1%29%20p1%20%3D%20d3%5Fasin%28rp%20%2F%20r1%20%2A%20Math%2Esin%28ap%29%29%3B%0A%20%20%20%20%20%20%20%20if%20%28r0%29%20p0%20%3D%20d3%5Fasin%28rp%20%2F%20r0%20%2A%20Math%2Esin%28ap%29%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28r1%29%20%7B%0A%20%20%20%20%20%20%20%20x0%20%3D%20r1%20%2A%20Math%2Ecos%28a0%20%2B%20p1%29%3B%0A%20%20%20%20%20%20%20%20y0%20%3D%20r1%20%2A%20Math%2Esin%28a0%20%2B%20p1%29%3B%0A%20%20%20%20%20%20%20%20x1%20%3D%20r1%20%2A%20Math%2Ecos%28a1%20%2D%20p1%29%3B%0A%20%20%20%20%20%20%20%20y1%20%3D%20r1%20%2A%20Math%2Esin%28a1%20%2D%20p1%29%3B%0A%20%20%20%20%20%20%20%20var%20l1%20%3D%20Math%2Eabs%28a1%20%2D%20a0%20%2D%202%20%2A%20p1%29%20%3C%3D%20%CF%80%20%3F%200%20%3A%201%3B%0A%20%20%20%20%20%20%20%20if%20%28p1%20%26%26%20d3%5Fsvg%5FarcSweep%28x0%2C%20y0%2C%20x1%2C%20y1%29%20%3D%3D%3D%20cw%20%5E%20l1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20h1%20%3D%20%28a0%20%2B%20a1%29%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20x0%20%3D%20r1%20%2A%20Math%2Ecos%28h1%29%3B%0A%20%20%20%20%20%20%20%20%20%20y0%20%3D%20r1%20%2A%20Math%2Esin%28h1%29%3B%0A%20%20%20%20%20%20%20%20%20%20x1%20%3D%20y1%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20x0%20%3D%20y0%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28r0%29%20%7B%0A%20%20%20%20%20%20%20%20x2%20%3D%20r0%20%2A%20Math%2Ecos%28a1%20%2D%20p0%29%3B%0A%20%20%20%20%20%20%20%20y2%20%3D%20r0%20%2A%20Math%2Esin%28a1%20%2D%20p0%29%3B%0A%20%20%20%20%20%20%20%20x3%20%3D%20r0%20%2A%20Math%2Ecos%28a0%20%2B%20p0%29%3B%0A%20%20%20%20%20%20%20%20y3%20%3D%20r0%20%2A%20Math%2Esin%28a0%20%2B%20p0%29%3B%0A%20%20%20%20%20%20%20%20var%20l0%20%3D%20Math%2Eabs%28a0%20%2D%20a1%20%2B%202%20%2A%20p0%29%20%3C%3D%20%CF%80%20%3F%200%20%3A%201%3B%0A%20%20%20%20%20%20%20%20if%20%28p0%20%26%26%20d3%5Fsvg%5FarcSweep%28x2%2C%20y2%2C%20x3%2C%20y3%29%20%3D%3D%3D%201%20%2D%20cw%20%5E%20l0%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20h0%20%3D%20%28a0%20%2B%20a1%29%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20x2%20%3D%20r0%20%2A%20Math%2Ecos%28h0%29%3B%0A%20%20%20%20%20%20%20%20%20%20y2%20%3D%20r0%20%2A%20Math%2Esin%28h0%29%3B%0A%20%20%20%20%20%20%20%20%20%20x3%20%3D%20y3%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20x2%20%3D%20y2%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28%28rc%20%3D%20Math%2Emin%28Math%2Eabs%28r1%20%2D%20r0%29%20%2F%202%2C%20%2BcornerRadius%2Eapply%28this%2C%20arguments%29%29%29%20%3E%20%2E001%29%20%7B%0A%20%20%20%20%20%20%20%20cr%20%3D%20r0%20%3C%20r1%20%5E%20cw%20%3F%200%20%3A%201%3B%0A%20%20%20%20%20%20%20%20var%20oc%20%3D%20x3%20%3D%3D%20null%20%3F%20%5B%20x2%2C%20y2%20%5D%20%3A%20x1%20%3D%3D%20null%20%3F%20%5B%20x0%2C%20y0%20%5D%20%3A%20d3%5Fgeom%5FpolygonIntersect%28%5B%20x0%2C%20y0%20%5D%2C%20%5B%20x3%2C%20y3%20%5D%2C%20%5B%20x1%2C%20y1%20%5D%2C%20%5B%20x2%2C%20y2%20%5D%29%2C%20ax%20%3D%20x0%20%2D%20oc%5B0%5D%2C%20ay%20%3D%20y0%20%2D%20oc%5B1%5D%2C%20bx%20%3D%20x1%20%2D%20oc%5B0%5D%2C%20by%20%3D%20y1%20%2D%20oc%5B1%5D%2C%20kc%20%3D%201%20%2F%20Math%2Esin%28Math%2Eacos%28%28ax%20%2A%20bx%20%2B%20ay%20%2A%20by%29%20%2F%20%28Math%2Esqrt%28ax%20%2A%20ax%20%2B%20ay%20%2A%20ay%29%20%2A%20Math%2Esqrt%28bx%20%2A%20bx%20%2B%20by%20%2A%20by%29%29%29%20%2F%202%29%2C%20lc%20%3D%20Math%2Esqrt%28oc%5B0%5D%20%2A%20oc%5B0%5D%20%2B%20oc%5B1%5D%20%2A%20oc%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20if%20%28x1%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20rc1%20%3D%20Math%2Emin%28rc%2C%20%28r1%20%2D%20lc%29%20%2F%20%28kc%20%2B%201%29%29%2C%20t30%20%3D%20d3%5Fsvg%5FarcCornerTangents%28x3%20%3D%3D%20null%20%3F%20%5B%20x2%2C%20y2%20%5D%20%3A%20%5B%20x3%2C%20y3%20%5D%2C%20%5B%20x0%2C%20y0%20%5D%2C%20r1%2C%20rc1%2C%20cw%29%2C%20t12%20%3D%20d3%5Fsvg%5FarcCornerTangents%28%5B%20x1%2C%20y1%20%5D%2C%20%5B%20x2%2C%20y2%20%5D%2C%20r1%2C%20rc1%2C%20cw%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28rc%20%3D%3D%3D%20rc1%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20path%2Epush%28%22M%22%2C%20t30%5B0%5D%2C%20%22A%22%2C%20rc1%2C%20%22%2C%22%2C%20rc1%2C%20%22%200%200%2C%22%2C%20cr%2C%20%22%20%22%2C%20t30%5B1%5D%2C%20%22A%22%2C%20r1%2C%20%22%2C%22%2C%20r1%2C%20%22%200%20%22%2C%201%20%2D%20cw%20%5E%20d3%5Fsvg%5FarcSweep%28t30%5B1%5D%5B0%5D%2C%20t30%5B1%5D%5B1%5D%2C%20t12%5B1%5D%5B0%5D%2C%20t12%5B1%5D%5B1%5D%29%2C%20%22%2C%22%2C%20cw%2C%20%22%20%22%2C%20t12%5B1%5D%2C%20%22A%22%2C%20rc1%2C%20%22%2C%22%2C%20rc1%2C%20%22%200%200%2C%22%2C%20cr%2C%20%22%20%22%2C%20t12%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20path%2Epush%28%22M%22%2C%20t30%5B0%5D%2C%20%22A%22%2C%20rc1%2C%20%22%2C%22%2C%20rc1%2C%20%22%200%201%2C%22%2C%20cr%2C%20%22%20%22%2C%20t12%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20path%2Epush%28%22M%22%2C%20x0%2C%20%22%2C%22%2C%20y0%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28x3%20%21%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20rc0%20%3D%20Math%2Emin%28rc%2C%20%28r0%20%2D%20lc%29%20%2F%20%28kc%20%2D%201%29%29%2C%20t03%20%3D%20d3%5Fsvg%5FarcCornerTangents%28%5B%20x0%2C%20y0%20%5D%2C%20%5B%20x3%2C%20y3%20%5D%2C%20r0%2C%20%2Drc0%2C%20cw%29%2C%20t21%20%3D%20d3%5Fsvg%5FarcCornerTangents%28%5B%20x2%2C%20y2%20%5D%2C%20x1%20%3D%3D%20null%20%3F%20%5B%20x0%2C%20y0%20%5D%20%3A%20%5B%20x1%2C%20y1%20%5D%2C%20r0%2C%20%2Drc0%2C%20cw%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28rc%20%3D%3D%3D%20rc0%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20path%2Epush%28%22L%22%2C%20t21%5B0%5D%2C%20%22A%22%2C%20rc0%2C%20%22%2C%22%2C%20rc0%2C%20%22%200%200%2C%22%2C%20cr%2C%20%22%20%22%2C%20t21%5B1%5D%2C%20%22A%22%2C%20r0%2C%20%22%2C%22%2C%20r0%2C%20%22%200%20%22%2C%20cw%20%5E%20d3%5Fsvg%5FarcSweep%28t21%5B1%5D%5B0%5D%2C%20t21%5B1%5D%5B1%5D%2C%20t03%5B1%5D%5B0%5D%2C%20t03%5B1%5D%5B1%5D%29%2C%20%22%2C%22%2C%201%20%2D%20cw%2C%20%22%20%22%2C%20t03%5B1%5D%2C%20%22A%22%2C%20rc0%2C%20%22%2C%22%2C%20rc0%2C%20%22%200%200%2C%22%2C%20cr%2C%20%22%20%22%2C%20t03%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20path%2Epush%28%22L%22%2C%20t21%5B0%5D%2C%20%22A%22%2C%20rc0%2C%20%22%2C%22%2C%20rc0%2C%20%22%200%200%2C%22%2C%20cr%2C%20%22%20%22%2C%20t03%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20path%2Epush%28%22L%22%2C%20x2%2C%20%22%2C%22%2C%20y2%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20path%2Epush%28%22M%22%2C%20x0%2C%20%22%2C%22%2C%20y0%29%3B%0A%20%20%20%20%20%20%20%20if%20%28x1%20%21%3D%20null%29%20path%2Epush%28%22A%22%2C%20r1%2C%20%22%2C%22%2C%20r1%2C%20%22%200%20%22%2C%20l1%2C%20%22%2C%22%2C%20cw%2C%20%22%20%22%2C%20x1%2C%20%22%2C%22%2C%20y1%29%3B%0A%20%20%20%20%20%20%20%20path%2Epush%28%22L%22%2C%20x2%2C%20%22%2C%22%2C%20y2%29%3B%0A%20%20%20%20%20%20%20%20if%20%28x3%20%21%3D%20null%29%20path%2Epush%28%22A%22%2C%20r0%2C%20%22%2C%22%2C%20r0%2C%20%22%200%20%22%2C%20l0%2C%20%22%2C%22%2C%201%20%2D%20cw%2C%20%22%20%22%2C%20x3%2C%20%22%2C%22%2C%20y3%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20path%2Epush%28%22Z%22%29%3B%0A%20%20%20%20%20%20return%20path%2Ejoin%28%22%22%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20circleSegment%28r1%2C%20cw%29%20%7B%0A%20%20%20%20%20%20return%20%22M0%2C%22%20%2B%20r1%20%2B%20%22A%22%20%2B%20r1%20%2B%20%22%2C%22%20%2B%20r1%20%2B%20%22%200%201%2C%22%20%2B%20cw%20%2B%20%22%200%2C%22%20%2B%20%2Dr1%20%2B%20%22A%22%20%2B%20r1%20%2B%20%22%2C%22%20%2B%20r1%20%2B%20%22%200%201%2C%22%20%2B%20cw%20%2B%20%22%200%2C%22%20%2B%20r1%3B%0A%20%20%20%20%7D%0A%20%20%20%20arc%2EinnerRadius%20%3D%20function%28v%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20innerRadius%3B%0A%20%20%20%20%20%20innerRadius%20%3D%20d3%5Ffunctor%28v%29%3B%0A%20%20%20%20%20%20return%20arc%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20arc%2EouterRadius%20%3D%20function%28v%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20outerRadius%3B%0A%20%20%20%20%20%20outerRadius%20%3D%20d3%5Ffunctor%28v%29%3B%0A%20%20%20%20%20%20return%20arc%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20arc%2EcornerRadius%20%3D%20function%28v%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20cornerRadius%3B%0A%20%20%20%20%20%20cornerRadius%20%3D%20d3%5Ffunctor%28v%29%3B%0A%20%20%20%20%20%20return%20arc%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20arc%2EpadRadius%20%3D%20function%28v%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20padRadius%3B%0A%20%20%20%20%20%20padRadius%20%3D%20v%20%3D%3D%20d3%5Fsvg%5FarcAuto%20%3F%20d3%5Fsvg%5FarcAuto%20%3A%20d3%5Ffunctor%28v%29%3B%0A%20%20%20%20%20%20return%20arc%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20arc%2EstartAngle%20%3D%20function%28v%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20startAngle%3B%0A%20%20%20%20%20%20startAngle%20%3D%20d3%5Ffunctor%28v%29%3B%0A%20%20%20%20%20%20return%20arc%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20arc%2EendAngle%20%3D%20function%28v%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20endAngle%3B%0A%20%20%20%20%20%20endAngle%20%3D%20d3%5Ffunctor%28v%29%3B%0A%20%20%20%20%20%20return%20arc%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20arc%2EpadAngle%20%3D%20function%28v%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20padAngle%3B%0A%20%20%20%20%20%20padAngle%20%3D%20d3%5Ffunctor%28v%29%3B%0A%20%20%20%20%20%20return%20arc%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20arc%2Ecentroid%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20r%20%3D%20%28%2BinnerRadius%2Eapply%28this%2C%20arguments%29%20%2B%20%2BouterRadius%2Eapply%28this%2C%20arguments%29%29%20%2F%202%2C%20a%20%3D%20%28%2BstartAngle%2Eapply%28this%2C%20arguments%29%20%2B%20%2BendAngle%2Eapply%28this%2C%20arguments%29%29%20%2F%202%20%2D%20half%CF%80%3B%0A%20%20%20%20%20%20return%20%5B%20Math%2Ecos%28a%29%20%2A%20r%2C%20Math%2Esin%28a%29%20%2A%20r%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20arc%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fsvg%5FarcAuto%20%3D%20%22auto%22%3B%0A%20%20function%20d3%5Fsvg%5FarcInnerRadius%28d%29%20%7B%0A%20%20%20%20return%20d%2EinnerRadius%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FarcOuterRadius%28d%29%20%7B%0A%20%20%20%20return%20d%2EouterRadius%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FarcStartAngle%28d%29%20%7B%0A%20%20%20%20return%20d%2EstartAngle%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FarcEndAngle%28d%29%20%7B%0A%20%20%20%20return%20d%2EendAngle%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FarcPadAngle%28d%29%20%7B%0A%20%20%20%20return%20d%20%26%26%20d%2EpadAngle%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FarcSweep%28x0%2C%20y0%2C%20x1%2C%20y1%29%20%7B%0A%20%20%20%20return%20%28x0%20%2D%20x1%29%20%2A%20y0%20%2D%20%28y0%20%2D%20y1%29%20%2A%20x0%20%3E%200%20%3F%200%20%3A%201%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FarcCornerTangents%28p0%2C%20p1%2C%20r1%2C%20rc%2C%20cw%29%20%7B%0A%20%20%20%20var%20x01%20%3D%20p0%5B0%5D%20%2D%20p1%5B0%5D%2C%20y01%20%3D%20p0%5B1%5D%20%2D%20p1%5B1%5D%2C%20lo%20%3D%20%28cw%20%3F%20rc%20%3A%20%2Drc%29%20%2F%20Math%2Esqrt%28x01%20%2A%20x01%20%2B%20y01%20%2A%20y01%29%2C%20ox%20%3D%20lo%20%2A%20y01%2C%20oy%20%3D%20%2Dlo%20%2A%20x01%2C%20x1%20%3D%20p0%5B0%5D%20%2B%20ox%2C%20y1%20%3D%20p0%5B1%5D%20%2B%20oy%2C%20x2%20%3D%20p1%5B0%5D%20%2B%20ox%2C%20y2%20%3D%20p1%5B1%5D%20%2B%20oy%2C%20x3%20%3D%20%28x1%20%2B%20x2%29%20%2F%202%2C%20y3%20%3D%20%28y1%20%2B%20y2%29%20%2F%202%2C%20dx%20%3D%20x2%20%2D%20x1%2C%20dy%20%3D%20y2%20%2D%20y1%2C%20d2%20%3D%20dx%20%2A%20dx%20%2B%20dy%20%2A%20dy%2C%20r%20%3D%20r1%20%2D%20rc%2C%20D%20%3D%20x1%20%2A%20y2%20%2D%20x2%20%2A%20y1%2C%20d%20%3D%20%28dy%20%3C%200%20%3F%20%2D1%20%3A%201%29%20%2A%20Math%2Esqrt%28r%20%2A%20r%20%2A%20d2%20%2D%20D%20%2A%20D%29%2C%20cx0%20%3D%20%28D%20%2A%20dy%20%2D%20dx%20%2A%20d%29%20%2F%20d2%2C%20cy0%20%3D%20%28%2DD%20%2A%20dx%20%2D%20dy%20%2A%20d%29%20%2F%20d2%2C%20cx1%20%3D%20%28D%20%2A%20dy%20%2B%20dx%20%2A%20d%29%20%2F%20d2%2C%20cy1%20%3D%20%28%2DD%20%2A%20dx%20%2B%20dy%20%2A%20d%29%20%2F%20d2%2C%20dx0%20%3D%20cx0%20%2D%20x3%2C%20dy0%20%3D%20cy0%20%2D%20y3%2C%20dx1%20%3D%20cx1%20%2D%20x3%2C%20dy1%20%3D%20cy1%20%2D%20y3%3B%0A%20%20%20%20if%20%28dx0%20%2A%20dx0%20%2B%20dy0%20%2A%20dy0%20%3E%20dx1%20%2A%20dx1%20%2B%20dy1%20%2A%20dy1%29%20cx0%20%3D%20cx1%2C%20cy0%20%3D%20cy1%3B%0A%20%20%20%20return%20%5B%20%5B%20cx0%20%2D%20ox%2C%20cy0%20%2D%20oy%20%5D%2C%20%5B%20cx0%20%2A%20r1%20%2F%20r%2C%20cy0%20%2A%20r1%20%2F%20r%20%5D%20%5D%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5Fline%28projection%29%20%7B%0A%20%20%20%20var%20x%20%3D%20d3%5Fgeom%5FpointX%2C%20y%20%3D%20d3%5Fgeom%5FpointY%2C%20defined%20%3D%20d3%5Ftrue%2C%20interpolate%20%3D%20d3%5Fsvg%5FlineLinear%2C%20interpolateKey%20%3D%20interpolate%2Ekey%2C%20tension%20%3D%20%2E7%3B%0A%20%20%20%20function%20line%28data%29%20%7B%0A%20%20%20%20%20%20var%20segments%20%3D%20%5B%5D%2C%20points%20%3D%20%5B%5D%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20data%2Elength%2C%20d%2C%20fx%20%3D%20d3%5Ffunctor%28x%29%2C%20fy%20%3D%20d3%5Ffunctor%28y%29%3B%0A%20%20%20%20%20%20function%20segment%28%29%20%7B%0A%20%20%20%20%20%20%20%20segments%2Epush%28%22M%22%2C%20interpolate%28projection%28points%29%2C%20tension%29%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28defined%2Ecall%28this%2C%20d%20%3D%20data%5Bi%5D%2C%20i%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20points%2Epush%28%5B%20%2Bfx%2Ecall%28this%2C%20d%2C%20i%29%2C%20%2Bfy%2Ecall%28this%2C%20d%2C%20i%29%20%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28points%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20segment%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20points%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28points%2Elength%29%20segment%28%29%3B%0A%20%20%20%20%20%20return%20segments%2Elength%20%3F%20segments%2Ejoin%28%22%22%29%20%3A%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20line%2Ex%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20x%3B%0A%20%20%20%20%20%20x%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20line%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20line%2Ey%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20y%3B%0A%20%20%20%20%20%20y%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20line%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20line%2Edefined%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20defined%3B%0A%20%20%20%20%20%20defined%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20line%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20line%2Einterpolate%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20interpolateKey%3B%0A%20%20%20%20%20%20if%20%28typeof%20%5F%20%3D%3D%3D%20%22function%22%29%20interpolateKey%20%3D%20interpolate%20%3D%20%5F%3B%20else%20interpolateKey%20%3D%20%28interpolate%20%3D%20d3%5Fsvg%5FlineInterpolators%2Eget%28%5F%29%20%7C%7C%20d3%5Fsvg%5FlineLinear%29%2Ekey%3B%0A%20%20%20%20%20%20return%20line%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20line%2Etension%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20tension%3B%0A%20%20%20%20%20%20tension%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20line%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20line%3B%0A%20%20%7D%0A%20%20d3%2Esvg%2Eline%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fsvg%5Fline%28d3%5Fidentity%29%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fsvg%5FlineInterpolators%20%3D%20d3%2Emap%28%7B%0A%20%20%20%20linear%3A%20d3%5Fsvg%5FlineLinear%2C%0A%20%20%20%20%22linear%2Dclosed%22%3A%20d3%5Fsvg%5FlineLinearClosed%2C%0A%20%20%20%20step%3A%20d3%5Fsvg%5FlineStep%2C%0A%20%20%20%20%22step%2Dbefore%22%3A%20d3%5Fsvg%5FlineStepBefore%2C%0A%20%20%20%20%22step%2Dafter%22%3A%20d3%5Fsvg%5FlineStepAfter%2C%0A%20%20%20%20basis%3A%20d3%5Fsvg%5FlineBasis%2C%0A%20%20%20%20%22basis%2Dopen%22%3A%20d3%5Fsvg%5FlineBasisOpen%2C%0A%20%20%20%20%22basis%2Dclosed%22%3A%20d3%5Fsvg%5FlineBasisClosed%2C%0A%20%20%20%20bundle%3A%20d3%5Fsvg%5FlineBundle%2C%0A%20%20%20%20cardinal%3A%20d3%5Fsvg%5FlineCardinal%2C%0A%20%20%20%20%22cardinal%2Dopen%22%3A%20d3%5Fsvg%5FlineCardinalOpen%2C%0A%20%20%20%20%22cardinal%2Dclosed%22%3A%20d3%5Fsvg%5FlineCardinalClosed%2C%0A%20%20%20%20monotone%3A%20d3%5Fsvg%5FlineMonotone%0A%20%20%7D%29%3B%0A%20%20d3%5Fsvg%5FlineInterpolators%2EforEach%28function%28key%2C%20value%29%20%7B%0A%20%20%20%20value%2Ekey%20%3D%20key%3B%0A%20%20%20%20value%2Eclosed%20%3D%20%2F%2Dclosed%24%2F%2Etest%28key%29%3B%0A%20%20%7D%29%3B%0A%20%20function%20d3%5Fsvg%5FlineLinear%28points%29%20%7B%0A%20%20%20%20return%20points%2Ejoin%28%22L%22%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineLinearClosed%28points%29%20%7B%0A%20%20%20%20return%20d3%5Fsvg%5FlineLinear%28points%29%20%2B%20%22Z%22%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineStep%28points%29%20%7B%0A%20%20%20%20var%20i%20%3D%200%2C%20n%20%3D%20points%2Elength%2C%20p%20%3D%20points%5B0%5D%2C%20path%20%3D%20%5B%20p%5B0%5D%2C%20%22%2C%22%2C%20p%5B1%5D%20%5D%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20path%2Epush%28%22H%22%2C%20%28p%5B0%5D%20%2B%20%28p%20%3D%20points%5Bi%5D%29%5B0%5D%29%20%2F%202%2C%20%22V%22%2C%20p%5B1%5D%29%3B%0A%20%20%20%20if%20%28n%20%3E%201%29%20path%2Epush%28%22H%22%2C%20p%5B0%5D%29%3B%0A%20%20%20%20return%20path%2Ejoin%28%22%22%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineStepBefore%28points%29%20%7B%0A%20%20%20%20var%20i%20%3D%200%2C%20n%20%3D%20points%2Elength%2C%20p%20%3D%20points%5B0%5D%2C%20path%20%3D%20%5B%20p%5B0%5D%2C%20%22%2C%22%2C%20p%5B1%5D%20%5D%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20path%2Epush%28%22V%22%2C%20%28p%20%3D%20points%5Bi%5D%29%5B1%5D%2C%20%22H%22%2C%20p%5B0%5D%29%3B%0A%20%20%20%20return%20path%2Ejoin%28%22%22%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineStepAfter%28points%29%20%7B%0A%20%20%20%20var%20i%20%3D%200%2C%20n%20%3D%20points%2Elength%2C%20p%20%3D%20points%5B0%5D%2C%20path%20%3D%20%5B%20p%5B0%5D%2C%20%22%2C%22%2C%20p%5B1%5D%20%5D%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20path%2Epush%28%22H%22%2C%20%28p%20%3D%20points%5Bi%5D%29%5B0%5D%2C%20%22V%22%2C%20p%5B1%5D%29%3B%0A%20%20%20%20return%20path%2Ejoin%28%22%22%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineCardinalOpen%28points%2C%20tension%29%20%7B%0A%20%20%20%20return%20points%2Elength%20%3C%204%20%3F%20d3%5Fsvg%5FlineLinear%28points%29%20%3A%20points%5B1%5D%20%2B%20d3%5Fsvg%5FlineHermite%28points%2Eslice%281%2C%20%2D1%29%2C%20d3%5Fsvg%5FlineCardinalTangents%28points%2C%20tension%29%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineCardinalClosed%28points%2C%20tension%29%20%7B%0A%20%20%20%20return%20points%2Elength%20%3C%203%20%3F%20d3%5Fsvg%5FlineLinear%28points%29%20%3A%20points%5B0%5D%20%2B%20d3%5Fsvg%5FlineHermite%28%28points%2Epush%28points%5B0%5D%29%2C%20%0A%20%20%20%20points%29%2C%20d3%5Fsvg%5FlineCardinalTangents%28%5B%20points%5Bpoints%2Elength%20%2D%202%5D%20%5D%2Econcat%28points%2C%20%5B%20points%5B1%5D%20%5D%29%2C%20tension%29%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineCardinal%28points%2C%20tension%29%20%7B%0A%20%20%20%20return%20points%2Elength%20%3C%203%20%3F%20d3%5Fsvg%5FlineLinear%28points%29%20%3A%20points%5B0%5D%20%2B%20d3%5Fsvg%5FlineHermite%28points%2C%20d3%5Fsvg%5FlineCardinalTangents%28points%2C%20tension%29%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineHermite%28points%2C%20tangents%29%20%7B%0A%20%20%20%20if%20%28tangents%2Elength%20%3C%201%20%7C%7C%20points%2Elength%20%21%3D%20tangents%2Elength%20%26%26%20points%2Elength%20%21%3D%20tangents%2Elength%20%2B%202%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Fsvg%5FlineLinear%28points%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20quad%20%3D%20points%2Elength%20%21%3D%20tangents%2Elength%2C%20path%20%3D%20%22%22%2C%20p0%20%3D%20points%5B0%5D%2C%20p%20%3D%20points%5B1%5D%2C%20t0%20%3D%20tangents%5B0%5D%2C%20t%20%3D%20t0%2C%20pi%20%3D%201%3B%0A%20%20%20%20if%20%28quad%29%20%7B%0A%20%20%20%20%20%20path%20%2B%3D%20%22Q%22%20%2B%20%28p%5B0%5D%20%2D%20t0%5B0%5D%20%2A%202%20%2F%203%29%20%2B%20%22%2C%22%20%2B%20%28p%5B1%5D%20%2D%20t0%5B1%5D%20%2A%202%20%2F%203%29%20%2B%20%22%2C%22%20%2B%20p%5B0%5D%20%2B%20%22%2C%22%20%2B%20p%5B1%5D%3B%0A%20%20%20%20%20%20p0%20%3D%20points%5B1%5D%3B%0A%20%20%20%20%20%20pi%20%3D%202%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28tangents%2Elength%20%3E%201%29%20%7B%0A%20%20%20%20%20%20t%20%3D%20tangents%5B1%5D%3B%0A%20%20%20%20%20%20p%20%3D%20points%5Bpi%5D%3B%0A%20%20%20%20%20%20pi%2B%2B%3B%0A%20%20%20%20%20%20path%20%2B%3D%20%22C%22%20%2B%20%28p0%5B0%5D%20%2B%20t0%5B0%5D%29%20%2B%20%22%2C%22%20%2B%20%28p0%5B1%5D%20%2B%20t0%5B1%5D%29%20%2B%20%22%2C%22%20%2B%20%28p%5B0%5D%20%2D%20t%5B0%5D%29%20%2B%20%22%2C%22%20%2B%20%28p%5B1%5D%20%2D%20t%5B1%5D%29%20%2B%20%22%2C%22%20%2B%20p%5B0%5D%20%2B%20%22%2C%22%20%2B%20p%5B1%5D%3B%0A%20%20%20%20%20%20for%20%28var%20i%20%3D%202%3B%20i%20%3C%20tangents%2Elength%3B%20i%2B%2B%2C%20pi%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20p%20%3D%20points%5Bpi%5D%3B%0A%20%20%20%20%20%20%20%20t%20%3D%20tangents%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20path%20%2B%3D%20%22S%22%20%2B%20%28p%5B0%5D%20%2D%20t%5B0%5D%29%20%2B%20%22%2C%22%20%2B%20%28p%5B1%5D%20%2D%20t%5B1%5D%29%20%2B%20%22%2C%22%20%2B%20p%5B0%5D%20%2B%20%22%2C%22%20%2B%20p%5B1%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28quad%29%20%7B%0A%20%20%20%20%20%20var%20lp%20%3D%20points%5Bpi%5D%3B%0A%20%20%20%20%20%20path%20%2B%3D%20%22Q%22%20%2B%20%28p%5B0%5D%20%2B%20t%5B0%5D%20%2A%202%20%2F%203%29%20%2B%20%22%2C%22%20%2B%20%28p%5B1%5D%20%2B%20t%5B1%5D%20%2A%202%20%2F%203%29%20%2B%20%22%2C%22%20%2B%20lp%5B0%5D%20%2B%20%22%2C%22%20%2B%20lp%5B1%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20path%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineCardinalTangents%28points%2C%20tension%29%20%7B%0A%20%20%20%20var%20tangents%20%3D%20%5B%5D%2C%20a%20%3D%20%281%20%2D%20tension%29%20%2F%202%2C%20p0%2C%20p1%20%3D%20points%5B0%5D%2C%20p2%20%3D%20points%5B1%5D%2C%20i%20%3D%201%2C%20n%20%3D%20points%2Elength%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20p0%20%3D%20p1%3B%0A%20%20%20%20%20%20p1%20%3D%20p2%3B%0A%20%20%20%20%20%20p2%20%3D%20points%5Bi%5D%3B%0A%20%20%20%20%20%20tangents%2Epush%28%5B%20a%20%2A%20%28p2%5B0%5D%20%2D%20p0%5B0%5D%29%2C%20a%20%2A%20%28p2%5B1%5D%20%2D%20p0%5B1%5D%29%20%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20tangents%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineBasis%28points%29%20%7B%0A%20%20%20%20if%20%28points%2Elength%20%3C%203%29%20return%20d3%5Fsvg%5FlineLinear%28points%29%3B%0A%20%20%20%20var%20i%20%3D%201%2C%20n%20%3D%20points%2Elength%2C%20pi%20%3D%20points%5B0%5D%2C%20x0%20%3D%20pi%5B0%5D%2C%20y0%20%3D%20pi%5B1%5D%2C%20px%20%3D%20%5B%20x0%2C%20x0%2C%20x0%2C%20%28pi%20%3D%20points%5B1%5D%29%5B0%5D%20%5D%2C%20py%20%3D%20%5B%20y0%2C%20y0%2C%20y0%2C%20pi%5B1%5D%20%5D%2C%20path%20%3D%20%5B%20x0%2C%20%22%2C%22%2C%20y0%2C%20%22L%22%2C%20d3%5Fsvg%5FlineDot4%28d3%5Fsvg%5FlineBasisBezier3%2C%20px%29%2C%20%22%2C%22%2C%20d3%5Fsvg%5FlineDot4%28d3%5Fsvg%5FlineBasisBezier3%2C%20py%29%20%5D%3B%0A%20%20%20%20points%2Epush%28points%5Bn%20%2D%201%5D%29%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%3D%20n%29%20%7B%0A%20%20%20%20%20%20pi%20%3D%20points%5Bi%5D%3B%0A%20%20%20%20%20%20px%2Eshift%28%29%3B%0A%20%20%20%20%20%20px%2Epush%28pi%5B0%5D%29%3B%0A%20%20%20%20%20%20py%2Eshift%28%29%3B%0A%20%20%20%20%20%20py%2Epush%28pi%5B1%5D%29%3B%0A%20%20%20%20%20%20d3%5Fsvg%5FlineBasisBezier%28path%2C%20px%2C%20py%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20points%2Epop%28%29%3B%0A%20%20%20%20path%2Epush%28%22L%22%2C%20pi%29%3B%0A%20%20%20%20return%20path%2Ejoin%28%22%22%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineBasisOpen%28points%29%20%7B%0A%20%20%20%20if%20%28points%2Elength%20%3C%204%29%20return%20d3%5Fsvg%5FlineLinear%28points%29%3B%0A%20%20%20%20var%20path%20%3D%20%5B%5D%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20points%2Elength%2C%20pi%2C%20px%20%3D%20%5B%200%20%5D%2C%20py%20%3D%20%5B%200%20%5D%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%203%29%20%7B%0A%20%20%20%20%20%20pi%20%3D%20points%5Bi%5D%3B%0A%20%20%20%20%20%20px%2Epush%28pi%5B0%5D%29%3B%0A%20%20%20%20%20%20py%2Epush%28pi%5B1%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20path%2Epush%28d3%5Fsvg%5FlineDot4%28d3%5Fsvg%5FlineBasisBezier3%2C%20px%29%20%2B%20%22%2C%22%20%2B%20d3%5Fsvg%5FlineDot4%28d3%5Fsvg%5FlineBasisBezier3%2C%20py%29%29%3B%0A%20%20%20%20%2D%2Di%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20pi%20%3D%20points%5Bi%5D%3B%0A%20%20%20%20%20%20px%2Eshift%28%29%3B%0A%20%20%20%20%20%20px%2Epush%28pi%5B0%5D%29%3B%0A%20%20%20%20%20%20py%2Eshift%28%29%3B%0A%20%20%20%20%20%20py%2Epush%28pi%5B1%5D%29%3B%0A%20%20%20%20%20%20d3%5Fsvg%5FlineBasisBezier%28path%2C%20px%2C%20py%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20path%2Ejoin%28%22%22%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineBasisClosed%28points%29%20%7B%0A%20%20%20%20var%20path%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20points%2Elength%2C%20m%20%3D%20n%20%2B%204%2C%20pi%2C%20px%20%3D%20%5B%5D%2C%20py%20%3D%20%5B%5D%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%204%29%20%7B%0A%20%20%20%20%20%20pi%20%3D%20points%5Bi%20%25%20n%5D%3B%0A%20%20%20%20%20%20px%2Epush%28pi%5B0%5D%29%3B%0A%20%20%20%20%20%20py%2Epush%28pi%5B1%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20path%20%3D%20%5B%20d3%5Fsvg%5FlineDot4%28d3%5Fsvg%5FlineBasisBezier3%2C%20px%29%2C%20%22%2C%22%2C%20d3%5Fsvg%5FlineDot4%28d3%5Fsvg%5FlineBasisBezier3%2C%20py%29%20%5D%3B%0A%20%20%20%20%2D%2Di%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20m%29%20%7B%0A%20%20%20%20%20%20pi%20%3D%20points%5Bi%20%25%20n%5D%3B%0A%20%20%20%20%20%20px%2Eshift%28%29%3B%0A%20%20%20%20%20%20px%2Epush%28pi%5B0%5D%29%3B%0A%20%20%20%20%20%20py%2Eshift%28%29%3B%0A%20%20%20%20%20%20py%2Epush%28pi%5B1%5D%29%3B%0A%20%20%20%20%20%20d3%5Fsvg%5FlineBasisBezier%28path%2C%20px%2C%20py%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20path%2Ejoin%28%22%22%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineBundle%28points%2C%20tension%29%20%7B%0A%20%20%20%20var%20n%20%3D%20points%2Elength%20%2D%201%3B%0A%20%20%20%20if%20%28n%29%20%7B%0A%20%20%20%20%20%20var%20x0%20%3D%20points%5B0%5D%5B0%5D%2C%20y0%20%3D%20points%5B0%5D%5B1%5D%2C%20dx%20%3D%20points%5Bn%5D%5B0%5D%20%2D%20x0%2C%20dy%20%3D%20points%5Bn%5D%5B1%5D%20%2D%20y0%2C%20i%20%3D%20%2D1%2C%20p%2C%20t%3B%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%3D%20n%29%20%7B%0A%20%20%20%20%20%20%20%20p%20%3D%20points%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20t%20%3D%20i%20%2F%20n%3B%0A%20%20%20%20%20%20%20%20p%5B0%5D%20%3D%20tension%20%2A%20p%5B0%5D%20%2B%20%281%20%2D%20tension%29%20%2A%20%28x0%20%2B%20t%20%2A%20dx%29%3B%0A%20%20%20%20%20%20%20%20p%5B1%5D%20%3D%20tension%20%2A%20p%5B1%5D%20%2B%20%281%20%2D%20tension%29%20%2A%20%28y0%20%2B%20t%20%2A%20dy%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5Fsvg%5FlineBasis%28points%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineDot4%28a%2C%20b%29%20%7B%0A%20%20%20%20return%20a%5B0%5D%20%2A%20b%5B0%5D%20%2B%20a%5B1%5D%20%2A%20b%5B1%5D%20%2B%20a%5B2%5D%20%2A%20b%5B2%5D%20%2B%20a%5B3%5D%20%2A%20b%5B3%5D%3B%0A%20%20%7D%0A%20%20var%20d3%5Fsvg%5FlineBasisBezier1%20%3D%20%5B%200%2C%202%20%2F%203%2C%201%20%2F%203%2C%200%20%5D%2C%20d3%5Fsvg%5FlineBasisBezier2%20%3D%20%5B%200%2C%201%20%2F%203%2C%202%20%2F%203%2C%200%20%5D%2C%20d3%5Fsvg%5FlineBasisBezier3%20%3D%20%5B%200%2C%201%20%2F%206%2C%202%20%2F%203%2C%201%20%2F%206%20%5D%3B%0A%20%20function%20d3%5Fsvg%5FlineBasisBezier%28path%2C%20x%2C%20y%29%20%7B%0A%20%20%20%20path%2Epush%28%22C%22%2C%20d3%5Fsvg%5FlineDot4%28d3%5Fsvg%5FlineBasisBezier1%2C%20x%29%2C%20%22%2C%22%2C%20d3%5Fsvg%5FlineDot4%28d3%5Fsvg%5FlineBasisBezier1%2C%20y%29%2C%20%22%2C%22%2C%20d3%5Fsvg%5FlineDot4%28d3%5Fsvg%5FlineBasisBezier2%2C%20x%29%2C%20%22%2C%22%2C%20d3%5Fsvg%5FlineDot4%28d3%5Fsvg%5FlineBasisBezier2%2C%20y%29%2C%20%22%2C%22%2C%20d3%5Fsvg%5FlineDot4%28d3%5Fsvg%5FlineBasisBezier3%2C%20x%29%2C%20%22%2C%22%2C%20d3%5Fsvg%5FlineDot4%28d3%5Fsvg%5FlineBasisBezier3%2C%20y%29%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineSlope%28p0%2C%20p1%29%20%7B%0A%20%20%20%20return%20%28p1%5B1%5D%20%2D%20p0%5B1%5D%29%20%2F%20%28p1%5B0%5D%20%2D%20p0%5B0%5D%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineFiniteDifferences%28points%29%20%7B%0A%20%20%20%20var%20i%20%3D%200%2C%20j%20%3D%20points%2Elength%20%2D%201%2C%20m%20%3D%20%5B%5D%2C%20p0%20%3D%20points%5B0%5D%2C%20p1%20%3D%20points%5B1%5D%2C%20d%20%3D%20m%5B0%5D%20%3D%20d3%5Fsvg%5FlineSlope%28p0%2C%20p1%29%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20j%29%20%7B%0A%20%20%20%20%20%20m%5Bi%5D%20%3D%20%28d%20%2B%20%28d%20%3D%20d3%5Fsvg%5FlineSlope%28p0%20%3D%20p1%2C%20p1%20%3D%20points%5Bi%20%2B%201%5D%29%29%29%20%2F%202%3B%0A%20%20%20%20%7D%0A%20%20%20%20m%5Bi%5D%20%3D%20d%3B%0A%20%20%20%20return%20m%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineMonotoneTangents%28points%29%20%7B%0A%20%20%20%20var%20tangents%20%3D%20%5B%5D%2C%20d%2C%20a%2C%20b%2C%20s%2C%20m%20%3D%20d3%5Fsvg%5FlineFiniteDifferences%28points%29%2C%20i%20%3D%20%2D1%2C%20j%20%3D%20points%2Elength%20%2D%201%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20j%29%20%7B%0A%20%20%20%20%20%20d%20%3D%20d3%5Fsvg%5FlineSlope%28points%5Bi%5D%2C%20points%5Bi%20%2B%201%5D%29%3B%0A%20%20%20%20%20%20if%20%28abs%28d%29%20%3C%20%CE%B5%29%20%7B%0A%20%20%20%20%20%20%20%20m%5Bi%5D%20%3D%20m%5Bi%20%2B%201%5D%20%3D%200%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20a%20%3D%20m%5Bi%5D%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20b%20%3D%20m%5Bi%20%2B%201%5D%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20s%20%3D%20a%20%2A%20a%20%2B%20b%20%2A%20b%3B%0A%20%20%20%20%20%20%20%20if%20%28s%20%3E%209%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20s%20%3D%20d%20%2A%203%20%2F%20Math%2Esqrt%28s%29%3B%0A%20%20%20%20%20%20%20%20%20%20m%5Bi%5D%20%3D%20s%20%2A%20a%3B%0A%20%20%20%20%20%20%20%20%20%20m%5Bi%20%2B%201%5D%20%3D%20s%20%2A%20b%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20i%20%3D%20%2D1%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%3D%20j%29%20%7B%0A%20%20%20%20%20%20s%20%3D%20%28points%5BMath%2Emin%28j%2C%20i%20%2B%201%29%5D%5B0%5D%20%2D%20points%5BMath%2Emax%280%2C%20i%20%2D%201%29%5D%5B0%5D%29%20%2F%20%286%20%2A%20%281%20%2B%20m%5Bi%5D%20%2A%20m%5Bi%5D%29%29%3B%0A%20%20%20%20%20%20tangents%2Epush%28%5B%20s%20%7C%7C%200%2C%20m%5Bi%5D%20%2A%20s%20%7C%7C%200%20%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20tangents%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FlineMonotone%28points%29%20%7B%0A%20%20%20%20return%20points%2Elength%20%3C%203%20%3F%20d3%5Fsvg%5FlineLinear%28points%29%20%3A%20points%5B0%5D%20%2B%20d3%5Fsvg%5FlineHermite%28points%2C%20d3%5Fsvg%5FlineMonotoneTangents%28points%29%29%3B%0A%20%20%7D%0A%20%20d3%2Esvg%2Eline%2Eradial%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20line%20%3D%20d3%5Fsvg%5Fline%28d3%5Fsvg%5FlineRadial%29%3B%0A%20%20%20%20line%2Eradius%20%3D%20line%2Ex%2C%20delete%20line%2Ex%3B%0A%20%20%20%20line%2Eangle%20%3D%20line%2Ey%2C%20delete%20line%2Ey%3B%0A%20%20%20%20return%20line%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fsvg%5FlineRadial%28points%29%20%7B%0A%20%20%20%20var%20point%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20points%2Elength%2C%20r%2C%20a%3B%0A%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20point%20%3D%20points%5Bi%5D%3B%0A%20%20%20%20%20%20r%20%3D%20point%5B0%5D%3B%0A%20%20%20%20%20%20a%20%3D%20point%5B1%5D%20%2D%20half%CF%80%3B%0A%20%20%20%20%20%20point%5B0%5D%20%3D%20r%20%2A%20Math%2Ecos%28a%29%3B%0A%20%20%20%20%20%20point%5B1%5D%20%3D%20r%20%2A%20Math%2Esin%28a%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20points%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5Farea%28projection%29%20%7B%0A%20%20%20%20var%20x0%20%3D%20d3%5Fgeom%5FpointX%2C%20x1%20%3D%20d3%5Fgeom%5FpointX%2C%20y0%20%3D%200%2C%20y1%20%3D%20d3%5Fgeom%5FpointY%2C%20defined%20%3D%20d3%5Ftrue%2C%20interpolate%20%3D%20d3%5Fsvg%5FlineLinear%2C%20interpolateKey%20%3D%20interpolate%2Ekey%2C%20interpolateReverse%20%3D%20interpolate%2C%20L%20%3D%20%22L%22%2C%20tension%20%3D%20%2E7%3B%0A%20%20%20%20function%20area%28data%29%20%7B%0A%20%20%20%20%20%20var%20segments%20%3D%20%5B%5D%2C%20points0%20%3D%20%5B%5D%2C%20points1%20%3D%20%5B%5D%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20data%2Elength%2C%20d%2C%20fx0%20%3D%20d3%5Ffunctor%28x0%29%2C%20fy0%20%3D%20d3%5Ffunctor%28y0%29%2C%20fx1%20%3D%20x0%20%3D%3D%3D%20x1%20%3F%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20x%3B%0A%20%20%20%20%20%20%7D%20%3A%20d3%5Ffunctor%28x1%29%2C%20fy1%20%3D%20y0%20%3D%3D%3D%20y1%20%3F%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20y%3B%0A%20%20%20%20%20%20%7D%20%3A%20d3%5Ffunctor%28y1%29%2C%20x%2C%20y%3B%0A%20%20%20%20%20%20function%20segment%28%29%20%7B%0A%20%20%20%20%20%20%20%20segments%2Epush%28%22M%22%2C%20interpolate%28projection%28points1%29%2C%20tension%29%2C%20L%2C%20interpolateReverse%28projection%28points0%2Ereverse%28%29%29%2C%20tension%29%2C%20%22Z%22%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20while%20%28%2B%2Bi%20%3C%20n%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28defined%2Ecall%28this%2C%20d%20%3D%20data%5Bi%5D%2C%20i%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20points0%2Epush%28%5B%20x%20%3D%20%2Bfx0%2Ecall%28this%2C%20d%2C%20i%29%2C%20y%20%3D%20%2Bfy0%2Ecall%28this%2C%20d%2C%20i%29%20%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20points1%2Epush%28%5B%20%2Bfx1%2Ecall%28this%2C%20d%2C%20i%29%2C%20%2Bfy1%2Ecall%28this%2C%20d%2C%20i%29%20%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28points0%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20segment%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20points0%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20points1%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28points0%2Elength%29%20segment%28%29%3B%0A%20%20%20%20%20%20return%20segments%2Elength%20%3F%20segments%2Ejoin%28%22%22%29%20%3A%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20area%2Ex%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20x1%3B%0A%20%20%20%20%20%20x0%20%3D%20x1%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20area%2Ex0%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20x0%3B%0A%20%20%20%20%20%20x0%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20area%2Ex1%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20x1%3B%0A%20%20%20%20%20%20x1%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20area%2Ey%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20y1%3B%0A%20%20%20%20%20%20y0%20%3D%20y1%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20area%2Ey0%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20y0%3B%0A%20%20%20%20%20%20y0%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20area%2Ey1%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20y1%3B%0A%20%20%20%20%20%20y1%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20area%2Edefined%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20defined%3B%0A%20%20%20%20%20%20defined%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20area%2Einterpolate%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20interpolateKey%3B%0A%20%20%20%20%20%20if%20%28typeof%20%5F%20%3D%3D%3D%20%22function%22%29%20interpolateKey%20%3D%20interpolate%20%3D%20%5F%3B%20else%20interpolateKey%20%3D%20%28interpolate%20%3D%20d3%5Fsvg%5FlineInterpolators%2Eget%28%5F%29%20%7C%7C%20d3%5Fsvg%5FlineLinear%29%2Ekey%3B%0A%20%20%20%20%20%20interpolateReverse%20%3D%20interpolate%2Ereverse%20%7C%7C%20interpolate%3B%0A%20%20%20%20%20%20L%20%3D%20interpolate%2Eclosed%20%3F%20%22M%22%20%3A%20%22L%22%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20area%2Etension%20%3D%20function%28%5F%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20tension%3B%0A%20%20%20%20%20%20tension%20%3D%20%5F%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20area%3B%0A%20%20%7D%0A%20%20d3%5Fsvg%5FlineStepBefore%2Ereverse%20%3D%20d3%5Fsvg%5FlineStepAfter%3B%0A%20%20d3%5Fsvg%5FlineStepAfter%2Ereverse%20%3D%20d3%5Fsvg%5FlineStepBefore%3B%0A%20%20d3%2Esvg%2Earea%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Fsvg%5Farea%28d3%5Fidentity%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Esvg%2Earea%2Eradial%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20area%20%3D%20d3%5Fsvg%5Farea%28d3%5Fsvg%5FlineRadial%29%3B%0A%20%20%20%20area%2Eradius%20%3D%20area%2Ex%2C%20delete%20area%2Ex%3B%0A%20%20%20%20area%2EinnerRadius%20%3D%20area%2Ex0%2C%20delete%20area%2Ex0%3B%0A%20%20%20%20area%2EouterRadius%20%3D%20area%2Ex1%2C%20delete%20area%2Ex1%3B%0A%20%20%20%20area%2Eangle%20%3D%20area%2Ey%2C%20delete%20area%2Ey%3B%0A%20%20%20%20area%2EstartAngle%20%3D%20area%2Ey0%2C%20delete%20area%2Ey0%3B%0A%20%20%20%20area%2EendAngle%20%3D%20area%2Ey1%2C%20delete%20area%2Ey1%3B%0A%20%20%20%20return%20area%3B%0A%20%20%7D%3B%0A%20%20d3%2Esvg%2Echord%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20source%20%3D%20d3%5Fsource%2C%20target%20%3D%20d3%5Ftarget%2C%20radius%20%3D%20d3%5Fsvg%5FchordRadius%2C%20startAngle%20%3D%20d3%5Fsvg%5FarcStartAngle%2C%20endAngle%20%3D%20d3%5Fsvg%5FarcEndAngle%3B%0A%20%20%20%20function%20chord%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20var%20s%20%3D%20subgroup%28this%2C%20source%2C%20d%2C%20i%29%2C%20t%20%3D%20subgroup%28this%2C%20target%2C%20d%2C%20i%29%3B%0A%20%20%20%20%20%20return%20%22M%22%20%2B%20s%2Ep0%20%2B%20arc%28s%2Er%2C%20s%2Ep1%2C%20s%2Ea1%20%2D%20s%2Ea0%29%20%2B%20%28equals%28s%2C%20t%29%20%3F%20curve%28s%2Er%2C%20s%2Ep1%2C%20s%2Er%2C%20s%2Ep0%29%20%3A%20curve%28s%2Er%2C%20s%2Ep1%2C%20t%2Er%2C%20t%2Ep0%29%20%2B%20arc%28t%2Er%2C%20t%2Ep1%2C%20t%2Ea1%20%2D%20t%2Ea0%29%20%2B%20curve%28t%2Er%2C%20t%2Ep1%2C%20s%2Er%2C%20s%2Ep0%29%29%20%2B%20%22Z%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20subgroup%28self%2C%20f%2C%20d%2C%20i%29%20%7B%0A%20%20%20%20%20%20var%20subgroup%20%3D%20f%2Ecall%28self%2C%20d%2C%20i%29%2C%20r%20%3D%20radius%2Ecall%28self%2C%20subgroup%2C%20i%29%2C%20a0%20%3D%20startAngle%2Ecall%28self%2C%20subgroup%2C%20i%29%20%2D%20half%CF%80%2C%20a1%20%3D%20endAngle%2Ecall%28self%2C%20subgroup%2C%20i%29%20%2D%20half%CF%80%3B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20r%3A%20r%2C%0A%20%20%20%20%20%20%20%20a0%3A%20a0%2C%0A%20%20%20%20%20%20%20%20a1%3A%20a1%2C%0A%20%20%20%20%20%20%20%20p0%3A%20%5B%20r%20%2A%20Math%2Ecos%28a0%29%2C%20r%20%2A%20Math%2Esin%28a0%29%20%5D%2C%0A%20%20%20%20%20%20%20%20p1%3A%20%5B%20r%20%2A%20Math%2Ecos%28a1%29%2C%20r%20%2A%20Math%2Esin%28a1%29%20%5D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20equals%28a%2C%20b%29%20%7B%0A%20%20%20%20%20%20return%20a%2Ea0%20%3D%3D%20b%2Ea0%20%26%26%20a%2Ea1%20%3D%3D%20b%2Ea1%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20arc%28r%2C%20p%2C%20a%29%20%7B%0A%20%20%20%20%20%20return%20%22A%22%20%2B%20r%20%2B%20%22%2C%22%20%2B%20r%20%2B%20%22%200%20%22%20%2B%20%2B%28a%20%3E%20%CF%80%29%20%2B%20%22%2C1%20%22%20%2B%20p%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20curve%28r0%2C%20p0%2C%20r1%2C%20p1%29%20%7B%0A%20%20%20%20%20%20return%20%22Q%200%2C0%20%22%20%2B%20p1%3B%0A%20%20%20%20%7D%0A%20%20%20%20chord%2Eradius%20%3D%20function%28v%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20radius%3B%0A%20%20%20%20%20%20radius%20%3D%20d3%5Ffunctor%28v%29%3B%0A%20%20%20%20%20%20return%20chord%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20chord%2Esource%20%3D%20function%28v%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20source%3B%0A%20%20%20%20%20%20source%20%3D%20d3%5Ffunctor%28v%29%3B%0A%20%20%20%20%20%20return%20chord%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20chord%2Etarget%20%3D%20function%28v%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20target%3B%0A%20%20%20%20%20%20target%20%3D%20d3%5Ffunctor%28v%29%3B%0A%20%20%20%20%20%20return%20chord%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20chord%2EstartAngle%20%3D%20function%28v%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20startAngle%3B%0A%20%20%20%20%20%20startAngle%20%3D%20d3%5Ffunctor%28v%29%3B%0A%20%20%20%20%20%20return%20chord%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20chord%2EendAngle%20%3D%20function%28v%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20endAngle%3B%0A%20%20%20%20%20%20endAngle%20%3D%20d3%5Ffunctor%28v%29%3B%0A%20%20%20%20%20%20return%20chord%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20chord%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fsvg%5FchordRadius%28d%29%20%7B%0A%20%20%20%20return%20d%2Eradius%3B%0A%20%20%7D%0A%20%20d3%2Esvg%2Ediagonal%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20source%20%3D%20d3%5Fsource%2C%20target%20%3D%20d3%5Ftarget%2C%20projection%20%3D%20d3%5Fsvg%5FdiagonalProjection%3B%0A%20%20%20%20function%20diagonal%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20var%20p0%20%3D%20source%2Ecall%28this%2C%20d%2C%20i%29%2C%20p3%20%3D%20target%2Ecall%28this%2C%20d%2C%20i%29%2C%20m%20%3D%20%28p0%2Ey%20%2B%20p3%2Ey%29%20%2F%202%2C%20p%20%3D%20%5B%20p0%2C%20%7B%0A%20%20%20%20%20%20%20%20x%3A%20p0%2Ex%2C%0A%20%20%20%20%20%20%20%20y%3A%20m%0A%20%20%20%20%20%20%7D%2C%20%7B%0A%20%20%20%20%20%20%20%20x%3A%20p3%2Ex%2C%0A%20%20%20%20%20%20%20%20y%3A%20m%0A%20%20%20%20%20%20%7D%2C%20p3%20%5D%3B%0A%20%20%20%20%20%20p%20%3D%20p%2Emap%28projection%29%3B%0A%20%20%20%20%20%20return%20%22M%22%20%2B%20p%5B0%5D%20%2B%20%22C%22%20%2B%20p%5B1%5D%20%2B%20%22%20%22%20%2B%20p%5B2%5D%20%2B%20%22%20%22%20%2B%20p%5B3%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20diagonal%2Esource%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20source%3B%0A%20%20%20%20%20%20source%20%3D%20d3%5Ffunctor%28x%29%3B%0A%20%20%20%20%20%20return%20diagonal%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20diagonal%2Etarget%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20target%3B%0A%20%20%20%20%20%20target%20%3D%20d3%5Ffunctor%28x%29%3B%0A%20%20%20%20%20%20return%20diagonal%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20diagonal%2Eprojection%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20projection%3B%0A%20%20%20%20%20%20projection%20%3D%20x%3B%0A%20%20%20%20%20%20return%20diagonal%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20diagonal%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fsvg%5FdiagonalProjection%28d%29%20%7B%0A%20%20%20%20return%20%5B%20d%2Ex%2C%20d%2Ey%20%5D%3B%0A%20%20%7D%0A%20%20d3%2Esvg%2Ediagonal%2Eradial%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20diagonal%20%3D%20d3%2Esvg%2Ediagonal%28%29%2C%20projection%20%3D%20d3%5Fsvg%5FdiagonalProjection%2C%20projection%5F%20%3D%20diagonal%2Eprojection%3B%0A%20%20%20%20diagonal%2Eprojection%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20arguments%2Elength%20%3F%20projection%5F%28d3%5Fsvg%5FdiagonalRadialProjection%28projection%20%3D%20x%29%29%20%3A%20projection%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20diagonal%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fsvg%5FdiagonalRadialProjection%28projection%29%20%7B%0A%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20d%20%3D%20projection%2Eapply%28this%2C%20arguments%29%2C%20r%20%3D%20d%5B0%5D%2C%20a%20%3D%20d%5B1%5D%20%2D%20half%CF%80%3B%0A%20%20%20%20%20%20return%20%5B%20r%20%2A%20Math%2Ecos%28a%29%2C%20r%20%2A%20Math%2Esin%28a%29%20%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%2Esvg%2Esymbol%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20type%20%3D%20d3%5Fsvg%5FsymbolType%2C%20size%20%3D%20d3%5Fsvg%5FsymbolSize%3B%0A%20%20%20%20function%20symbol%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20return%20%28d3%5Fsvg%5Fsymbols%2Eget%28type%2Ecall%28this%2C%20d%2C%20i%29%29%20%7C%7C%20d3%5Fsvg%5FsymbolCircle%29%28size%2Ecall%28this%2C%20d%2C%20i%29%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20symbol%2Etype%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20type%3B%0A%20%20%20%20%20%20type%20%3D%20d3%5Ffunctor%28x%29%3B%0A%20%20%20%20%20%20return%20symbol%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20symbol%2Esize%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20size%3B%0A%20%20%20%20%20%20size%20%3D%20d3%5Ffunctor%28x%29%3B%0A%20%20%20%20%20%20return%20symbol%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20symbol%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fsvg%5FsymbolSize%28%29%20%7B%0A%20%20%20%20return%2064%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FsymbolType%28%29%20%7B%0A%20%20%20%20return%20%22circle%22%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FsymbolCircle%28size%29%20%7B%0A%20%20%20%20var%20r%20%3D%20Math%2Esqrt%28size%20%2F%20%CF%80%29%3B%0A%20%20%20%20return%20%22M0%2C%22%20%2B%20r%20%2B%20%22A%22%20%2B%20r%20%2B%20%22%2C%22%20%2B%20r%20%2B%20%22%200%201%2C1%200%2C%22%20%2B%20%2Dr%20%2B%20%22A%22%20%2B%20r%20%2B%20%22%2C%22%20%2B%20r%20%2B%20%22%200%201%2C1%200%2C%22%20%2B%20r%20%2B%20%22Z%22%3B%0A%20%20%7D%0A%20%20var%20d3%5Fsvg%5Fsymbols%20%3D%20d3%2Emap%28%7B%0A%20%20%20%20circle%3A%20d3%5Fsvg%5FsymbolCircle%2C%0A%20%20%20%20cross%3A%20function%28size%29%20%7B%0A%20%20%20%20%20%20var%20r%20%3D%20Math%2Esqrt%28size%20%2F%205%29%20%2F%202%3B%0A%20%20%20%20%20%20return%20%22M%22%20%2B%20%2D3%20%2A%20r%20%2B%20%22%2C%22%20%2B%20%2Dr%20%2B%20%22H%22%20%2B%20%2Dr%20%2B%20%22V%22%20%2B%20%2D3%20%2A%20r%20%2B%20%22H%22%20%2B%20r%20%2B%20%22V%22%20%2B%20%2Dr%20%2B%20%22H%22%20%2B%203%20%2A%20r%20%2B%20%22V%22%20%2B%20r%20%2B%20%22H%22%20%2B%20r%20%2B%20%22V%22%20%2B%203%20%2A%20r%20%2B%20%22H%22%20%2B%20%2Dr%20%2B%20%22V%22%20%2B%20r%20%2B%20%22H%22%20%2B%20%2D3%20%2A%20r%20%2B%20%22Z%22%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20diamond%3A%20function%28size%29%20%7B%0A%20%20%20%20%20%20var%20ry%20%3D%20Math%2Esqrt%28size%20%2F%20%282%20%2A%20d3%5Fsvg%5FsymbolTan30%29%29%2C%20rx%20%3D%20ry%20%2A%20d3%5Fsvg%5FsymbolTan30%3B%0A%20%20%20%20%20%20return%20%22M0%2C%22%20%2B%20%2Dry%20%2B%20%22L%22%20%2B%20rx%20%2B%20%22%2C0%22%20%2B%20%22%200%2C%22%20%2B%20ry%20%2B%20%22%20%22%20%2B%20%2Drx%20%2B%20%22%2C0%22%20%2B%20%22Z%22%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20square%3A%20function%28size%29%20%7B%0A%20%20%20%20%20%20var%20r%20%3D%20Math%2Esqrt%28size%29%20%2F%202%3B%0A%20%20%20%20%20%20return%20%22M%22%20%2B%20%2Dr%20%2B%20%22%2C%22%20%2B%20%2Dr%20%2B%20%22L%22%20%2B%20r%20%2B%20%22%2C%22%20%2B%20%2Dr%20%2B%20%22%20%22%20%2B%20r%20%2B%20%22%2C%22%20%2B%20r%20%2B%20%22%20%22%20%2B%20%2Dr%20%2B%20%22%2C%22%20%2B%20r%20%2B%20%22Z%22%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22triangle%2Ddown%22%3A%20function%28size%29%20%7B%0A%20%20%20%20%20%20var%20rx%20%3D%20Math%2Esqrt%28size%20%2F%20d3%5Fsvg%5FsymbolSqrt3%29%2C%20ry%20%3D%20rx%20%2A%20d3%5Fsvg%5FsymbolSqrt3%20%2F%202%3B%0A%20%20%20%20%20%20return%20%22M0%2C%22%20%2B%20ry%20%2B%20%22L%22%20%2B%20rx%20%2B%20%22%2C%22%20%2B%20%2Dry%20%2B%20%22%20%22%20%2B%20%2Drx%20%2B%20%22%2C%22%20%2B%20%2Dry%20%2B%20%22Z%22%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22triangle%2Dup%22%3A%20function%28size%29%20%7B%0A%20%20%20%20%20%20var%20rx%20%3D%20Math%2Esqrt%28size%20%2F%20d3%5Fsvg%5FsymbolSqrt3%29%2C%20ry%20%3D%20rx%20%2A%20d3%5Fsvg%5FsymbolSqrt3%20%2F%202%3B%0A%20%20%20%20%20%20return%20%22M0%2C%22%20%2B%20%2Dry%20%2B%20%22L%22%20%2B%20rx%20%2B%20%22%2C%22%20%2B%20ry%20%2B%20%22%20%22%20%2B%20%2Drx%20%2B%20%22%2C%22%20%2B%20ry%20%2B%20%22Z%22%3B%0A%20%20%20%20%7D%0A%20%20%7D%29%3B%0A%20%20d3%2Esvg%2EsymbolTypes%20%3D%20d3%5Fsvg%5Fsymbols%2Ekeys%28%29%3B%0A%20%20var%20d3%5Fsvg%5FsymbolSqrt3%20%3D%20Math%2Esqrt%283%29%2C%20d3%5Fsvg%5FsymbolTan30%20%3D%20Math%2Etan%2830%20%2A%20d3%5Fradians%29%3B%0A%20%20d3%5FselectionPrototype%2Etransition%20%3D%20function%28name%29%20%7B%0A%20%20%20%20var%20id%20%3D%20d3%5FtransitionInheritId%20%7C%7C%20%2B%2Bd3%5FtransitionId%2C%20ns%20%3D%20d3%5FtransitionNamespace%28name%29%2C%20subgroups%20%3D%20%5B%5D%2C%20subgroup%2C%20node%2C%20transition%20%3D%20d3%5FtransitionInherit%20%7C%7C%20%7B%0A%20%20%20%20%20%20time%3A%20Date%2Enow%28%29%2C%0A%20%20%20%20%20%20ease%3A%20d3%5Fease%5FcubicInOut%2C%0A%20%20%20%20%20%20delay%3A%200%2C%0A%20%20%20%20%20%20duration%3A%20250%0A%20%20%20%20%7D%3B%0A%20%20%20%20for%20%28var%20j%20%3D%20%2D1%2C%20m%20%3D%20this%2Elength%3B%20%2B%2Bj%20%3C%20m%3B%20%29%20%7B%0A%20%20%20%20%20%20subgroups%2Epush%28subgroup%20%3D%20%5B%5D%29%3B%0A%20%20%20%20%20%20for%20%28var%20group%20%3D%20this%5Bj%5D%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20group%2Elength%3B%20%2B%2Bi%20%3C%20n%3B%20%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28node%20%3D%20group%5Bi%5D%29%20d3%5FtransitionNode%28node%2C%20i%2C%20ns%2C%20id%2C%20transition%29%3B%0A%20%20%20%20%20%20%20%20subgroup%2Epush%28node%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5Ftransition%28subgroups%2C%20ns%2C%20id%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FselectionPrototype%2Einterrupt%20%3D%20function%28name%29%20%7B%0A%20%20%20%20return%20this%2Eeach%28name%20%3D%3D%20null%20%3F%20d3%5Fselection%5Finterrupt%20%3A%20d3%5Fselection%5FinterruptNS%28d3%5FtransitionNamespace%28name%29%29%29%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fselection%5Finterrupt%20%3D%20d3%5Fselection%5FinterruptNS%28d3%5FtransitionNamespace%28%29%29%3B%0A%20%20function%20d3%5Fselection%5FinterruptNS%28ns%29%20%7B%0A%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20lock%2C%20active%3B%0A%20%20%20%20%20%20if%20%28%28lock%20%3D%20this%5Bns%5D%29%20%26%26%20%28active%20%3D%20lock%5Block%2Eactive%5D%29%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%2D%2Dlock%2Ecount%29%20delete%20lock%5Block%2Eactive%5D%3B%20else%20delete%20this%5Bns%5D%3B%0A%20%20%20%20%20%20%20%20lock%2Eactive%20%2B%3D%20%2E5%3B%0A%20%20%20%20%20%20%20%20active%2Eevent%20%26%26%20active%2Eevent%2Einterrupt%2Ecall%28this%2C%20this%2E%5F%5Fdata%5F%5F%2C%20active%2Eindex%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftransition%28groups%2C%20ns%2C%20id%29%20%7B%0A%20%20%20%20d3%5Fsubclass%28groups%2C%20d3%5FtransitionPrototype%29%3B%0A%20%20%20%20groups%2Enamespace%20%3D%20ns%3B%0A%20%20%20%20groups%2Eid%20%3D%20id%3B%0A%20%20%20%20return%20groups%3B%0A%20%20%7D%0A%20%20var%20d3%5FtransitionPrototype%20%3D%20%5B%5D%2C%20d3%5FtransitionId%20%3D%200%2C%20d3%5FtransitionInheritId%2C%20d3%5FtransitionInherit%3B%0A%20%20d3%5FtransitionPrototype%2Ecall%20%3D%20d3%5FselectionPrototype%2Ecall%3B%0A%20%20d3%5FtransitionPrototype%2Eempty%20%3D%20d3%5FselectionPrototype%2Eempty%3B%0A%20%20d3%5FtransitionPrototype%2Enode%20%3D%20d3%5FselectionPrototype%2Enode%3B%0A%20%20d3%5FtransitionPrototype%2Esize%20%3D%20d3%5FselectionPrototype%2Esize%3B%0A%20%20d3%2Etransition%20%3D%20function%28selection%2C%20name%29%20%7B%0A%20%20%20%20return%20selection%20%26%26%20selection%2Etransition%20%3F%20d3%5FtransitionInheritId%20%3F%20selection%2Etransition%28name%29%20%3A%20selection%20%3A%20d3%5FselectionRoot%2Etransition%28selection%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Etransition%2Eprototype%20%3D%20d3%5FtransitionPrototype%3B%0A%20%20d3%5FtransitionPrototype%2Eselect%20%3D%20function%28selector%29%20%7B%0A%20%20%20%20var%20id%20%3D%20this%2Eid%2C%20ns%20%3D%20this%2Enamespace%2C%20subgroups%20%3D%20%5B%5D%2C%20subgroup%2C%20subnode%2C%20node%3B%0A%20%20%20%20selector%20%3D%20d3%5Fselection%5Fselector%28selector%29%3B%0A%20%20%20%20for%20%28var%20j%20%3D%20%2D1%2C%20m%20%3D%20this%2Elength%3B%20%2B%2Bj%20%3C%20m%3B%20%29%20%7B%0A%20%20%20%20%20%20subgroups%2Epush%28subgroup%20%3D%20%5B%5D%29%3B%0A%20%20%20%20%20%20for%20%28var%20group%20%3D%20this%5Bj%5D%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20group%2Elength%3B%20%2B%2Bi%20%3C%20n%3B%20%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%28node%20%3D%20group%5Bi%5D%29%20%26%26%20%28subnode%20%3D%20selector%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%2C%20j%29%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%22%5F%5Fdata%5F%5F%22%20in%20node%29%20subnode%2E%5F%5Fdata%5F%5F%20%3D%20node%2E%5F%5Fdata%5F%5F%3B%0A%20%20%20%20%20%20%20%20%20%20d3%5FtransitionNode%28subnode%2C%20i%2C%20ns%2C%20id%2C%20node%5Bns%5D%5Bid%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20subgroup%2Epush%28subnode%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20subgroup%2Epush%28null%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5Ftransition%28subgroups%2C%20ns%2C%20id%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FtransitionPrototype%2EselectAll%20%3D%20function%28selector%29%20%7B%0A%20%20%20%20var%20id%20%3D%20this%2Eid%2C%20ns%20%3D%20this%2Enamespace%2C%20subgroups%20%3D%20%5B%5D%2C%20subgroup%2C%20subnodes%2C%20node%2C%20subnode%2C%20transition%3B%0A%20%20%20%20selector%20%3D%20d3%5Fselection%5FselectorAll%28selector%29%3B%0A%20%20%20%20for%20%28var%20j%20%3D%20%2D1%2C%20m%20%3D%20this%2Elength%3B%20%2B%2Bj%20%3C%20m%3B%20%29%20%7B%0A%20%20%20%20%20%20for%20%28var%20group%20%3D%20this%5Bj%5D%2C%20i%20%3D%20%2D1%2C%20n%20%3D%20group%2Elength%3B%20%2B%2Bi%20%3C%20n%3B%20%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28node%20%3D%20group%5Bi%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20transition%20%3D%20node%5Bns%5D%5Bid%5D%3B%0A%20%20%20%20%20%20%20%20%20%20subnodes%20%3D%20selector%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%2C%20j%29%3B%0A%20%20%20%20%20%20%20%20%20%20subgroups%2Epush%28subgroup%20%3D%20%5B%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20for%20%28var%20k%20%3D%20%2D1%2C%20o%20%3D%20subnodes%2Elength%3B%20%2B%2Bk%20%3C%20o%3B%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28subnode%20%3D%20subnodes%5Bk%5D%29%20d3%5FtransitionNode%28subnode%2C%20k%2C%20ns%2C%20id%2C%20transition%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20subgroup%2Epush%28subnode%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5Ftransition%28subgroups%2C%20ns%2C%20id%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FtransitionPrototype%2Efilter%20%3D%20function%28filter%29%20%7B%0A%20%20%20%20var%20subgroups%20%3D%20%5B%5D%2C%20subgroup%2C%20group%2C%20node%3B%0A%20%20%20%20if%20%28typeof%20filter%20%21%3D%3D%20%22function%22%29%20filter%20%3D%20d3%5Fselection%5Ffilter%28filter%29%3B%0A%20%20%20%20for%20%28var%20j%20%3D%200%2C%20m%20%3D%20this%2Elength%3B%20j%20%3C%20m%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20subgroups%2Epush%28subgroup%20%3D%20%5B%5D%29%3B%0A%20%20%20%20%20%20for%20%28var%20group%20%3D%20this%5Bj%5D%2C%20i%20%3D%200%2C%20n%20%3D%20group%2Elength%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%28node%20%3D%20group%5Bi%5D%29%20%26%26%20filter%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%2C%20j%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20subgroup%2Epush%28node%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5Ftransition%28subgroups%2C%20this%2Enamespace%2C%20this%2Eid%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FtransitionPrototype%2Etween%20%3D%20function%28name%2C%20tween%29%20%7B%0A%20%20%20%20var%20id%20%3D%20this%2Eid%2C%20ns%20%3D%20this%2Enamespace%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20return%20this%2Enode%28%29%5Bns%5D%5Bid%5D%2Etween%2Eget%28name%29%3B%0A%20%20%20%20return%20d3%5Fselection%5Feach%28this%2C%20tween%20%3D%3D%20null%20%3F%20function%28node%29%20%7B%0A%20%20%20%20%20%20node%5Bns%5D%5Bid%5D%2Etween%2Eremove%28name%29%3B%0A%20%20%20%20%7D%20%3A%20function%28node%29%20%7B%0A%20%20%20%20%20%20node%5Bns%5D%5Bid%5D%2Etween%2Eset%28name%2C%20tween%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Ftransition%5Ftween%28groups%2C%20name%2C%20value%2C%20tween%29%20%7B%0A%20%20%20%20var%20id%20%3D%20groups%2Eid%2C%20ns%20%3D%20groups%2Enamespace%3B%0A%20%20%20%20return%20d3%5Fselection%5Feach%28groups%2C%20typeof%20value%20%3D%3D%3D%20%22function%22%20%3F%20function%28node%2C%20i%2C%20j%29%20%7B%0A%20%20%20%20%20%20node%5Bns%5D%5Bid%5D%2Etween%2Eset%28name%2C%20tween%28value%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%2C%20j%29%29%29%3B%0A%20%20%20%20%7D%20%3A%20%28value%20%3D%20tween%28value%29%2C%20function%28node%29%20%7B%0A%20%20%20%20%20%20node%5Bns%5D%5Bid%5D%2Etween%2Eset%28name%2C%20value%29%3B%0A%20%20%20%20%7D%29%29%3B%0A%20%20%7D%0A%20%20d3%5FtransitionPrototype%2Eattr%20%3D%20function%28nameNS%2C%20value%29%20%7B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20%7B%0A%20%20%20%20%20%20for%20%28value%20in%20nameNS%29%20this%2Eattr%28value%2C%20nameNS%5Bvalue%5D%29%3B%0A%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%7D%0A%20%20%20%20var%20interpolate%20%3D%20nameNS%20%3D%3D%20%22transform%22%20%3F%20d3%5FinterpolateTransform%20%3A%20d3%5Finterpolate%2C%20name%20%3D%20d3%2Ens%2Equalify%28nameNS%29%3B%0A%20%20%20%20function%20attrNull%28%29%20%7B%0A%20%20%20%20%20%20this%2EremoveAttribute%28name%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20attrNullNS%28%29%20%7B%0A%20%20%20%20%20%20this%2EremoveAttributeNS%28name%2Espace%2C%20name%2Elocal%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20attrTween%28b%29%20%7B%0A%20%20%20%20%20%20return%20b%20%3D%3D%20null%20%3F%20attrNull%20%3A%20%28b%20%2B%3D%20%22%22%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20this%2EgetAttribute%28name%29%2C%20i%3B%0A%20%20%20%20%20%20%20%20return%20a%20%21%3D%3D%20b%20%26%26%20%28i%20%3D%20interpolate%28a%2C%20b%29%2C%20function%28t%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20this%2EsetAttribute%28name%2C%20i%28t%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20attrTweenNS%28b%29%20%7B%0A%20%20%20%20%20%20return%20b%20%3D%3D%20null%20%3F%20attrNullNS%20%3A%20%28b%20%2B%3D%20%22%22%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20this%2EgetAttributeNS%28name%2Espace%2C%20name%2Elocal%29%2C%20i%3B%0A%20%20%20%20%20%20%20%20return%20a%20%21%3D%3D%20b%20%26%26%20%28i%20%3D%20interpolate%28a%2C%20b%29%2C%20function%28t%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20this%2EsetAttributeNS%28name%2Espace%2C%20name%2Elocal%2C%20i%28t%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5Ftransition%5Ftween%28this%2C%20%22attr%2E%22%20%2B%20nameNS%2C%20value%2C%20name%2Elocal%20%3F%20attrTweenNS%20%3A%20attrTween%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FtransitionPrototype%2EattrTween%20%3D%20function%28nameNS%2C%20tween%29%20%7B%0A%20%20%20%20var%20name%20%3D%20d3%2Ens%2Equalify%28nameNS%29%3B%0A%20%20%20%20function%20attrTween%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20var%20f%20%3D%20tween%2Ecall%28this%2C%20d%2C%20i%2C%20this%2EgetAttribute%28name%29%29%3B%0A%20%20%20%20%20%20return%20f%20%26%26%20function%28t%29%20%7B%0A%20%20%20%20%20%20%20%20this%2EsetAttribute%28name%2C%20f%28t%29%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20attrTweenNS%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20var%20f%20%3D%20tween%2Ecall%28this%2C%20d%2C%20i%2C%20this%2EgetAttributeNS%28name%2Espace%2C%20name%2Elocal%29%29%3B%0A%20%20%20%20%20%20return%20f%20%26%26%20function%28t%29%20%7B%0A%20%20%20%20%20%20%20%20this%2EsetAttributeNS%28name%2Espace%2C%20name%2Elocal%2C%20f%28t%29%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20this%2Etween%28%22attr%2E%22%20%2B%20nameNS%2C%20name%2Elocal%20%3F%20attrTweenNS%20%3A%20attrTween%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FtransitionPrototype%2Estyle%20%3D%20function%28name%2C%20value%2C%20priority%29%20%7B%0A%20%20%20%20var%20n%20%3D%20arguments%2Elength%3B%0A%20%20%20%20if%20%28n%20%3C%203%29%20%7B%0A%20%20%20%20%20%20if%20%28typeof%20name%20%21%3D%3D%20%22string%22%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28n%20%3C%202%29%20value%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20for%20%28priority%20in%20name%29%20this%2Estyle%28priority%2C%20name%5Bpriority%5D%2C%20value%29%3B%0A%20%20%20%20%20%20%20%20return%20this%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20priority%20%3D%20%22%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20styleNull%28%29%20%7B%0A%20%20%20%20%20%20this%2Estyle%2EremoveProperty%28name%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20styleString%28b%29%20%7B%0A%20%20%20%20%20%20return%20b%20%3D%3D%20null%20%3F%20styleNull%20%3A%20%28b%20%2B%3D%20%22%22%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20d3%5Fwindow%2EgetComputedStyle%28this%2C%20null%29%2EgetPropertyValue%28name%29%2C%20i%3B%0A%20%20%20%20%20%20%20%20return%20a%20%21%3D%3D%20b%20%26%26%20%28i%20%3D%20d3%5Finterpolate%28a%2C%20b%29%2C%20function%28t%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20this%2Estyle%2EsetProperty%28name%2C%20i%28t%29%2C%20priority%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5Ftransition%5Ftween%28this%2C%20%22style%2E%22%20%2B%20name%2C%20value%2C%20styleString%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FtransitionPrototype%2EstyleTween%20%3D%20function%28name%2C%20tween%2C%20priority%29%20%7B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%203%29%20priority%20%3D%20%22%22%3B%0A%20%20%20%20function%20styleTween%28d%2C%20i%29%20%7B%0A%20%20%20%20%20%20var%20f%20%3D%20tween%2Ecall%28this%2C%20d%2C%20i%2C%20d3%5Fwindow%2EgetComputedStyle%28this%2C%20null%29%2EgetPropertyValue%28name%29%29%3B%0A%20%20%20%20%20%20return%20f%20%26%26%20function%28t%29%20%7B%0A%20%20%20%20%20%20%20%20this%2Estyle%2EsetProperty%28name%2C%20f%28t%29%2C%20priority%29%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20this%2Etween%28%22style%2E%22%20%2B%20name%2C%20styleTween%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FtransitionPrototype%2Etext%20%3D%20function%28value%29%20%7B%0A%20%20%20%20return%20d3%5Ftransition%5Ftween%28this%2C%20%22text%22%2C%20value%2C%20d3%5Ftransition%5Ftext%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Ftransition%5Ftext%28b%29%20%7B%0A%20%20%20%20if%20%28b%20%3D%3D%20null%29%20b%20%3D%20%22%22%3B%0A%20%20%20%20return%20function%28%29%20%7B%0A%20%20%20%20%20%20this%2EtextContent%20%3D%20b%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20d3%5FtransitionPrototype%2Eremove%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20ns%20%3D%20this%2Enamespace%3B%0A%20%20%20%20return%20this%2Eeach%28%22end%2Etransition%22%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20var%20p%3B%0A%20%20%20%20%20%20if%20%28this%5Bns%5D%2Ecount%20%3C%202%20%26%26%20%28p%20%3D%20this%2EparentNode%29%29%20p%2EremoveChild%28this%29%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FtransitionPrototype%2Eease%20%3D%20function%28value%29%20%7B%0A%20%20%20%20var%20id%20%3D%20this%2Eid%2C%20ns%20%3D%20this%2Enamespace%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%201%29%20return%20this%2Enode%28%29%5Bns%5D%5Bid%5D%2Eease%3B%0A%20%20%20%20if%20%28typeof%20value%20%21%3D%3D%20%22function%22%29%20value%20%3D%20d3%2Eease%2Eapply%28d3%2C%20arguments%29%3B%0A%20%20%20%20return%20d3%5Fselection%5Feach%28this%2C%20function%28node%29%20%7B%0A%20%20%20%20%20%20node%5Bns%5D%5Bid%5D%2Eease%20%3D%20value%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FtransitionPrototype%2Edelay%20%3D%20function%28value%29%20%7B%0A%20%20%20%20var%20id%20%3D%20this%2Eid%2C%20ns%20%3D%20this%2Enamespace%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%201%29%20return%20this%2Enode%28%29%5Bns%5D%5Bid%5D%2Edelay%3B%0A%20%20%20%20return%20d3%5Fselection%5Feach%28this%2C%20typeof%20value%20%3D%3D%3D%20%22function%22%20%3F%20function%28node%2C%20i%2C%20j%29%20%7B%0A%20%20%20%20%20%20node%5Bns%5D%5Bid%5D%2Edelay%20%3D%20%2Bvalue%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%2C%20j%29%3B%0A%20%20%20%20%7D%20%3A%20%28value%20%3D%20%2Bvalue%2C%20function%28node%29%20%7B%0A%20%20%20%20%20%20node%5Bns%5D%5Bid%5D%2Edelay%20%3D%20value%3B%0A%20%20%20%20%7D%29%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FtransitionPrototype%2Eduration%20%3D%20function%28value%29%20%7B%0A%20%20%20%20var%20id%20%3D%20this%2Eid%2C%20ns%20%3D%20this%2Enamespace%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%201%29%20return%20this%2Enode%28%29%5Bns%5D%5Bid%5D%2Eduration%3B%0A%20%20%20%20return%20d3%5Fselection%5Feach%28this%2C%20typeof%20value%20%3D%3D%3D%20%22function%22%20%3F%20function%28node%2C%20i%2C%20j%29%20%7B%0A%20%20%20%20%20%20node%5Bns%5D%5Bid%5D%2Eduration%20%3D%20Math%2Emax%281%2C%20value%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%2C%20j%29%29%3B%0A%20%20%20%20%7D%20%3A%20%28value%20%3D%20Math%2Emax%281%2C%20value%29%2C%20function%28node%29%20%7B%0A%20%20%20%20%20%20node%5Bns%5D%5Bid%5D%2Eduration%20%3D%20value%3B%0A%20%20%20%20%7D%29%29%3B%0A%20%20%7D%3B%0A%20%20d3%5FtransitionPrototype%2Eeach%20%3D%20function%28type%2C%20listener%29%20%7B%0A%20%20%20%20var%20id%20%3D%20this%2Eid%2C%20ns%20%3D%20this%2Enamespace%3B%0A%20%20%20%20if%20%28arguments%2Elength%20%3C%202%29%20%7B%0A%20%20%20%20%20%20var%20inherit%20%3D%20d3%5FtransitionInherit%2C%20inheritId%20%3D%20d3%5FtransitionInheritId%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20d3%5FtransitionInheritId%20%3D%20id%3B%0A%20%20%20%20%20%20%20%20d3%5Fselection%5Feach%28this%2C%20function%28node%2C%20i%2C%20j%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20d3%5FtransitionInherit%20%3D%20node%5Bns%5D%5Bid%5D%3B%0A%20%20%20%20%20%20%20%20%20%20type%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%2C%20j%29%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20d3%5FtransitionInherit%20%3D%20inherit%3B%0A%20%20%20%20%20%20%20%20d3%5FtransitionInheritId%20%3D%20inheritId%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20d3%5Fselection%5Feach%28this%2C%20function%28node%29%20%7B%0A%20%20%20%20%20%20%20%20var%20transition%20%3D%20node%5Bns%5D%5Bid%5D%3B%0A%20%20%20%20%20%20%20%20%28transition%2Eevent%20%7C%7C%20%28transition%2Eevent%20%3D%20d3%2Edispatch%28%22start%22%2C%20%22end%22%2C%20%22interrupt%22%29%29%29%2Eon%28type%2C%20listener%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20this%3B%0A%20%20%7D%3B%0A%20%20d3%5FtransitionPrototype%2Etransition%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20id0%20%3D%20this%2Eid%2C%20id1%20%3D%20%2B%2Bd3%5FtransitionId%2C%20ns%20%3D%20this%2Enamespace%2C%20subgroups%20%3D%20%5B%5D%2C%20subgroup%2C%20group%2C%20node%2C%20transition%3B%0A%20%20%20%20for%20%28var%20j%20%3D%200%2C%20m%20%3D%20this%2Elength%3B%20j%20%3C%20m%3B%20j%2B%2B%29%20%7B%0A%20%20%20%20%20%20subgroups%2Epush%28subgroup%20%3D%20%5B%5D%29%3B%0A%20%20%20%20%20%20for%20%28var%20group%20%3D%20this%5Bj%5D%2C%20i%20%3D%200%2C%20n%20%3D%20group%2Elength%3B%20i%20%3C%20n%3B%20i%2B%2B%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28node%20%3D%20group%5Bi%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20transition%20%3D%20node%5Bns%5D%5Bid0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20d3%5FtransitionNode%28node%2C%20i%2C%20ns%2C%20id1%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20time%3A%20transition%2Etime%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ease%3A%20transition%2Eease%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20delay%3A%20transition%2Edelay%20%2B%20transition%2Eduration%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20duration%3A%20transition%2Eduration%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20subgroup%2Epush%28node%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20d3%5Ftransition%28subgroups%2C%20ns%2C%20id1%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5FtransitionNamespace%28name%29%20%7B%0A%20%20%20%20return%20name%20%3D%3D%20null%20%3F%20%22%5F%5Ftransition%5F%5F%22%20%3A%20%22%5F%5Ftransition%5F%22%20%2B%20name%20%2B%20%22%5F%5F%22%3B%0A%20%20%7D%0A%20%20function%20d3%5FtransitionNode%28node%2C%20i%2C%20ns%2C%20id%2C%20inherit%29%20%7B%0A%20%20%20%20var%20lock%20%3D%20node%5Bns%5D%20%7C%7C%20%28node%5Bns%5D%20%3D%20%7B%0A%20%20%20%20%20%20active%3A%200%2C%0A%20%20%20%20%20%20count%3A%200%0A%20%20%20%20%7D%29%2C%20transition%20%3D%20lock%5Bid%5D%3B%0A%20%20%20%20if%20%28%21transition%29%20%7B%0A%20%20%20%20%20%20var%20time%20%3D%20inherit%2Etime%3B%0A%20%20%20%20%20%20transition%20%3D%20lock%5Bid%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20tween%3A%20new%20d3%5FMap%28%29%2C%0A%20%20%20%20%20%20%20%20time%3A%20time%2C%0A%20%20%20%20%20%20%20%20delay%3A%20inherit%2Edelay%2C%0A%20%20%20%20%20%20%20%20duration%3A%20inherit%2Eduration%2C%0A%20%20%20%20%20%20%20%20ease%3A%20inherit%2Eease%2C%0A%20%20%20%20%20%20%20%20index%3A%20i%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20inherit%20%3D%20null%3B%0A%20%20%20%20%20%20%2B%2Block%2Ecount%3B%0A%20%20%20%20%20%20d3%2Etimer%28function%28elapsed%29%20%7B%0A%20%20%20%20%20%20%20%20var%20delay%20%3D%20transition%2Edelay%2C%20duration%2C%20ease%2C%20timer%20%3D%20d3%5Ftimer%5Factive%2C%20tweened%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20timer%2Et%20%3D%20delay%20%2B%20time%3B%0A%20%20%20%20%20%20%20%20if%20%28delay%20%3C%3D%20elapsed%29%20return%20start%28elapsed%20%2D%20delay%29%3B%0A%20%20%20%20%20%20%20%20timer%2Ec%20%3D%20start%3B%0A%20%20%20%20%20%20%20%20function%20start%28elapsed%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28lock%2Eactive%20%3E%20id%29%20return%20stop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20var%20active%20%3D%20lock%5Block%2Eactive%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28active%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2D%2Dlock%2Ecount%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20lock%5Block%2Eactive%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20active%2Eevent%20%26%26%20active%2Eevent%2Einterrupt%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20active%2Eindex%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20lock%2Eactive%20%3D%20id%3B%0A%20%20%20%20%20%20%20%20%20%20transition%2Eevent%20%26%26%20transition%2Eevent%2Estart%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%29%3B%0A%20%20%20%20%20%20%20%20%20%20transition%2Etween%2EforEach%28function%28key%2C%20value%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28value%20%3D%20value%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tweened%2Epush%28value%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20ease%20%3D%20transition%2Eease%3B%0A%20%20%20%20%20%20%20%20%20%20duration%20%3D%20transition%2Eduration%3B%0A%20%20%20%20%20%20%20%20%20%20d3%2Etimer%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20timer%2Ec%20%3D%20tick%28elapsed%20%7C%7C%201%29%20%3F%20d3%5Ftrue%20%3A%20tick%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%200%2C%20time%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20function%20tick%28elapsed%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28lock%2Eactive%20%21%3D%3D%20id%29%20return%201%3B%0A%20%20%20%20%20%20%20%20%20%20var%20t%20%3D%20elapsed%20%2F%20duration%2C%20e%20%3D%20ease%28t%29%2C%20n%20%3D%20tweened%2Elength%3B%0A%20%20%20%20%20%20%20%20%20%20while%20%28n%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tweened%5B%2D%2Dn%5D%2Ecall%28node%2C%20e%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20%28t%20%3E%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20transition%2Eevent%20%26%26%20transition%2Eevent%2Eend%2Ecall%28node%2C%20node%2E%5F%5Fdata%5F%5F%2C%20i%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20stop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20function%20stop%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%2D%2Dlock%2Ecount%29%20delete%20lock%5Bid%5D%3B%20else%20delete%20node%5Bns%5D%3B%0A%20%20%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%200%2C%20time%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20d3%2Esvg%2Eaxis%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20scale%20%3D%20d3%2Escale%2Elinear%28%29%2C%20orient%20%3D%20d3%5Fsvg%5FaxisDefaultOrient%2C%20innerTickSize%20%3D%206%2C%20outerTickSize%20%3D%206%2C%20tickPadding%20%3D%203%2C%20tickArguments%5F%20%3D%20%5B%2010%20%5D%2C%20tickValues%20%3D%20null%2C%20tickFormat%5F%3B%0A%20%20%20%20function%20axis%28g%29%20%7B%0A%20%20%20%20%20%20g%2Eeach%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20g%20%3D%20d3%2Eselect%28this%29%3B%0A%20%20%20%20%20%20%20%20var%20scale0%20%3D%20this%2E%5F%5Fchart%5F%5F%20%7C%7C%20scale%2C%20scale1%20%3D%20this%2E%5F%5Fchart%5F%5F%20%3D%20scale%2Ecopy%28%29%3B%0A%20%20%20%20%20%20%20%20var%20ticks%20%3D%20tickValues%20%3D%3D%20null%20%3F%20scale1%2Eticks%20%3F%20scale1%2Eticks%2Eapply%28scale1%2C%20tickArguments%5F%29%20%3A%20scale1%2Edomain%28%29%20%3A%20tickValues%2C%20tickFormat%20%3D%20tickFormat%5F%20%3D%3D%20null%20%3F%20scale1%2EtickFormat%20%3F%20scale1%2EtickFormat%2Eapply%28scale1%2C%20tickArguments%5F%29%20%3A%20d3%5Fidentity%20%3A%20tickFormat%5F%2C%20tick%20%3D%20g%2EselectAll%28%22%2Etick%22%29%2Edata%28ticks%2C%20scale1%29%2C%20tickEnter%20%3D%20tick%2Eenter%28%29%2Einsert%28%22g%22%2C%20%22%2Edomain%22%29%2Eattr%28%22class%22%2C%20%22tick%22%29%2Estyle%28%22opacity%22%2C%20%CE%B5%29%2C%20tickExit%20%3D%20d3%2Etransition%28tick%2Eexit%28%29%29%2Estyle%28%22opacity%22%2C%20%CE%B5%29%2Eremove%28%29%2C%20tickUpdate%20%3D%20d3%2Etransition%28tick%2Eorder%28%29%29%2Estyle%28%22opacity%22%2C%201%29%2C%20tickSpacing%20%3D%20Math%2Emax%28innerTickSize%2C%200%29%20%2B%20tickPadding%2C%20tickTransform%3B%0A%20%20%20%20%20%20%20%20var%20range%20%3D%20d3%5FscaleRange%28scale1%29%2C%20path%20%3D%20g%2EselectAll%28%22%2Edomain%22%29%2Edata%28%5B%200%20%5D%29%2C%20pathUpdate%20%3D%20%28path%2Eenter%28%29%2Eappend%28%22path%22%29%2Eattr%28%22class%22%2C%20%22domain%22%29%2C%20%0A%20%20%20%20%20%20%20%20d3%2Etransition%28path%29%29%3B%0A%20%20%20%20%20%20%20%20tickEnter%2Eappend%28%22line%22%29%3B%0A%20%20%20%20%20%20%20%20tickEnter%2Eappend%28%22text%22%29%3B%0A%20%20%20%20%20%20%20%20var%20lineEnter%20%3D%20tickEnter%2Eselect%28%22line%22%29%2C%20lineUpdate%20%3D%20tickUpdate%2Eselect%28%22line%22%29%2C%20text%20%3D%20tick%2Eselect%28%22text%22%29%2Etext%28tickFormat%29%2C%20textEnter%20%3D%20tickEnter%2Eselect%28%22text%22%29%2C%20textUpdate%20%3D%20tickUpdate%2Eselect%28%22text%22%29%2C%20sign%20%3D%20orient%20%3D%3D%3D%20%22top%22%20%7C%7C%20orient%20%3D%3D%3D%20%22left%22%20%3F%20%2D1%20%3A%201%2C%20x1%2C%20x2%2C%20y1%2C%20y2%3B%0A%20%20%20%20%20%20%20%20if%20%28orient%20%3D%3D%3D%20%22bottom%22%20%7C%7C%20orient%20%3D%3D%3D%20%22top%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20tickTransform%20%3D%20d3%5Fsvg%5FaxisX%2C%20x1%20%3D%20%22x%22%2C%20y1%20%3D%20%22y%22%2C%20x2%20%3D%20%22x2%22%2C%20y2%20%3D%20%22y2%22%3B%0A%20%20%20%20%20%20%20%20%20%20text%2Eattr%28%22dy%22%2C%20sign%20%3C%200%20%3F%20%220em%22%20%3A%20%22%2E71em%22%29%2Estyle%28%22text%2Danchor%22%2C%20%22middle%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20pathUpdate%2Eattr%28%22d%22%2C%20%22M%22%20%2B%20range%5B0%5D%20%2B%20%22%2C%22%20%2B%20sign%20%2A%20outerTickSize%20%2B%20%22V0H%22%20%2B%20range%5B1%5D%20%2B%20%22V%22%20%2B%20sign%20%2A%20outerTickSize%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20tickTransform%20%3D%20d3%5Fsvg%5FaxisY%2C%20x1%20%3D%20%22y%22%2C%20y1%20%3D%20%22x%22%2C%20x2%20%3D%20%22y2%22%2C%20y2%20%3D%20%22x2%22%3B%0A%20%20%20%20%20%20%20%20%20%20text%2Eattr%28%22dy%22%2C%20%22%2E32em%22%29%2Estyle%28%22text%2Danchor%22%2C%20sign%20%3C%200%20%3F%20%22end%22%20%3A%20%22start%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20pathUpdate%2Eattr%28%22d%22%2C%20%22M%22%20%2B%20sign%20%2A%20outerTickSize%20%2B%20%22%2C%22%20%2B%20range%5B0%5D%20%2B%20%22H0V%22%20%2B%20range%5B1%5D%20%2B%20%22H%22%20%2B%20sign%20%2A%20outerTickSize%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20lineEnter%2Eattr%28y2%2C%20sign%20%2A%20innerTickSize%29%3B%0A%20%20%20%20%20%20%20%20textEnter%2Eattr%28y1%2C%20sign%20%2A%20tickSpacing%29%3B%0A%20%20%20%20%20%20%20%20lineUpdate%2Eattr%28x2%2C%200%29%2Eattr%28y2%2C%20sign%20%2A%20innerTickSize%29%3B%0A%20%20%20%20%20%20%20%20textUpdate%2Eattr%28x1%2C%200%29%2Eattr%28y1%2C%20sign%20%2A%20tickSpacing%29%3B%0A%20%20%20%20%20%20%20%20if%20%28scale1%2ErangeBand%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%20scale1%2C%20dx%20%3D%20x%2ErangeBand%28%29%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%20%20scale0%20%3D%20scale1%20%3D%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x%28d%29%20%2B%20dx%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28scale0%2ErangeBand%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20scale0%20%3D%20scale1%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20tickExit%2Ecall%28tickTransform%2C%20scale1%2C%20scale0%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20tickEnter%2Ecall%28tickTransform%2C%20scale0%2C%20scale1%29%3B%0A%20%20%20%20%20%20%20%20tickUpdate%2Ecall%28tickTransform%2C%20scale1%2C%20scale1%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20axis%2Escale%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20scale%3B%0A%20%20%20%20%20%20scale%20%3D%20x%3B%0A%20%20%20%20%20%20return%20axis%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20axis%2Eorient%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20orient%3B%0A%20%20%20%20%20%20orient%20%3D%20x%20in%20d3%5Fsvg%5FaxisOrients%20%3F%20x%20%2B%20%22%22%20%3A%20d3%5Fsvg%5FaxisDefaultOrient%3B%0A%20%20%20%20%20%20return%20axis%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20axis%2Eticks%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20tickArguments%5F%3B%0A%20%20%20%20%20%20tickArguments%5F%20%3D%20arguments%3B%0A%20%20%20%20%20%20return%20axis%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20axis%2EtickValues%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20tickValues%3B%0A%20%20%20%20%20%20tickValues%20%3D%20x%3B%0A%20%20%20%20%20%20return%20axis%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20axis%2EtickFormat%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20tickFormat%5F%3B%0A%20%20%20%20%20%20tickFormat%5F%20%3D%20x%3B%0A%20%20%20%20%20%20return%20axis%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20axis%2EtickSize%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20var%20n%20%3D%20arguments%2Elength%3B%0A%20%20%20%20%20%20if%20%28%21n%29%20return%20innerTickSize%3B%0A%20%20%20%20%20%20innerTickSize%20%3D%20%2Bx%3B%0A%20%20%20%20%20%20outerTickSize%20%3D%20%2Barguments%5Bn%20%2D%201%5D%3B%0A%20%20%20%20%20%20return%20axis%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20axis%2EinnerTickSize%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20innerTickSize%3B%0A%20%20%20%20%20%20innerTickSize%20%3D%20%2Bx%3B%0A%20%20%20%20%20%20return%20axis%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20axis%2EouterTickSize%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20outerTickSize%3B%0A%20%20%20%20%20%20outerTickSize%20%3D%20%2Bx%3B%0A%20%20%20%20%20%20return%20axis%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20axis%2EtickPadding%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20tickPadding%3B%0A%20%20%20%20%20%20tickPadding%20%3D%20%2Bx%3B%0A%20%20%20%20%20%20return%20axis%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20axis%2EtickSubdivide%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20arguments%2Elength%20%26%26%20axis%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20axis%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fsvg%5FaxisDefaultOrient%20%3D%20%22bottom%22%2C%20d3%5Fsvg%5FaxisOrients%20%3D%20%7B%0A%20%20%20%20top%3A%201%2C%0A%20%20%20%20right%3A%201%2C%0A%20%20%20%20bottom%3A%201%2C%0A%20%20%20%20left%3A%201%0A%20%20%7D%3B%0A%20%20function%20d3%5Fsvg%5FaxisX%28selection%2C%20x0%2C%20x1%29%20%7B%0A%20%20%20%20selection%2Eattr%28%22transform%22%2C%20function%28d%29%20%7B%0A%20%20%20%20%20%20var%20v0%20%3D%20x0%28d%29%3B%0A%20%20%20%20%20%20return%20%22translate%28%22%20%2B%20%28isFinite%28v0%29%20%3F%20v0%20%3A%20x1%28d%29%29%20%2B%20%22%2C0%29%22%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Fsvg%5FaxisY%28selection%2C%20y0%2C%20y1%29%20%7B%0A%20%20%20%20selection%2Eattr%28%22transform%22%2C%20function%28d%29%20%7B%0A%20%20%20%20%20%20var%20v0%20%3D%20y0%28d%29%3B%0A%20%20%20%20%20%20return%20%22translate%280%2C%22%20%2B%20%28isFinite%28v0%29%20%3F%20v0%20%3A%20y1%28d%29%29%20%2B%20%22%29%22%3B%0A%20%20%20%20%7D%29%3B%0A%20%20%7D%0A%20%20d3%2Esvg%2Ebrush%20%3D%20function%28%29%20%7B%0A%20%20%20%20var%20event%20%3D%20d3%5FeventDispatch%28brush%2C%20%22brushstart%22%2C%20%22brush%22%2C%20%22brushend%22%29%2C%20x%20%3D%20null%2C%20y%20%3D%20null%2C%20xExtent%20%3D%20%5B%200%2C%200%20%5D%2C%20yExtent%20%3D%20%5B%200%2C%200%20%5D%2C%20xExtentDomain%2C%20yExtentDomain%2C%20xClamp%20%3D%20true%2C%20yClamp%20%3D%20true%2C%20resizes%20%3D%20d3%5Fsvg%5FbrushResizes%5B0%5D%3B%0A%20%20%20%20function%20brush%28g%29%20%7B%0A%20%20%20%20%20%20g%2Eeach%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20g%20%3D%20d3%2Eselect%28this%29%2Estyle%28%22pointer%2Devents%22%2C%20%22all%22%29%2Estyle%28%22%2Dwebkit%2Dtap%2Dhighlight%2Dcolor%22%2C%20%22rgba%280%2C0%2C0%2C0%29%22%29%2Eon%28%22mousedown%2Ebrush%22%2C%20brushstart%29%2Eon%28%22touchstart%2Ebrush%22%2C%20brushstart%29%3B%0A%20%20%20%20%20%20%20%20var%20background%20%3D%20g%2EselectAll%28%22%2Ebackground%22%29%2Edata%28%5B%200%20%5D%29%3B%0A%20%20%20%20%20%20%20%20background%2Eenter%28%29%2Eappend%28%22rect%22%29%2Eattr%28%22class%22%2C%20%22background%22%29%2Estyle%28%22visibility%22%2C%20%22hidden%22%29%2Estyle%28%22cursor%22%2C%20%22crosshair%22%29%3B%0A%20%20%20%20%20%20%20%20g%2EselectAll%28%22%2Eextent%22%29%2Edata%28%5B%200%20%5D%29%2Eenter%28%29%2Eappend%28%22rect%22%29%2Eattr%28%22class%22%2C%20%22extent%22%29%2Estyle%28%22cursor%22%2C%20%22move%22%29%3B%0A%20%20%20%20%20%20%20%20var%20resize%20%3D%20g%2EselectAll%28%22%2Eresize%22%29%2Edata%28resizes%2C%20d3%5Fidentity%29%3B%0A%20%20%20%20%20%20%20%20resize%2Eexit%28%29%2Eremove%28%29%3B%0A%20%20%20%20%20%20%20%20resize%2Eenter%28%29%2Eappend%28%22g%22%29%2Eattr%28%22class%22%2C%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%22resize%20%22%20%2B%20d%3B%0A%20%20%20%20%20%20%20%20%7D%29%2Estyle%28%22cursor%22%2C%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20d3%5Fsvg%5FbrushCursor%5Bd%5D%3B%0A%20%20%20%20%20%20%20%20%7D%29%2Eappend%28%22rect%22%29%2Eattr%28%22x%22%2C%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%2F%5Bew%5D%24%2F%2Etest%28d%29%20%3F%20%2D3%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%7D%29%2Eattr%28%22y%22%2C%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%2F%5E%5Bns%5D%2F%2Etest%28d%29%20%3F%20%2D3%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%7D%29%2Eattr%28%22width%22%2C%206%29%2Eattr%28%22height%22%2C%206%29%2Estyle%28%22visibility%22%2C%20%22hidden%22%29%3B%0A%20%20%20%20%20%20%20%20resize%2Estyle%28%22display%22%2C%20brush%2Eempty%28%29%20%3F%20%22none%22%20%3A%20null%29%3B%0A%20%20%20%20%20%20%20%20var%20gUpdate%20%3D%20d3%2Etransition%28g%29%2C%20backgroundUpdate%20%3D%20d3%2Etransition%28background%29%2C%20range%3B%0A%20%20%20%20%20%20%20%20if%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20range%20%3D%20d3%5FscaleRange%28x%29%3B%0A%20%20%20%20%20%20%20%20%20%20backgroundUpdate%2Eattr%28%22x%22%2C%20range%5B0%5D%29%2Eattr%28%22width%22%2C%20range%5B1%5D%20%2D%20range%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20redrawX%28gUpdate%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28y%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20range%20%3D%20d3%5FscaleRange%28y%29%3B%0A%20%20%20%20%20%20%20%20%20%20backgroundUpdate%2Eattr%28%22y%22%2C%20range%5B0%5D%29%2Eattr%28%22height%22%2C%20range%5B1%5D%20%2D%20range%5B0%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20redrawY%28gUpdate%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20redraw%28gUpdate%29%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20brush%2Eevent%20%3D%20function%28g%29%20%7B%0A%20%20%20%20%20%20g%2Eeach%28function%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20event%5F%20%3D%20event%2Eof%28this%2C%20arguments%29%2C%20extent1%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20x%3A%20xExtent%2C%0A%20%20%20%20%20%20%20%20%20%20y%3A%20yExtent%2C%0A%20%20%20%20%20%20%20%20%20%20i%3A%20xExtentDomain%2C%0A%20%20%20%20%20%20%20%20%20%20j%3A%20yExtentDomain%0A%20%20%20%20%20%20%20%20%7D%2C%20extent0%20%3D%20this%2E%5F%5Fchart%5F%5F%20%7C%7C%20extent1%3B%0A%20%20%20%20%20%20%20%20this%2E%5F%5Fchart%5F%5F%20%3D%20extent1%3B%0A%20%20%20%20%20%20%20%20if%20%28d3%5FtransitionInheritId%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20d3%2Eselect%28this%29%2Etransition%28%29%2Eeach%28%22start%2Ebrush%22%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20xExtentDomain%20%3D%20extent0%2Ei%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20yExtentDomain%20%3D%20extent0%2Ej%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20xExtent%20%3D%20extent0%2Ex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20yExtent%20%3D%20extent0%2Ey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20event%5F%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%22brushstart%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%2Etween%28%22brush%3Abrush%22%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20xi%20%3D%20d3%5FinterpolateArray%28xExtent%2C%20extent1%2Ex%29%2C%20yi%20%3D%20d3%5FinterpolateArray%28yExtent%2C%20extent1%2Ey%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20xExtentDomain%20%3D%20yExtentDomain%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20function%28t%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xExtent%20%3D%20extent1%2Ex%20%3D%20xi%28t%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20yExtent%20%3D%20extent1%2Ey%20%3D%20yi%28t%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20event%5F%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%22brush%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mode%3A%20%22resize%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%2Eeach%28%22end%2Ebrush%22%2C%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20xExtentDomain%20%3D%20extent1%2Ei%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20yExtentDomain%20%3D%20extent1%2Ej%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20event%5F%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%22brush%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20mode%3A%20%22resize%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20event%5F%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%22brushend%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20event%5F%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%22brushstart%22%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20event%5F%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%22brush%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mode%3A%20%22resize%22%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20event%5F%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%22brushend%22%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20redraw%28g%29%20%7B%0A%20%20%20%20%20%20g%2EselectAll%28%22%2Eresize%22%29%2Eattr%28%22transform%22%2C%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%22translate%28%22%20%2B%20xExtent%5B%2B%2Fe%24%2F%2Etest%28d%29%5D%20%2B%20%22%2C%22%20%2B%20yExtent%5B%2B%2F%5Es%2F%2Etest%28d%29%5D%20%2B%20%22%29%22%3B%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20redrawX%28g%29%20%7B%0A%20%20%20%20%20%20g%2Eselect%28%22%2Eextent%22%29%2Eattr%28%22x%22%2C%20xExtent%5B0%5D%29%3B%0A%20%20%20%20%20%20g%2EselectAll%28%22%2Eextent%2C%2En%3Erect%2C%2Es%3Erect%22%29%2Eattr%28%22width%22%2C%20xExtent%5B1%5D%20%2D%20xExtent%5B0%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20redrawY%28g%29%20%7B%0A%20%20%20%20%20%20g%2Eselect%28%22%2Eextent%22%29%2Eattr%28%22y%22%2C%20yExtent%5B0%5D%29%3B%0A%20%20%20%20%20%20g%2EselectAll%28%22%2Eextent%2C%2Ee%3Erect%2C%2Ew%3Erect%22%29%2Eattr%28%22height%22%2C%20yExtent%5B1%5D%20%2D%20yExtent%5B0%5D%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20function%20brushstart%28%29%20%7B%0A%20%20%20%20%20%20var%20target%20%3D%20this%2C%20eventTarget%20%3D%20d3%2Eselect%28d3%2Eevent%2Etarget%29%2C%20event%5F%20%3D%20event%2Eof%28target%2C%20arguments%29%2C%20g%20%3D%20d3%2Eselect%28target%29%2C%20resizing%20%3D%20eventTarget%2Edatum%28%29%2C%20resizingX%20%3D%20%21%2F%5E%28n%7Cs%29%24%2F%2Etest%28resizing%29%20%26%26%20x%2C%20resizingY%20%3D%20%21%2F%5E%28e%7Cw%29%24%2F%2Etest%28resizing%29%20%26%26%20y%2C%20dragging%20%3D%20eventTarget%2Eclassed%28%22extent%22%29%2C%20dragRestore%20%3D%20d3%5Fevent%5FdragSuppress%28%29%2C%20center%2C%20origin%20%3D%20d3%2Emouse%28target%29%2C%20offset%3B%0A%20%20%20%20%20%20var%20w%20%3D%20d3%2Eselect%28d3%5Fwindow%29%2Eon%28%22keydown%2Ebrush%22%2C%20keydown%29%2Eon%28%22keyup%2Ebrush%22%2C%20keyup%29%3B%0A%20%20%20%20%20%20if%20%28d3%2Eevent%2EchangedTouches%29%20%7B%0A%20%20%20%20%20%20%20%20w%2Eon%28%22touchmove%2Ebrush%22%2C%20brushmove%29%2Eon%28%22touchend%2Ebrush%22%2C%20brushend%29%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20w%2Eon%28%22mousemove%2Ebrush%22%2C%20brushmove%29%2Eon%28%22mouseup%2Ebrush%22%2C%20brushend%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20g%2Einterrupt%28%29%2EselectAll%28%22%2A%22%29%2Einterrupt%28%29%3B%0A%20%20%20%20%20%20if%20%28dragging%29%20%7B%0A%20%20%20%20%20%20%20%20origin%5B0%5D%20%3D%20xExtent%5B0%5D%20%2D%20origin%5B0%5D%3B%0A%20%20%20%20%20%20%20%20origin%5B1%5D%20%3D%20yExtent%5B0%5D%20%2D%20origin%5B1%5D%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28resizing%29%20%7B%0A%20%20%20%20%20%20%20%20var%20ex%20%3D%20%2B%2Fw%24%2F%2Etest%28resizing%29%2C%20ey%20%3D%20%2B%2F%5En%2F%2Etest%28resizing%29%3B%0A%20%20%20%20%20%20%20%20offset%20%3D%20%5B%20xExtent%5B1%20%2D%20ex%5D%20%2D%20origin%5B0%5D%2C%20yExtent%5B1%20%2D%20ey%5D%20%2D%20origin%5B1%5D%20%5D%3B%0A%20%20%20%20%20%20%20%20origin%5B0%5D%20%3D%20xExtent%5Bex%5D%3B%0A%20%20%20%20%20%20%20%20origin%5B1%5D%20%3D%20yExtent%5Bey%5D%3B%0A%20%20%20%20%20%20%7D%20else%20if%20%28d3%2Eevent%2EaltKey%29%20center%20%3D%20origin%2Eslice%28%29%3B%0A%20%20%20%20%20%20g%2Estyle%28%22pointer%2Devents%22%2C%20%22none%22%29%2EselectAll%28%22%2Eresize%22%29%2Estyle%28%22display%22%2C%20null%29%3B%0A%20%20%20%20%20%20d3%2Eselect%28%22body%22%29%2Estyle%28%22cursor%22%2C%20eventTarget%2Estyle%28%22cursor%22%29%29%3B%0A%20%20%20%20%20%20event%5F%28%7B%0A%20%20%20%20%20%20%20%20type%3A%20%22brushstart%22%0A%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20brushmove%28%29%3B%0A%20%20%20%20%20%20function%20keydown%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28d3%2Eevent%2EkeyCode%20%3D%3D%2032%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21dragging%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20center%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20origin%5B0%5D%20%2D%3D%20xExtent%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20origin%5B1%5D%20%2D%3D%20yExtent%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dragging%20%3D%202%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20d3%5FeventPreventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20keyup%28%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28d3%2Eevent%2EkeyCode%20%3D%3D%2032%20%26%26%20dragging%20%3D%3D%202%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20origin%5B0%5D%20%2B%3D%20xExtent%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20origin%5B1%5D%20%2B%3D%20yExtent%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20dragging%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20d3%5FeventPreventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20brushmove%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20point%20%3D%20d3%2Emouse%28target%29%2C%20moved%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20if%20%28offset%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20point%5B0%5D%20%2B%3D%20offset%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20point%5B1%5D%20%2B%3D%20offset%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28%21dragging%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28d3%2Eevent%2EaltKey%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21center%29%20center%20%3D%20%5B%20%28xExtent%5B0%5D%20%2B%20xExtent%5B1%5D%29%20%2F%202%2C%20%28yExtent%5B0%5D%20%2B%20yExtent%5B1%5D%29%20%2F%202%20%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20origin%5B0%5D%20%3D%20xExtent%5B%2B%28point%5B0%5D%20%3C%20center%5B0%5D%29%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20origin%5B1%5D%20%3D%20yExtent%5B%2B%28point%5B1%5D%20%3C%20center%5B1%5D%29%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20center%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28resizingX%20%26%26%20move1%28point%2C%20x%2C%200%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20redrawX%28g%29%3B%0A%20%20%20%20%20%20%20%20%20%20moved%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28resizingY%20%26%26%20move1%28point%2C%20y%2C%201%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20redrawY%28g%29%3B%0A%20%20%20%20%20%20%20%20%20%20moved%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28moved%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20redraw%28g%29%3B%0A%20%20%20%20%20%20%20%20%20%20event%5F%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%22brush%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mode%3A%20dragging%20%3F%20%22move%22%20%3A%20%22resize%22%0A%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20move1%28point%2C%20scale%2C%20i%29%20%7B%0A%20%20%20%20%20%20%20%20var%20range%20%3D%20d3%5FscaleRange%28scale%29%2C%20r0%20%3D%20range%5B0%5D%2C%20r1%20%3D%20range%5B1%5D%2C%20position%20%3D%20origin%5Bi%5D%2C%20extent%20%3D%20i%20%3F%20yExtent%20%3A%20xExtent%2C%20size%20%3D%20extent%5B1%5D%20%2D%20extent%5B0%5D%2C%20min%2C%20max%3B%0A%20%20%20%20%20%20%20%20if%20%28dragging%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20r0%20%2D%3D%20position%3B%0A%20%20%20%20%20%20%20%20%20%20r1%20%2D%3D%20size%20%2B%20position%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20min%20%3D%20%28i%20%3F%20yClamp%20%3A%20xClamp%29%20%3F%20Math%2Emax%28r0%2C%20Math%2Emin%28r1%2C%20point%5Bi%5D%29%29%20%3A%20point%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28dragging%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20max%20%3D%20%28min%20%2B%3D%20position%29%20%2B%20size%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28center%29%20position%20%3D%20Math%2Emax%28r0%2C%20Math%2Emin%28r1%2C%202%20%2A%20center%5Bi%5D%20%2D%20min%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28position%20%3C%20min%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20max%20%3D%20min%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20min%20%3D%20position%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20max%20%3D%20position%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28extent%5B0%5D%20%21%3D%20min%20%7C%7C%20extent%5B1%5D%20%21%3D%20max%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28i%29%20yExtentDomain%20%3D%20null%3B%20else%20xExtentDomain%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20extent%5B0%5D%20%3D%20min%3B%0A%20%20%20%20%20%20%20%20%20%20extent%5B1%5D%20%3D%20max%3B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20brushend%28%29%20%7B%0A%20%20%20%20%20%20%20%20brushmove%28%29%3B%0A%20%20%20%20%20%20%20%20g%2Estyle%28%22pointer%2Devents%22%2C%20%22all%22%29%2EselectAll%28%22%2Eresize%22%29%2Estyle%28%22display%22%2C%20brush%2Eempty%28%29%20%3F%20%22none%22%20%3A%20null%29%3B%0A%20%20%20%20%20%20%20%20d3%2Eselect%28%22body%22%29%2Estyle%28%22cursor%22%2C%20null%29%3B%0A%20%20%20%20%20%20%20%20w%2Eon%28%22mousemove%2Ebrush%22%2C%20null%29%2Eon%28%22mouseup%2Ebrush%22%2C%20null%29%2Eon%28%22touchmove%2Ebrush%22%2C%20null%29%2Eon%28%22touchend%2Ebrush%22%2C%20null%29%2Eon%28%22keydown%2Ebrush%22%2C%20null%29%2Eon%28%22keyup%2Ebrush%22%2C%20null%29%3B%0A%20%20%20%20%20%20%20%20dragRestore%28%29%3B%0A%20%20%20%20%20%20%20%20event%5F%28%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20%22brushend%22%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20brush%2Ex%20%3D%20function%28z%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20x%3B%0A%20%20%20%20%20%20x%20%3D%20z%3B%0A%20%20%20%20%20%20resizes%20%3D%20d3%5Fsvg%5FbrushResizes%5B%21x%20%3C%3C%201%20%7C%20%21y%5D%3B%0A%20%20%20%20%20%20return%20brush%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20brush%2Ey%20%3D%20function%28z%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20y%3B%0A%20%20%20%20%20%20y%20%3D%20z%3B%0A%20%20%20%20%20%20resizes%20%3D%20d3%5Fsvg%5FbrushResizes%5B%21x%20%3C%3C%201%20%7C%20%21y%5D%3B%0A%20%20%20%20%20%20return%20brush%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20brush%2Eclamp%20%3D%20function%28z%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20x%20%26%26%20y%20%3F%20%5B%20xClamp%2C%20yClamp%20%5D%20%3A%20x%20%3F%20xClamp%20%3A%20y%20%3F%20yClamp%20%3A%20null%3B%0A%20%20%20%20%20%20if%20%28x%20%26%26%20y%29%20xClamp%20%3D%20%21%21z%5B0%5D%2C%20yClamp%20%3D%20%21%21z%5B1%5D%3B%20else%20if%20%28x%29%20xClamp%20%3D%20%21%21z%3B%20else%20if%20%28y%29%20yClamp%20%3D%20%21%21z%3B%0A%20%20%20%20%20%20return%20brush%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20brush%2Eextent%20%3D%20function%28z%29%20%7B%0A%20%20%20%20%20%20var%20x0%2C%20x1%2C%20y0%2C%20y1%2C%20t%3B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28xExtentDomain%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x0%20%3D%20xExtentDomain%5B0%5D%2C%20x1%20%3D%20xExtentDomain%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x0%20%3D%20xExtent%5B0%5D%2C%20x1%20%3D%20xExtent%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28x%2Einvert%29%20x0%20%3D%20x%2Einvert%28x0%29%2C%20x1%20%3D%20x%2Einvert%28x1%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28x1%20%3C%20x0%29%20t%20%3D%20x0%2C%20x0%20%3D%20x1%2C%20x1%20%3D%20t%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28y%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28yExtentDomain%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20y0%20%3D%20yExtentDomain%5B0%5D%2C%20y1%20%3D%20yExtentDomain%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20y0%20%3D%20yExtent%5B0%5D%2C%20y1%20%3D%20yExtent%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28y%2Einvert%29%20y0%20%3D%20y%2Einvert%28y0%29%2C%20y1%20%3D%20y%2Einvert%28y1%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28y1%20%3C%20y0%29%20t%20%3D%20y0%2C%20y0%20%3D%20y1%2C%20y1%20%3D%20t%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20x%20%26%26%20y%20%3F%20%5B%20%5B%20x0%2C%20y0%20%5D%2C%20%5B%20x1%2C%20y1%20%5D%20%5D%20%3A%20x%20%3F%20%5B%20x0%2C%20x1%20%5D%20%3A%20y%20%26%26%20%5B%20y0%2C%20y1%20%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28x%29%20%7B%0A%20%20%20%20%20%20%20%20x0%20%3D%20z%5B0%5D%2C%20x1%20%3D%20z%5B1%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28y%29%20x0%20%3D%20x0%5B0%5D%2C%20x1%20%3D%20x1%5B0%5D%3B%0A%20%20%20%20%20%20%20%20xExtentDomain%20%3D%20%5B%20x0%2C%20x1%20%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28x%2Einvert%29%20x0%20%3D%20x%28x0%29%2C%20x1%20%3D%20x%28x1%29%3B%0A%20%20%20%20%20%20%20%20if%20%28x1%20%3C%20x0%29%20t%20%3D%20x0%2C%20x0%20%3D%20x1%2C%20x1%20%3D%20t%3B%0A%20%20%20%20%20%20%20%20if%20%28x0%20%21%3D%20xExtent%5B0%5D%20%7C%7C%20x1%20%21%3D%20xExtent%5B1%5D%29%20xExtent%20%3D%20%5B%20x0%2C%20x1%20%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20%28y%29%20%7B%0A%20%20%20%20%20%20%20%20y0%20%3D%20z%5B0%5D%2C%20y1%20%3D%20z%5B1%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28x%29%20y0%20%3D%20y0%5B1%5D%2C%20y1%20%3D%20y1%5B1%5D%3B%0A%20%20%20%20%20%20%20%20yExtentDomain%20%3D%20%5B%20y0%2C%20y1%20%5D%3B%0A%20%20%20%20%20%20%20%20if%20%28y%2Einvert%29%20y0%20%3D%20y%28y0%29%2C%20y1%20%3D%20y%28y1%29%3B%0A%20%20%20%20%20%20%20%20if%20%28y1%20%3C%20y0%29%20t%20%3D%20y0%2C%20y0%20%3D%20y1%2C%20y1%20%3D%20t%3B%0A%20%20%20%20%20%20%20%20if%20%28y0%20%21%3D%20yExtent%5B0%5D%20%7C%7C%20y1%20%21%3D%20yExtent%5B1%5D%29%20yExtent%20%3D%20%5B%20y0%2C%20y1%20%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20brush%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20brush%2Eclear%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20if%20%28%21brush%2Eempty%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20xExtent%20%3D%20%5B%200%2C%200%20%5D%2C%20yExtent%20%3D%20%5B%200%2C%200%20%5D%3B%0A%20%20%20%20%20%20%20%20xExtentDomain%20%3D%20yExtentDomain%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20brush%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20brush%2Eempty%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20%21%21x%20%26%26%20xExtent%5B0%5D%20%3D%3D%20xExtent%5B1%5D%20%7C%7C%20%21%21y%20%26%26%20yExtent%5B0%5D%20%3D%3D%20yExtent%5B1%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20d3%2Erebind%28brush%2C%20event%2C%20%22on%22%29%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Fsvg%5FbrushCursor%20%3D%20%7B%0A%20%20%20%20n%3A%20%22ns%2Dresize%22%2C%0A%20%20%20%20e%3A%20%22ew%2Dresize%22%2C%0A%20%20%20%20s%3A%20%22ns%2Dresize%22%2C%0A%20%20%20%20w%3A%20%22ew%2Dresize%22%2C%0A%20%20%20%20nw%3A%20%22nwse%2Dresize%22%2C%0A%20%20%20%20ne%3A%20%22nesw%2Dresize%22%2C%0A%20%20%20%20se%3A%20%22nwse%2Dresize%22%2C%0A%20%20%20%20sw%3A%20%22nesw%2Dresize%22%0A%20%20%7D%3B%0A%20%20var%20d3%5Fsvg%5FbrushResizes%20%3D%20%5B%20%5B%20%22n%22%2C%20%22e%22%2C%20%22s%22%2C%20%22w%22%2C%20%22nw%22%2C%20%22ne%22%2C%20%22se%22%2C%20%22sw%22%20%5D%2C%20%5B%20%22e%22%2C%20%22w%22%20%5D%2C%20%5B%20%22n%22%2C%20%22s%22%20%5D%2C%20%5B%5D%20%5D%3B%0A%20%20var%20d3%5Ftime%5Fformat%20%3D%20d3%5Ftime%2Eformat%20%3D%20d3%5Flocale%5FenUS%2EtimeFormat%3B%0A%20%20var%20d3%5Ftime%5FformatUtc%20%3D%20d3%5Ftime%5Fformat%2Eutc%3B%0A%20%20var%20d3%5Ftime%5FformatIso%20%3D%20d3%5Ftime%5FformatUtc%28%22%25Y%2D%25m%2D%25dT%25H%3A%25M%3A%25S%2E%25LZ%22%29%3B%0A%20%20d3%5Ftime%5Fformat%2Eiso%20%3D%20Date%2Eprototype%2EtoISOString%20%26%26%20%2Bnew%20Date%28%222000%2D01%2D01T00%3A00%3A00%2E000Z%22%29%20%3F%20d3%5Ftime%5FformatIsoNative%20%3A%20d3%5Ftime%5FformatIso%3B%0A%20%20function%20d3%5Ftime%5FformatIsoNative%28date%29%20%7B%0A%20%20%20%20return%20date%2EtoISOString%28%29%3B%0A%20%20%7D%0A%20%20d3%5Ftime%5FformatIsoNative%2Eparse%20%3D%20function%28string%29%20%7B%0A%20%20%20%20var%20date%20%3D%20new%20Date%28string%29%3B%0A%20%20%20%20return%20isNaN%28date%29%20%3F%20null%20%3A%20date%3B%0A%20%20%7D%3B%0A%20%20d3%5Ftime%5FformatIsoNative%2EtoString%20%3D%20d3%5Ftime%5FformatIso%2EtoString%3B%0A%20%20d3%5Ftime%2Esecond%20%3D%20d3%5Ftime%5Finterval%28function%28date%29%20%7B%0A%20%20%20%20return%20new%20d3%5Fdate%28Math%2Efloor%28date%20%2F%201e3%29%20%2A%201e3%29%3B%0A%20%20%7D%2C%20function%28date%2C%20offset%29%20%7B%0A%20%20%20%20date%2EsetTime%28date%2EgetTime%28%29%20%2B%20Math%2Efloor%28offset%29%20%2A%201e3%29%3B%0A%20%20%7D%2C%20function%28date%29%20%7B%0A%20%20%20%20return%20date%2EgetSeconds%28%29%3B%0A%20%20%7D%29%3B%0A%20%20d3%5Ftime%2Eseconds%20%3D%20d3%5Ftime%2Esecond%2Erange%3B%0A%20%20d3%5Ftime%2Eseconds%2Eutc%20%3D%20d3%5Ftime%2Esecond%2Eutc%2Erange%3B%0A%20%20d3%5Ftime%2Eminute%20%3D%20d3%5Ftime%5Finterval%28function%28date%29%20%7B%0A%20%20%20%20return%20new%20d3%5Fdate%28Math%2Efloor%28date%20%2F%206e4%29%20%2A%206e4%29%3B%0A%20%20%7D%2C%20function%28date%2C%20offset%29%20%7B%0A%20%20%20%20date%2EsetTime%28date%2EgetTime%28%29%20%2B%20Math%2Efloor%28offset%29%20%2A%206e4%29%3B%0A%20%20%7D%2C%20function%28date%29%20%7B%0A%20%20%20%20return%20date%2EgetMinutes%28%29%3B%0A%20%20%7D%29%3B%0A%20%20d3%5Ftime%2Eminutes%20%3D%20d3%5Ftime%2Eminute%2Erange%3B%0A%20%20d3%5Ftime%2Eminutes%2Eutc%20%3D%20d3%5Ftime%2Eminute%2Eutc%2Erange%3B%0A%20%20d3%5Ftime%2Ehour%20%3D%20d3%5Ftime%5Finterval%28function%28date%29%20%7B%0A%20%20%20%20var%20timezone%20%3D%20date%2EgetTimezoneOffset%28%29%20%2F%2060%3B%0A%20%20%20%20return%20new%20d3%5Fdate%28%28Math%2Efloor%28date%20%2F%2036e5%20%2D%20timezone%29%20%2B%20timezone%29%20%2A%2036e5%29%3B%0A%20%20%7D%2C%20function%28date%2C%20offset%29%20%7B%0A%20%20%20%20date%2EsetTime%28date%2EgetTime%28%29%20%2B%20Math%2Efloor%28offset%29%20%2A%2036e5%29%3B%0A%20%20%7D%2C%20function%28date%29%20%7B%0A%20%20%20%20return%20date%2EgetHours%28%29%3B%0A%20%20%7D%29%3B%0A%20%20d3%5Ftime%2Ehours%20%3D%20d3%5Ftime%2Ehour%2Erange%3B%0A%20%20d3%5Ftime%2Ehours%2Eutc%20%3D%20d3%5Ftime%2Ehour%2Eutc%2Erange%3B%0A%20%20d3%5Ftime%2Emonth%20%3D%20d3%5Ftime%5Finterval%28function%28date%29%20%7B%0A%20%20%20%20date%20%3D%20d3%5Ftime%2Eday%28date%29%3B%0A%20%20%20%20date%2EsetDate%281%29%3B%0A%20%20%20%20return%20date%3B%0A%20%20%7D%2C%20function%28date%2C%20offset%29%20%7B%0A%20%20%20%20date%2EsetMonth%28date%2EgetMonth%28%29%20%2B%20offset%29%3B%0A%20%20%7D%2C%20function%28date%29%20%7B%0A%20%20%20%20return%20date%2EgetMonth%28%29%3B%0A%20%20%7D%29%3B%0A%20%20d3%5Ftime%2Emonths%20%3D%20d3%5Ftime%2Emonth%2Erange%3B%0A%20%20d3%5Ftime%2Emonths%2Eutc%20%3D%20d3%5Ftime%2Emonth%2Eutc%2Erange%3B%0A%20%20function%20d3%5Ftime%5Fscale%28linear%2C%20methods%2C%20format%29%20%7B%0A%20%20%20%20function%20scale%28x%29%20%7B%0A%20%20%20%20%20%20return%20linear%28x%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20scale%2Einvert%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Ftime%5FscaleDate%28linear%2Einvert%28x%29%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Edomain%20%3D%20function%28x%29%20%7B%0A%20%20%20%20%20%20if%20%28%21arguments%2Elength%29%20return%20linear%2Edomain%28%29%2Emap%28d3%5Ftime%5FscaleDate%29%3B%0A%20%20%20%20%20%20linear%2Edomain%28x%29%3B%0A%20%20%20%20%20%20return%20scale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20function%20tickMethod%28extent%2C%20count%29%20%7B%0A%20%20%20%20%20%20var%20span%20%3D%20extent%5B1%5D%20%2D%20extent%5B0%5D%2C%20target%20%3D%20span%20%2F%20count%2C%20i%20%3D%20d3%2Ebisect%28d3%5Ftime%5FscaleSteps%2C%20target%29%3B%0A%20%20%20%20%20%20return%20i%20%3D%3D%20d3%5Ftime%5FscaleSteps%2Elength%20%3F%20%5B%20methods%2Eyear%2C%20d3%5Fscale%5FlinearTickRange%28extent%2Emap%28function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20return%20d%20%2F%2031536e6%3B%0A%20%20%20%20%20%20%7D%29%2C%20count%29%5B2%5D%20%5D%20%3A%20%21i%20%3F%20%5B%20d3%5Ftime%5FscaleMilliseconds%2C%20d3%5Fscale%5FlinearTickRange%28extent%2C%20count%29%5B2%5D%20%5D%20%3A%20methods%5Btarget%20%2F%20d3%5Ftime%5FscaleSteps%5Bi%20%2D%201%5D%20%3C%20d3%5Ftime%5FscaleSteps%5Bi%5D%20%2F%20target%20%3F%20i%20%2D%201%20%3A%20i%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20scale%2Enice%20%3D%20function%28interval%2C%20skip%29%20%7B%0A%20%20%20%20%20%20var%20domain%20%3D%20scale%2Edomain%28%29%2C%20extent%20%3D%20d3%5FscaleExtent%28domain%29%2C%20method%20%3D%20interval%20%3D%3D%20null%20%3F%20tickMethod%28extent%2C%2010%29%20%3A%20typeof%20interval%20%3D%3D%3D%20%22number%22%20%26%26%20tickMethod%28extent%2C%20interval%29%3B%0A%20%20%20%20%20%20if%20%28method%29%20interval%20%3D%20method%5B0%5D%2C%20skip%20%3D%20method%5B1%5D%3B%0A%20%20%20%20%20%20function%20skipped%28date%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%21isNaN%28date%29%20%26%26%20%21interval%2Erange%28date%2C%20d3%5Ftime%5FscaleDate%28%2Bdate%20%2B%201%29%2C%20skip%29%2Elength%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20scale%2Edomain%28d3%5Fscale%5Fnice%28domain%2C%20skip%20%3E%201%20%3F%20%7B%0A%20%20%20%20%20%20%20%20floor%3A%20function%28date%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20while%20%28skipped%28date%20%3D%20interval%2Efloor%28date%29%29%29%20date%20%3D%20d3%5Ftime%5FscaleDate%28date%20%2D%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20return%20date%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20ceil%3A%20function%28date%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20while%20%28skipped%28date%20%3D%20interval%2Eceil%28date%29%29%29%20date%20%3D%20d3%5Ftime%5FscaleDate%28%2Bdate%20%2B%201%29%3B%0A%20%20%20%20%20%20%20%20%20%20return%20date%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%3A%20interval%29%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Eticks%20%3D%20function%28interval%2C%20skip%29%20%7B%0A%20%20%20%20%20%20var%20extent%20%3D%20d3%5FscaleExtent%28scale%2Edomain%28%29%29%2C%20method%20%3D%20interval%20%3D%3D%20null%20%3F%20tickMethod%28extent%2C%2010%29%20%3A%20typeof%20interval%20%3D%3D%3D%20%22number%22%20%3F%20tickMethod%28extent%2C%20interval%29%20%3A%20%21interval%2Erange%20%26%26%20%5B%20%7B%0A%20%20%20%20%20%20%20%20range%3A%20interval%0A%20%20%20%20%20%20%7D%2C%20skip%20%5D%3B%0A%20%20%20%20%20%20if%20%28method%29%20interval%20%3D%20method%5B0%5D%2C%20skip%20%3D%20method%5B1%5D%3B%0A%20%20%20%20%20%20return%20interval%2Erange%28extent%5B0%5D%2C%20d3%5Ftime%5FscaleDate%28%2Bextent%5B1%5D%20%2B%201%29%2C%20skip%20%3C%201%20%3F%201%20%3A%20skip%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2EtickFormat%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20format%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20scale%2Ecopy%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20return%20d3%5Ftime%5Fscale%28linear%2Ecopy%28%29%2C%20methods%2C%20format%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20return%20d3%5Fscale%5FlinearRebind%28scale%2C%20linear%29%3B%0A%20%20%7D%0A%20%20function%20d3%5Ftime%5FscaleDate%28t%29%20%7B%0A%20%20%20%20return%20new%20Date%28t%29%3B%0A%20%20%7D%0A%20%20var%20d3%5Ftime%5FscaleSteps%20%3D%20%5B%201e3%2C%205e3%2C%2015e3%2C%203e4%2C%206e4%2C%203e5%2C%209e5%2C%2018e5%2C%2036e5%2C%20108e5%2C%20216e5%2C%20432e5%2C%20864e5%2C%201728e5%2C%206048e5%2C%202592e6%2C%207776e6%2C%2031536e6%20%5D%3B%0A%20%20var%20d3%5Ftime%5FscaleLocalMethods%20%3D%20%5B%20%5B%20d3%5Ftime%2Esecond%2C%201%20%5D%2C%20%5B%20d3%5Ftime%2Esecond%2C%205%20%5D%2C%20%5B%20d3%5Ftime%2Esecond%2C%2015%20%5D%2C%20%5B%20d3%5Ftime%2Esecond%2C%2030%20%5D%2C%20%5B%20d3%5Ftime%2Eminute%2C%201%20%5D%2C%20%5B%20d3%5Ftime%2Eminute%2C%205%20%5D%2C%20%5B%20d3%5Ftime%2Eminute%2C%2015%20%5D%2C%20%5B%20d3%5Ftime%2Eminute%2C%2030%20%5D%2C%20%5B%20d3%5Ftime%2Ehour%2C%201%20%5D%2C%20%5B%20d3%5Ftime%2Ehour%2C%203%20%5D%2C%20%5B%20d3%5Ftime%2Ehour%2C%206%20%5D%2C%20%5B%20d3%5Ftime%2Ehour%2C%2012%20%5D%2C%20%5B%20d3%5Ftime%2Eday%2C%201%20%5D%2C%20%5B%20d3%5Ftime%2Eday%2C%202%20%5D%2C%20%5B%20d3%5Ftime%2Eweek%2C%201%20%5D%2C%20%5B%20d3%5Ftime%2Emonth%2C%201%20%5D%2C%20%5B%20d3%5Ftime%2Emonth%2C%203%20%5D%2C%20%5B%20d3%5Ftime%2Eyear%2C%201%20%5D%20%5D%3B%0A%20%20var%20d3%5Ftime%5FscaleLocalFormat%20%3D%20d3%5Ftime%5Fformat%2Emulti%28%5B%20%5B%20%22%2E%25L%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetMilliseconds%28%29%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%3A%25S%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetSeconds%28%29%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%25I%3A%25M%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetMinutes%28%29%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%25I%20%25p%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetHours%28%29%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%25a%20%25d%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetDay%28%29%20%26%26%20d%2EgetDate%28%29%20%21%3D%201%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%25b%20%25d%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetDate%28%29%20%21%3D%201%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%25B%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetMonth%28%29%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%25Y%22%2C%20d3%5Ftrue%20%5D%20%5D%29%3B%0A%20%20var%20d3%5Ftime%5FscaleMilliseconds%20%3D%20%7B%0A%20%20%20%20range%3A%20function%28start%2C%20stop%2C%20step%29%20%7B%0A%20%20%20%20%20%20return%20d3%2Erange%28Math%2Eceil%28start%20%2F%20step%29%20%2A%20step%2C%20%2Bstop%2C%20step%29%2Emap%28d3%5Ftime%5FscaleDate%29%3B%0A%20%20%20%20%7D%2C%0A%20%20%20%20floor%3A%20d3%5Fidentity%2C%0A%20%20%20%20ceil%3A%20d3%5Fidentity%0A%20%20%7D%3B%0A%20%20d3%5Ftime%5FscaleLocalMethods%2Eyear%20%3D%20d3%5Ftime%2Eyear%3B%0A%20%20d3%5Ftime%2Escale%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Ftime%5Fscale%28d3%2Escale%2Elinear%28%29%2C%20d3%5Ftime%5FscaleLocalMethods%2C%20d3%5Ftime%5FscaleLocalFormat%29%3B%0A%20%20%7D%3B%0A%20%20var%20d3%5Ftime%5FscaleUtcMethods%20%3D%20d3%5Ftime%5FscaleLocalMethods%2Emap%28function%28m%29%20%7B%0A%20%20%20%20return%20%5B%20m%5B0%5D%2Eutc%2C%20m%5B1%5D%20%5D%3B%0A%20%20%7D%29%3B%0A%20%20var%20d3%5Ftime%5FscaleUtcFormat%20%3D%20d3%5Ftime%5FformatUtc%2Emulti%28%5B%20%5B%20%22%2E%25L%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetUTCMilliseconds%28%29%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%3A%25S%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetUTCSeconds%28%29%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%25I%3A%25M%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetUTCMinutes%28%29%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%25I%20%25p%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetUTCHours%28%29%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%25a%20%25d%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetUTCDay%28%29%20%26%26%20d%2EgetUTCDate%28%29%20%21%3D%201%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%25b%20%25d%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetUTCDate%28%29%20%21%3D%201%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%25B%22%2C%20function%28d%29%20%7B%0A%20%20%20%20return%20d%2EgetUTCMonth%28%29%3B%0A%20%20%7D%20%5D%2C%20%5B%20%22%25Y%22%2C%20d3%5Ftrue%20%5D%20%5D%29%3B%0A%20%20d3%5Ftime%5FscaleUtcMethods%2Eyear%20%3D%20d3%5Ftime%2Eyear%2Eutc%3B%0A%20%20d3%5Ftime%2Escale%2Eutc%20%3D%20function%28%29%20%7B%0A%20%20%20%20return%20d3%5Ftime%5Fscale%28d3%2Escale%2Elinear%28%29%2C%20d3%5Ftime%5FscaleUtcMethods%2C%20d3%5Ftime%5FscaleUtcFormat%29%3B%0A%20%20%7D%3B%0A%20%20d3%2Etext%20%3D%20d3%5FxhrType%28function%28request%29%20%7B%0A%20%20%20%20return%20request%2EresponseText%3B%0A%20%20%7D%29%3B%0A%20%20d3%2Ejson%20%3D%20function%28url%2C%20callback%29%20%7B%0A%20%20%20%20return%20d3%5Fxhr%28url%2C%20%22application%2Fjson%22%2C%20d3%5Fjson%2C%20callback%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fjson%28request%29%20%7B%0A%20%20%20%20return%20JSON%2Eparse%28request%2EresponseText%29%3B%0A%20%20%7D%0A%20%20d3%2Ehtml%20%3D%20function%28url%2C%20callback%29%20%7B%0A%20%20%20%20return%20d3%5Fxhr%28url%2C%20%22text%2Fhtml%22%2C%20d3%5Fhtml%2C%20callback%29%3B%0A%20%20%7D%3B%0A%20%20function%20d3%5Fhtml%28request%29%20%7B%0A%20%20%20%20var%20range%20%3D%20d3%5Fdocument%2EcreateRange%28%29%3B%0A%20%20%20%20range%2EselectNode%28d3%5Fdocument%2Ebody%29%3B%0A%20%20%20%20return%20range%2EcreateContextualFragment%28request%2EresponseText%29%3B%0A%20%20%7D%0A%20%20d3%2Exml%20%3D%20d3%5FxhrType%28function%28request%29%20%7B%0A%20%20%20%20return%20request%2EresponseXML%3B%0A%20%20%7D%29%3B%0A%20%20if%20%28typeof%20define%20%3D%3D%3D%20%22function%22%20%26%26%20define%2Eamd%29%20define%28d3%29%3B%20else%20if%20%28typeof%20module%20%3D%3D%3D%20%22object%22%20%26%26%20module%2Eexports%29%20module%2Eexports%20%3D%20d3%3B%0A%20%20this%2Ed3%20%3D%20d3%3B%0A%7D%28%29%3B"></script>
<script src="data:application/x-javascript,HTMLWidgets%2Ewidget%28%7B%0A%0A%20%20name%3A%20%27bubbles%27%2C%0A%0A%20%20type%3A%20%27output%27%2C%0A%20%20%0A%20%20renderOnNullValue%3A%20true%2C%0A%0A%20%20initialize%3A%20function%28el%2C%20width%2C%20height%29%20%7B%0A%0A%20%20%20%20var%20bubble%20%3D%20d3%2Elayout%2Epack%28%29%0A%20%20%20%20%20%20%20%20%2Esort%28null%29%0A%20%20%20%20%20%20%20%20%2Epadding%281%2E5%29%3B%0A%20%20%20%20%0A%20%20%20%20var%20svg%20%3D%20d3%2Eselect%28el%29%2Eappend%28%22svg%22%29%0A%20%20%20%20%20%20%20%20%2Eattr%28%22class%22%2C%20%22bubble%22%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20svg%3A%20svg%2C%0A%20%20%20%20%20%20bubble%3A%20bubble%0A%20%20%20%20%7D%0A%0A%20%20%7D%2C%0A%0A%20%20renderValue%3A%20function%28el%2C%20x%2C%20instance%29%20%7B%0A%0A%20%20%20%20%2F%2F%20Store%20the%20current%20value%20so%20we%20can%20easily%20call%20renderValue%0A%20%20%20%20%2F%2F%20from%20the%20resize%20method%20below%2C%20which%20doesn%27t%20give%20us%20an%20x%0A%20%20%20%20%2F%2F%20value%0A%20%20%20%20instance%2ElastValue%20%3D%20x%3B%0A%0A%20%20%20%20%2F%2F%20Retrieve%20our%20svg%20and%20bubble%20objects%20that%20were%20created%20in%0A%20%20%20%20%2F%2F%20the%20initialize%20method%20above%0A%20%20%20%20var%20svg%20%3D%20instance%2Esvg%3B%0A%20%20%20%20var%20bubble%20%3D%20instance%2Ebubble%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Resize%20our%20svg%20element%20and%20bubble%20layout%20according%20to%20the%0A%20%20%20%20%2F%2F%20size%20of%20the%20actual%20DOM%20element%0A%20%20%20%20var%20width%20%3D%20el%2EoffsetWidth%3B%0A%20%20%20%20var%20height%20%3D%20el%2EoffsetHeight%3B%0A%20%20%20%20svg%2Eattr%28%22width%22%2C%20width%29%2Eattr%28%22height%22%2C%20height%29%3B%0A%20%20%20%20bubble%2Esize%28%5Bwidth%2C%20height%5D%29%3B%0A%0A%20%20%20%20var%20df%20%3D%20HTMLWidgets%2EdataframeToD3%28x%29%3B%0A%0A%20%20%20%20%2F%2F%20Set%20up%20our%20main%20selection%0A%20%20%20%20var%20node%20%3D%20svg%2EselectAll%28%22%2Enode%22%29%0A%20%20%20%20%20%20%20%20%2Edata%28bubble%2Enodes%28%7Bchildren%3A%20df%2C%20color%3A%20%22transparent%22%7D%29%2C%0A%20%20%20%20%20%20%20%20%20%20%28%21x%20%7C%7C%20%21x%2Ekey%29%20%3F%20null%20%3A%20function%28d%29%20%7B%20return%20d%2Ekey%3B%20%7D%0A%20%20%20%20%20%20%20%20%29%3B%0A%0A%20%20%20%20%2F%2F%20Create%20new%20nodes%2C%20and%20set%20their%20starting%20state%20so%20they%20look%0A%20%20%20%20%2F%2F%20good%20when%20they%20transition%20to%20their%20new%20state%0A%20%20%20%20var%20newNode%20%3D%20node%2Eenter%28%29%0A%20%20%20%20%20%20%20%20%2Eappend%28%22g%22%29%2Eattr%28%22class%22%2C%20%22node%22%29%0A%20%20%20%20%20%20%20%20%2Estyle%28%22opacity%22%2C%200%29%0A%20%20%20%20%20%20%20%20%2Eattr%28%22transform%22%2C%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%22translate%28%22%20%2B%20width%2F2%20%2B%20%22%2C%22%20%2B%20height%2F2%20%2B%20%22%29%22%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20newNode%2Eappend%28%22title%22%29%3B%0A%20%20%20%20newNode%2Eappend%28%22circle%22%29%0A%20%20%20%20%20%20%20%20%2Estyle%28%22fill%22%2C%20%22%23FFFFFF%22%29%3B%0A%20%20%20%20newNode%2Eappend%28%22text%22%29%0A%20%20%20%20%20%20%20%20%2Eattr%28%22dy%22%2C%20%22%2E3em%22%29%0A%20%20%20%20%20%20%20%20%2Estyle%28%22text%2Danchor%22%2C%20%22middle%22%29%3B%0A%0A%20%20%20%20%2F%2F%20Remove%20old%20nodes%0A%20%20%20%20node%2Eexit%28%29%2Etransition%28%29%0A%20%20%20%20%20%20%20%20%2Eremove%28%29%0A%20%20%20%20%20%20%20%20%2Estyle%28%22opacity%22%2C%200%29%3B%0A%0A%20%20%20%20%2F%2F%20Update%20all%20new%20and%20remaining%20nodes%0A%0A%20%20%20%20node%2Etransition%28%29%0A%20%20%20%20%20%20%20%20%2Estyle%28%22opacity%22%2C%201%29%0A%20%20%20%20%20%20%20%20%2Eattr%28%22transform%22%2C%20function%28d%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20%22translate%28%22%20%2B%20d%2Ex%20%2B%20%22%2C%22%20%2B%20d%2Ey%20%2B%20%22%29%22%3B%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20node%2Eselect%28%22title%22%29%0A%20%20%20%20%20%20%20%20%2Etext%28function%28d%29%20%7B%20return%20d%2Etooltip%3B%20%7D%29%3B%0A%0A%20%20%20%20node%2Eselect%28%22circle%22%29%2Etransition%28%29%0A%20%20%20%20%20%20%20%20%2Eattr%28%22r%22%2C%20function%28d%29%20%7B%20return%20d%2Er%3B%20%7D%29%0A%20%20%20%20%20%20%20%20%2Estyle%28%22fill%22%2C%20function%28d%29%20%7B%20return%20d%2Ecolor%3B%20%7D%29%3B%0A%0A%20%20%20%20node%2Eselect%28%22text%22%29%0A%20%20%20%20%20%20%20%20%2Etext%28function%28d%29%20%7B%20return%20d%2Elabel%3B%20%7D%29%0A%20%20%20%20%20%20%20%20%2Estyle%28%22fill%22%2C%20function%28d%29%20%7B%20return%20d%2EtextColor%3B%20%7D%29%3B%0A%20%20%7D%2C%0A%0A%20%20resize%3A%20function%28el%2C%20width%2C%20height%2C%20instance%29%20%7B%0A%20%20%20%20%2F%2F%20Re%2Drender%20the%20previous%20value%2C%20if%20any%0A%20%20%20%20if%20%28instance%2ElastValue%29%20%7B%0A%20%20%20%20%20%20this%2ErenderValue%28el%2C%20instance%2ElastValue%2C%20instance%29%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%7D%29%3B%0A"></script>

</head>
<body style="background-color:white;">
<div id="htmlwidget_container">
  <div id="htmlwidget-9790" style="width:800px;height:800px;" class="bubbles"></div>
</div>
<script type="application/json" data-for="htmlwidget-9790">{"x":{"value":[3938,3812,6714,743,3534,5731,7840,5914,3416,7074,17010,5842,1983,2047,1375,8746,2202,1382,1629,1675,2042,1041,5176,449,5593,5534,9201,19975,1116,6006,721,4294,9800,1314,2220,1759,2165,586,3331,772,3322,8833,1732,3623,10066,4116,1082,1336,319,10498,2822,9983,2213,1681,1616,1027,3891,891,2893,5103,3677,781,4141,933,5130,3617,3240,2732,2039,1214,3748,843,593,330,287,277,292,595,594,460,603,625,748,461,597,619,283,283,591,603,599,386,323,307,772,296,363,600,280,307,335,299,354,264,843,1554,970,13896,1594,4130,791,1124,1876,1101,2105,1316,3151,3770,2435,4839,1756,4268,1821,5833,8258,10001,8217,12555,2324,10993,9354,1233,335,383,874,3165,2815,3366,17705,1486,6367,1229,2059,2291,5559,19118,6887,6557,22026,1302,24593,652,636,6703,2138,3824,1353,4665,2649,2832,4896,763,5222,7862,8435,20544,19788,10349,3301,19382,698,5569,353,2247,11275,7147,9930,2313,1880,1701,1117,20859,4614,10530,4461,6314,3444,3179,4060,4138,1690,1830,5219,3165,3509,1286,9956,3899,3202,6725,3727,9317,12003,4853,8411,4864,3174,7881,12870,2728,12348,870,9121,9191,2490,5248,4190,2581,2023,16540],"label":["Ag","Co","Hi","Me","Be","Li","Ma","Sh","Sp","As","Ea","Fu","Ar","Co","Da","In","Ma","Nu","Ob","Po","Re","IS","Pa","Pa","Sc","Se","Tr","Tr","Tr","Tw","Co","De","Gr","ID","JS","Da","Da","Da","Da","Da","Da","Di","Li","Re","Te","Fl","Dr","Gr","IF","NB","Pa","Si","Sp","Sp","Ag","An","Ar","Av","Bi","Co","Co","Co","Da","Di","Ex","Ex","Fn","If","Is","Li","Ma","Ma","ad","an","av","co","di","di","eq","fn","gt","gt","if","is","lt","lt","ma","mi","mo","mu","ne","no","or","or","ra","se","st","su","su","up","va","wh","xo","_","Mi","No","Or","Qu","Ra","St","Su","Va","Va","Xo","IS","Li","Lo","Or","Qu","Qu","Ro","Sc","Sc","Ti","Ar","Co","Da","Di","Fi","Ge","Fi","He","IE","IP","IV","De","IM","Sp","Ma","Or","Co","Pa","Sh","Si","Pr","Sh","So","St","St","Ax","Ax","Ax","Ax","Ca","An","Cl","Co","Co","Dr","Ex","Ho","IC","Pa","Se","To","Da","Da","Da","Ed","No","Ar","Ed","IR","Sh","Sc","Tr","Tr","Da","Se","To","Vi","Le","Le","Le","Bi","Di","Fi","Co","En","Pr","Sh","Si","Fi","Gr","Vi","IO","La","Ra","St","Ax","Bu","Ci","Ci","De","Fo","Ic","In","La","No","Pi","Ra","Ra","St","Tr","Op","Op","Op","Op","So","Vi"],"tooltip":["AgglomerativeCluster","CommunityStructure","HierarchicalCluster","MergeEdge","BetweennessCentrality","LinkDistance","MaxFlowMinCut","ShortestPaths","SpanningTree","AspectRatioBanker","Easing","FunctionSequence","ArrayInterpolator","ColorInterpolator","DateInterpolator","Interpolator","MatrixInterpolator","NumberInterpolator","ObjectInterpolator","PointInterpolator","RectangleInterpolator","ISchedulable","Parallel","Pause","Scheduler","Sequence","Transition","Transitioner","TransitionEvent","Tween","Converters","DelimitedTextConverter","GraphMLConverter","IDataConverter","JSONConverter","DataField","DataSchema","DataSet","DataSource","DataTable","DataUtil","DirtySprite","LineSprite","RectSprite","TextSprite","FlareVis","DragForce","GravityForce","IForce","NBodyForce","Particle","Simulation","Spring","SpringForce","AggregateExpression","And","Arithmetic","Average","BinaryExpression","Comparison","CompositeExpression","Count","DateUtil","Distinct","Expression","ExpressionIterator","Fn","If","IsA","Literal","Match","Maximum","add","and","average","count2","distinct","div","eq","fn","gt","gte","iff","isa","lt","lte","max","min","mod","mul","neq","not","or","orderby","range","select","stddev","sub","sum","update","variance","where","xor","_","Minimum","Not","Or","Query","Range","StringUtil","Sum","Variable","Variance","Xor","IScaleMap","LinearScale","LogScale","OrdinalScale","QuantileScale","QuantitativeScale","RootScale","Scale","ScaleType","TimeScale","Arrays","Colors","Dates","Displays","Filter","Geometry","FibonacciHeap","HeapNode","IEvaluable","IPredicate","IValueProxy","DenseMatrix","IMatrix","SparseMatrix","Maths","Orientation","ColorPalette","Palette","ShapePalette","SizePalette","Property","Shapes","Sort2","Stats","Strings","Axes","Axis","AxisGridLine","AxisLabel","CartesianAxes","AnchorControl","ClickControl","Control","ControlList","DragControl","ExpandControl","HoverControl","IControl","PanZoomControl","SelectionControl","TooltipControl","Data","DataList","DataSprite","EdgeSprite","NodeSprite","ArrowType","EdgeRenderer","IRenderer","ShapeRenderer","ScaleBinding","Tree","TreeBuilder","DataEvent","SelectionEvent","TooltipEvent","VisualizationEvent","Legend","LegendItem","LegendRange","BifocalDistortion","Distortion","FisheyeDistortion","ColorEncoder","Encoder","PropertyEncoder","ShapeEncoder","SizeEncoder","FisheyeTreeFilter","GraphDistanceFilter","VisibilityFilter","IOperator","Labeler","RadialLabeler","StackedAreaLabeler","AxisLayout","BundledEdgeRouter","CircleLayout","CirclePackingLayout","DendrogramLayout","ForceDirectedLayout","IcicleTreeLayout","IndentedTreeLayout","Layout","NodeLinkTreeLayout","PieLayout","RadialTreeLayout","RandomLayout","StackedAreaLayout","TreeMapLayout","Operator","OperatorList","OperatorSequence","OperatorSwitch","SortOperator","Visualization"],"color":["#A56475","#A56475","#A56475","#A56475","#CC616F","#CC616F","#CC616F","#CC616F","#CC616F","#A65628","#E41A1C","#E41A1C","#FF7F00","#FF7F00","#FF7F00","#FF7F00","#FF7F00","#FF7F00","#FF7F00","#FF7F00","#FF7F00","#E41A1C","#E41A1C","#E41A1C","#E41A1C","#E41A1C","#E41A1C","#E41A1C","#E41A1C","#E41A1C","#4485A9","#4485A9","#4485A9","#4485A9","#4485A9","#51938C","#51938C","#51938C","#51938C","#51938C","#51938C","#53A16D","#53A16D","#53A16D","#53A16D","#AC5492","#D66E7D","#D66E7D","#D66E7D","#D66E7D","#D66E7D","#D66E7D","#D66E7D","#D66E7D","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#DBB531","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#EC7AA9","#D08EAF","#D08EAF","#D08EAF","#D08EAF","#D08EAF","#D08EAF","#D08EAF","#D08EAF","#D08EAF","#D08EAF","#B594A4","#B594A4","#B594A4","#B594A4","#B594A4","#B594A4","#E76F48","#E76F48","#B594A4","#B594A4","#B594A4","#F3E633","#F3E633","#F3E633","#B594A4","#B594A4","#BF6253","#BF6253","#BF6253","#BF6253","#B594A4","#B594A4","#B594A4","#B594A4","#B594A4","#C84B4A","#C84B4A","#C84B4A","#C84B4A","#C84B4A","#6E76A1","#6E76A1","#6E76A1","#6E76A1","#6E76A1","#6E76A1","#6E76A1","#6E76A1","#6E76A1","#6E76A1","#6E76A1","#51938C","#51938C","#51938C","#51938C","#51938C","#EA86BA","#EA86BA","#EA86BA","#EA86BA","#51938C","#51938C","#51938C","#867D80","#867D80","#867D80","#867D80","#FFEE2C","#FFEE2C","#FFEE2C","#4DAF4A","#4DAF4A","#4DAF4A","#719767","#719767","#719767","#719767","#719767","#936098","#936098","#936098","#C1862D","#FFA60F","#FFA60F","#FFA60F","#FFCA1E","#FFCA1E","#FFCA1E","#FFCA1E","#FFCA1E","#FFCA1E","#FFCA1E","#FFCA1E","#FFCA1E","#FFCA1E","#FFCA1E","#FFCA1E","#FFCA1E","#FFCA1E","#FFCA1E","#C1862D","#C1862D","#C1862D","#C1862D","#C1862D","#999999"],"textColor":["#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333","#333333"]},"evals":[]}</script>
<script type="application/htmlwidget-sizing" data-for="htmlwidget-9790">{"viewer":{"width":800,"height":800,"padding":15,"fill":false},"browser":{"width":800,"height":800,"padding":40,"fill":false}}</script>
</body>
</html>
